!function(q){var r=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(B){return!B||/^\s*$/.test(B)},escapeRegExChars:function(B){return B.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(B){return"string"==typeof B},isNumber:function(B){return"number"==typeof B},isArray:q.isArray,isFunction:q.isFunction,isObject:q.isPlainObject,isUndefined:function(B){return"undefined"==typeof B},toStr:function(B){return r.isUndefined(B)||null===B?"":B+""},bind:q.proxy,each:function(B,C){q.each(B,function(E,F){return C(F,E)})},map:q.map,filter:q.grep,every:function(B,C){var D=!0;return B?(q.each(B,function(E,F){return!!(D=C.call(null,F,E,B))&&void 0}),!!D):D},some:function(B,C){var D=!1;return B?(q.each(B,function(E,F){return!(D=C.call(null,F,E,B))&&void 0}),!!D):D},mixin:q.extend,getUniqueId:function(){var B=0;return function(){return B++}}(),templatify:function(B){return q.isFunction(B)?B:function(){return B+""}},defer:function(B){setTimeout(B,0)},debounce:function(B,C,D){var E,F;return function(){var G,H,I=this,J=arguments;return G=function(){E=null,D||(F=B.apply(I,J))},H=D&&!E,clearTimeout(E),E=setTimeout(G,C),H&&(F=B.apply(I,J)),F}},throttle:function(B,C){var D,E,F,G,H,I;return H=0,I=function(){H=new Date,F=null,G=B.apply(D,E)},function(){var J=new Date,K=C-(J-H);return D=this,E=arguments,0>=K?(clearTimeout(F),F=null,H=J,G=B.apply(D,E)):F||(F=setTimeout(I,K)),G}},noop:function(){}}}(),s=function(){return{wrapper:"<span class=\"twitter-typeahead\"></span>",dropdown:"<span class=\"tt-dropdown-menu\"></span>",dataset:"<div class=\"tt-dataset-%CLASS%\"></div>",suggestions:"<span class=\"tt-suggestions\"></span>",suggestion:"<div class=\"tt-suggestion\"></div>"}}(),t=function(){"use strict";var B={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return r.isMsie()&&r.mixin(B.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),r.isMsie()&&7>=r.isMsie()&&r.mixin(B.input,{marginTop:"-1px"}),B}(),u=function(){"use strict";function B(D){D&&D.el||q.error("EventBus initialized without el"),this.$el=q(D.el)}return r.mixin(B.prototype,{trigger:function(D){var E=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+D,E)}}),B}(),v=function(){"use strict";function B(L,M,N,O){var P;if(!N)return this;for(M=M.split(J),N=O?I(N,O):N,this._callbacks=this._callbacks||{};P=M.shift();)this._callbacks[P]=this._callbacks[P]||{sync:[],async:[]},this._callbacks[P][L].push(N);return this}function G(L,M,N){return function(){for(var P,Q=0,R=L.length;!P&&R>Q;Q+=1)P=!1===L[Q].apply(M,N);return!P}}function I(L,M){return L.bind?L.bind(M):function(){L.apply(M,[].slice.call(arguments,0))}}var J=/\s+/,K=function(){var L;return L=window.setImmediate?function(M){setImmediate(function(){M()})}:function(M){setTimeout(function(){M()},0)}}();return{onSync:function(L,M,N){return B.call(this,"sync",L,M,N)},onAsync:function(L,M,N){return B.call(this,"async",L,M,N)},off:function(L){var M;if(!this._callbacks)return this;for(L=L.split(J);M=L.shift();)delete this._callbacks[M];return this},trigger:function(L){var M,N,O,P,Q;if(!this._callbacks)return this;for(L=L.split(J),O=[].slice.call(arguments,1);(M=L.shift())&&(N=this._callbacks[M]);)P=G(N.sync,this,[M].concat(O)),Q=G(N.async,this,[M].concat(O)),P()&&K(Q);return this}}}(),w=function(B){"use strict";function C(E,F,G){for(var H,I=[],J=0,K=E.length;K>J;J++)I.push(r.escapeRegExChars(E[J]));return H=G?"\\b("+I.join("|")+")\\b":"("+I.join("|")+")",F?new RegExp(H):new RegExp(H,"i")}var D={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(E){function G(I,J){for(var K,M=0;M<I.childNodes.length;M++)K=I.childNodes[M],K.nodeType===3?M+=J(K)?1:0:G(K,J)}var H;E=r.mixin({},D,E),E.node&&E.pattern&&(E.pattern=r.isArray(E.pattern)?E.pattern:[E.pattern],H=C(E.pattern,E.caseSensitive,E.wordsOnly),G(E.node,function(I){var J,K,L;return(J=H.exec(I.data))&&(L=B.createElement(E.tagName),E.className&&(L.className=E.className),K=I.splitText(J.index),K.splitText(J[0].length),L.appendChild(K.cloneNode(!0)),I.parentNode.replaceChild(L,K)),!!J}))}}(window.document),x=function(){"use strict";function B(G){var H,I,J,K,L=this;G=G||{},G.input||q.error("input is missing"),H=r.bind(this._onBlur,this),I=r.bind(this._onFocus,this),J=r.bind(this._onKeydown,this),K=r.bind(this._onInput,this),this.$hint=q(G.hint),this.$input=q(G.input).on("blur.tt",H).on("focus.tt",I).on("keydown.tt",J),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=r.noop),r.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(M){F[M.which||M.keyCode]||r.defer(r.bind(L._onInput,L,M))}):this.$input.on("input.tt",K),this.query=this.$input.val(),this.$overflowHelper=C(this.$input)}function C(G){return q("<pre aria-hidden=\"true\"></pre>").css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:G.css("font-family"),fontSize:G.css("font-size"),fontStyle:G.css("font-style"),fontVariant:G.css("font-variant"),fontWeight:G.css("font-weight"),wordSpacing:G.css("word-spacing"),letterSpacing:G.css("letter-spacing"),textIndent:G.css("text-indent"),textRendering:G.css("text-rendering"),textTransform:G.css("text-transform")}).insertAfter(G)}function D(G,H){return B.normalizeQuery(G)===B.normalizeQuery(H)}function E(G){return G.altKey||G.ctrlKey||G.metaKey||G.shiftKey}var F;return F={9:"tab",13:"enter",27:"esc",37:"left",38:"up",39:"right",40:"down"},B.normalizeQuery=function(G){return(G||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},r.mixin(B.prototype,v,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(G){var H=F[G.which||G.keyCode];this._managePreventDefault(H,G),H&&this._shouldTrigger(H,G)&&this.trigger(H+"Keyed",G)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(G,H){var I,J,K;"tab"===G?(J=this.getHint(),K=this.getInputValue(),I=J&&J!==K&&!E(H)):"up"===G||"down"===G?I=!E(H):I=!1;I&&H.preventDefault()},_shouldTrigger:function(G,H){var I;return I="tab"!==G||!E(H),I},_checkInputValue:function(){var G,H,I;G=this.getInputValue(),H=D(G,this.query),I=!!H&&this.query.length!==G.length,this.query=G,H?I&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(G){this.query=G},getInputValue:function(){return this.$input.val()},setInputValue:function(G,H){this.$input.val(G),H?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(G){this.$hint.val(G)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var G,H,I,J;G=this.getInputValue(),H=this.getHint(),I=G!==H&&0===H.indexOf(G),J=""!==G&&I&&!this.hasOverflow(),J||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var G=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=G},isCursorAtEnd:function(){var G,H,I;return G=this.$input.val().length,H=this.$input[0].selectionStart,r.isNumber(H)?H===G:!document.selection||(I=document.selection.createRange(),I.moveStart("character",-G),G===I.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),B}(),y=function(){"use strict";function B(I){I=I||{},I.templates=I.templates||{},I.source||q.error("missing source"),I.name&&!E(I.name)&&q.error("invalid dataset name: "+I.name),this.query=null,this.highlight=!!I.highlight,this.name=I.name||r.getUniqueId(),this.source=I.source,this.displayFn=C(I.display||I.displayKey),this.templates=D(I.templates,this.displayFn),this.$el=q(s.dataset.replace("%CLASS%",this.name))}function C(I){return I=I||"value",r.isFunction(I)?I:function(K){return K[I]}}function D(I,J){return{empty:I.empty&&r.templatify(I.empty),header:I.header&&r.templatify(I.header),footer:I.footer&&r.templatify(I.footer),suggestion:I.suggestion||function(L){return"<p>"+J(L)+"</p>"}}}function E(I){return /^[_a-zA-Z0-9-]+$/.test(I)}var F="ttDataset",G="ttValue",H="ttDatum";return B.extractDatasetName=function(I){return q(I).data(F)},B.extractValue=function(I){return q(I).data(G)},B.extractDatum=function(I){return q(I).data(H)},r.mixin(B.prototype,v,{_render:function(I,J){function K(){return P.templates.empty({query:I,isEmpty:!0})}function L(){var R,S;return R=q(s.suggestions).css(t.suggestions),S=r.map(J,function(T){var U;return U=q(s.suggestion).append(P.templates.suggestion(T)).data(F,P.name).data(G,P.displayFn(T)).data(H,T),U.children().each(function(){q(this).css(t.suggestionChild)}),U}),R.append.apply(R,S),P.highlight&&w({className:"tt-highlight",node:R[0],pattern:I}),R}function M(){return P.templates.header({query:I,isEmpty:!O})}function N(){return P.templates.footer({query:I,isEmpty:!O})}if(this.$el){var O,P=this;this.$el.empty(),O=J&&J.length,!O&&this.templates.empty?this.$el.html(K()).prepend(P.templates.header?M():null).append(P.templates.footer?N():null):O&&this.$el.html(L()).prepend(P.templates.header?M():null).append(P.templates.footer?N():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(I){var K=this;this.query=I,this.canceled=!1,this.source(I,function(L){K.canceled||I!==K.query||K._render(I,L)})},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),B}(),z=function(){"use strict";function B(D){var E,F,G,H=this;D=D||{},D.menu||q.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=r.map(D.datasets,C),E=r.bind(this._onSuggestionClick,this),F=r.bind(this._onSuggestionMouseEnter,this),G=r.bind(this._onSuggestionMouseLeave,this),this.$menu=q(D.menu).on("click.tt",".tt-suggestion",E).on("mouseenter.tt",".tt-suggestion",F).on("mouseleave.tt",".tt-suggestion",G),r.each(this.datasets,function(I){H.$menu.append(I.getRoot()),I.onSync("rendered",H._onRendered,H)})}function C(D){return new y(D)}return r.mixin(B.prototype,v,{_onSuggestionClick:function(D){this.trigger("suggestionClicked",q(D.currentTarget))},_onSuggestionMouseEnter:function(D){this._removeCursor(),this._setCursor(q(D.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){this.isEmpty=r.every(this.datasets,function(E){return E.isEmpty()}),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(D,E){D.first().addClass("tt-cursor"),E||this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(D){var E,F,G,H;if(this.isOpen){if(F=this._getCursor(),E=this._getSuggestions(),this._removeCursor(),G=E.index(F)+D,G=(G+1)%(E.length+1)-1,-1===G)return void this.trigger("cursorRemoved");-1>G&&(G=E.length-1),this._setCursor(H=E.eq(G)),this._ensureVisible(H)}},_ensureVisible:function(D){var E,F,G,H;E=D.position().top,F=E+D.outerHeight(!0),G=this.$menu.scrollTop(),H=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>E?this.$menu.scrollTop(G+E):F>H&&this.$menu.scrollTop(G+(F-H))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(D){this.$menu.css("ltr"===D?t.ltr:t.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(D){var E=null;return D.length&&(E={raw:y.extractDatum(D),value:y.extractValue(D),datasetName:y.extractDatasetName(D)}),E},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(D){r.each(this.datasets,function(F){F.update(D)})},empty:function(){r.each(this.datasets,function(E){E.clear()}),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".tt"),this.$menu=null,r.each(this.datasets,function(E){E.destroy()})}}),B}(),A=function(){"use strict";function B(G){var H,I,J;G=G||{},G.input||q.error("missing input"),this.isActivated=!1,this.autoselect=!!G.autoselect,this.minLength=r.isNumber(G.minLength)?G.minLength:1,this.$node=C(G.input,G.withHint),H=this.$node.find(".tt-dropdown-menu"),I=this.$node.find(".tt-input"),J=this.$node.find(".tt-hint"),I.on("blur.tt",function(K){var L,M,N;L=document.activeElement,M=H.is(L),N=0<H.has(L).length,r.isMsie()&&(M||N)&&(K.preventDefault(),K.stopImmediatePropagation(),r.defer(function(){I.focus()}))}),H.on("mousedown.tt",function(K){K.preventDefault()}),this.eventBus=G.eventBus||new u({el:I}),this.dropdown=new z({menu:H,datasets:G.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new x({input:I,hint:J}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function C(G,H){var I,J,K,L;I=q(G),J=q(s.wrapper).css(t.wrapper),K=q(s.dropdown).css(t.dropdown),L=I.clone().css(t.hint).css(D(I)),L.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),I.data(F,{dir:I.attr("dir"),autocomplete:I.attr("autocomplete"),spellcheck:I.attr("spellcheck"),style:I.attr("style")}),I.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(H?t.input:t.inputWithNoHint);try{I.attr("dir")||I.attr("dir","auto")}catch(M){}return I.wrap(J).parent().prepend(H?L:null).append(K)}function D(G){return{backgroundAttachment:G.css("background-attachment"),backgroundClip:G.css("background-clip"),backgroundColor:G.css("background-color"),backgroundImage:G.css("background-image"),backgroundOrigin:G.css("background-origin"),backgroundPosition:G.css("background-position"),backgroundRepeat:G.css("background-repeat"),backgroundSize:G.css("background-size")}}function E(G){var H=G.find(".tt-input");r.each(H.data(F),function(I,J){r.isUndefined(I)?H.removeAttr(J):H.attr(J,I)}),H.detach().removeData(F).removeClass("tt-input").insertAfter(G),G.remove()}var F="ttAttrs";return r.mixin(B.prototype,{_onSuggestionClicked:function(G,H){var I;(I=this.dropdown.getDatumForSuggestion(H))&&this._select(I)},_onCursorMoved:function(){var G=this.dropdown.getDatumForCursor();this.input.setInputValue(G.value,!0),this.eventBus.trigger("cursorchanged",G.raw,G.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(G,H){var I,J;I=this.dropdown.getDatumForCursor(),J=this.dropdown.getDatumForTopSuggestion(),I?(this._select(I),H.preventDefault()):this.autoselect&&J&&(this._select(J),H.preventDefault())},_onTabKeyed:function(G,H){var I;(I=this.dropdown.getDatumForCursor())?(this._select(I),H.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var G=this.input.getQuery();this.dropdown.isEmpty&&G.length>=this.minLength?this.dropdown.update(G):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var G=this.input.getQuery();this.dropdown.isEmpty&&G.length>=this.minLength?this.dropdown.update(G):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(G,H){this.input.clearHintIfInvalid(),H.length>=this.minLength?this.dropdown.update(H):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var G;this.dir!==(G=this.input.getLanguageDirection())&&(this.dir=G,this.$node.css("direction",G),this.dropdown.setLanguageDirection(G))},_updateHint:function(){var G,H,I,J,K,L;G=this.dropdown.getDatumForTopSuggestion(),G&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(H=this.input.getInputValue(),I=x.normalizeQuery(H),J=r.escapeRegExChars(I),K=new RegExp("^(?:"+J+")(.+$)","i"),L=K.exec(G.value),L?this.input.setHint(H+L[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(G){var H,I,J,K;H=this.input.getHint(),I=this.input.getQuery(),J=G||this.input.isCursorAtEnd(),H&&I!==H&&J&&(K=this.dropdown.getDatumForTopSuggestion(),K&&this.input.setInputValue(K.value),this.eventBus.trigger("autocompleted",K.raw,K.datasetName))},_select:function(G){this.input.setQuery(G.value),this.input.setInputValue(G.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",G.raw,G.datasetName),this.dropdown.close(),r.defer(r.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(G){G=r.toStr(G),this.isActivated?this.input.setInputValue(G):(this.input.setQuery(G),this.input.setInputValue(G,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),E(this.$node),this.$node=null}}),B}();!function(){"use strict";var B,C,D;B=q.fn.typeahead,C="ttTypeahead",D={initialize:function(E,F){return F=r.isArray(F)?F:[].slice.call(arguments,1),E=E||{},this.each(function(){var H,I,J=q(this);r.each(F,function(K){K.highlight=!!E.highlight}),I=new A({input:J,eventBus:H=new u({el:J}),withHint:!!r.isUndefined(E.hint)||!!E.hint,minLength:E.minLength,autoselect:E.autoselect,datasets:F}),J.data(C,I)})},open:function(){return this.each(function(){var F,G=q(this);(F=G.data(C))&&F.open()})},close:function(){return this.each(function(){var F,G=q(this);(F=G.data(C))&&F.close()})},val:function(E){return arguments.length?this.each(function(){var H,I=q(this);(H=I.data(C))&&H.setVal(E)}):function(H){var I,J;return(I=H.data(C))&&(J=I.getVal()),J}(this.first())},destroy:function(){return this.each(function(){var F,G=q(this);(F=G.data(C))&&(F.destroy(),G.removeData(C))})}},q.fn.typeahead=function(E){var F;return D[E]&&"initialize"!==E?(F=this.filter(function(){return!!q(this).data(C)}),D[E].apply(F,[].slice.call(arguments,1))):D.initialize.apply(this,arguments)},q.fn.typeahead.noConflict=function(){return q.fn.typeahead=B,this}}()}(window.jQuery);