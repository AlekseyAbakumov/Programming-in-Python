var _Mathceil=Math.ceil,_Mathabs=Math.abs,_Mathmax=Math.max,_Mathround=Math.round,_Mathmin=Math.min,_StringfromCharCode=String.fromCharCode,_Mathfloor=Math.floor;(function(){function o($,j){var ee=j.line,te=ee+j.ch;for(i=0;i<ee;i++)te+=$.getLine(i).length;return te}function s($,j){var ee=0,te=0,oe=0;for(i=0;i<$.lineCount();i++){if(len=$.getLine(i).length,j<oe+len){ee=i,te=j-oe;break}len++,oe+=len}return{line:ee,ch:te}}function _($){return null!=CKEDITOR.document.getHead().findOne("link[href=\""+$+"\"]")}window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var $=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,j={timestamp:"J39A",version:"4.11.4",revision:"e1836357e",rnd:_Mathfloor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:$},status:"unloaded",basePath:function(){var oe=window.CKEDITOR_BASEPATH||"";if(!oe)for(var ne=document.getElementsByTagName("script"),ae=0,ie;ae<ne.length;ae++)if(ie=ne[ae].src.match($),ie){oe=ie[1];break}if(-1==oe.indexOf(":/")&&"//"!=oe.slice(0,2)&&(oe=0===oe.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+oe:location.href.match(/^[^\?]*\/(?:)/)[0]+oe),!oe)throw"The CKEditor installation path could not be automatically detected. Please set the global variable \"CKEDITOR_BASEPATH\" before creating editor instances.";return oe}(),getUrl:function(oe){return-1==oe.indexOf(":/")&&0!==oe.indexOf("/")&&(oe=this.basePath+oe),this.timestamp&&"/"!=oe.charAt(oe.length-1)&&!/[&?]t=/.test(oe)&&(oe+=(0<=oe.indexOf("?")?"&":"?")+"t="+this.timestamp),oe},domReady:function(){function oe(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",oe,!1),ne()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",oe),ne())}catch(ie){}}function ne(){for(var ie;ie=ae.shift();)ie()}var ae=[];return function(ie){function le(){try{document.documentElement.doScroll("left")}catch(re){return void setTimeout(le,1)}oe()}if(ae.push(ie),"complete"===document.readyState&&setTimeout(oe,1),1==ae.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",oe,!1),window.addEventListener("load",oe,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",oe),window.attachEvent("onload",oe),ie=!1;try{ie=!window.frameElement}catch(re){}document.documentElement.doScroll&&ie&&le()}}}()},ee=window.CKEDITOR_GETURL;if(ee){var te=j.getUrl;j.getUrl=function(oe){return ee.call(j,oe)||te.call(j,oe)}}return j}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function($){var j=CKEDITOR.event.prototype,ee;for(ee in j)null==$[ee]&&($[ee]=j[ee])},CKEDITOR.event.prototype=function(){function $(te){var oe=j(this);return oe[te]||(oe[te]=new ee(te))}var j=function(te){return te=te.getPrivate&&te.getPrivate()||te._||(te._={}),te.events||(te.events={})},ee=function(te){this.name=te,this.listeners=[]};return ee.prototype={getListenerIndex:function(te){for(var oe=0,ne=this.listeners;oe<ne.length;oe++)if(ne[oe].fn==te)return oe;return-1}},{define:function(te,oe){var ne=$.call(this,te);CKEDITOR.tools.extend(ne,oe,!0)},on:function(te,oe,ne,ae,ie){function le(me,ue,ge,pe){return me={name:te,sender:this,editor:me,data:ue,listenerData:ae,stop:ge,cancel:pe,removeListener:re},!1!==oe.call(ne,me)&&me.data}function re(){de.removeListener(te,oe)}var se=$.call(this,te);if(0>se.getListenerIndex(oe)){se=se.listeners,ne||(ne=this),isNaN(ie)&&(ie=10);var de=this;le.fn=oe,le.priority=ie;for(var ce=se.length-1;0<=ce;ce--)if(se[ce].priority<=ie)return se.splice(ce+1,0,le),{removeListener:re};se.unshift(le)}return{removeListener:re}},once:function(){var te=Array.prototype.slice.call(arguments),oe=te[1];return te[1]=function(ne){return ne.removeListener(),oe.apply(this,arguments)},this.on.apply(this,te)},capture:function(){CKEDITOR.event.useCapture=1;var te=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,te},fire:function(){var te=0,oe=function(){te=1},ne=0,ae=function(){ne=1};return function(ie,le,re){var se=j(this)[ie];ie=te;var de=ne;if(te=ne=0,se){var ce=se.listeners;if(ce.length)for(var ce=ce.slice(0),ue=0,me;ue<ce.length;ue++){if(se.errorProof)try{me=ce[ue].call(this,re,le,oe,ae)}catch(ge){}else me=ce[ue].call(this,re,le,oe,ae);if(!1===me?ne=1:"undefined"!=typeof me&&(le=me),te||ne)break}}return le=!ne&&("undefined"==typeof le||le),te=ie,ne=de,le}}(),fireOnce:function(te,oe,ne){return oe=this.fire(te,oe,ne),delete j(this)[te],oe},removeListener:function(te,oe){var ne=j(this)[te];if(ne){var ae=ne.getListenerIndex(oe);0<=ae&&ne.listeners.splice(ae,1)}},removeAllListeners:function(){var te=j(this),oe;for(oe in te)delete te[oe]},hasListeners:function(te){return(te=j(this)[te])&&0<te.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function($,j){return $ in{instanceReady:1,loaded:1}&&(this[$]=!0),CKEDITOR.event.prototype.fire.call(this,$,j,this)},CKEDITOR.editor.prototype.fireOnce=function($,j){return $ in{instanceReady:1,loaded:1}&&(this[$]=!0),CKEDITOR.event.prototype.fireOnce.call(this,$,j,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var $=navigator.userAgent.toLowerCase(),j=$.match(/edge[ \/](\d+.?\d*)/),ee=-1<$.indexOf("trident/"),ee=j||ee,ee={ie:ee,edge:!!j,webkit:!ee&&-1<$.indexOf(" applewebkit/"),air:-1<$.indexOf(" adobeair/"),mac:-1<$.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<$.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test($),isCustomDomain:function(){if(!this.ie)return!1;var oe=document.domain,ne=window.location.hostname;return oe!=ne&&oe!="["+ne+"]"},secure:"https:"==location.protocol};ee.gecko="Gecko"==navigator.product&&!ee.webkit&&!ee.ie,ee.webkit&&(-1<$.indexOf("chrome")?ee.chrome=!0:ee.safari=!0);var te=0;return ee.ie&&(te=j?parseFloat(j[1]):ee.quirks||!document.documentMode?parseFloat($.match(/msie (\d+)/)[1]):document.documentMode,ee.ie9Compat=9==te,ee.ie8Compat=8==te,ee.ie7Compat=7==te,ee.ie6Compat=7>te||ee.quirks),ee.gecko&&(j=$.match(/rv:([\d\.]+)/))&&(j=j[1].split("."),te=1E4*j[0]+100*(j[1]||0)+1*(j[2]||0)),ee.air&&(te=parseFloat($.match(/ adobeair\/(\d+)/)[1])),ee.webkit&&(te=parseFloat($.match(/ applewebkit\/(\d+)/)[1])),ee.version=te,ee.isCompatible=!(ee.ie&&7>te)&&!(ee.gecko&&4E4>te)&&!(ee.webkit&&534>te),ee.hidpi=2<=window.devicePixelRatio,ee.needsBrFiller=ee.gecko||ee.webkit||ee.ie&&10<te,ee.needsNbspFiller=ee.ie&&11>te,ee.cssClass="cke_browser_"+(ee.ie?"ie":ee.gecko?"gecko":ee.webkit?"webkit":"unknown"),ee.quirks&&(ee.cssClass+=" cke_browser_quirks"),ee.ie&&(ee.cssClass+=" cke_browser_ie"+(ee.quirks?"6 cke_browser_iequirks":ee.version)),ee.air&&(ee.cssClass+=" cke_browser_air"),ee.iOS&&(ee.cssClass+=" cke_browser_ios"),ee.hidpi&&(ee.cssClass+=" cke_hidpi"),ee}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var $=document.createElement("script");$.type="text/javascript",$.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild($)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function($){(this._.pending||(this._.pending=[])).push($)},function(){CKEDITOR.domReady(function(){var $=CKEDITOR.loadFullCore,j=CKEDITOR.loadFullCoreTimeout;$&&(CKEDITOR.status="basic_ready",$&&$._load?$():j&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1E3*j))})}(),CKEDITOR.status="basic_loaded"}(),"use strict",CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function($,j){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:$,additionalData:j})},CKEDITOR.error=function($,j){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:$,additionalData:j})},CKEDITOR.on("log",function($){if(window.console&&window.console.log){var j=console[$.data.type]?$.data.type:"log",ee=$.data.errorCode;($=$.data.additionalData)?console[j]("[CKEDITOR] Error code: "+ee+".",$):console[j]("[CKEDITOR] Error code: "+ee+"."),console[j]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+ee)}},null,null,999),CKEDITOR.dom={},function(){function $(de,ce,me){this._minInterval=de,this._context=me,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(ce,me||{});var ue=this;this.input=function(){function ge(){ue._lastOutput=new Date().getTime(),ue._scheduledTimer=0,ue._call()}if(!ue._scheduledTimer||!1!==ue._reschedule()){var pe=new Date().getTime()-ue._lastOutput;pe<ue._minInterval?ue._scheduledTimer=setTimeout(ge,ue._minInterval-pe):ge()}}}function j(de,ce,me){$.call(this,de,ce,me),this._args=[];var ue=this;this.input=CKEDITOR.tools.override(this.input,function(ge){return function(){ue._args=Array.prototype.slice.call(arguments),ge.call(this)}})}var ee=[],te=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",oe=/&/g,ne=/>/g,ae=/</g,ie=/"/g,le=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,re={lt:"<",gt:">",amp:"&",quot:"\"",nbsp:"\xA0",shy:"\xAD"},se=function(de,ce){return"#"==ce[0]?_StringfromCharCode(parseInt(ce.slice(1),10)):re[ce]};CKEDITOR.on("reset",function(){ee=[]}),CKEDITOR.tools={arrayCompare:function(de,ce){if(!de&&!ce)return!0;if(!de||!ce||de.length!=ce.length)return!1;for(var me=0;me<de.length;me++)if(de[me]!=ce[me])return!1;return!0},getIndex:function(de,ce){for(var me=0;me<de.length;++me)if(ce(de[me]))return me;return-1},clone:function(de){var ce;if(de&&de instanceof Array){ce=[];for(var me=0;me<de.length;me++)ce[me]=CKEDITOR.tools.clone(de[me]);return ce}if(null===de||"object"!=typeof de||de instanceof String||de instanceof Number||de instanceof Boolean||de instanceof Date||de instanceof RegExp||de.nodeType||de.window===de)return de;for(me in ce=new de.constructor,de)ce[me]=CKEDITOR.tools.clone(de[me]);return ce},capitalize:function(de,ce){return de.charAt(0).toUpperCase()+(ce?de.slice(1):de.slice(1).toLowerCase())},extend:function(de){var ce=arguments.length,me,ue;"boolean"==typeof(me=arguments[ce-1])?ce--:"boolean"==typeof(me=arguments[ce-2])&&(ue=arguments[ce-1],ce-=2);for(var ge=1;ge<ce;ge++){var pe=arguments[ge],he;for(he in pe)(!0===me||null==de[he])&&(!ue||he in ue)&&(de[he]=pe[he])}return de},prototypedCopy:function(de){var ce=function(){};return ce.prototype=de,new ce},copy:function(de){var ce={},me;for(me in de)ce[me]=de[me];return ce},isArray:function(de){return"[object Array]"==Object.prototype.toString.call(de)},isEmpty:function(de){for(var ce in de)if(de.hasOwnProperty(ce))return!1;return!0},cssVendorPrefix:function(de,ce,me){return me?te+de+":"+ce+";"+de+":"+ce:(me={},me[de]=ce,me[te+de]=ce,me)},cssStyleToDomStyle:function(){var de=document.createElement("div").style,ce="undefined"==typeof de.cssFloat?"undefined"==typeof de.styleFloat?"float":"styleFloat":"cssFloat";return function(me){return"float"==me?ce:me.replace(/-./g,function(ue){return ue.substr(1).toUpperCase()})}}(),buildStyleHtml:function(de){de=[].concat(de);for(var me=[],ue=0,ce;ue<de.length;ue++)(ce=de[ue])&&(/@import|[{}]/.test(ce)?me.push("<style>"+ce+"</style>"):me.push("<link type=\"text/css\" rel=stylesheet href=\""+ce+"\">"));return me.join("")},htmlEncode:function(de){return void 0===de||null===de?"":(de+"").replace(oe,"&amp;").replace(ne,"&gt;").replace(ae,"&lt;")},htmlDecode:function(de){return de.replace(le,se)},htmlEncodeAttr:function(de){return CKEDITOR.tools.htmlEncode(de).replace(ie,"&quot;")},htmlDecodeAttr:function(de){return CKEDITOR.tools.htmlDecode(de)},transformPlainTextToHtml:function(de,ce){var me=ce==CKEDITOR.ENTER_BR,ue=this.htmlEncode(de.replace(/\r\n/g,"\n")),ue=ue.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),ge=ce==CKEDITOR.ENTER_P?"p":"div";if(!me){var pe=/\n{2}/g;if(pe.test(ue))var he="<"+ge+">",fe="</"+ge+">",ue=he+ue.replace(pe,function(){return fe+he})+fe}return ue=ue.replace(/\n/g,"<br>"),me||(ue=ue.replace(new RegExp("<br>(?=</"+ge+">)"),function(be){return CKEDITOR.tools.repeat(be,2)})),ue=ue.replace(/^ | $/g,"&nbsp;"),ue=ue.replace(/(>|\s) /g,function(be,_e){return _e+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var de=0;return function(){return++de}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var de="e",ce=0;8>ce;ce++)de+=_Mathfloor(65536*(1+Math.random())).toString(16).substring(1);return de},override:function(de,ce){var me=ce(de);return me.prototype=de.prototype,me},setTimeout:function(de,ce,me,ue,ge){return ge||(ge=window),me||(me=ge),ge.setTimeout(function(){ue?de.apply(me,[].concat(ue)):de.apply(me)},ce||0)},throttle:function(de,ce,me){return new this.buffers.throttle(de,ce,me)},trim:function(){var de=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(ce){return ce.replace(de,"")}}(),ltrim:function(){var de=/^[ \t\n\r]+/g;return function(ce){return ce.replace(de,"")}}(),rtrim:function(){var de=/[ \t\n\r]+$/g;return function(ce){return ce.replace(de,"")}}(),indexOf:function(de,ce){if("function"==typeof ce){for(var me=0,ue=de.length;me<ue;me++)if(ce(de[me]))return me;}else{if(de.indexOf)return de.indexOf(ce);for(me=0,ue=de.length;me<ue;me++)if(de[me]===ce)return me}return-1},search:function(de,ce){var me=CKEDITOR.tools.indexOf(de,ce);return 0<=me?de[me]:null},bind:function(de,ce){return function(){return de.apply(ce,arguments)}},createClass:function(de){var ce=de.$,me=de.base,ue=de.privates||de._,ge=de.proto;if(de=de.statics,ce||(ce=function(){me&&this.base.apply(this,arguments)}),ue)var pe=ce,ce=function(){var he=this._||(this._={}),fe;for(fe in ue){var be=ue[fe];he[fe]="function"==typeof be?CKEDITOR.tools.bind(be,this):be}pe.apply(this,arguments)};return me&&(ce.prototype=this.prototypedCopy(me.prototype),ce.prototype.constructor=ce,ce.base=me,ce.baseProto=me.prototype,ce.prototype.base=function(){this.base=me.prototype.base,me.apply(this,arguments),this.base=arguments.callee}),ge&&this.extend(ce.prototype,ge,!0),de&&this.extend(ce,de,!0),ce},addFunction:function(de,ce){return ee.push(function(){return de.apply(ce||this,arguments)})-1},removeFunction:function(de){ee[de]=null},callFunction:function(de){var ce=ee[de];return ce&&ce.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var de=/^-?\d+\.?\d*px$/,ce;return function(me){return ce=CKEDITOR.tools.trim(me+"")+"px",de.test(ce)?ce:me||""}}(),convertToPx:function(){var de;return function(ce){if(de||(de=CKEDITOR.dom.element.createFromHtml("<div style=\"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;\"></div>",CKEDITOR.document),CKEDITOR.document.getBody().append(de)),!/%$/.test(ce)){var me=0>parseFloat(ce);return me&&(ce=ce.replace("-","")),de.setStyle("width",ce),ce=de.$.clientWidth,me?-ce:ce}return ce}}(),repeat:function(de,ce){return Array(ce+1).join(de)},tryThese:function(){for(var ce=0,me=arguments.length,de,ue;ce<me;ce++){ue=arguments[ce];try{de=ue();break}catch(ge){}}return de},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(de){return function(){var ce=arguments,me=this;window.setTimeout(function(){de.apply(me,ce)},0)}},normalizeCssText:function(de,ce){var me=[],ge=CKEDITOR.tools.parseCssText(de,!0,ce),ue;for(ue in ge)me.push(ue+":"+ge[ue]);return me.sort(),me.length?me.join(";")+";":""},convertRgbToHex:function(de){return de.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(ce,me,ue,ge){for(ce=[me,ue,ge],me=0;3>me;me++)ce[me]=("0"+parseInt(ce[me],10).toString(16)).slice(-2);return"#"+ce.join("")})},normalizeHex:function(de){return de.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(ce,me,ue,ge){return ce=me.toLowerCase(),3==ce.length&&(ce=ce.split(""),ce=[ce[0],ce[0],ce[1],ce[1],ce[2],ce[2]].join("")),"#"+ce+ge})},parseCssText:function(de,ce,me){var ue={};return(me&&(de=new CKEDITOR.dom.element("span").setAttribute("style",de).getAttribute("style")||""),de&&(de=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(de))),!de||";"==de)?ue:(de.replace(/&quot;/g,"\"").replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(ge,pe,he){ce&&(pe=pe.toLowerCase(),"font-family"==pe&&(he=he.replace(/\s*,\s*/g,",")),he=CKEDITOR.tools.trim(he)),ue[pe]=he}),ue)},writeCssText:function(de,ce){var ue=[],me;for(me in de)ue.push(me+":"+de[me]);return ce&&ue.sort(),ue.join("; ")},objectCompare:function(de,ce,me){if(!de&&!ce)return!0;if(!de||!ce)return!1;for(var ue in de)if(de[ue]!=ce[ue])return!1;if(!me)for(ue in ce)if(de[ue]!=ce[ue])return!1;return!0},objectKeys:function(de){var ce=[],me;for(me in de)ce.push(me);return ce},convertArrayToObject:function(de,ce){var me={};1==arguments.length&&(ce=!0);for(var ue=0,ge=de.length;ue<ge;++ue)me[de[ue]]=ce;return me},fixDomain:function(){for(var de;;)try{de=window.parent.document.domain;break}catch(ce){if(de=de?de.replace(/.+?(?:\.|$)/,""):document.domain,!de)break;document.domain=de}return!!de},eventsBuffer:function(de,ce,me){return new this.buffers.event(de,ce,me)},enableHtml5Elements:function(de,ce){for(var me="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),ue=me.length,ge;ue--;)ge=de.createElement(me[ue]),ce&&de.appendChild(ge)},checkIfAnyArrayItemMatches:function(de,ce){for(var me=0,ue=de.length;me<ue;++me)if(de[me].match(ce))return!0;return!1},checkIfAnyObjectPropertyMatches:function(de,ce){for(var me in de)if(me.match(ce))return!0;return!1},keystrokeToString:function(de,ce){var me=this.keystrokeToArray(de,ce);return me.display=me.display.join("+"),me.aria=me.aria.join("+"),me},keystrokeToArray:function(de,ce){var me=16711680&ce,ue=65535&ce,ge=CKEDITOR.env.mac,pe=[],he=[];return me&CKEDITOR.CTRL&&(pe.push(ge?"\u2318":de[17]),he.push(ge?de[224]:de[17])),me&CKEDITOR.ALT&&(pe.push(ge?"\u2325":de[18]),he.push(de[18])),me&CKEDITOR.SHIFT&&(pe.push(ge?"\u21E7":de[16]),he.push(de[16])),ue&&(de[ue]?(pe.push(de[ue]),he.push(de[ue])):(pe.push(_StringfromCharCode(ue)),he.push(_StringfromCharCode(ue)))),{display:pe,aria:he}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(de){de=de.toLowerCase();for(var ce=document.cookie.split(";"),ge=0,me,ue;ge<ce.length;ge++)if(me=ce[ge].split("="),ue=decodeURIComponent(CKEDITOR.tools.trim(me[0]).toLowerCase()),ue===de)return decodeURIComponent(1<me.length?me[1]:"");return null},setCookie:function(de,ce){document.cookie=encodeURIComponent(de)+"="+encodeURIComponent(ce)+";path=/"},getCsrfToken:function(){var de=CKEDITOR.tools.getCookie("ckCsrfToken");if(!de||40!=de.length){var de=[],ce="";if(window.crypto&&window.crypto.getRandomValues)de=new Uint8Array(40),window.crypto.getRandomValues(de);else for(var me=0;40>me;me++)de.push(_Mathfloor(256*Math.random()));for(me=0;me<de.length;me++)var ue="abcdefghijklmnopqrstuvwxyz0123456789".charAt(de[me]%36),ce=ce+(.5<Math.random()?ue.toUpperCase():ue);de=ce,CKEDITOR.tools.setCookie("ckCsrfToken",de)}return de},escapeCss:function(de){return de?window.CSS&&CSS.escape?CSS.escape(de):isNaN(parseInt(de.charAt(0),10))?de:"\\3"+de.charAt(0)+" "+de.substring(1,de.length):""},getMouseButton:function(de){return!!(de=de.data?de.data.$:de)&&(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.ie6Compat)?4===de.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===de.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:de.button)},convertHexStringToBytes:function(de){var ce=[],me=de.length/2,ue;for(ue=0;ue<me;ue++)ce.push(parseInt(de.substr(2*ue,2),16));return ce},convertBytesToBase64:function(de){var ce="",me=de.length,ue;for(ue=0;ue<me;ue+=3){var ge=de.slice(ue,ue+3),pe=ge.length,he=[],fe;if(3>pe)for(fe=pe;3>fe;fe++)ge[fe]=0;for(he[0]=(252&ge[0])>>2,he[1]=(3&ge[0])<<4|ge[1]>>4,he[2]=(15&ge[1])<<2|(192&ge[2])>>6,he[3]=63&ge[2],fe=0;4>fe;fe++)ce=fe<=pe?ce+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(he[fe]):ce+"="}return ce},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(de){var ce={},me=this._findColor(de);return me.length&&(ce.color=me[0],CKEDITOR.tools.array.forEach(me,function(ue){de=de.replace(ue,"")})),(de=CKEDITOR.tools.trim(de))&&(ce.unprocessed=de),ce},margin:function(de){function ce(ge){me.top=ue[ge[0]],me.right=ue[ge[1]],me.bottom=ue[ge[2]],me.left=ue[ge[3]]}var me={},ue=de.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(ue.length){case 1:ce([0,0,0,0]);break;case 2:ce([0,1,0,1]);break;case 3:ce([0,1,2,1]);break;case 4:ce([0,1,2,3]);}return me},border:function(de){var ce={},me=de.split(/\s+/g);return de=CKEDITOR.tools.style.parse._findColor(de),de.length&&(ce.color=de[0]),CKEDITOR.tools.array.forEach(me,function(ue){ce.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,ue)?!ce.width&&CKEDITOR.tools.style.parse._widthRegExp.test(ue)&&(ce.width=ue):ce.style=ue}),ce},_findColor:function(de){var ce=[],me=CKEDITOR.tools.array,ce=ce.concat(de.match(this._rgbaRegExp)||[]),ce=ce.concat(de.match(this._hslaRegExp)||[]);return ce=ce.concat(me.filter(de.split(/\s+/),function(ue){return!!ue.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||ue.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(de,ce,me){var ue=[];return this.forEach(de,function(ge,pe){ce.call(me,ge,pe,de)&&ue.push(ge)}),ue},forEach:function(de,ce,me){var ue=de.length,ge;for(ge=0;ge<ue;ge++)ce.call(me,de[ge],ge,de)},map:function(de,ce,me){for(var ue=[],ge=0;ge<de.length;ge++)ue.push(ce.call(me,de[ge],ge,de));return ue},reduce:function(de,ce,me,ue){for(var ge=0;ge<de.length;ge++)me=ce.call(ue,me,de[ge],ge,de);return me},every:function(de,ce,me){return!de.length||(ce=this.filter(de,ce,me),de.length===ce.length)}},object:{findKey:function(de,ce){if("object"!=typeof de)return null;for(var me in de)if(de[me]===ce)return me;return null},merge:function(de,ce){var me=CKEDITOR.tools,ue=me.clone(de),ge=me.clone(ce);return me.array.forEach(me.objectKeys(ge),function(pe){ue[pe]="object"==typeof ge[pe]&&"object"==typeof ue[pe]?me.object.merge(ue[pe],ge[pe]):ge[pe]}),ue}},getAbsoluteRectPosition:function(de,ce){function me(pe){if(pe){var he=pe.getClientRect();ue.top+=he.top,ue.left+=he.left,"x"in ue&&"y"in ue&&(ue.x+=he.x,ue.y+=he.y),me(pe.getWindow().getFrame())}}var ue=CKEDITOR.tools.copy(ce);me(de.getFrame());var ge=CKEDITOR.document.getWindow().getScrollPosition();return ue.top+=ge.y,ue.left+=ge.x,"x"in ue&&"y"in ue&&(ue.y+=ge.y,ue.x+=ge.x),ue.right=ue.left+ue.width,ue.bottom=ue.top+ue.height,ue}},$.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},j.prototype=CKEDITOR.tools.prototypedCopy($.prototype),j.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()},j.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=$,CKEDITOR.tools.buffers.throttle=j,CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=function(){var $=CKEDITOR.tools.extend,j=function(re,se){for(var de=CKEDITOR.tools.clone(re),ce=1;ce<arguments.length;ce++)for(var me in se=arguments[ce],se)delete de[me];return de},ee={},te={},oe={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},ne={command:1,link:1,meta:1,noscript:1,script:1,style:1},ae={},ie={"#":1},le={center:1,dir:1,noframes:1};return $(ee,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},ie,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),$(te,oe,ee,le),j={a:j(ee,{a:1,button:1}),abbr:ee,address:te,area:ae,article:te,aside:te,audio:$({source:1,track:1},te),b:ee,base:ae,bdi:ee,bdo:ee,blockquote:te,body:te,br:ae,button:j(ee,{a:1,button:1}),canvas:ee,caption:te,cite:ee,code:ee,col:ae,colgroup:{col:1},command:ae,datalist:$({option:1},ee),dd:te,del:ee,details:$({summary:1},te),dfn:ee,div:te,dl:{dt:1,dd:1},dt:te,em:ee,embed:ae,fieldset:$({legend:1},te),figcaption:te,figure:$({figcaption:1},te),footer:te,form:te,h1:ee,h2:ee,h3:ee,h4:ee,h5:ee,h6:ee,head:$({title:1,base:1},ne),header:te,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:ae,html:$({head:1,body:1},te,ne),i:ee,iframe:ie,img:ae,input:ae,ins:ee,kbd:ee,keygen:ae,label:ee,legend:ee,li:te,link:ae,main:te,map:te,mark:ee,menu:$({li:1},te),meta:ae,meter:j(ee,{meter:1}),nav:te,noscript:$({link:1,meta:1,style:1},ee),object:$({param:1},ee),ol:{li:1},optgroup:{option:1},option:ie,output:ee,p:ee,param:ae,pre:ee,progress:j(ee,{progress:1}),q:ee,rp:ee,rt:ee,ruby:$({rp:1,rt:1},ee),s:ee,samp:ee,script:ie,section:te,select:{optgroup:1,option:1},small:ee,source:ae,span:ee,strong:ee,style:ie,sub:ee,summary:$({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},ee),sup:ee,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:te,textarea:ie,tfoot:{tr:1},th:te,thead:{tr:1},time:j(ee,{time:1}),title:ie,tr:{th:1,td:1},track:ae,u:ee,ul:{li:1},var:ee,video:$({source:1,track:1},te),wbr:ae,acronym:ee,applet:$({param:1},te),basefont:ae,big:ee,center:te,dialog:ae,dir:{li:1},font:ee,isindex:ae,noframes:te,strike:ee,tt:ee},$(j,{$block:$({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},oe,le),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:ee,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:$({body:1,head:1,html:1},j.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),j}(),CKEDITOR.dom.event=function($){this.$=$},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var $=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&($+=CKEDITOR.CTRL),this.$.shiftKey&&($+=CKEDITOR.SHIFT),this.$.altKey&&($+=CKEDITOR.ALT),$},preventDefault:function($){var j=this.$;j.preventDefault?j.preventDefault():j.returnValue=!1,$&&this.stopPropagation()},stopPropagation:function(){var $=this.$;$.stopPropagation?$.stopPropagation():$.cancelBubble=!0},getTarget:function(){var $=this.$.target||this.$.srcElement;return $?new CKEDITOR.dom.node($):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var $=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+($.documentElement.scrollLeft||$.body.scrollLeft),y:this.$.pageY||this.$.clientY+($.documentElement.scrollTop||$.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function($){$&&(this.$=$)},CKEDITOR.dom.domObject.prototype=function(){var $=function(j,ee){return function(te){"undefined"!=typeof CKEDITOR&&j.fire(ee,new CKEDITOR.dom.event(te))}};return{getPrivate:function(){var j;return(j=this.getCustomData("_"))||this.setCustomData("_",j={}),j},on:function(j){var ee=this.getCustomData("_cke_nativeListeners");return ee||(ee={},this.setCustomData("_cke_nativeListeners",ee)),ee[j]||(ee=ee[j]=$(this,j),this.$.addEventListener?this.$.addEventListener(j,ee,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+j,ee)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(j){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(j)){var ee=this.getCustomData("_cke_nativeListeners"),te=ee&&ee[j];te&&(this.$.removeEventListener?this.$.removeEventListener(j,te,!1):this.$.detachEvent&&this.$.detachEvent("on"+j,te),delete ee[j])}},removeAllListeners:function(){var j=this.getCustomData("_cke_nativeListeners"),ee;for(ee in j){var te=j[ee];this.$.detachEvent?this.$.detachEvent("on"+ee,te):this.$.removeEventListener&&this.$.removeEventListener(ee,te,!1),delete j[ee]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function($){var j={};CKEDITOR.on("reset",function(){j={}}),$.equals=function(ee){try{return ee&&ee.$===this.$}catch(te){return!1}},$.setCustomData=function(ee,te){var oe=this.getUniqueId();return(j[oe]||(j[oe]={}))[ee]=te,this},$.getCustomData=function(ee){var te=this.$["data-cke-expando"];return(te=te&&j[te])&&ee in te?te[ee]:null},$.removeCustomData=function(ee){var te=this.$["data-cke-expando"],te=te&&j[te],oe,ne;return te&&(oe=te[ee],ne=ee in te,delete te[ee]),ne?oe:null},$.clearCustomData=function(){this.removeAllListeners();var ee=this.$["data-cke-expando"];ee&&delete j[ee]},$.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn($)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function($){return $?new CKEDITOR.dom[$.nodeType==CKEDITOR.NODE_DOCUMENT?"document":$.nodeType==CKEDITOR.NODE_ELEMENT?"element":$.nodeType==CKEDITOR.NODE_TEXT?"text":$.nodeType==CKEDITOR.NODE_COMMENT?"comment":$.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"]($):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function($,j){return $.append(this,j),$},clone:function($,j){function ee(ne){if(ne["data-cke-expando"]&&(ne["data-cke-expando"]=!1),(ne.nodeType==CKEDITOR.NODE_ELEMENT||ne.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(j||ne.nodeType!=CKEDITOR.NODE_ELEMENT||ne.removeAttribute("id",!1),$)){ne=ne.childNodes;for(var ae=0;ae<ne.length;ae++)ee(ne[ae])}}function te(ne){if(ne.type==CKEDITOR.NODE_ELEMENT||ne.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(ne.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var ae=ne.getName();":"==ae[0]&&ne.renameNode(ae.substring(1))}if($)for(ae=0;ae<ne.getChildCount();ae++)te(ne.getChild(ae))}}var oe=this.$.cloneNode($);return ee(oe),oe=new CKEDITOR.dom.node(oe),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&te(oe),oe},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function($){return $.$.parentNode.insertBefore(this.$,$.$.nextSibling),$},insertBefore:function($){return $.$.parentNode.insertBefore(this.$,$.$),$},insertBeforeMe:function($){return this.$.parentNode.insertBefore($.$,this.$),$},getAddress:function($){for(var j=[],ee=this.getDocument().$.documentElement,te=this.$,oe;te&&te!=ee;)oe=te.parentNode,oe&&j.unshift(this.getIndex.call({$:te},$)),te=oe;return j},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function($){function j(ae,ie){var le=ie?ae.nextSibling:ae.previousSibling;return le&&le.nodeType==CKEDITOR.NODE_TEXT?ee(le)?j(le,ie):le:null}function ee(ae){return!ae.nodeValue||ae.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var te=this.$,oe=-1,ne;if(!this.$.parentNode||$&&te.nodeType==CKEDITOR.NODE_TEXT&&ee(te)&&!j(te)&&!j(te,!0))return-1;do $&&te!=this.$&&te.nodeType==CKEDITOR.NODE_TEXT&&(ne||ee(te))||(oe++,ne=te.nodeType==CKEDITOR.NODE_TEXT);while(te=te.previousSibling);return oe},getNextSourceNode:function($,j,ee){if(ee&&!ee.call){var te=ee;ee=function(ne){return!ne.equals(te)}}$=!$&&this.getFirst&&this.getFirst();var oe;if(!$){if(this.type==CKEDITOR.NODE_ELEMENT&&ee&&!1===ee(this,!0))return null;$=this.getNext()}for(;!$&&(oe=(oe||this).getParent());){if(ee&&!1===ee(oe,!0))return null;$=oe.getNext()}return!$||ee&&!1===ee($)?null:j&&j!=$.type?$.getNextSourceNode(!1,j,ee):$},getPreviousSourceNode:function($,j,ee){if(ee&&!ee.call){var te=ee;ee=function(ne){return!ne.equals(te)}}$=!$&&this.getLast&&this.getLast();var oe;if(!$){if(this.type==CKEDITOR.NODE_ELEMENT&&ee&&!1===ee(this,!0))return null;$=this.getPrevious()}for(;!$&&(oe=(oe||this).getParent());){if(ee&&!1===ee(oe,!0))return null;$=oe.getPrevious()}return!$||ee&&!1===ee($)?null:j&&$.type!=j?$.getPreviousSourceNode(!1,j,ee):$},getPrevious:function($){var j=this.$,ee;do ee=(j=j.previousSibling)&&10!=j.nodeType&&new CKEDITOR.dom.node(j);while(ee&&$&&!$(ee));return ee},getNext:function($){var j=this.$,ee;do ee=(j=j.nextSibling)&&new CKEDITOR.dom.node(j);while(ee&&$&&!$(ee));return ee},getParent:function($){var j=this.$.parentNode;return j&&(j.nodeType==CKEDITOR.NODE_ELEMENT||$&&j.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(j):null},getParents:function($){var j=this,ee=[];do ee[$?"push":"unshift"](j);while(j=j.getParent());return ee},getCommonAncestor:function($){if($.equals(this))return this;if($.contains&&$.contains(this))return $;var j=this.contains?this:this.getParent();do if(j.contains($))return j;while(j=j.getParent());return null},getPosition:function($){var j=this.$,ee=$.$;if(j.compareDocumentPosition)return j.compareDocumentPosition(ee);if(j==ee)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&$.type==CKEDITOR.NODE_ELEMENT){if(j.contains){if(j.contains(ee))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(ee.contains(j))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in j)return 0>j.sourceIndex||0>ee.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:j.sourceIndex<ee.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}j=this.getAddress(),$=$.getAddress();for(var ee=_Mathmin(j.length,$.length),te=0;te<ee;te++)if(j[te]!=$[te])return j[te]<$[te]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return j.length<$.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function($,j){var ee=this.$,te,oe;for(j||(ee=ee.parentNode),"function"==typeof $?(oe=!0,te=$):(oe=!1,te=function(ne){return ne="string"==typeof ne.nodeName?ne.nodeName.toLowerCase():"","string"==typeof $?ne==$:(ne in $)});ee;){if(te(oe?new CKEDITOR.dom.node(ee):ee))return new CKEDITOR.dom.node(ee);try{ee=ee.parentNode}catch(ne){ee=null}}return null},hasAscendant:function($,j){var ee=this.$;for(j||(ee=ee.parentNode);ee;){if(ee.nodeName&&ee.nodeName.toLowerCase()==$)return!0;ee=ee.parentNode}return!1},move:function($,j){$.append(this.remove(),j)},remove:function($){var j=this.$,ee=j.parentNode;if(ee){if($)for(;$=j.firstChild;)ee.insertBefore(j.removeChild($),j);ee.removeChild(j)}return this},replace:function($){this.insertBefore($),$.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var $;this.getFirst&&($=this.getFirst());){if($.type==CKEDITOR.NODE_TEXT){var j=CKEDITOR.tools.ltrim($.getText()),ee=$.getLength();if(j)j.length<ee&&($.split(ee-j.length),this.$.removeChild(this.$.firstChild));else{$.remove();continue}}break}},rtrim:function(){for(var $;this.getLast&&($=this.getLast());){if($.type==CKEDITOR.NODE_TEXT){var j=CKEDITOR.tools.rtrim($.getText()),ee=$.getLength();if(j)j.length<ee&&($.split(j.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{$.remove();continue}}break}CKEDITOR.env.needsBrFiller&&($=this.$.lastChild)&&1==$.type&&"br"==$.nodeName.toLowerCase()&&$.parentNode.removeChild($)},isReadOnly:function($){var j=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(j=this.getParent()),CKEDITOR.env.edge&&j&&j.is("textarea","input")&&($=!0),!$&&j&&"undefined"!=typeof j.$.isContentEditable)return!(j.$.isContentEditable||j.data("cke-editable"));for(;j;){if(j.data("cke-editable"))return!1;if(j.hasAttribute("contenteditable"))return"false"==j.getAttribute("contenteditable");j=j.getParent()}return!0}}),CKEDITOR.dom.window=function($){CKEDITOR.dom.domObject.call(this,$)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var $=this.$.document,j="CSS1Compat"==$.compatMode;return{width:(j?$.documentElement.clientWidth:$.body.clientWidth)||0,height:(j?$.documentElement.clientHeight:$.body.clientHeight)||0}},getScrollPosition:function(){var $=this.$;return"pageXOffset"in $?{x:$.pageXOffset||0,y:$.pageYOffset||0}:($=$.document,{x:$.documentElement.scrollLeft||$.body.scrollLeft||0,y:$.documentElement.scrollTop||$.body.scrollTop||0})},getFrame:function(){var $=this.$.frameElement;return $?new CKEDITOR.dom.element.get($):null}}),CKEDITOR.dom.document=function($){CKEDITOR.dom.domObject.call(this,$)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function($){if(this.$.createStyleSheet)this.$.createStyleSheet($);else{var j=new CKEDITOR.dom.element("link");j.setAttributes({rel:"stylesheet",type:"text/css",href:$}),this.getHead().append(j)}},appendStyleText:function($){if(this.$.createStyleSheet){var j=this.$.createStyleSheet("");j.cssText=$}else{var ee=new CKEDITOR.dom.element("style",this);ee.append(new CKEDITOR.dom.text($,this)),this.getHead().append(ee)}return j||ee.$.sheet},createElement:function($,j){var ee=new CKEDITOR.dom.element($,this);return j&&(j.attributes&&ee.setAttributes(j.attributes),j.styles&&ee.setStyles(j.styles)),ee},createText:function($){return new CKEDITOR.dom.text($,this)},focus:function(){this.getWindow().focus()},getActive:function(){var $;try{$=this.$.activeElement}catch(j){return null}return new CKEDITOR.dom.element($)},getById:function($){return($=this.$.getElementById($))?new CKEDITOR.dom.element($):null},getByAddress:function($,j){for(var ee=this.$.documentElement,te=0,oe;ee&&te<$.length;te++)if(oe=$[te],j){for(var ne=-1,ae=0,ie;ae<ee.childNodes.length;ae++)if(ie=ee.childNodes[ae],(!0!==j||3!=ie.nodeType||!ie.previousSibling||3!=ie.previousSibling.nodeType)&&(ne++,ne==oe)){ee=ie;break}}else ee=ee.childNodes[oe];return ee?new CKEDITOR.dom.node(ee):null},getElementsByTag:function($,j){return CKEDITOR.env.ie&&8>=document.documentMode||!j||($=j+":"+$),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName($))},getHead:function(){var $=this.$.getElementsByTagName("head")[0];return $=$?new CKEDITOR.dom.element($):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function($){this.$.open("text/html","replace"),CKEDITOR.env.ie&&($=$.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,"$&\n<script data-cke-temp=\"1\">("+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write($),this.$.close()},find:function($){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll($))},findOne:function($){return($=this.$.querySelector($))?new CKEDITOR.dom.element($):null},_getHtml5ShivFrag:function(){var $=this.getCustomData("html5ShivFrag");return $||($=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements($,!0),this.setCustomData("html5ShivFrag",$)),$}}),CKEDITOR.dom.nodeList=function($){this.$=$},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function($){return 0>$||$>=this.$.length?null:($=this.$[$])?new CKEDITOR.dom.node($):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function($){return new CKEDITOR.dom.node($)})}},CKEDITOR.dom.element=function($,j){"string"==typeof $&&($=(j?j.$:document).createElement($)),CKEDITOR.dom.domObject.call(this,$)},CKEDITOR.dom.element.get=function($){return($="string"==typeof $?document.getElementById($)||document.getElementsByName($)[0]:$)&&($.$?$:new CKEDITOR.dom.element($))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function($,j){var ee=new CKEDITOR.dom.element("div",j);return ee.setHtml($),ee.getFirst().remove()},CKEDITOR.dom.element.setMarker=function($,j,ee,te){var oe=j.getCustomData("list_marker_id")||j.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),ne=j.getCustomData("list_marker_names")||j.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return $[oe]=j,ne[ee]=1,j.setCustomData(ee,te)},CKEDITOR.dom.element.clearAllMarkers=function($){for(var j in $)CKEDITOR.dom.element.clearMarkers($,$[j],1)},CKEDITOR.dom.element.clearMarkers=function($,j,ee){var te=j.getCustomData("list_marker_names"),oe=j.getCustomData("list_marker_id"),ne;for(ne in te)j.removeCustomData(ne);j.removeCustomData("list_marker_names"),ee&&(j.removeCustomData("list_marker_id"),delete $[oe])},function(){function $(ie,le){return-1<(" "+ie+" ").replace(ne," ").indexOf(" "+le+" ")}function j(ie){var le=!0;return ie.$.id||(ie.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),le=!1),function(){le||ie.removeAttribute("id")}}function ee(ie,le){var re=CKEDITOR.tools.escapeCss(ie.$.id);return"#"+re+" "+le.split(/,\s*/).join(", #"+re+" ")}function te(ie){for(var le=0,re=0,se=ae[ie].length;re<se;re++)le+=parseFloat(this.getComputedStyle(ae[ie][re])||0,10)||0;return le}var oe=document.createElement("_").classList,oe="undefined"!=typeof oe&&null!==(oe.add+"").match(/\[Native code\]/gi),ne=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:oe?function(ie){return this.$.classList.add(ie),this}:function(ie){var le=this.$.className;return le&&($(le,ie)||(le+=" "+ie)),this.$.className=le||ie,this},removeClass:oe?function(ie){var le=this.$;return le.classList.remove(ie),le.className||le.removeAttribute("class"),this}:function(ie){var le=this.getAttribute("class");return le&&$(le,ie)&&((le=le.replace(new RegExp("(?:^|\\s+)"+ie+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",le):this.removeAttribute("class")),this},hasClass:function(ie){return $(this.$.className,ie)},append:function(ie,le){return"string"==typeof ie&&(ie=this.getDocument().createElement(ie)),le?this.$.insertBefore(ie.$,this.$.firstChild):this.$.appendChild(ie.$),ie},appendHtml:function(ie){if(this.$.childNodes.length){var le=new CKEDITOR.dom.element("div",this.getDocument());le.setHtml(ie),le.moveChildren(this)}else this.setHtml(ie)},appendText:function(ie){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=ie:this.append(new CKEDITOR.dom.text(ie))},appendBogus:function(ie){if(ie||CKEDITOR.env.needsBrFiller){for(ie=this.getLast();ie&&ie.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(ie.getText());)ie=ie.getPrevious();ie&&ie.is&&ie.is("br")||(ie=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&ie.setAttribute("type","_moz"),this.append(ie))}},breakParent:function(ie,le){var re=new CKEDITOR.dom.range(this.getDocument());re.setStartAfter(this),re.setEndAfter(ie);var se=re.extractContents(!1,le||!1),de;if(re.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(re=new CKEDITOR.dom.element("div");de=se.getFirst();)de.$.style.backgroundColor&&(de.$.style.backgroundColor=de.$.style.backgroundColor),re.append(de);re.insertAfter(this),re.remove(!0)}else se.insertAfterNode(this)},contains:document.compareDocumentPosition?function(ie){return!!(16&this.$.compareDocumentPosition(ie.$))}:function(ie){var le=this.$;return ie.type==CKEDITOR.NODE_ELEMENT?le!=ie.$&&le.contains(ie.$):le.contains(ie.getParent().$)},focus:function(){function ie(){try{this.$.focus()}catch(le){}}return function(le){le?CKEDITOR.tools.setTimeout(ie,100,this):ie.call(this)}}(),getHtml:function(){var ie=this.$.innerHTML;return CKEDITOR.env.ie?ie.replace(/<\?[^>]*>/g,""):ie},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var ie=this.$.ownerDocument.createElement("div");return ie.appendChild(this.$.cloneNode(!0)),ie.innerHTML},getClientRect:function(ie){var le=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return le.width||(le.width=le.right-le.left),le.height||(le.height=le.bottom-le.top),ie?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),le):le},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(ie){try{var le=this.$;if(this.getParent())return le.innerHTML=ie;var re=this.getDocument()._getHtml5ShivFrag();return re.appendChild(le),le.innerHTML=ie,re.removeChild(le),ie}catch(se){for(this.$.innerHTML="",le=new CKEDITOR.dom.element("body",this.getDocument()),le.$.innerHTML=ie,le=le.getChildren();le.count();)this.append(le.getItem(0));return ie}}:function(ie){return this.$.innerHTML=ie},setText:function(){var ie=document.createElement("p");return ie.innerHTML="x",ie=ie.textContent,function(le){this.$[ie?"textContent":"innerText"]=le}}(),getAttribute:function(){return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(le){switch(le){case"class":le="className";break;case"http-equiv":le="httpEquiv";break;case"name":return this.$.name;case"tabindex":return le=this.$.getAttribute(le,2),0!==le&&0===this.$.tabIndex&&(le=null),le;case"checked":return le=this.$.attributes.getNamedItem(le),(le.specified?le.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[le];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null;}return this.$.getAttribute(le,2)}:function(le){return this.$.getAttribute(le,2)}}(),getAttributes:function(ie){var le={},re=this.$.attributes,se;for(ie=CKEDITOR.tools.isArray(ie)?ie:[],se=0;se<re.length;se++)-1===CKEDITOR.tools.indexOf(ie,re[se].name)&&(le[re[se].name]=re[se].value);return le},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(ie){var le=this.getWindow().$.getComputedStyle(this.$,null);return le?le.getPropertyValue(ie):""}:function(ie){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(ie)]},getDtd:function(){var ie=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return ie},ie},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var ie=this.$.tabIndex;return 0!==ie||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?ie:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var ie=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var le=this.$.scopeName;"HTML"!=le&&(ie=le.toLowerCase()+":"+ie)}return this.getName=function(){return ie},this.getName()},getValue:function(){return this.$.value},getFirst:function(ie){var le=this.$.firstChild;return(le=le&&new CKEDITOR.dom.node(le))&&ie&&!ie(le)&&(le=le.getNext(ie)),le},getLast:function(ie){var le=this.$.lastChild;return(le=le&&new CKEDITOR.dom.node(le))&&ie&&!ie(le)&&(le=le.getPrevious(ie)),le},getStyle:function(ie){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(ie)]},is:function(){var ie=this.getName();if("object"==typeof arguments[0])return!!arguments[0][ie];for(var le=0;le<arguments.length;le++)if(arguments[le]==ie)return!0;return!1},isEditable:function(ie){var le=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[le]||CKEDITOR.dtd.$empty[le]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1===ie||(ie=CKEDITOR.dtd[le]||CKEDITOR.dtd.span,ie&&ie["#"])},isIdentical:function(ie){var le=this.clone(0,1);if(ie=ie.clone(0,1),le.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),ie.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),le.$.isEqualNode)return le.$.style.cssText=CKEDITOR.tools.normalizeCssText(le.$.style.cssText),ie.$.style.cssText=CKEDITOR.tools.normalizeCssText(ie.$.style.cssText),le.$.isEqualNode(ie.$);if(le=le.getOuterHtml(),ie=ie.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var re=this.getParent();re.type==CKEDITOR.NODE_ELEMENT&&(re=re.clone(),re.setHtml(le),le=re.getHtml(),re.setHtml(ie),ie=re.getHtml())}return le==ie},isVisible:function(){var ie=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),le,re;return ie&&CKEDITOR.env.webkit&&(le=this.getWindow(),!le.equals(CKEDITOR.document.getWindow())&&(re=le.$.frameElement)&&(ie=new CKEDITOR.dom.element(re).isVisible())),!!ie},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var ie=this.getChildren(),le=0,re=ie.count(),se;le<re;le++)if(se=ie.getItem(le),(se.type!=CKEDITOR.NODE_ELEMENT||!se.data("cke-bookmark"))&&(se.type==CKEDITOR.NODE_ELEMENT&&!se.isEmptyInlineRemoveable()||se.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(se.getText())))return!1;return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var ie=this.$.attributes,le=0,re;le<ie.length;le++)switch(re=ie[le],re.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(re.specified)return!0;}return!1}:function(){var ie=this.$.attributes,le=ie.length,re={"data-cke-expando":1,_moz_dirty:1};return 0<le&&(2<le||!re[ie[0].nodeName]||2==le&&!re[ie[1].nodeName])},hasAttribute:function(){function ie(le){var re=this.$.attributes.getNamedItem(le);if("input"==this.getName())switch(le){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return le=this.getAttribute("type"),"checkbox"==le||"radio"==le?"on"!=this.$.value:!!this.$.value;}return!!re&&re.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(le){return"name"==le?!!this.$.name:ie.call(this,le)}:ie:function(le){return!!this.$.attributes.getNamedItem(le)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(ie,le){var re=this.$;if(ie=ie.$,re!=ie){var se;if(le)for(;se=re.lastChild;)ie.insertBefore(re.removeChild(se),ie.firstChild);else for(;se=re.firstChild;)ie.appendChild(re.removeChild(se))}},mergeSiblings:function(){function ie(le,re,se){if(re&&re.type==CKEDITOR.NODE_ELEMENT){for(var de=[];re.data("cke-bookmark")||re.isEmptyInlineRemoveable();)if(de.push(re),re=se?re.getNext():re.getPrevious(),!re||re.type!=CKEDITOR.NODE_ELEMENT)return;if(le.isIdentical(re)){for(var ce=se?le.getLast():le.getFirst();de.length;)de.shift().move(le,!se);re.moveChildren(le,!se),re.remove(),ce&&ce.type==CKEDITOR.NODE_ELEMENT&&ce.mergeSiblings()}}}return function(le){(!1===le||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(ie(this,this.getNext(),!0),ie(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var ie=function(le,re){return this.$.setAttribute(le,re),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(le,re){return"class"==le?this.$.className=re:"style"==le?this.$.style.cssText=re:"tabindex"==le?this.$.tabIndex=re:"checked"==le?this.$.checked=re:"contenteditable"==le?ie.call(this,"contentEditable",re):ie.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(le,re){if("src"==le&&re.match(/^http:\/\//))try{ie.apply(this,arguments)}catch(se){}else ie.apply(this,arguments);return this}:ie}(),setAttributes:function(ie){for(var le in ie)this.setAttribute(le,ie[le]);return this},setValue:function(ie){return this.$.value=ie,this},removeAttribute:function(){return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(le){"class"==le?le="className":"tabindex"==le?le="tabIndex":"contenteditable"==le&&(le="contentEditable"),this.$.removeAttribute(le)}:function(le){this.$.removeAttribute(le)}}(),removeAttributes:function(ie){if(CKEDITOR.tools.isArray(ie))for(var le=0;le<ie.length;le++)this.removeAttribute(ie[le]);else for(le in ie=ie||this.getAttributes(),ie)ie.hasOwnProperty(le)&&this.removeAttribute(le)},removeStyle:function(ie){var le=this.$.style;if(le.removeProperty||"border"!=ie&&"margin"!=ie&&"padding"!=ie)le.removeProperty?le.removeProperty(ie):le.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(ie)),this.$.style.cssText||this.removeAttribute("style");else{var re=["top","left","right","bottom"],se;"border"==ie&&(se=["color","style","width"]);for(var le=[],de=0;de<re.length;de++)if(se)for(var ce=0;ce<se.length;ce++)le.push([ie,re[de],se[ce]].join("-"));else le.push([ie,re[de]].join("-"));for(ie=0;ie<le.length;ie++)this.removeStyle(le[ie])}},setStyle:function(ie,le){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(ie)]=le,this},setStyles:function(ie){for(var le in ie)this.setStyle(le,ie[le]);return this},setOpacity:function(ie){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(ie=_Mathround(100*ie),this.setStyle("filter",100<=ie?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+ie+")")):this.setStyle("opacity",ie)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var le=this.getElementsByTag("*"),re=0,se=le.count(),ie;re<se;re++)ie=le.getItem(re),ie.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var ie=this;"html"!=ie.getName();){if("static"!=ie.getComputedStyle("position"))return ie;ie=ie.getParent()}return null},getDocumentPosition:function(ie){var le=0,re=0,se=this.getDocument(),de=se.getBody(),ce="BackCompat"==se.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var me=this.$.getBoundingClientRect(),ue=se.$.documentElement,ge=ue.clientTop||de.$.clientTop||0,pe=ue.clientLeft||de.$.clientLeft||0,he=!0;CKEDITOR.env.ie&&(he=se.getDocumentElement().contains(this),se=se.getBody().contains(this),he=ce&&se||!ce&&he),he&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(le=de.$.scrollLeft||ue.scrollLeft,re=de.$.scrollTop||ue.scrollTop):(re=ce?de.$:ue,le=re.scrollLeft,re=re.scrollTop),le=me.left+le-pe,re=me.top+re-ge)}else for(ge=this,pe=null;ge&&"body"!=ge.getName()&&"html"!=ge.getName();){for(le+=ge.$.offsetLeft-ge.$.scrollLeft,re+=ge.$.offsetTop-ge.$.scrollTop,ge.equals(this)||(le+=ge.$.clientLeft||0,re+=ge.$.clientTop||0);pe&&!pe.equals(ge);)le-=pe.$.scrollLeft,re-=pe.$.scrollTop,pe=pe.getParent();pe=ge,ge=(me=ge.$.offsetParent)?new CKEDITOR.dom.element(me):null}return ie&&(me=this.getWindow(),ge=ie.getWindow(),!me.equals(ge)&&me.$.frameElement&&(ie=new CKEDITOR.dom.element(me.$.frameElement).getDocumentPosition(ie),le+=ie.x,re+=ie.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||ce||(le+=this.$.clientLeft?1:0,re+=this.$.clientTop?1:0),{x:le,y:re}},scrollIntoView:function(ie){var le=this.getParent();if(le)do if((le.$.clientWidth&&le.$.clientWidth<le.$.scrollWidth||le.$.clientHeight&&le.$.clientHeight<le.$.scrollHeight)&&!le.is("body")&&this.scrollIntoParent(le,ie,1),le.is("html")){var re=le.getWindow();try{var se=re.$.frameElement;se&&(le=new CKEDITOR.dom.element(se))}catch(de){}}while(le=le.getParent())},scrollIntoParent:function(ie,le,re){function se(ye,ke){/body|html/.test(ie.getName())?ie.getWindow().$.scrollBy(ye,ke):(ie.$.scrollLeft+=ye,ie.$.scrollTop+=ke)}function de(ye,ke){var Te={x:0,y:0};if(!ye.is(he?"body":"html")){var ve=ye.$.getBoundingClientRect();Te.x=ve.left,Te.y=ve.top}return ve=ye.getWindow(),ve.equals(ke)||(ve=de(CKEDITOR.dom.element.get(ve.$.frameElement),ke),Te.x+=ve.x,Te.y+=ve.y),Te}function ce(ye,ke){return parseInt(ye.getComputedStyle("margin-"+ke)||0,10)||0}var me,ue,ge,pe;ie||(ie=this.getWindow()),ge=ie.getDocument();var he="BackCompat"==ge.$.compatMode;ie instanceof CKEDITOR.dom.window&&(ie=he?ge.getBody():ge.getDocumentElement()),CKEDITOR.env.webkit&&(ge=this.getEditor(!1))&&(ge._.previousScrollTop=null),ge=ie.getWindow(),ue=de(this,ge);var fe=de(ie,ge),be=this.$.offsetHeight;me=this.$.offsetWidth;var _e=ie.$.clientHeight,Ee=ie.$.clientWidth;ge=ue.x-ce(this,"left")-fe.x||0,pe=ue.y-ce(this,"top")-fe.y||0,me=ue.x+me+ce(this,"right")-(fe.x+Ee)||0,ue=ue.y+be+ce(this,"bottom")-(fe.y+_e)||0,(0>pe||0<ue)&&se(0,!0===le?pe:!1===le?ue:0>pe?pe:ue),re&&(0>ge||0<me)&&se(0>ge?ge:me,0)},setState:function(ie,le,re){le=le||"cke",ie===CKEDITOR.TRISTATE_ON?(this.addClass(le+"_on"),this.removeClass(le+"_off"),this.removeClass(le+"_disabled"),re&&this.setAttribute("aria-pressed",!0),re&&this.removeAttribute("aria-disabled")):ie===CKEDITOR.TRISTATE_DISABLED?(this.addClass(le+"_disabled"),this.removeClass(le+"_off"),this.removeClass(le+"_on"),re&&this.setAttribute("aria-disabled",!0),re&&this.removeAttribute("aria-pressed")):(this.addClass(le+"_off"),this.removeClass(le+"_on"),this.removeClass(le+"_disabled"),re&&this.removeAttribute("aria-pressed"),re&&this.removeAttribute("aria-disabled"))},getFrameDocument:function(){var ie=this.$;try{ie.contentWindow.document}catch(le){ie.src=ie.src}return ie&&new CKEDITOR.dom.document(ie.contentWindow.document)},copyAttributes:function(ie,le){var re=this.$.attributes;le=le||{};for(var se=0;se<re.length;se++){var de=re[se],ce=de.nodeName.toLowerCase(),me;ce in le||("checked"==ce&&(me=this.getAttribute(ce))?ie.setAttribute(ce,me):(!CKEDITOR.env.ie||this.hasAttribute(ce))&&(me=this.getAttribute(ce),null===me&&(me=de.nodeValue),ie.setAttribute(ce,me)))}""!==this.$.style.cssText&&(ie.$.style.cssText=this.$.style.cssText)},renameNode:function(ie){if(this.getName()!=ie){var le=this.getDocument();ie=new CKEDITOR.dom.element(ie,le),this.copyAttributes(ie),this.moveChildren(ie),this.getParent(!0)&&this.$.parentNode.replaceChild(ie.$,this.$),ie.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=ie.$,delete this.getName}},getChild:function(){function ie(le,re){var se=le.childNodes;if(0<=re&&re<se.length)return se[re]}return function(le){var re=this.$;if(le.slice)for(le=le.slice();0<le.length&&re;)re=ie(re,le.shift());else re=ie(re,le);return re?new CKEDITOR.dom.node(re):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function ie(le){return le.type==CKEDITOR.NODE_ELEMENT&&le.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(le){le.data.getTarget().getAscendant(ie,!0)||le.data.preventDefault()})},getDirection:function(ie){return ie?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(ie,le){return(ie="data-"+ie,void 0===le)?this.getAttribute(ie):(!1===le?this.removeAttribute(ie):this.setAttribute(ie,le),null)},getEditor:function(ie){var le=CKEDITOR.instances,re,se,de;for(re in ie=ie||void 0===ie,le)if(se=le[re],se.element.equals(this)&&se.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!ie&&(de=se.editable())&&(de.equals(this)||de.contains(this)))return se;return null},find:function(ie){var le=j(this);return ie=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(ee(this,ie))),le(),ie},findOne:function(ie){var le=j(this);return ie=this.$.querySelector(ee(this,ie)),le(),ie?new CKEDITOR.dom.element(ie):null},forEach:function(ie,le,re){if(!(re||le&&this.type!=le))var se=ie(this);if(!1!==se){re=this.getChildren();for(var de=0;de<re.count();de++)se=re.getItem(de),se.type==CKEDITOR.NODE_ELEMENT?se.forEach(ie,le):le&&se.type!=le||ie(se)}}});var ae={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(ie,le,re){"number"==typeof le&&(!re||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(le-=te.call(this,ie)),this.setStyle(ie,le+"px"))},CKEDITOR.dom.element.prototype.getSize=function(ie,le){var re=_Mathmax(this.$["offset"+CKEDITOR.tools.capitalize(ie)],this.$["client"+CKEDITOR.tools.capitalize(ie)])||0;return le&&(re-=te.call(this,ie)),re}}(),CKEDITOR.dom.documentFragment=function($){$=$||CKEDITOR.document,this.$=$.type==CKEDITOR.NODE_DOCUMENT?$.$.createDocumentFragment():$},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function($){$=$.$,$.parentNode.insertBefore(this.$,$.nextSibling)},getHtml:function(){var $=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo($),$.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function $(ce,me){var ue=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,ue.collapsed)return this.end(),null;ue.optimize()}var pe=ue.startContainer,ge;ge=ue.endContainer;var he=ue.startOffset,fe=ue.endOffset,_e=this.guard,Ee=this.type,ye=ce?"getPreviousSourceNode":"getNextSourceNode",be;if(!ce&&!this._.guardLTR){var ke=ge.type==CKEDITOR.NODE_ELEMENT?ge:ge.getParent(),Te=ge.type==CKEDITOR.NODE_ELEMENT?ge.getChild(fe):ge.getNext();this._.guardLTR=function(Ne,xe){return(!xe||!ke.equals(Ne))&&(!Te||!Ne.equals(Te))&&(Ne.type!=CKEDITOR.NODE_ELEMENT||!xe||!Ne.equals(ue.root))}}if(ce&&!this._.guardRTL){var ve=pe.type==CKEDITOR.NODE_ELEMENT?pe:pe.getParent(),Ce=pe.type==CKEDITOR.NODE_ELEMENT?he?pe.getChild(he-1):null:pe.getPrevious();this._.guardRTL=function(Ne,xe){return(!xe||!ve.equals(Ne))&&(!Ce||!Ne.equals(Ce))&&(Ne.type!=CKEDITOR.NODE_ELEMENT||!xe||!Ne.equals(ue.root))}}var Se=ce?this._.guardRTL:this._.guardLTR;for(be=_e?function(Ne,xe){return!1!==Se(Ne,xe)&&_e(Ne,xe)}:Se,this.current?ge=this.current[ye](!1,Ee,be):(ce?ge.type==CKEDITOR.NODE_ELEMENT&&(ge=0<fe?ge.getChild(fe-1):!1===be(ge,!0)?null:ge.getPreviousSourceNode(!0,Ee,be)):(ge=pe,ge.type==CKEDITOR.NODE_ELEMENT&&((ge=ge.getChild(he))||(ge=!1===be(pe,!0)?null:pe.getNextSourceNode(!0,Ee,be)))),ge&&!1===be(ge)&&(ge=null));ge&&!this._.end;){if(this.current=ge,!this.evaluator||!1!==this.evaluator(ge)){if(!me)return ge;}else if(me&&this.evaluator)return!1;ge=ge[ye](!1,Ee,be)}return this.end(),this.current=null}function j(ce){for(var ue=null,me;me=$.call(this,ce);)ue=me;return ue}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(ce){this.range=ce,this._={}},proto:{end:function(){this._.end=1},next:function(){return $.call(this)},previous:function(){return $.call(this,1)},checkForward:function(){return!1!==$.call(this,0,1)},checkBackward:function(){return!1!==$.call(this,1,1)},lastForward:function(){return j.call(this)},lastBackward:function(){return j.call(this,1)},reset:function(){delete this.current,this._={}}}});var ee={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},te={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(ce){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in te||!ee[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||ce&&this.is(ce)):!0},CKEDITOR.dom.walker.blockBoundary=function(ce){return function(me){return!(me.type==CKEDITOR.NODE_ELEMENT&&me.isBlockBoundary(ce))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(ce,me){function ue(ge){return ge&&ge.getName&&"span"==ge.getName()&&ge.data("cke-bookmark")}return function(ge){var pe,he;return pe=ge&&ge.type!=CKEDITOR.NODE_ELEMENT&&(he=ge.getParent())&&ue(he),pe=ce?pe:pe||ue(ge),!!(me^pe)}},CKEDITOR.dom.walker.whitespaces=function(ce){return function(me){var ue;return me&&me.type==CKEDITOR.NODE_TEXT&&(ue=!CKEDITOR.tools.trim(me.getText())||CKEDITOR.env.webkit&&me.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(ce^ue)}},CKEDITOR.dom.walker.invisible=function(ce){var me=CKEDITOR.dom.walker.whitespaces(),ue=CKEDITOR.env.webkit?1:0;return function(ge){return me(ge)?ge=1:(ge.type==CKEDITOR.NODE_TEXT&&(ge=ge.getParent()),ge=ge.$.offsetWidth<=ue),!!(ce^ge)}},CKEDITOR.dom.walker.nodeType=function(ce,me){return function(ue){return!!(me^ue.type==ce)}},CKEDITOR.dom.walker.bogus=function(ce){function me(ue){return!ne(ue)&&!ae(ue)}return function(ue){var ge=CKEDITOR.env.needsBrFiller?ue.is&&ue.is("br"):ue.getText&&oe.test(ue.getText());return ge&&(ge=ue.getParent(),ue=ue.getNext(me),ge=ge.isBlockBoundary()&&(!ue||ue.type==CKEDITOR.NODE_ELEMENT&&ue.isBlockBoundary())),!!(ce^ge)}},CKEDITOR.dom.walker.temp=function(ce){return function(me){return me.type!=CKEDITOR.NODE_ELEMENT&&(me=me.getParent()),me=me&&me.hasAttribute("data-cke-temp"),!!(ce^me)}};var oe=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,ne=CKEDITOR.dom.walker.whitespaces(),ae=CKEDITOR.dom.walker.bookmark(),ie=CKEDITOR.dom.walker.temp(),le=function(ce){return ae(ce)||ne(ce)||ce.type==CKEDITOR.NODE_ELEMENT&&ce.is(CKEDITOR.dtd.$inline)&&!ce.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(ce){return function(me){return me=ne(me)||ae(me)||ie(me),!!(ce^me)}};var re=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(ce){return function(me){for(var ue=0,ge=me.getChildCount();ue<ge;++ue)if(!re(me.getChild(ue)))return!!ce;return!ce}};var se=CKEDITOR.dom.walker.empty(),de=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(ce){var me={},ue;for(ue in ce)CKEDITOR.dtd[ue]["#"]&&(me[ue]=1);return me}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(ce){return function(me){return me=!re(me)&&(me.type==CKEDITOR.NODE_TEXT||me.type==CKEDITOR.NODE_ELEMENT&&(me.is(CKEDITOR.dtd.$inline)||me.is("hr")||"false"==me.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&me.is(de)&&se(me))),!!(ce^me)}},CKEDITOR.dom.element.prototype.getBogus=function(){var ce=this;do ce=ce.getPreviousSourceNode();while(le(ce));return ce&&(CKEDITOR.env.needsBrFiller?ce.is&&ce.is("br"):ce.getText&&oe.test(ce.getText()))&&ce}}(),CKEDITOR.dom.range=function($){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var j=$ instanceof CKEDITOR.dom.document;this.document=j?$:$.getDocument(),this.root=j?$.getBody():$},function(){function $(se){se.collapsed=se.startContainer&&se.endContainer&&se.startContainer.equals(se.endContainer)&&se.startOffset==se.endOffset}function j(se,de,ce,me,ue){function ge(He,qe,ze,Ue){var je=ze?He.getPrevious():He.getNext();return Ue&&fe?je:(_e||Ue?qe.append(He.clone(!0,ue),ze):(He.remove(),be&&qe.append(He,ze)),je)}function pe(){var Ue=_Mathmin(Ie.length,Oe.length),He,qe,ze;for(He=0;He<Ue;He++)if(qe=Ie[He],ze=Oe[He],!qe.equals(ze))return He;return He-1}function he(){var He=Ae-1,qe=Se&&Ne&&!Ee.equals(ye);He<De-1||He<Re-1||qe?(qe?se.moveToPosition(ye,CKEDITOR.POSITION_BEFORE_START):Re==He+1&&Ce?se.moveToPosition(Oe[He],CKEDITOR.POSITION_BEFORE_END):se.moveToPosition(Oe[He+1],CKEDITOR.POSITION_BEFORE_START),me&&(He=Ie[He+1])&&He.type==CKEDITOR.NODE_ELEMENT&&(qe=CKEDITOR.dom.element.createFromHtml("<span data-cke-bookmark=\"1\" style=\"display:none\">&nbsp;</span>",se.document),qe.insertAfter(He),He.mergeSiblings(!1),se.moveToBookmark({startNode:qe}))):se.collapse(!0)}se.optimizeBookmark();var fe=0===de,be=1==de,_e=2==de;de=_e||be;var Ee=se.startContainer,ye=se.endContainer,ke=se.startOffset,Te=se.endOffset,ve,Ce,Se,Ne,xe,we;if(_e&&ye.type==CKEDITOR.NODE_TEXT&&(Ee.equals(ye)||Ee.type===CKEDITOR.NODE_ELEMENT&&Ee.getFirst().equals(ye)))ce.append(se.document.createText(ye.substring(ke,Te)));else{ye.type==CKEDITOR.NODE_TEXT?_e?we=!0:ye=ye.split(Te):0<ye.getChildCount()?Te>=ye.getChildCount()?(ye=ye.getChild(Te-1),Ce=!0):ye=ye.getChild(Te):Ne=Ce=!0,Ee.type==CKEDITOR.NODE_TEXT?_e?xe=!0:Ee.split(ke):0<Ee.getChildCount()?0===ke?(Ee=Ee.getChild(ke),ve=!0):Ee=Ee.getChild(ke-1):Se=ve=!0;for(var Ie=Ee.getParents(),Oe=ye.getParents(),Ae=pe(),De=Ie.length-1,Re=Oe.length-1,Le=ce,Me=-1,$e=Ae,Fe,Be,Pe;$e<=De;$e++){for(Be=Ie[$e],Pe=Be.getNext(),$e!=De||Be.equals(Oe[$e])&&De<Re?de&&(Fe=Le.append(Be.clone(0,ue))):ve?ge(Be,Le,!1,Se):xe&&Le.append(se.document.createText(Be.substring(ke)));Pe;){if(Pe.equals(Oe[$e])){Me=$e;break}Pe=ge(Pe,Le)}Le=Fe}for(Le=ce,$e=Ae;$e<=Re;$e++)if(ce=Oe[$e],Pe=ce.getPrevious(),ce.equals(Ie[$e]))de&&(Le=Le.getChild(0));else{if($e!=Re||ce.equals(Ie[$e])&&Re<De?de&&(Fe=Le.append(ce.clone(0,ue))):Ce?ge(ce,Le,!1,Ne):we&&Le.append(se.document.createText(ce.substring(0,Te))),$e>Me)for(;Pe;)Pe=ge(Pe,Le,!0);Le=Fe}_e||he()}}function ee(){var se=!1,de=CKEDITOR.dom.walker.whitespaces(),ce=CKEDITOR.dom.walker.bookmark(!0),me=CKEDITOR.dom.walker.bogus();return function(ue){return ce(ue)||de(ue)||(me(ue)&&!se?se=!0:ue.type==CKEDITOR.NODE_TEXT&&(ue.hasAscendant("pre")||CKEDITOR.tools.trim(ue.getText()).length)||ue.type==CKEDITOR.NODE_ELEMENT&&!ue.is(ne)?!1:!0)}}function te(se){var de=CKEDITOR.dom.walker.whitespaces(),ce=CKEDITOR.dom.walker.bookmark(1);return function(me){return ce(me)||de(me)||!se&&ae(me)||me.type==CKEDITOR.NODE_ELEMENT&&me.is(CKEDITOR.dtd.$removeEmpty)}}function oe(se){return function(){var de;return this[se?"getPreviousNode":"getNextNode"](function(ce){return!de&&re(ce)&&(de=ce),le(ce)&&!(ae(ce)&&ce.equals(de))})}}var ne={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},ae=CKEDITOR.dom.walker.bogus(),ie=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,le=CKEDITOR.dom.walker.editable(),re=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var se=new CKEDITOR.dom.range(this.root);return se._setStartContainer(this.startContainer),se.startOffset=this.startOffset,se._setEndContainer(this.endContainer),se.endOffset=this.endOffset,se.collapsed=this.collapsed,se},collapse:function(se){se?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(se){var de=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||j(this,2,de,!1,"undefined"==typeof se||se),de},deleteContents:function(se){this.collapsed||j(this,0,null,se)},extractContents:function(se,de){var ce=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||j(this,1,ce,se,"undefined"==typeof de||de),ce},createBookmark:function(se){var ge=this.collapsed,de,ce,me,ue;return de=this.document.createElement("span"),de.data("cke-bookmark",1),de.setStyle("display","none"),de.setHtml("&nbsp;"),se&&(me="cke_bm_"+CKEDITOR.tools.getNextNumber(),de.setAttribute("id",me+(ge?"C":"S"))),ge||(ce=de.clone(),ce.setHtml("&nbsp;"),se&&ce.setAttribute("id",me+"E"),ue=this.clone(),ue.collapse(),ue.insertNode(ce)),ue=this.clone(),ue.collapse(!0),ue.insertNode(de),ce?(this.setStartAfter(de),this.setEndBefore(ce)):this.moveToPosition(de,CKEDITOR.POSITION_AFTER_END),{startNode:se?me+(ge?"C":"S"):de,endNode:se?me+"E":ce,serializable:se,collapsed:ge}},createBookmark2:function(){function se(me){var ue=me.container,ge=me.offset,pe;pe=ue;var he=ge;if(pe=pe.type!=CKEDITOR.NODE_ELEMENT||0===he||he==pe.getChildCount()?0:pe.getChild(he-1).type==CKEDITOR.NODE_TEXT&&pe.getChild(he).type==CKEDITOR.NODE_TEXT,pe&&(ue=ue.getChild(ge-1),ge=ue.getLength()),ue.type==CKEDITOR.NODE_ELEMENT&&0<ge){a:{for(pe=ue;ge--;)if(he=pe.getChild(ge).getIndex(!0),0<=he){ge=he;break a}ge=-1}ge+=1}if(ue.type==CKEDITOR.NODE_TEXT){for(pe=ue,he=0;(pe=pe.getPrevious())&&pe.type==CKEDITOR.NODE_TEXT;)he+=pe.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;pe=he,ue.getText()?ge+=pe:(he=ue.getPrevious(ce),pe?(ge=pe,ue=he?he.getNext():ue.getParent().getFirst()):(ue=ue.getParent(),ge=he?he.getIndex(!0)+1:0))}me.container=ue,me.offset=ge}function de(me,ue){var ge=ue.getCustomData("cke-fillingChar");if(ge){var pe=me.container;ge.equals(pe)&&(me.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=me.offset&&(me.offset=pe.getIndex(),me.container=pe.getParent()))}}var ce=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(me){var ue=this.collapsed,ge={container:this.startContainer,offset:this.startOffset},pe={container:this.endContainer,offset:this.endOffset};return me&&(se(ge),de(ge,this.root),ue||(se(pe),de(pe,this.root))),{start:ge.container.getAddress(me),end:ue?null:pe.container.getAddress(me),startOffset:ge.offset,endOffset:pe.offset,normalized:me,collapsed:ue,is2:!0}}}(),moveToBookmark:function(se){if(se.is2){var de=this.document.getByAddress(se.start,se.normalized),ce=se.startOffset,me=se.end&&this.document.getByAddress(se.end,se.normalized);se=se.endOffset,this.setStart(de,ce),me?this.setEnd(me,se):this.collapse(!0)}else de=(ce=se.serializable)?this.document.getById(se.startNode):se.startNode,se=ce?this.document.getById(se.endNode):se.endNode,this.setStartBefore(de),de.remove(),se?(this.setEndBefore(se),se.remove()):this.collapse(!0)},getBoundaryNodes:function(){var se=this.startContainer,de=this.endContainer,ce=this.startOffset,me=this.endOffset,ue;if(se.type==CKEDITOR.NODE_ELEMENT)if(ue=se.getChildCount(),ue>ce)se=se.getChild(ce);else if(1>ue)se=se.getPreviousSourceNode();else{for(se=se.$;se.lastChild;)se=se.lastChild;se=new CKEDITOR.dom.node(se),se=se.getNextSourceNode()||se}if(de.type==CKEDITOR.NODE_ELEMENT)if(ue=de.getChildCount(),ue>me)de=de.getChild(me).getPreviousSourceNode(!0);else if(1>ue)de=de.getPreviousSourceNode();else{for(de=de.$;de.lastChild;)de=de.lastChild;de=new CKEDITOR.dom.node(de)}return se.getPosition(de)&CKEDITOR.POSITION_FOLLOWING&&(se=de),{startNode:se,endNode:de}},getCommonAncestor:function(se,de){var ce=this.startContainer,me=this.endContainer,ce=ce.equals(me)?se&&ce.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?ce.getChild(this.startOffset):ce:ce.getCommonAncestor(me);return de&&!ce.is?ce.getParent():ce},optimize:function(){var se=this.startContainer,de=this.startOffset;se.type!=CKEDITOR.NODE_ELEMENT&&(de?de>=se.getLength()&&this.setStartAfter(se):this.setStartBefore(se)),se=this.endContainer,de=this.endOffset,se.type!=CKEDITOR.NODE_ELEMENT&&(de?de>=se.getLength()&&this.setEndAfter(se):this.setEndBefore(se))},optimizeBookmark:function(){var se=this.startContainer,de=this.endContainer;se.is&&se.is("span")&&se.data("cke-bookmark")&&this.setStartAt(se,CKEDITOR.POSITION_BEFORE_START),de&&de.is&&de.is("span")&&de.data("cke-bookmark")&&this.setEndAt(de,CKEDITOR.POSITION_AFTER_END)},trim:function(se,de){var ce=this.startContainer,me=this.startOffset,ue=this.collapsed;if((!se||ue)&&ce&&ce.type==CKEDITOR.NODE_TEXT){if(!me)me=ce.getIndex(),ce=ce.getParent();else if(me>=ce.getLength())me=ce.getIndex()+1,ce=ce.getParent();else{var ge=ce.split(me),me=ce.getIndex()+1,ce=ce.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(ge,this.endOffset-this.startOffset):ce.equals(this.endContainer)&&(this.endOffset+=1)}if(this.setStart(ce,me),ue)return void this.collapse(!0)}ce=this.endContainer,me=this.endOffset,de||ue||!ce||ce.type!=CKEDITOR.NODE_TEXT||(me?(me>=ce.getLength()||ce.split(me),me=ce.getIndex()+1):me=ce.getIndex(),ce=ce.getParent(),this.setEnd(ce,me))},enlarge:function(se,de){function ce(Le){return Le&&Le.type==CKEDITOR.NODE_ELEMENT&&Le.hasAttribute("contenteditable")?null:Le}var me=new RegExp(/[^\s\ufeff]/);switch(se){case CKEDITOR.ENLARGE_INLINE:var ue=1;case CKEDITOR.ENLARGE_ELEMENT:var ge=function(Le,Fe){var Be=new CKEDITOR.dom.range(he);Be.setStart(Le,Fe),Be.setEndAt(he,CKEDITOR.POSITION_BEFORE_END);var Be=new CKEDITOR.dom.walker(Be),Pe;for(Be.guard=function(Me){return!(Me.type==CKEDITOR.NODE_ELEMENT&&Me.isBlockBoundary())};Pe=Be.next();){if(Pe.type!=CKEDITOR.NODE_TEXT)return!1;if(ve=Pe==Le?Pe.substring(Fe):Pe.getText(),me.test(ve))return!1}return!0};if(this.collapsed)break;var pe=this.getCommonAncestor(),he=this.root,ke=!1,fe,be,_e,Ee,ye,Te,ve;Te=this.startContainer;var Ce=this.startOffset;for(Te.type==CKEDITOR.NODE_TEXT?(Ce&&(Te=!CKEDITOR.tools.trim(Te.substring(0,Ce)).length&&Te,ke=!!Te),Te&&((Ee=Te.getPrevious())||(_e=Te.getParent()))):(Ce&&(Ee=Te.getChild(Ce-1)||Te.getLast()),Ee||(_e=Te)),_e=ce(_e);_e||Ee;){if(_e&&!Ee){if(!ye&&_e.equals(pe)&&(ye=!0),ue?_e.isBlockBoundary():!he.contains(_e))break;ke&&"inline"==_e.getComputedStyle("display")||(ke=!1,ye?fe=_e:this.setStartBefore(_e)),Ee=_e.getPrevious()}for(;Ee;)if(Te=!1,Ee.type==CKEDITOR.NODE_COMMENT)Ee=Ee.getPrevious();else{if(Ee.type==CKEDITOR.NODE_TEXT)ve=Ee.getText(),me.test(ve)&&(Ee=null),Te=/[\s\ufeff]$/.test(ve);else if((Ee.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||de&&Ee.is("br"))&&!Ee.data("cke-bookmark"))if(ke&&CKEDITOR.dtd.$removeEmpty[Ee.getName()]){if(ve=Ee.getText(),me.test(ve))Ee=null;else for(var Ce=Ee.$.getElementsByTagName("*"),Se=0,Ne;Ne=Ce[Se++];)if(!CKEDITOR.dtd.$removeEmpty[Ne.nodeName.toLowerCase()]){Ee=null;break}Ee&&(Te=!!ve.length)}else Ee=null;if(Te&&(ke?ye?fe=_e:_e&&this.setStartBefore(_e):ke=!0),Ee){if(Te=Ee.getPrevious(),!_e&&!Te){_e=Ee,Ee=null;break}Ee=Te}else _e=null}_e&&(_e=ce(_e.getParent()))}for(Te=this.endContainer,Ce=this.endOffset,_e=Ee=null,ye=ke=!1,Te.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(Te.substring(Ce)).length?ke=!0:(ke=!Te.getLength(),Ce==Te.getLength()?(Ee=Te.getNext())||(_e=Te.getParent()):ge(Te,Ce)&&(_e=Te.getParent())):(Ee=Te.getChild(Ce))||(_e=Te);_e||Ee;){if(_e&&!Ee){if(!ye&&_e.equals(pe)&&(ye=!0),ue?_e.isBlockBoundary():!he.contains(_e))break;ke&&"inline"==_e.getComputedStyle("display")||(ke=!1,ye?be=_e:_e&&this.setEndAfter(_e)),Ee=_e.getNext()}for(;Ee;){if(Te=!1,Ee.type==CKEDITOR.NODE_TEXT)ve=Ee.getText(),ge(Ee,0)||(Ee=null),Te=/^[\s\ufeff]/.test(ve);else if(Ee.type!=CKEDITOR.NODE_ELEMENT)Te=1;else if((0<Ee.$.offsetWidth||de&&Ee.is("br"))&&!Ee.data("cke-bookmark"))if(ke&&CKEDITOR.dtd.$removeEmpty[Ee.getName()]){if(ve=Ee.getText(),me.test(ve))Ee=null;else for(Ce=Ee.$.getElementsByTagName("*"),Se=0;Ne=Ce[Se++];)if(!CKEDITOR.dtd.$removeEmpty[Ne.nodeName.toLowerCase()]){Ee=null;break}Ee&&(Te=!!ve.length)}else Ee=null;if(Te&&ke&&(ye?be=_e:this.setEndAfter(_e)),Ee){if(Te=Ee.getNext(),!_e&&!Te){_e=Ee,Ee=null;break}Ee=Te}else _e=null}_e&&(_e=ce(_e.getParent()))}fe&&be&&(pe=fe.contains(be)?be:fe,this.setStartBefore(pe),this.setEndAfter(pe));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:_e=new CKEDITOR.dom.range(this.root),he=this.root,_e.setStartAt(he,CKEDITOR.POSITION_AFTER_START),_e.setEnd(this.startContainer,this.startOffset),_e=new CKEDITOR.dom.walker(_e);var Ie=CKEDITOR.dom.walker.blockBoundary(se==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),Oe=null,Ae=function(Le){if(Le.type==CKEDITOR.NODE_ELEMENT&&"false"==Le.getAttribute("contenteditable")){if(!Oe)Oe=Le;else if(Oe.equals(Le))return void(Oe=null);}else if(Oe)return;var Fe=Ie(Le);return Fe||(xe=Le),Fe},ue=function(Le){var Fe=Ae(Le);return!Fe&&Le.is&&Le.is("br")&&(we=Le),Fe},xe,we;if(_e.guard=Ae,_e=_e.lastBackward(),xe=xe||he,this.setStartAt(xe,!xe.is("br")&&(!_e&&this.checkStartOfBlock()||_e&&xe.contains(_e))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),se==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){_e=this.clone(),_e=new CKEDITOR.dom.walker(_e);var De=CKEDITOR.dom.walker.whitespaces(),Re=CKEDITOR.dom.walker.bookmark();if(_e.evaluator=function(Le){return!De(Le)&&!Re(Le)},(_e=_e.previous())&&_e.type==CKEDITOR.NODE_ELEMENT&&_e.is("br"))break}_e=this.clone(),_e.collapse(),_e.setEndAt(he,CKEDITOR.POSITION_BEFORE_END),_e=new CKEDITOR.dom.walker(_e),_e.guard=se==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?ue:Ae,xe=Oe=we=null,_e=_e.lastForward(),xe=xe||he,this.setEndAt(xe,!_e&&this.checkEndOfBlock()||_e&&xe.contains(_e)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),we&&this.setEndAfter(we);}},shrink:function(se,de,ce){var me="boolean"==typeof ce?ce:ce&&"boolean"==typeof ce.shrinkOnBlockBoundary?ce.shrinkOnBlockBoundary:!0,ue=ce&&ce.skipBogus;if(!this.collapsed){se=se||CKEDITOR.SHRINK_TEXT;var ge=this.clone(),pe=this.startContainer,he=this.endContainer,fe=this.startOffset,be=this.endOffset,_e=ce=1;pe&&pe.type==CKEDITOR.NODE_TEXT&&(fe?fe>=pe.getLength()?ge.setStartAfter(pe):(ge.setStartBefore(pe),ce=0):ge.setStartBefore(pe)),he&&he.type==CKEDITOR.NODE_TEXT&&(be?be>=he.getLength()?ge.setEndAfter(he):(ge.setEndAfter(he),_e=0):ge.setEndBefore(he));var ge=new CKEDITOR.dom.walker(ge),Ee=CKEDITOR.dom.walker.bookmark(),ye=CKEDITOR.dom.walker.bogus();ge.evaluator=function(Te){return Te.type==(se==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var ke;return ge.guard=function(Te,ve){return ue&&ye(Te)||Ee(Te)||(se==CKEDITOR.SHRINK_ELEMENT&&Te.type==CKEDITOR.NODE_TEXT||ve&&Te.equals(ke)||!1===me&&Te.type==CKEDITOR.NODE_ELEMENT&&Te.isBlockBoundary()||Te.type==CKEDITOR.NODE_ELEMENT&&Te.hasAttribute("contenteditable")?!1:(ve||Te.type!=CKEDITOR.NODE_ELEMENT||(ke=Te),!0))},ce&&(pe=ge[se==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(pe,de?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),_e&&(ge.reset(),(ge=ge[se==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(ge,de?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),ce||_e}},insertNode:function(se){this.optimizeBookmark(),this.trim(!1,!0);var de=this.startContainer,ce=de.getChild(this.startOffset);ce?se.insertBefore(ce):de.append(se),se.getParent()&&se.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(se)},moveToPosition:function(se,de){this.setStartAt(se,de),this.collapse(!0)},moveToRange:function(se){this.setStart(se.startContainer,se.startOffset),this.setEnd(se.endContainer,se.endOffset)},selectNodeContents:function(se){this.setStart(se,0),this.setEnd(se,se.type==CKEDITOR.NODE_TEXT?se.getLength():se.getChildCount())},setStart:function(se,de){se.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[se.getName()]&&(de=se.getIndex(),se=se.getParent()),this._setStartContainer(se),this.startOffset=de,this.endContainer||(this._setEndContainer(se),this.endOffset=de),$(this)},setEnd:function(se,de){se.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[se.getName()]&&(de=se.getIndex()+1,se=se.getParent()),this._setEndContainer(se),this.endOffset=de,this.startContainer||(this._setStartContainer(se),this.startOffset=de),$(this)},setStartAfter:function(se){this.setStart(se.getParent(),se.getIndex()+1)},setStartBefore:function(se){this.setStart(se.getParent(),se.getIndex())},setEndAfter:function(se){this.setEnd(se.getParent(),se.getIndex()+1)},setEndBefore:function(se){this.setEnd(se.getParent(),se.getIndex())},setStartAt:function(se,de){de===CKEDITOR.POSITION_AFTER_START?this.setStart(se,0):de===CKEDITOR.POSITION_BEFORE_END?se.type==CKEDITOR.NODE_TEXT?this.setStart(se,se.getLength()):this.setStart(se,se.getChildCount()):de===CKEDITOR.POSITION_BEFORE_START?this.setStartBefore(se):de===CKEDITOR.POSITION_AFTER_END?this.setStartAfter(se):void 0,$(this)},setEndAt:function(se,de){de===CKEDITOR.POSITION_AFTER_START?this.setEnd(se,0):de===CKEDITOR.POSITION_BEFORE_END?se.type==CKEDITOR.NODE_TEXT?this.setEnd(se,se.getLength()):this.setEnd(se,se.getChildCount()):de===CKEDITOR.POSITION_BEFORE_START?this.setEndBefore(se):de===CKEDITOR.POSITION_AFTER_END?this.setEndAfter(se):void 0,$(this)},fixBlock:function(se,de){var ce=this.createBookmark(),me=this.document.createElement(de);this.collapse(se),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(me),me.trim(),this.insertNode(me);var ue=me.getBogus();return ue&&ue.remove(),me.appendBogus(),this.moveToBookmark(ce),me},splitBlock:function(se,de){var ce=new CKEDITOR.dom.elementPath(this.startContainer,this.root),me=new CKEDITOR.dom.elementPath(this.endContainer,this.root),ue=ce.block,ge=me.block,pe=null;return ce.blockLimit.equals(me.blockLimit)?("br"!=se&&(ue||(ue=this.fixBlock(!0,se),ge=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),ge||(ge=this.fixBlock(!1,se))),ce=ue&&this.checkStartOfBlock(),me=ge&&this.checkEndOfBlock(),this.deleteContents(),ue&&ue.equals(ge)&&(me?(pe=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(ge,CKEDITOR.POSITION_AFTER_END),ge=null):ce?(pe=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(ue,CKEDITOR.POSITION_BEFORE_START),ue=null):(ge=this.splitElement(ue,de||!1),ue.is("ul","ol")||ue.appendBogus())),{previousBlock:ue,nextBlock:ge,wasStartOfBlock:ce,wasEndOfBlock:me,elementPath:pe}):null},splitElement:function(se,de){if(!this.collapsed)return null;this.setEndAt(se,CKEDITOR.POSITION_BEFORE_END);var ce=this.extractContents(!1,de||!1),me=se.clone(!1,de||!1);return ce.appendTo(me),me.insertAfter(se),this.moveToPosition(se,CKEDITOR.POSITION_AFTER_END),me},removeEmptyBlocksAtEnd:function(){function se(me){return function(ue){return de(ue)||ce(ue)||ue.type==CKEDITOR.NODE_ELEMENT&&ue.isEmptyInlineRemoveable()||me.is("table")&&ue.is("caption")?!1:!0}}var de=CKEDITOR.dom.walker.whitespaces(),ce=CKEDITOR.dom.walker.bookmark(!1);return function(me){for(var ue=this.createBookmark(),ge=this[me?"endPath":"startPath"](),pe=ge.block||ge.blockLimit,he;pe&&!pe.equals(ge.root)&&!pe.getFirst(se(pe));)he=pe.getParent(),this[me?"setEndAt":"setStartAt"](pe,CKEDITOR.POSITION_AFTER_END),pe.remove(1),pe=he;this.moveToBookmark(ue)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(se,de){var ce=de==CKEDITOR.START,me=this.clone();return me.collapse(ce),me[ce?"setStartAt":"setEndAt"](se,ce?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),me=new CKEDITOR.dom.walker(me),me.evaluator=te(ce),me[ce?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var se=this.startContainer,de=this.startOffset;return CKEDITOR.env.ie&&de&&se.type==CKEDITOR.NODE_TEXT&&(se=CKEDITOR.tools.ltrim(se.substring(0,de)),ie.test(se)&&this.trim(0,1)),this.trim(),se=new CKEDITOR.dom.elementPath(this.startContainer,this.root),de=this.clone(),de.collapse(!0),de.setStartAt(se.block||se.blockLimit,CKEDITOR.POSITION_AFTER_START),se=new CKEDITOR.dom.walker(de),se.evaluator=ee(),se.checkBackward()},checkEndOfBlock:function(){var se=this.endContainer,de=this.endOffset;return CKEDITOR.env.ie&&se.type==CKEDITOR.NODE_TEXT&&(se=CKEDITOR.tools.rtrim(se.substring(de)),ie.test(se)&&this.trim(1,0)),this.trim(),se=new CKEDITOR.dom.elementPath(this.endContainer,this.root),de=this.clone(),de.collapse(!1),de.setEndAt(se.block||se.blockLimit,CKEDITOR.POSITION_BEFORE_END),se=new CKEDITOR.dom.walker(de),se.evaluator=ee(),se.checkForward()},getPreviousNode:function(se,de,ce){var me=this.clone();return me.collapse(1),me.setStartAt(ce||this.root,CKEDITOR.POSITION_AFTER_START),ce=new CKEDITOR.dom.walker(me),ce.evaluator=se,ce.guard=de,ce.previous()},getNextNode:function(se,de,ce){var me=this.clone();return me.collapse(),me.setEndAt(ce||this.root,CKEDITOR.POSITION_BEFORE_END),ce=new CKEDITOR.dom.walker(me),ce.evaluator=se,ce.guard=de,ce.next()},checkReadOnly:function(){function se(de,ce){for(;de;){if(de.type==CKEDITOR.NODE_ELEMENT){if("false"==de.getAttribute("contentEditable")&&!de.data("cke-editable"))return 0;if(de.is("html")||"true"==de.getAttribute("contentEditable")&&(de.contains(ce)||de.equals(ce)))break}de=de.getParent()}return 1}return function(){var de=this.startContainer,ce=this.endContainer;return!(se(de,ce)&&se(ce,de))}}(),moveToElementEditablePosition:function(se,de){if(se.type==CKEDITOR.NODE_ELEMENT&&!se.isEditable(!1))return this.moveToPosition(se,de?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var ce=0;se;){if(se.type==CKEDITOR.NODE_TEXT){de&&this.endContainer&&this.checkEndOfBlock()&&ie.test(se.getText())?this.moveToPosition(se,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(se,de?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),ce=1;break}if(se.type==CKEDITOR.NODE_ELEMENT)if(se.isEditable())this.moveToPosition(se,de?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),ce=1;else if(de&&se.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(se,CKEDITOR.POSITION_BEFORE_START);else if("false"==se.getAttribute("contenteditable")&&se.is(CKEDITOR.dtd.$block))return this.setStartBefore(se),this.setEndAfter(se),!0;var me=se,ue=ce,ge=void 0;me.type==CKEDITOR.NODE_ELEMENT&&me.isEditable(!1)&&(ge=me[de?"getLast":"getFirst"](re)),ue||ge||(ge=me[de?"getPrevious":"getNext"](re)),se=ge}return!!ce},moveToClosestEditablePosition:function(se,de){var me=0,pe=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START],ce,ue,ge;return se?(ce=new CKEDITOR.dom.range(this.root),ce.moveToPosition(se,pe[de?0:1])):ce=this.clone(),se&&!se.is(CKEDITOR.dtd.$block)?me=1:(ue=ce[de?"getNextEditableNode":"getPreviousEditableNode"]())&&(me=1,(ge=ue.type==CKEDITOR.NODE_ELEMENT)&&ue.is(CKEDITOR.dtd.$block)&&"false"==ue.getAttribute("contenteditable")?(ce.setStartAt(ue,CKEDITOR.POSITION_BEFORE_START),ce.setEndAt(ue,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&ge&&ue.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(ce.setEnd(ue,0),ce.collapse()):ce.moveToPosition(ue,pe[de?1:0])),me&&this.moveToRange(ce),!!me},moveToElementEditStart:function(se){return this.moveToElementEditablePosition(se)},moveToElementEditEnd:function(se){return this.moveToElementEditablePosition(se,!0)},getEnclosedNode:function(){var se=this.clone();if(se.optimize(),se.startContainer.type!=CKEDITOR.NODE_ELEMENT||se.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var se=new CKEDITOR.dom.walker(se),de=CKEDITOR.dom.walker.bookmark(!1,!0),ce=CKEDITOR.dom.walker.whitespaces(!0);se.evaluator=function(ue){return ce(ue)&&de(ue)};var me=se.next();return se.reset(),me&&me.equals(se.previous())?me:null},getTouchedStartNode:function(){var se=this.startContainer;return this.collapsed||se.type!=CKEDITOR.NODE_ELEMENT?se:se.getChild(this.startOffset)||se},getTouchedEndNode:function(){var se=this.endContainer;return this.collapsed||se.type!=CKEDITOR.NODE_ELEMENT?se:se.getChild(this.endOffset-1)||se},getNextEditableNode:oe(),getPreviousEditableNode:oe(1),_getTableElement:function(se){se=se||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var de=this.startContainer,ce=this.endContainer,me=de.getAscendant("table",!0),ue=ce.getAscendant("table",!0);return me&&!this.root.contains(me)?null:CKEDITOR.env.safari&&me&&ce.equals(this.root)?de.getAscendant(se,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(se,!0):me&&ue&&(me.equals(ue)||me.contains(ue)||ue.contains(me))?de.getAscendant(se,!0):null},scrollIntoView:function(){var se=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),ue=this.clone(),de,ce,me;ue.optimize(),(me=ue.startContainer.type==CKEDITOR.NODE_TEXT)?(ce=ue.startContainer.getText(),de=ue.startContainer.split(ue.startOffset),se.insertAfter(ue.startContainer)):ue.insertNode(se),se.scrollIntoView(),me&&(ue.startContainer.setText(ce),de.remove()),se.remove()},getClientRects:function(){function se(ue,ge){var pe=CKEDITOR.tools.array.map(ue,function(Ee){return Ee}),he=new CKEDITOR.dom.range(ge.root),fe,be,_e;if(ge.startContainer instanceof CKEDITOR.dom.element&&(be=0===ge.startOffset&&ge.startContainer.hasAttribute("data-widget")),ge.endContainer instanceof CKEDITOR.dom.element&&(_e=(_e=ge.endOffset===(ge.endContainer.getChildCount?ge.endContainer.getChildCount():ge.endContainer.length))&&ge.endContainer.hasAttribute("data-widget")),be&&he.setStart(ge.startContainer.getParent(),ge.startContainer.getIndex()),_e&&he.setEnd(ge.endContainer.getParent(),ge.endContainer.getIndex()+1),(be||_e)&&(ge=he),he=ge.cloneContents(),he=CKEDITOR.dom.document.prototype.find.call(he,"[data-cke-widget-id]").toArray(),he=CKEDITOR.tools.array.map(he,function(Ee){var ye=ge.root.editor;return Ee=Ee.getAttribute("data-cke-widget-id"),ye.widgets.instances[Ee].element}))return he=CKEDITOR.tools.array.map(he,function(Ee){var ye;return ye=Ee.getParent().hasClass("cke_widget_wrapper")?Ee.getParent():Ee,fe=this.root.getDocument().$.createRange(),fe.setStart(ye.getParent().$,ye.getIndex()),fe.setEnd(ye.getParent().$,ye.getIndex()+1),ye=fe.getClientRects(),ye.widgetRect=Ee.getClientRect(),ye},ge),CKEDITOR.tools.array.forEach(he,function(Ee){function ye(Te){CKEDITOR.tools.array.forEach(pe,function(ve,Ce){var Se=CKEDITOR.tools.objectCompare(Ee[Te],ve);Se||(Se=CKEDITOR.tools.objectCompare(Ee.widgetRect,ve)),Se&&(Array.prototype.splice.call(pe,Ce,Ee.length-Te,Ee.widgetRect),ke=!0)}),ke||(Te<pe.length-1?ye(Te+1):pe.push(Ee.widgetRect))}var ke;ye(0)}),pe}function de(ue,ge,pe){var he;return ge.collapsed?pe.startContainer instanceof CKEDITOR.dom.element?(ue=pe.checkStartOfBlock(),he=new CKEDITOR.dom.text("\u200B"),ue?pe.startContainer.append(he,!0):0===pe.startOffset?he.insertBefore(pe.startContainer.getFirst()):(pe=pe.startContainer.getChildren().getItem(pe.startOffset-1),he.insertAfter(pe)),ge.setStart(he.$,0),ge.setEnd(he.$,0),ue=ge.getClientRects(),he.remove()):pe.startContainer instanceof CKEDITOR.dom.text&&(""===pe.startContainer.getText()?(pe.startContainer.setText("\u200B"),ue=ge.getClientRects(),pe.startContainer.setText("")):ue=[me(pe.createBookmark())]):ue=[me(pe.createBookmark())],ue}function ce(ue,ge,pe){return ue=CKEDITOR.tools.extend({},ue),ge&&(ue=CKEDITOR.tools.getAbsoluteRectPosition(pe.document.getWindow(),ue)),ue.width||(ue.width=ue.right-ue.left),ue.height||(ue.height=ue.bottom-ue.top),ue}function me(ue){var ge=ue.startNode;ue=ue.endNode;var pe;return ge.setText("\u200B"),ge.removeStyle("display"),ue?(ue.setText("\u200B"),ue.removeStyle("display"),pe=[ge.getClientRect(),ue.getClientRect()],ue.remove()):pe=[ge.getClientRect(),ge.getClientRect()],ge.remove(),{right:_Mathmax(pe[0].right,pe[1].right),bottom:_Mathmax(pe[0].bottom,pe[1].bottom),left:_Mathmin(pe[0].left,pe[1].left),top:_Mathmin(pe[0].top,pe[1].top),width:_Mathabs(pe[0].left-pe[1].left),height:_Mathmax(pe[0].bottom,pe[1].bottom)-_Mathmin(pe[0].top,pe[1].top)}}return void 0===this.document.getSelection?function(ue){return[ce(me(this.createBookmark()),ue,this)]}:function(ue){var ge=this.root.getDocument().$.createRange(),pe;return ge.setStart(this.startContainer.$,this.startOffset),ge.setEnd(this.endContainer.$,this.endOffset),pe=ge.getClientRects(),pe=se(pe,this),pe.length||(pe=de(pe,ge,this)),CKEDITOR.tools.array.map(pe,function(he){return ce(he,ue,this)},this)}}(),_setStartContainer:function(se){this.startContainer=se},_setEndContainer:function(se){this.endContainer=se},_find:function(se,de){var ce=this.getCommonAncestor(),me=this.getBoundaryNodes(),ue=[],ge,pe,he,fe;if(ce&&ce.find)for(pe=ce.find(se),ge=0;ge<pe.count();ge++)(ce=pe.getItem(ge),de||!ce.isReadOnly())&&(he=ce.getPosition(me.startNode)&CKEDITOR.POSITION_FOLLOWING||me.startNode.equals(ce),fe=ce.getPosition(me.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||me.endNode.equals(ce),he&&fe&&ue.push(ce));return ue}},CKEDITOR.dom.range.mergeRanges=function(se){return CKEDITOR.tools.array.reduce(se,function(de,ce){var me=de[de.length-1],ue=!1;if(ce=ce.clone(),ce.enlarge(CKEDITOR.ENLARGE_ELEMENT),me){var ge=new CKEDITOR.dom.range(ce.root),ue=new CKEDITOR.dom.walker(ge),pe=CKEDITOR.dom.walker.whitespaces();for(ge.setStart(me.endContainer,me.endOffset),ge.setEnd(ce.startContainer,ce.startOffset),ge=ue.next();pe(ge)||ce.endContainer.equals(ge);)ge=ue.next();ue=!ge}return ue?me.setEnd(ce.endContainer,ce.endOffset):de.push(ce),de},[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,"use strict",function(){function $(re){1>arguments.length||(this.range=re,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function j(re){var se=[];return re.forEach(function(de){if("true"==de.getAttribute("contenteditable"))return se.push(de),!1},CKEDITOR.NODE_ELEMENT,!0),se}function ee(re,se,de,ce){a:{null==ce&&(ce=j(de));for(var me;me=ce.shift();)if(me.getDtd().p){ce={element:me,remaining:ce};break a}ce=null}return ce?(me=CKEDITOR.filter.instances[ce.element.data("cke-filter")])&&!me.check(se)?ee(re,se,de,ce.remaining):(se=new CKEDITOR.dom.range(ce.element),se.selectNodeContents(ce.element),se=se.createIterator(),se.enlargeBr=re.enlargeBr,se.enforceRealBlocks=re.enforceRealBlocks,se.activeFilter=se.filter=me,re._.nestedEditable={element:ce.element,container:de,remaining:ce.remaining,iterator:se},1):0}function te(re,se,de){return!!se&&(re=re.clone(),re.collapse(!de),re.checkBoundaryOfElement(se,de?CKEDITOR.START:CKEDITOR.END))}var oe=/^[\r\n\t ]+$/,ne=CKEDITOR.dom.walker.bookmark(!1,!0),ae=CKEDITOR.dom.walker.whitespaces(!0),ie=function(re){return ne(re)&&ae(re)},le={dd:1,dt:1,li:1};$.prototype={getNextParagraph:function(re){var se,de,ce,me,ue;if(re=re||"p",this._.nestedEditable){if(se=this._.nestedEditable.iterator.getNextParagraph(re))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,se;if(this.activeFilter=this.filter,ee(this,re,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(re);this._.nestedEditable=null}if(!this.range.root.getDtd()[re])return null;if(!this._.started){var ge=this.range.clone();de=ge.startPath();var pe=ge.endPath(),he=!ge.collapsed&&te(ge,de.block),fe=!ge.collapsed&&te(ge,pe.block,1);ge.shrink(CKEDITOR.SHRINK_ELEMENT,!0),he&&ge.setStartAt(de.block,CKEDITOR.POSITION_BEFORE_END),fe&&ge.setEndAt(pe.block,CKEDITOR.POSITION_AFTER_START),de=ge.endContainer.hasAscendant("pre",!0)||ge.startContainer.hasAscendant("pre",!0),ge.enlarge((!this.forceBrBreak||de)&&this.enlargeBr?CKEDITOR.ENLARGE_BLOCK_CONTENTS:CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS),ge.collapsed||(de=new CKEDITOR.dom.walker(ge.clone()),pe=CKEDITOR.dom.walker.bookmark(!0,!0),de.evaluator=pe,this._.nextNode=de.next(),de=new CKEDITOR.dom.walker(ge.clone()),de.evaluator=pe,de=de.previous(),this._.lastNode=de.getNextSourceNode(!0,null,ge.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(pe=this.range.clone(),pe.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),pe.checkEndOfBlock()&&(pe=new CKEDITOR.dom.elementPath(pe.endContainer,pe.root),this._.lastNode=(pe.block||pe.blockLimit).getNextSourceNode(!0))),this._.lastNode&&ge.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=ge.document.createText(""),this._.lastNode.insertAfter(de)),ge=null),this._.started=1,de=ge}for(pe=this._.nextNode,ge=this._.lastNode,this._.nextNode=null;pe;){var he=0,fe=pe.hasAscendant("pre"),be=pe.type!=CKEDITOR.NODE_ELEMENT,_e=0;if(be)pe.type==CKEDITOR.NODE_TEXT&&oe.test(pe.getText())&&(be=0);else{var Ee=pe.getName();if(CKEDITOR.dtd.$block[Ee]&&"false"==pe.getAttribute("contenteditable")){se=pe,ee(this,re,se);break}else if(pe.isBlockBoundary(this.forceBrBreak&&!fe&&{br:1})){if("br"==Ee)be=1;else if(!de&&!pe.getChildCount()&&"hr"!=Ee){se=pe,ce=pe.equals(ge);break}de&&(de.setEndAt(pe,CKEDITOR.POSITION_BEFORE_START),"br"!=Ee&&(this._.nextNode=pe)),he=1}else{if(pe.getFirst()){de||(de=this.range.clone(),de.setStartAt(pe,CKEDITOR.POSITION_BEFORE_START)),pe=pe.getFirst();continue}be=1}}if(be&&!de&&(de=this.range.clone(),de.setStartAt(pe,CKEDITOR.POSITION_BEFORE_START)),ce=(!he||be)&&pe.equals(ge),de&&!he)for(;!pe.getNext(ie)&&!ce;){if(Ee=pe.getParent(),Ee.isBlockBoundary(this.forceBrBreak&&!fe&&{br:1})){he=1,be=0,ce||Ee.equals(ge),de.setEndAt(Ee,CKEDITOR.POSITION_BEFORE_END);break}pe=Ee,be=1,ce=pe.equals(ge),_e=1}if(be&&de.setEndAt(pe,CKEDITOR.POSITION_AFTER_END),pe=this._getNextSourceNode(pe,_e,ge),(ce=!pe)||he&&de)break}if(!se){if(!de)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;se=new CKEDITOR.dom.elementPath(de.startContainer,de.root),pe=se.blockLimit,he={div:1,th:1,td:1},se=se.block,!se&&pe&&!this.enforceRealBlocks&&he[pe.getName()]&&de.checkStartOfBlock()&&de.checkEndOfBlock()&&!pe.equals(de.root)?se=pe:!se||this.enforceRealBlocks&&se.is(le)?(se=this.range.document.createElement(re),de.extractContents().appendTo(se),se.trim(),de.insertNode(se),me=ue=!0):"li"==se.getName()?ce||(this._.nextNode=se.equals(ge)?null:this._getNextSourceNode(de.getBoundaryNodes().endNode,1,ge)):de.checkStartOfBlock()&&de.checkEndOfBlock()||(se=se.clone(!1),de.extractContents().appendTo(se),se.trim(),ue=de.splitBlock(),me=!ue.wasStartOfBlock,ue=!ue.wasEndOfBlock,de.insertNode(se))}return me&&(me=se.getPrevious())&&me.type==CKEDITOR.NODE_ELEMENT&&("br"==me.getName()?me.remove():me.getLast()&&"br"==me.getLast().$.nodeName.toLowerCase()&&me.getLast().remove()),ue&&(me=se.getLast())&&me.type==CKEDITOR.NODE_ELEMENT&&"br"==me.getName()&&(!CKEDITOR.env.needsBrFiller||me.getPrevious(ne)||me.getNext(ne))&&me.remove(),this._.nextNode||(this._.nextNode=ce||se.equals(ge)||!ge?null:this._getNextSourceNode(se,1,ge)),se},_getNextSourceNode:function(re,se,de){function ce(ue){return!(ue.equals(de)||ue.equals(me))}var me=this.range.root;for(re=re.getNextSourceNode(se,null,ce);!ne(re);)re=re.getNextSourceNode(se,null,ce);return re}},CKEDITOR.dom.range.prototype.createIterator=function(){return new $(this)}}(),CKEDITOR.command=function($,j){this.uiItems=[],this.exec=function(te){return this.state!=CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&(this.editorFocus&&$.focus(),!1===this.fire("exec")||!1!==j.exec.call(this,$,te))},this.refresh=function(te,oe){return!this.readOnly&&te.readOnly||((!this.context||oe.isContextFor(this.context))&&this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[te.mode]&&this.disable(),!1===this.fire("refresh",{editor:te,path:oe})||j.refresh&&!1!==j.refresh.apply(this,arguments)):(this.disable(),!0))};var ee;this.checkAllowed=function(te){return te||"boolean"!=typeof ee?ee=$.activeFilter.checkFeature(this):ee},CKEDITOR.tools.extend(this,j,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!j.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function($){return this.state!=$&&($==CKEDITOR.TRISTATE_DISABLED||this.checkAllowed())&&(this.previousState=this.state,this.state=$,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function $(Fe,Be,Pe,Me,$e){var He,qe;for(He in Fe=[],Be){qe=Be[He],qe="boolean"==typeof qe?{}:"function"==typeof qe?{match:qe}:Se(qe),"$"!=He.charAt(0)&&(qe.elements=He),Pe&&(qe.featureName=Pe.toLowerCase());var ze=qe;ze.elements=ae(ze.elements,/\s+/)||null,ze.propertiesOnly=ze.propertiesOnly||!0===ze.elements;var Ue=/\s*,\s*/,je=void 0;for(je in we){ze[je]=ae(ze[je],Ue)||null;var Ve=ze,Ke=Ie[je],We=ae(ze[Ie[je]],Ue),Ge=ze[je],Xe=[],Ye=!0,Ze=void 0;for(Ze in We?Ye=!1:We={},Ge)"!"==Ze.charAt(0)&&(Ze=Ze.slice(1),Xe.push(Ze),We[Ze]=!0,Ye=!1);for(;Ze=Xe.pop();)Ge[Ze]=Ge["!"+Ze],delete Ge["!"+Ze];Ve[Ke]=!Ye&&We||null}ze.match=ze.match||null,Me.push(qe),Fe.push(qe)}Be=$e.elements,$e=$e.generic;for(Pe=0,Me=Fe.length;Pe<Me;++Pe){for(Ue in He=Se(Fe[Pe]),qe=!0===He.classes||!0===He.styles||!0===He.attributes,ze=He,je=Ke=Ue=void 0,we)ze[Ue]=he(ze[Ue]);for(je in Ve=!0,Ie){for(Ge in Ue=Ie[je],Ke=ze[Ue],We=[],Ge=void 0,Ke)-1<Ge.indexOf("*")?We.push(new RegExp("^"+Ge.replace(/\*/g,".*")+"$")):We.push(Ge);Ke=We,Ke.length&&(ze[Ue]=Ke,Ve=!1)}if(ze.nothingRequired=Ve,ze.noProperties=!(ze.attributes||ze.classes||ze.styles),!0===He.elements||null===He.elements)$e[qe?"unshift":"push"](He);else for(var Je in ze=He.elements,delete He.elements,ze)Be[Je]?Be[Je][qe?"unshift":"push"](He):Be[Je]=[He]}}function j(Fe,Be,Pe,Me){if((!Fe.match||Fe.match(Be))&&(Me||ie(Fe,Be))&&(Fe.propertiesOnly||(Pe.valid=!0),Pe.allAttributes||(Pe.allAttributes=ee(Fe.attributes,Be.attributes,Pe.validAttributes)),Pe.allStyles||(Pe.allStyles=ee(Fe.styles,Be.styles,Pe.validStyles)),!Pe.allClasses)){if(Fe=Fe.classes,Be=Be.classes,Me=Pe.validClasses,!Fe)Fe=!1;else if(!0===Fe)Fe=!0;else{for(var $e=0,He=Be.length,qe;$e<He;++$e)qe=Be[$e],Me[qe]||(Me[qe]=Fe(qe));Fe=!1}Pe.allClasses=Fe}}function ee(Fe,Be,Pe){if(!Fe)return!1;if(!0===Fe)return!0;for(var Me in Be)Pe[Me]||(Pe[Me]=Fe(Me));return!1}function te(Fe,Be,Pe){if(!Fe.match||Fe.match(Be)){if(Fe.noProperties)return!1;if(Pe.hadInvalidAttribute=oe(Fe.attributes,Be.attributes)||Pe.hadInvalidAttribute,Pe.hadInvalidStyle=oe(Fe.styles,Be.styles)||Pe.hadInvalidStyle,Fe=Fe.classes,Be=Be.classes,Fe){for(var Me=!1,$e=!0===Fe,He=Be.length;He--;)($e||Fe(Be[He]))&&(Be.splice(He,1),Me=!0);Fe=Me}else Fe=!1;Pe.hadInvalidClass=Fe||Pe.hadInvalidClass}}function oe(Fe,Be){if(!Fe)return!1;var Pe=!1,$e;for($e in Be)(!0===Fe||Fe($e))&&(delete Be[$e],Pe=!0);return Pe}function ne(Fe,Be,Pe){return Fe.disabled||Fe.customConfig&&!Pe||!Be?!1:(Fe._.cachedChecks={},!0)}function ae(Fe,Be){if(!Fe)return!1;if(!0===Fe)return Fe;if("string"==typeof Fe)return Fe=Ne(Fe),"*"==Fe||CKEDITOR.tools.convertArrayToObject(Fe.split(Be));if(CKEDITOR.tools.isArray(Fe))return!!Fe.length&&CKEDITOR.tools.convertArrayToObject(Fe);var Pe={},Me=0,$e;for($e in Fe)Pe[$e]=Fe[$e],Me++;return!!Me&&Pe}function ie(Fe,Be){if(Fe.nothingRequired)return!0;var Pe,Me,$e,He;if($e=Fe.requiredClasses)for(He=Be.classes,Pe=0;Pe<$e.length;++Pe)if(Me=$e[Pe],"string"==typeof Me){if(-1==CKEDITOR.tools.indexOf(He,Me))return!1;}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(He,Me))return!1;return le(Be.styles,Fe.requiredStyles)&&le(Be.attributes,Fe.requiredAttributes)}function le(Fe,Be){if(!Be)return!0;for(var Pe=0,Me;Pe<Be.length;++Pe)if(Me=Be[Pe],"string"==typeof Me){if(!(Me in Fe))return!1;}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(Fe,Me))return!1;return!0}function re(Fe){if(!Fe)return{};Fe=Fe.split(/\s*,\s*/).sort();for(var Be={};Fe.length;)Be[Fe.shift()]="cke-test";return Be}function se(Fe){var He={},qe=1,Be,Pe,Me,$e;for(Fe=Ne(Fe);Be=Fe.match(Oe);)(Pe=Be[2])?(Me=de(Pe,"styles"),$e=de(Pe,"attrs"),Pe=de(Pe,"classes")):Me=$e=Pe=null,He["$"+qe++]={elements:Be[1],classes:Pe,styles:Me,attributes:$e},Fe=Fe.slice(Be[0].length);return He}function de(Fe,Be){var Pe=Fe.match(Ae[Be]);return Pe?Ne(Pe[1]):null}function ce(Fe){var Be=Fe.styleBackup=Fe.attributes.style,Pe=Fe.classBackup=Fe.attributes["class"];Fe.styles||(Fe.styles=CKEDITOR.tools.parseCssText(Be||"",1)),Fe.classes||(Fe.classes=Pe?Pe.split(/\s+/):[])}function me(Fe,Be,Pe,Me){var $e=0,He;if(Me.toHtml&&(Be.name=Be.name.replace(De,"$1")),Me.doCallbacks&&Fe.elementCallbacks){a:{He=Fe.elementCallbacks;for(var qe=0,ze=He.length,Ue;qe<ze;++qe)if(Ue=He[qe](Be)){He=Ue;break a}He=void 0}if(He)return He}if(Me.doTransform&&(He=Fe._.transformations[Be.name])){for(ce(Be),qe=0;qe<He.length;++qe)Ee(Fe,Be,He[qe]);ge(Be)}if(Me.doFilter){a:{qe=Be.name,ze=Fe._,Fe=ze.allowedRules.elements[qe],He=ze.allowedRules.generic,qe=ze.disallowedRules.elements[qe],ze=ze.disallowedRules.generic,Ue=Me.skipRequired;var je={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},Ve,Ke;if(Fe||He){if(ce(Be),qe)for(Ve=0,Ke=qe.length;Ve<Ke;++Ve)if(!1===te(qe[Ve],Be,je)){Fe=null;break a}if(ze)for(Ve=0,Ke=ze.length;Ve<Ke;++Ve)te(ze[Ve],Be,je);if(Fe)for(Ve=0,Ke=Fe.length;Ve<Ke;++Ve)j(Fe[Ve],Be,je,Ue);if(He)for(Ve=0,Ke=He.length;Ve<Ke;++Ve)j(He[Ve],Be,je,Ue);Fe=je}else Fe=null}if(!Fe||!Fe.valid)return Pe.push(Be),1;Ke=Fe.validAttributes;var We=Fe.validStyles;He=Fe.validClasses;var qe=Be.attributes,Ge=Be.styles,ze=Be.classes;Ue=Be.classBackup;var Xe=Be.styleBackup,Je=[],je=[],Qe=/^data-cke-/,Ye,Ze;if(Ve=!1,delete qe.style,delete qe["class"],delete Be.classBackup,delete Be.styleBackup,!Fe.allAttributes)for(Ye in qe)Ke[Ye]||(Qe.test(Ye)?Ye==(Ze=Ye.replace(/^data-cke-saved-/,""))||Ke[Ze]||(delete qe[Ye],Ve=!0):(delete qe[Ye],Ve=!0));if(!Fe.allStyles||Fe.hadInvalidStyle){for(Ye in Ge)Fe.allStyles||We[Ye]?Je.push(Ye+":"+Ge[Ye]):Ve=!0;Je.length&&(qe.style=Je.sort().join("; "))}else Xe&&(qe.style=Xe);if(!Fe.allClasses||Fe.hadInvalidClass){for(Ye=0;Ye<ze.length;++Ye)(Fe.allClasses||He[ze[Ye]])&&je.push(ze[Ye]);je.length&&(qe["class"]=je.sort().join(" ")),Ue&&je.length<Ue.split(/\s+/).length&&(Ve=!0)}else Ue&&(qe["class"]=Ue);if(Ve&&($e=1),!Me.skipFinalValidation&&!pe(Be))return Pe.push(Be),1}return Me.toHtml&&(Be.name=Be.name.replace(Re,"cke:$1")),$e}function ue(Fe){var Be=[],Pe;for(Pe in Fe)-1<Pe.indexOf("*")&&Be.push(Pe.replace(/\*/g,".*"));return Be.length?new RegExp("^(?:"+Be.join("|")+")$"):null}function ge(Fe){var Be=Fe.attributes,Pe;delete Be.style,delete Be["class"],(Pe=CKEDITOR.tools.writeCssText(Fe.styles,!0))&&(Be.style=Pe),Fe.classes.length&&(Be["class"]=Fe.classes.sort().join(" "))}function pe(Fe){switch(Fe.name){case"a":if(!(Fe.children.length||Fe.attributes.name||Fe.attributes.id))return!1;break;case"img":if(!Fe.attributes.src)return!1;}return!0}function he(Fe){if(!Fe)return!1;if(!0===Fe)return!0;var Be=ue(Fe);return function(Pe){return Pe in Fe||Be&&Pe.match(Be)}}function fe(){return new CKEDITOR.htmlParser.element("br")}function be(Fe){return Fe.type==CKEDITOR.NODE_ELEMENT&&("br"==Fe.name||Ce.$block[Fe.name])}function _e(Fe,Be,Pe){var Me=Fe.name;if(Ce.$empty[Me]||!Fe.children.length)"hr"==Me&&"br"==Be?Fe.replaceWith(fe()):(Fe.parent&&Pe.push({check:"it",el:Fe.parent}),Fe.remove());else if(!(Ce.$block[Me]||"tr"==Me))Me in{style:1,script:1}?Fe.remove():(Fe.parent&&Pe.push({check:"it",el:Fe.parent}),Fe.replaceWithChildren());else if("br"==Be)Fe.previous&&!be(Fe.previous)&&(Be=fe(),Be.insertBefore(Fe)),Fe.next&&!be(Fe.next)&&(Be=fe(),Be.insertAfter(Fe)),Fe.replaceWithChildren();else{var Me=Fe.children,$e;b:{$e=Ce[Be];for(var He=0,qe=Me.length,ze;He<qe;++He)if(ze=Me[He],ze.type==CKEDITOR.NODE_ELEMENT&&!$e[ze.name]){$e=!1;break b}$e=!0}if($e)Fe.name=Be,Fe.attributes={},Pe.push({check:"parent-down",el:Fe});else{$e=Fe.parent;for(var He=$e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==$e.name,qe=Me.length,Ue,je;0<qe;)ze=Me[--qe],He&&(ze.type==CKEDITOR.NODE_TEXT||ze.type==CKEDITOR.NODE_ELEMENT&&Ce.$inline[ze.name])?(Ue||(Ue=new CKEDITOR.htmlParser.element(Be),Ue.insertAfter(Fe),Pe.push({check:"parent-down",el:Ue})),Ue.add(ze,0)):(Ue=null,je=Ce[$e.name]||Ce.span,ze.insertAfter(Fe),$e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||ze.type!=CKEDITOR.NODE_ELEMENT||je[ze.name]||Pe.push({check:"el-up",el:ze}));Fe.remove()}}}function Ee(Fe,Be,Pe){var Me,$e;for(Me=0;Me<Pe.length;++Me)if($e=Pe[Me],(!$e.check||Fe.check($e.check,!1))&&(!$e.left||$e.left(Be))){$e.right(Be,Le);break}}function ye(Fe,Be){var Pe=Be.getDefinition(),Me=Pe.attributes,$e=Pe.styles,He,qe,ze,Ue;if(Fe.name!=Pe.element)return!1;for(He in Me)if("class"==He){for(Pe=Me[He].split(/\s+/),ze=Fe.classes.join("|");Ue=Pe.pop();)if(-1==ze.indexOf(Ue))return!1;}else if(Fe.attributes[He]!=Me[He])return!1;for(qe in $e)if(Fe.styles[qe]!=$e[qe])return!1;return!0}function ke(Fe,Be){var Pe,Me;return"string"==typeof Fe?Pe=Fe:Fe instanceof CKEDITOR.style?Me=Fe:(Pe=Fe[0],Me=Fe[1]),[{element:Pe,left:Me,right:function($e,He){He.transform($e,Be)}}]}function Te(Fe){return function(Be){return ye(Be,Fe)}}function ve(Fe){return function(Be,Pe){Pe[Fe](Be)}}var Ce=CKEDITOR.dtd,Se=CKEDITOR.tools.copy,Ne=CKEDITOR.tools.trim,xe=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(Fe,Be){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var Pe=this.editor=Fe instanceof CKEDITOR.editor?Fe:null;if(Pe&&!Be){this.customConfig=!0;var Me=Pe.config.allowedContent;!0===Me?this.disabled=!0:(Me||(this.customConfig=!1),this.allow(Me,"config",1),this.allow(Pe.config.extraAllowedContent,"extra",1),this.allow(xe[Pe.enterMode]+" "+xe[Pe.shiftEnterMode],"default",1),this.disallow(Pe.config.disallowedContent))}else this.customConfig=!1,this.allow(Be||Fe,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(Fe,Be,Pe){if(!ne(this,Fe,Pe))return!1;var Me,$e;if("string"==typeof Fe)Fe=se(Fe);else if(Fe instanceof CKEDITOR.style){if(Fe.toAllowedContentRules)return this.allow(Fe.toAllowedContentRules(this.editor),Be,Pe);Me=Fe.getDefinition(),Fe={},Pe=Me.attributes,Fe[Me.element]=Me={styles:Me.styles,requiredStyles:Me.styles&&CKEDITOR.tools.objectKeys(Me.styles)},Pe&&(Pe=Se(Pe),Me.classes=Pe["class"]?Pe["class"].split(/\s+/):null,Me.requiredClasses=Me.classes,delete Pe["class"],Me.attributes=Pe,Me.requiredAttributes=Pe&&CKEDITOR.tools.objectKeys(Pe))}else if(CKEDITOR.tools.isArray(Fe)){for(Me=0;Me<Fe.length;++Me)$e=this.allow(Fe[Me],Be,Pe);return $e}return $(this,Fe,Be,this.allowedContent,this._.allowedRules),!0},applyTo:function(Fe,Be,Pe,Me){if(this.disabled)return!1;var $e=this,He=[],qe=this.editor&&this.editor.config.protectedSource,Ue=!1,je={doFilter:!Pe,doTransform:!0,doCallbacks:!0,toHtml:Be},ze;Fe.forEach(function(We){if(We.type==CKEDITOR.NODE_ELEMENT){if("off"==We.attributes["data-cke-filter"])return!1;if(!Be||"span"!=We.name||!~CKEDITOR.tools.objectKeys(We.attributes).join("|").indexOf("data-cke-"))if(ze=me($e,We,He,je),1&ze)Ue=!0;else if(2&ze)return!1}else if(We.type==CKEDITOR.NODE_COMMENT&&We.value.match(/^\{cke_protected\}(?!\{C\})/)){var Ge;a:{var Xe=decodeURIComponent(We.value.replace(/^\{cke_protected\}/,""));Ge=[];var Ye,Ze,Je;if(qe)for(Ze=0;Ze<qe.length;++Ze)if((Je=Xe.match(qe[Ze]))&&Je[0].length==Xe.length){Ge=!0;break a}Xe=CKEDITOR.htmlParser.fragment.fromHtml(Xe),1==Xe.children.length&&(Ye=Xe.children[0]).type==CKEDITOR.NODE_ELEMENT&&me($e,Ye,Ge,je),Ge=!Ge.length}Ge||He.push(We)}},null,!0),He.length&&(Ue=!0);var Ve;Fe=[],Me=xe[Me||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var Ke;Pe=He.pop();)Pe.type==CKEDITOR.NODE_ELEMENT?_e(Pe,Me,Fe):Pe.remove();for(;Ve=Fe.pop();)if(Pe=Ve.el,Pe.parent)switch(Ke=Ce[Pe.parent.name]||Ce.span,Ve.check){case"it":Ce.$removeEmpty[Pe.name]&&!Pe.children.length?_e(Pe,Me,Fe):pe(Pe)||_e(Pe,Me,Fe);break;case"el-up":Pe.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||Ke[Pe.name]||_e(Pe,Me,Fe);break;case"parent-down":Pe.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||Ke[Pe.name]||_e(Pe.parent,Me,Fe);}return Ue},checkFeature:function(Fe){return this.disabled||!Fe||(Fe.toFeature&&(Fe=Fe.toFeature(this.editor)),!Fe.requiredContent||this.check(Fe.requiredContent))},disable:function(){this.disabled=!0},disallow:function(Fe){return!!ne(this,Fe,!0)&&("string"==typeof Fe&&(Fe=se(Fe)),$(this,Fe,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(Fe){if(!this.disabled&&Fe){var Me=[],Be,Pe,$e;for(Be=0;Be<Fe.length&&!$e;++Be)Pe=Fe[Be],("string"==typeof Pe||Pe instanceof CKEDITOR.style)&&this.check(Pe)&&($e=Pe);if($e){for(Be=0;Be<Fe.length;++Be)Me.push(ke(Fe[Be],$e));this.addTransformations(Me)}}},addElementCallback:function(Fe){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(Fe)},addFeature:function(Fe){return this.disabled||!Fe||(Fe.toFeature&&(Fe=Fe.toFeature(this.editor)),this.allow(Fe.allowedContent,Fe.name),this.addTransformations(Fe.contentTransformations),this.addContentForms(Fe.contentForms),Fe.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(Fe.requiredContent):!0)},addTransformations:function(Fe){var Be,Pe;if(!this.disabled&&Fe){var Me=this._.transformations,$e;for($e=0;$e<Fe.length;++$e){Be=Fe[$e];var He=void 0,qe=void 0,ze=void 0,Ue=void 0,je=void 0,Ve=void 0;for(Pe=[],qe=0;qe<Be.length;++qe)ze=Be[qe],"string"==typeof ze?(ze=ze.split(/\s*:\s*/),Ue=ze[0],je=null,Ve=ze[1]):(Ue=ze.check,je=ze.left,Ve=ze.right),He||(He=ze,He=He.element?He.element:Ue?Ue.match(/^([a-z0-9]+)/i)[0]:He.left.getDefinition().element),je instanceof CKEDITOR.style&&(je=Te(je)),Pe.push({check:Ue==He?null:Ue,left:je,right:"string"==typeof Ve?ve(Ve):Ve});Be=He,Me[Be]||(Me[Be]=[]),Me[Be].push(Pe)}}},check:function(Fe,Be,Pe){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(Fe)){for(var Me=Fe.length;Me--;)if(this.check(Fe[Me],Be,Pe))return!0;return!1}var $e,He;if("string"==typeof Fe){if(He=Fe+"<"+(!1===Be?"0":"1")+(Pe?"1":"0")+">",He in this._.cachedChecks)return this._.cachedChecks[He];$e=se(Fe).$1;var qe=$e.styles,Me=$e.classes;$e.name=$e.elements,$e.classes=Me=Me?Me.split(/\s*,\s*/):[],$e.styles=re(qe),$e.attributes=re($e.attributes),$e.children=[],Me.length&&($e.attributes["class"]=Me.join(" ")),qe&&($e.attributes.style=CKEDITOR.tools.writeCssText($e.styles))}else $e=Fe.getDefinition(),qe=$e.styles,Me=$e.attributes||{},qe&&!CKEDITOR.tools.isEmpty(qe)?(qe=Se(qe),Me.style=CKEDITOR.tools.writeCssText(qe,!0)):qe={},$e={name:$e.element,attributes:Me,classes:Me["class"]?Me["class"].split(/\s+/):[],styles:qe,children:[]};var qe=CKEDITOR.tools.clone($e),ze=[],Ue;if(!1!==Be&&(Ue=this._.transformations[$e.name])){for(Me=0;Me<Ue.length;++Me)Ee(this,$e,Ue[Me]);ge($e)}return me(this,qe,ze,{doFilter:!0,doTransform:!1!==Be,skipRequired:!Pe,skipFinalValidation:!Pe}),0<ze.length?Pe=!1:((Be=$e.attributes["class"])&&($e.attributes["class"]=$e.attributes["class"].split(" ").sort().join(" ")),Pe=CKEDITOR.tools.objectCompare($e.attributes,qe.attributes,!0),Be&&($e.attributes["class"]=Be)),"string"==typeof Fe&&(this._.cachedChecks[He]=Pe),Pe},getAllowedEnterMode:function(){var Fe=["p","div","br"],Be={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(Pe,Me){var $e=Fe.slice(),He;if(this.check(xe[Pe]))return Pe;for(Me||($e=$e.reverse());He=$e.pop();)if(this.check(He))return Be[He];return CKEDITOR.ENTER_BR}}(),clone:function(){var Fe=new CKEDITOR.filter,Be=CKEDITOR.tools.clone;return Fe.allowedContent=Be(this.allowedContent),Fe._.allowedRules=Be(this._.allowedRules),Fe.disallowedContent=Be(this.disallowedContent),Fe._.disallowedRules=Be(this._.disallowedRules),Fe._.transformations=Be(this._.transformations),Fe.disabled=this.disabled,Fe.editor=this.editor,Fe},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var we={styles:1,attributes:1,classes:1},Ie={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},Oe=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,Ae={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},De=/^cke:(object|embed|param)$/,Re=/^(object|embed|param)$/,Le;Le=CKEDITOR.filter.transformationsTools={sizeToStyle:function(Fe){this.lengthToStyle(Fe,"width"),this.lengthToStyle(Fe,"height")},sizeToAttribute:function(Fe){this.lengthToAttribute(Fe,"width"),this.lengthToAttribute(Fe,"height")},lengthToStyle:function(Fe,Be,Pe){if(Pe=Pe||Be,!(Pe in Fe.styles)){var Me=Fe.attributes[Be];Me&&(/^\d+$/.test(Me)&&(Me+="px"),Fe.styles[Pe]=Me)}delete Fe.attributes[Be]},lengthToAttribute:function(Fe,Be,Pe){if(Pe=Pe||Be,!(Pe in Fe.attributes)){var Me=Fe.styles[Be],$e=Me&&Me.match(/^(\d+)(?:\.\d*)?px$/);$e?Fe.attributes[Pe]=$e[1]:"cke-test"==Me&&(Fe.attributes[Pe]="cke-test")}delete Fe.styles[Be]},alignmentToStyle:function(Fe){if(!("float"in Fe.styles)){var Be=Fe.attributes.align;("left"==Be||"right"==Be)&&(Fe.styles.float=Be)}delete Fe.attributes.align},alignmentToAttribute:function(Fe){if(!("align"in Fe.attributes)){var Be=Fe.styles.float;("left"==Be||"right"==Be)&&(Fe.attributes.align=Be)}delete Fe.styles.float},splitBorderShorthand:function(Fe){if(Fe.styles.border){var Be=CKEDITOR.tools.style.parse.border(Fe.styles.border);Be.color&&(Fe.styles["border-color"]=Be.color),Be.style&&(Fe.styles["border-style"]=Be.style),Be.width&&(Fe.styles["border-width"]=Be.width),delete Fe.styles.border}},listTypeToStyle:function(Fe){if(Fe.attributes.type)switch(Fe.attributes.type){case"a":Fe.styles["list-style-type"]="lower-alpha";break;case"A":Fe.styles["list-style-type"]="upper-alpha";break;case"i":Fe.styles["list-style-type"]="lower-roman";break;case"I":Fe.styles["list-style-type"]="upper-roman";break;case"1":Fe.styles["list-style-type"]="decimal";break;default:Fe.styles["list-style-type"]=Fe.attributes.type;}},splitMarginShorthand:function(Fe){function Be(Me){Fe.styles["margin-top"]=Pe[Me[0]],Fe.styles["margin-right"]=Pe[Me[1]],Fe.styles["margin-bottom"]=Pe[Me[2]],Fe.styles["margin-left"]=Pe[Me[3]]}if(Fe.styles.margin){var Pe=Fe.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(Pe.length){case 1:Be([0,0,0,0]);break;case 2:Be([0,1,0,1]);break;case 3:Be([0,1,2,1]);break;case 4:Be([0,1,2,3]);}delete Fe.styles.margin}},matchesStyle:ye,transform:function(Fe,Be){if("string"==typeof Be)Fe.name=Be;else{var Pe=Be.getDefinition(),Me=Pe.styles,$e=Pe.attributes,He,qe,ze,Ue;for(He in Fe.name=Pe.element,$e)if("class"==He)for(Pe=Fe.classes.join("|"),ze=$e[He].split(/\s+/);Ue=ze.pop();)-1==Pe.indexOf(Ue)&&Fe.classes.push(Ue);else Fe.attributes[He]=$e[He];for(qe in Me)Fe.styles[qe]=Me[qe]}}}}(),function(){CKEDITOR.focusManager=function($){return $.focusManager?$.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:$},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function($){this._.timer&&clearTimeout(this._.timer),$&&(this.currentActive=$),this.hasFocus||this._.locked||(($=CKEDITOR.currentInstance)&&$.focusManager.blur(1),this.hasFocus=!0,($=this._.editor.container)&&$.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function($){function j(){if(this.hasFocus){this.hasFocus=!1;var te=this._.editor.container;te&&te.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var ee=CKEDITOR.focusManager._.blurDelay;$||!ee?j.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,j.call(this)},ee,this)}},add:function($,j){var ee=$.getCustomData("focusmanager");if(!ee||ee!=this){ee&&ee.remove($);var ee="focus",te="blur";j&&(CKEDITOR.env.ie?(ee="focusin",te="focusout"):CKEDITOR.event.useCapture=1);var oe={blur:function(){$.equals(this.currentActive)&&this.blur()},focus:function(){this.focus($)}};$.on(ee,oe.focus,this),$.on(te,oe.blur,this),j&&(CKEDITOR.event.useCapture=0),$.setCustomData("focusmanager",this),$.setCustomData("focusmanager_handlers",oe)}},remove:function($){$.removeCustomData("focusmanager");var j=$.removeCustomData("focusmanager_handlers");$.removeListener("blur",j.blur),$.removeListener("focus",j.focus)}}}(),CKEDITOR.keystrokeHandler=function($){return $.keystrokeHandler?$.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:$},this)},function(){var j=function(te){te=te.data;var oe=te.getKeystroke(),ne=this.keystrokes[oe],ae=this._.editor;return $=!1===ae.fire("key",{keyCode:oe,domEvent:te}),$||(ne&&($=!1!==ae.execCommand(ne,{from:"keystrokeHandler"})),$||($=!!this.blockedKeystrokes[oe])),$&&te.preventDefault(!0),!$},ee=function(te){$&&($=!1,te.data.preventDefault(!0))},$;CKEDITOR.keystrokeHandler.prototype={attach:function(te){te.on("keydown",j,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&te.on("keypress",ee,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function($,j,ee){$&&CKEDITOR.lang.languages[$]||($=this.detect(j,$));var te=this;j=function(){te[$].dir=te.rtl[$]?"rtl":"ltr",ee($,te[$])},this[$]?j():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+$+".js"),j,this)},detect:function($,j){var ee=this.languages;j=j||navigator.userLanguage||navigator.language||$;var te=j.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),oe=te[1],te=te[2];return ee[oe+"-"+te]?oe=oe+"-"+te:ee[oe]||(oe=null),CKEDITOR.lang.detect=oe?function(){return oe}:function(ne){return ne},oe||$}}}(),CKEDITOR.scriptLoader=function(){var $={},j={};return{load:function(ee,te,oe,ne){var ae="string"==typeof ee;ae&&(ee=[ee]),oe||(oe=CKEDITOR);var ie=ee.length,le=[],re=[],se=function(ge){te&&(ae?te.call(oe,ge):te.call(oe,le,re))};if(0===ie)se(!0);else{var de=function(ge,pe){(pe?le:re).push(ge),0>=--ie&&(ne&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),se(pe))},ce=function(ge,pe){$[ge]=1;var he=j[ge];delete j[ge];for(var fe=0;fe<he.length;fe++)he[fe](ge,pe)},me=function(ge){if($[ge])de(ge,!0);else{var pe=j[ge]||(j[ge]=[]);if(pe.push(de),!(1<pe.length)){var he=new CKEDITOR.dom.element("script");he.setAttributes({type:"text/javascript",src:ge}),te&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?he.$.onreadystatechange=function(){("loaded"==he.$.readyState||"complete"==he.$.readyState)&&(he.$.onreadystatechange=null,ce(ge,!0))}:(he.$.onload=function(){setTimeout(function(){he.$.onload=null,he.$.onerror=null,ce(ge,!0)},0)},he.$.onerror=function(){he.$.onload=null,he.$.onerror=null,ce(ge,!1)})),he.appendTo(CKEDITOR.document.getHead())}}};ne&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var ue=0;ue<ie;ue++)me(ee[ue])}},queue:function(){function ee(){var oe;(oe=te[0])&&this.load(oe.scriptUrl,oe.callback,CKEDITOR,0)}var te=[];return function(oe,ne){var ae=this;te.push({scriptUrl:oe,callback:function(){ne&&ne.apply(this,arguments),te.shift(),ee.call(ae)}}),1==te.length&&ee.call(this)}}()}}(),CKEDITOR.resourceManager=function($,j){this.basePath=$,this.fileName=j,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function($,j){if(this.registered[$])throw Error("[CKEDITOR.resourceManager.add] The resource name \""+$+"\" is already registered.");var ee=this.registered[$]=j||{};return ee.name=$,ee.path=this.getPath($),CKEDITOR.fire($+CKEDITOR.tools.capitalize(this.fileName)+"Ready",ee),this.get($)},get:function($){return this.registered[$]||null},getPath:function($){var j=this.externals[$];return CKEDITOR.getUrl(j&&j.dir||this.basePath+$+"/")},getFilePath:function($){var j=this.externals[$];return CKEDITOR.getUrl(this.getPath($)+(j?j.file:this.fileName+".js"))},addExternal:function($,j,ee){$=$.split(",");for(var te=0,oe;te<$.length;te++)oe=$[te],ee||(j=j.replace(/[^\/]+$/,function(ne){return ee=ne,""})),this.externals[oe]={dir:j,file:ee||this.fileName+".js"}},load:function($,j,ee){CKEDITOR.tools.isArray($)||($=$?[$]:[]);for(var te=this.loaded,oe=this.registered,ne=[],ae={},ie={},le=0,re;le<$.length;le++)if(re=$[le],re)if(te[re]||oe[re])ie[re]=this.get(re);else{var se=this.getFilePath(re);ne.push(se),se in ae||(ae[se]=[]),ae[se].push(re)}CKEDITOR.scriptLoader.load(ne,function(de,ce){if(ce.length)throw Error("[CKEDITOR.resourceManager.load] Resource name \""+ae[ce[0]].join(",")+"\" was not found at \""+ce[0]+"\".");for(var me=0;me<de.length;me++)for(var ue=ae[de[me]],ge=0,pe;ge<ue.length;ge++)pe=ue[ge],ie[pe]=this.get(pe),te[pe]=1;j.call(ee,ie)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function($){var j={};return function(ee,te,oe){var ne={},ae=function(ie){$.call(this,ie,function(le){CKEDITOR.tools.extend(ne,le);var re=[],se;for(se in le){var de=le[se],ce=de&&de.requires;if(!j[se]){if(de.icons)for(var me=de.icons.split(","),ue=me.length;ue--;)CKEDITOR.skin.addIcon(me[ue],de.path+"icons/"+(CKEDITOR.env.hidpi&&de.hidpi?"hidpi/":"")+me[ue]+".png");j[se]=1}if(ce)for(ce.split&&(ce=ce.split(",")),de=0;de<ce.length;de++)ne[ce[de]]||re.push(ce[de])}if(re.length)ae.call(this,re);else{for(se in ne)de=ne[se],de.onLoad&&!de.onLoad._called&&(!1===de.onLoad()&&delete ne[se],de.onLoad._called=1);te&&te.call(oe||window,ne)}},this)};ae.call(this,ee)}}),CKEDITOR.plugins.setLang=function($,j,ee){var te=this.get($);$=te.langEntries||(te.langEntries={}),te=te.lang||(te.lang=[]),te.split&&(te=te.split(",")),-1==CKEDITOR.tools.indexOf(te,j)&&te.push(j),$[j]=ee},CKEDITOR.ui=function($){return $.ui?$.ui:(this.items={},this.instances={},this.editor=$,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function($,j,ee){ee.name=$.toLowerCase();var te=this.items[$]={type:j,command:ee.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(te,ee)},get:function($){return this.instances[$]},create:function($){var j=this.items[$],ee=j&&this._.handlers[j.type],te=j&&j.command&&this.editor.getCommand(j.command),ee=ee&&ee.create.apply(this,j.args);return this.instances[$]=ee,te&&te.uiItems.push(ee),ee&&!ee.type&&(ee.type=j.type),ee},addHandler:function($,j){this._.handlers[$]=j},space:function($){return CKEDITOR.document.getById(this.spaceId($))},spaceId:function($){return this.editor.id+"_"+$}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function $(pe,he,fe){if(CKEDITOR.event.call(this),pe=pe&&CKEDITOR.tools.clone(pe),void 0!==he){if(!(he instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!fe)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&fe==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!ee(he,fe))throw Error("The specified element mode is not supported on element: \""+he.getName()+"\".");this.element=he,this.elementMode=fe,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(he.getId()||he.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||j(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",te),this.on("selectionChange",function(be){ne(this,be.data.path)}),this.on("activeFilterChange",function(){ne(this,this.elementPath(),!0)}),this.on("mode",te),this.on("instanceReady",function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var be=this.createRange();be.selectNodeContents(this.editable()),be.shrink(CKEDITOR.SHRINK_ELEMENT,!0),be.collapse(),this.getSelection().selectRanges([be])}this.focus()}}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){"destroyed"===this.status?CKEDITOR.warn("editor-incorrect-destroy"):ie(this,pe)},0,this)}function j(){do var pe="editor"+ ++ue;while(CKEDITOR.instances[pe]);return pe}function ee(pe,he){return he==CKEDITOR.ELEMENT_MODE_INLINE?pe.is(CKEDITOR.dtd.$editable)||pe.is("textarea"):he==CKEDITOR.ELEMENT_MODE_REPLACE?!pe.is(CKEDITOR.dtd.$nonBodyContent):1}function te(){var pe=this.commands,he;for(he in pe)oe(this,pe[he])}function oe(pe,he){he[he.startDisabled?"disable":pe.readOnly&&!he.readOnly?"disable":he.modes[pe.mode]?"enable":"disable"]()}function ne(pe,he,fe){if(he){var Ee=pe.commands,be,_e;for(_e in Ee)be=Ee[_e],(fe||be.contextSensitive)&&be.refresh(pe,he)}}function ae(pe){var he=pe.config.customConfig;if(!he)return!1;var he=CKEDITOR.getUrl(he),fe=ge[he]||(ge[he]={});return fe.fn?(fe.fn.call(pe,pe.config),CKEDITOR.getUrl(pe.config.customConfig)!=he&&ae(pe)||pe.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(he,function(){fe.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},ae(pe)}),!0}function ie(pe,he){pe.on("customConfigLoaded",function(){if(he){if(he.on)for(var fe in he.on)pe.on(fe,he.on[fe]);CKEDITOR.tools.extend(pe.config,he,!0),delete pe.config.on}fe=pe.config,pe.readOnly=!!fe.readOnly||(pe.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?pe.element.is("textarea")?pe.element.hasAttribute("disabled")||pe.element.hasAttribute("readonly"):pe.element.isReadOnly():pe.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(pe.element.hasAttribute("disabled")||pe.element.hasAttribute("readonly"))),pe.blockless=pe.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(pe.element.is("textarea")||CKEDITOR.dtd[pe.element.getName()].p),pe.tabIndex=fe.tabIndex||pe.element&&pe.element.getAttribute("tabindex")||0,pe.activeEnterMode=pe.enterMode=pe.blockless?CKEDITOR.ENTER_BR:fe.enterMode,pe.activeShiftEnterMode=pe.shiftEnterMode=pe.blockless?CKEDITOR.ENTER_BR:fe.shiftEnterMode,fe.skin&&(CKEDITOR.skinName=fe.skin),pe.fireOnce("configLoaded"),pe.dataProcessor=new CKEDITOR.htmlDataProcessor(pe),pe.filter=pe.activeFilter=new CKEDITOR.filter(pe),le(pe)}),he&&null!=he.customConfig&&(pe.config.customConfig=he.customConfig),ae(pe)||pe.fireOnce("customConfigLoaded")}function le(pe){CKEDITOR.skin.loadPart("editor",function(){re(pe)})}function re(pe){CKEDITOR.lang.load(pe.config.language,pe.config.defaultLanguage,function(he,fe){var be=pe.config.title;pe.langCode=he,pe.lang=CKEDITOR.tools.prototypedCopy(fe),pe.title="string"==typeof be||!1===be?be:[pe.lang.editor,pe.name].join(", "),pe.config.contentsLangDirection||(pe.config.contentsLangDirection=pe.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?pe.element.getDirection(1):pe.lang.dir),pe.fire("langLoaded"),se(pe)})}function se(pe){pe.getStylesSet(function(he){pe.once("loaded",function(){pe.fire("stylesSet",{styles:he})},null,null,1),de(pe)})}function de(pe){function he(Te){return Te?(CKEDITOR.tools.isArray(Te)&&(Te=Te.join(",")),Te.replace(/\s/g,"")):""}var fe=pe.config,be=he(fe.plugins),_e=he(fe.extraPlugins),Ee=he(fe.removePlugins);if(_e)var ye=new RegExp("(?:^|,)(?:"+_e.replace(/,/g,"|")+")(?=,|$)","g"),be=be.replace(ye,""),be=be+(","+_e);if(Ee)var ke=new RegExp("(?:^|,)(?:"+Ee.replace(/,/g,"|")+")(?=,|$)","g"),be=be.replace(ke,"");CKEDITOR.env.air&&(be+=",adobeair"),CKEDITOR.plugins.load(be.split(","),function(Te){var ve=[],Ce=[],Se=[];for(var Ne in pe.plugins=CKEDITOR.tools.extend({},pe.plugins,Te),Te){var xe=Te[Ne],we=xe.lang,Ie=null,Oe=xe.requires,Ae;if(CKEDITOR.tools.isArray(Oe)&&(Oe=Oe.join(",")),Oe&&(Ae=Oe.match(ke)))for(;Oe=Ae.pop();)CKEDITOR.error("editor-plugin-required",{plugin:Oe.replace(",",""),requiredBy:Ne});we&&!pe.lang[Ne]&&(we.split&&(we=we.split(",")),0<=CKEDITOR.tools.indexOf(we,pe.langCode)?Ie=pe.langCode:(Ie=pe.langCode.replace(/-.*/,""),Ie=Ie!=pe.langCode&&0<=CKEDITOR.tools.indexOf(we,Ie)?Ie:0<=CKEDITOR.tools.indexOf(we,"en")?"en":we[0]),xe.langEntries&&xe.langEntries[Ie]?(pe.lang[Ne]=xe.langEntries[Ie],Ie=null):Se.push(CKEDITOR.getUrl(xe.path+"lang/"+Ie+".js"))),Ce.push(Ie),ve.push(xe)}CKEDITOR.scriptLoader.load(Se,function(){for(var De=["beforeInit","init","afterInit"],Re=0;Re<De.length;Re++)for(var Le=0,Fe;Le<ve.length;Le++)Fe=ve[Le],0===Re&&Ce[Le]&&Fe.lang&&Fe.langEntries&&(pe.lang[Fe.name]=Fe.langEntries[Ce[Le]]),Fe[De[Re]]&&Fe[De[Re]](pe);for(pe.fireOnce("pluginsLoaded"),fe.keystrokes&&pe.setKeystroke(pe.config.keystrokes),Le=0;Le<pe.config.blockedKeystrokes.length;Le++)pe.keystrokeHandler.blockedKeystrokes[pe.config.blockedKeystrokes[Le]]=1;pe.status="loaded",pe.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,pe)})})}function ce(){var pe=this.element;if(pe&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var he=this.getData();return this.config.htmlEncodeOutput&&(he=CKEDITOR.tools.htmlEncode(he)),pe.is("textarea")?pe.setValue(he):pe.setHtml(he),!0}return!1}function me(pe,he){function fe(Se){var Ne=Se.startContainer,xe=Se.endContainer;return Ne.is&&(Ne.is("tr")||Ne.is("td")&&Ne.equals(xe)&&Se.endOffset===Ne.getChildCount())}function be(Se){var Ne=Se.startContainer;return Ne.is("tr")?Se.cloneContents():Ne.clone(!0)}for(var _e=new CKEDITOR.dom.documentFragment,Te=0,Ee,ye,ke;Te<pe.length;Te++){var ve=pe[Te],Ce=ve.startContainer.getAscendant("tr",!0);fe(ve)?(Ee||(Ee=Ce.getAscendant("table").clone(),Ee.append(Ce.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),_e.append(Ee),Ee=Ee.findOne("thead, tbody, tfoot")),ye&&ye.equals(Ce)||(ye=Ce,ke=Ce.clone(),Ee.append(ke)),ke.append(be(ve))):_e.append(ve.cloneContents())}return Ee?_e:he.getHtmlFromRange(pe[0])}$.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=$;var ue=0,ge={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(pe,he){for(var fe=0,be;fe<he.length;fe++)if(be=he[fe],this[be])return CKEDITOR.warn("editor-plugin-conflict",{plugin:pe,replacedWith:be}),!0;return!1}},addCommand:function(pe,he){he.name=pe.toLowerCase();var fe=he instanceof CKEDITOR.command?he:new CKEDITOR.command(this,he);return this.mode&&oe(this,fe),this.commands[pe]=fe},_attachToForm:function(){function pe(Ee){fe.updateElement(),fe._.required&&!be.getValue()&&!1===fe.fire("required")&&Ee.data.preventDefault()}var fe=this,be=fe.element,_e=new CKEDITOR.dom.element(be.$.form);be.is("textarea")&&_e&&(_e.on("submit",pe),function(Ee){return!!(Ee&&Ee.call&&Ee.apply)}(_e.$.submit)&&(_e.$.submit=CKEDITOR.tools.override(_e.$.submit,function(Ee){return function(){pe(),Ee.apply?Ee.apply(this):Ee()}})),fe.on("destroy",function(){_e.removeListener("submit",pe)}))},destroy:function(pe){var he=CKEDITOR.filter.instances,fe=this;this.fire("beforeDestroy"),pe||ce.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(he),function(be){be=he[be],fe===be.editor&&be.destroy()}),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(pe){if(!pe){if(pe=this.getSelection(),!pe)return null;pe=pe.getStartElement()}return pe?new CKEDITOR.dom.elementPath(pe,this.editable()):null},createRange:function(){var pe=this.editable();return pe?new CKEDITOR.dom.range(pe):null},execCommand:function(pe,he){var fe=this.getCommand(pe),be={name:pe,commandData:he||{},command:fe};return fe&&fe.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire("beforeCommandExec",be)&&(be.returnValue=fe.exec(be.commandData),!fe.async&&!1!==this.fire("afterCommandExec",be))&&be.returnValue},getCommand:function(pe){return this.commands[pe]},getData:function(pe){pe||this.fire("beforeGetData");var he=this._.data;return"string"!=typeof he&&(he=(he=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?he.is("textarea")?he.getValue():he.getHtml():""),he={dataValue:he},pe||this.fire("getData",he),he.dataValue},getSnapshot:function(){var pe=this.fire("getSnapshot");return"string"!=typeof pe&&(pe=(pe=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?pe.is("textarea")?pe.getValue():pe.getHtml():""),pe},loadSnapshot:function(pe){this.fire("loadSnapshot",pe)},setData:function(pe,he,fe){var be=!0,_e=he;he&&"object"==typeof he&&(fe=he.internal,_e=he.callback,be=!he.noSnapshot),!fe&&be&&this.fire("saveSnapshot"),(_e||!fe)&&this.once("dataReady",function(Ee){!fe&&be&&this.fire("saveSnapshot"),_e&&_e.call(Ee.editor)}),pe={dataValue:pe},fe||this.fire("setData",pe),this._.data=pe.dataValue,fe||this.fire("afterSetData",pe)},setReadOnly:function(pe){pe=null==pe||pe,this.readOnly!=pe&&(this.readOnly=pe,this.keystrokeHandler.blockedKeystrokes[8]=+pe,this.editable().setReadOnly(pe),this.fire("readOnly"))},insertHtml:function(pe,he,fe){this.fire("insertHtml",{dataValue:pe,mode:he,range:fe})},insertText:function(pe){this.fire("insertText",pe)},insertElement:function(pe){this.fire("insertElement",pe)},getSelectedHtml:function(pe){var he=this.editable(),fe=this.getSelection(),fe=fe&&fe.getRanges();return he&&fe&&0!==fe.length?(he=me(fe,he),pe?he.getHtml():he):null},extractSelectedHtml:function(pe,he){var fe=this.editable(),be=this.getSelection().getRanges(),_e=new CKEDITOR.dom.documentFragment,Ee;if(!fe||0===be.length)return null;for(Ee=0;Ee<be.length;Ee++)_e.append(fe.extractHtmlFromRange(be[Ee],he));return he||this.getSelection().selectRanges([be[0]]),pe?_e.getHtml():_e},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return ce.call(this)},setKeystroke:function(){for(var pe=this.keystrokeHandler.keystrokes,he=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],_e=he.length,fe,be;_e--;)fe=he[_e],be=0,CKEDITOR.tools.isArray(fe)&&(be=fe[1],fe=fe[0]),be?pe[fe]=be:delete pe[fe]},getCommandKeystroke:function(pe,he){var fe="string"==typeof pe?this.getCommand(pe):pe,be=[];if(fe){var _e=CKEDITOR.tools.object.findKey(this.commands,fe),Ee=this.keystrokeHandler.keystrokes;if(fe.fakeKeystroke)be.push(fe.fakeKeystroke);else for(var ye in Ee)Ee[ye]===_e&&be.push(ye)}return he?be:be[0]||null},addFeature:function(pe){return this.filter.addFeature(pe)},setActiveFilter:function(pe){pe||(pe=this.filter),this.activeFilter!==pe&&(this.activeFilter=pe,this.fire("activeFilterChange"),pe===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(pe.getAllowedEnterMode(this.enterMode),pe.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(pe,he){pe=pe?this.blockless?CKEDITOR.ENTER_BR:pe:this.enterMode,he=he?this.blockless?CKEDITOR.ENTER_BR:he:this.shiftEnterMode,(this.activeEnterMode!=pe||this.activeShiftEnterMode!=he)&&(this.activeEnterMode=pe,this.activeShiftEnterMode=he,this.fire("activeEnterModeChange"))},showNotification:function(pe){alert(pe)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var $=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,j={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(ee){for(var ne=0,te,oe,ae;te=this._.htmlPartsRegex.exec(ee);){if(oe=te.index,oe>ne&&((ne=ee.substring(ne,oe),ae)?ae.push(ne):this.onText(ne)),ne=this._.htmlPartsRegex.lastIndex,(oe=te[1])&&(oe=oe.toLowerCase(),ae&&CKEDITOR.dtd.$cdata[oe]&&(this.onCDATA(ae.join("")),ae=null),!ae)){this.onTagClose(oe);continue}if(ae)ae.push(te[0]);else if(!(oe=te[3]))(oe=te[2])&&this.onComment(oe);else if(oe=oe.toLowerCase(),!/="/.test(oe)){var ie={},re=te[4],le;if(te=!!te[5],re)for(;le=$.exec(re);){var se=le[1].toLowerCase();le=le[2]||le[3]||le[4]||"",ie[se]=!le&&j[se]?se:CKEDITOR.tools.htmlDecodeAttr(le)}this.onTagOpen(oe,ie,te),!ae&&CKEDITOR.dtd.$cdata[oe]&&(ae=[])}}ee.length>ne&&this.onText(ee.substring(ne,ee.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function($){this._.output.push("<",$)},openTagClose:function($,j){j?this._.output.push(" />"):this._.output.push(">")},attribute:function($,j){"string"==typeof j&&(j=CKEDITOR.tools.htmlEncodeAttr(j)),this._.output.push(" ",$,"=\"",j,"\"")},closeTag:function($){this._.output.push("</",$,">")},text:function($){this._.output.push($)},comment:function($){this._.output.push("<!--",$,"-->")},write:function($){this._.output.push($)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function($){var j=this._.output.join("");return $&&this.reset(),j}}}),"use strict",function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var $=this.parent.children,j=CKEDITOR.tools.indexOf($,this),ee=this.previous,te=this.next;ee&&(ee.next=te),te&&(te.previous=ee),$.splice(j,1),this.parent=null},replaceWith:function($){var j=this.parent.children,ee=CKEDITOR.tools.indexOf(j,this),te=$.previous=this.previous,oe=$.next=this.next;te&&(te.next=$),oe&&(oe.previous=$),j[ee]=$,$.parent=this.parent,this.parent=null},insertAfter:function($){var j=$.parent.children,ee=CKEDITOR.tools.indexOf(j,$),te=$.next;j.splice(ee+1,0,this),this.next=$.next,this.previous=$,$.next=this,te&&(te.previous=this),this.parent=$.parent},insertBefore:function($){var j=$.parent.children,ee=CKEDITOR.tools.indexOf(j,$);j.splice(ee,0,this),this.next=$,(this.previous=$.previous)&&($.previous.next=this),$.previous=this,this.parent=$.parent},getAscendant:function($){for(var j="function"==typeof $?$:"string"==typeof $?function(te){return te.name==$}:function(te){return(te.name in $)},ee=this.parent;ee&&ee.type==CKEDITOR.NODE_ELEMENT;){if(j(ee))return ee;ee=ee.parent}return null},wrapWith:function($){return this.replaceWith($),$.add(this),$},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function($){return $||{}}}}(),"use strict",CKEDITOR.htmlParser.comment=function($){this.value=$,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function($,j){var ee=this.value;return(ee=$.onComment(j,ee,this))?"string"==typeof ee?(this.value=ee,!0):(this.replaceWith(ee),!1):(this.remove(),!1)},writeHtml:function($,j){j&&this.filter(j),$.comment(this.value)}}),"use strict",function(){CKEDITOR.htmlParser.text=function($){this.value=$,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function($,j){if(!(this.value=$.onText(j,this.value,this)))return this.remove(),!1},writeHtml:function($,j){j&&this.filter(j),$.text(this.value)}})}(),"use strict",function(){CKEDITOR.htmlParser.cdata=function($){this.value=$},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function($){$.write(this.value)}})}(),"use strict",CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function $(ne){return!ne.attributes["data-cke-survive"]&&("a"==ne.name&&ne.attributes.href||CKEDITOR.dtd.$removeEmpty[ne.name])}var j=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),ee={ol:1,ul:1},te=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),oe={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(ne,ae,ie){function le(Ee){var ye;if(0<pe.length)for(var ke=0;ke<pe.length;ke++){var Te=pe[ke],ve=Te.name,Ce=CKEDITOR.dtd[ve],Se=fe.name&&CKEDITOR.dtd[fe.name];Se&&!Se[ve]||Ee&&Ce&&!Ce[Ee]&&CKEDITOR.dtd[Ee]?ve==fe.name&&(de(fe,fe.parent,1),ke--):(ye||(re(),ye=1),Te=Te.clone(),Te.parent=fe,fe=Te,pe.splice(ke,1),ke--)}}function re(){for(;he.length;)de(he.shift(),fe)}function se(Ee){if(Ee._.isBlockLike&&"pre"!=Ee.name&&"textarea"!=Ee.name){var ye=Ee.children.length,ke=Ee.children[ye-1],Te;ke&&ke.type==CKEDITOR.NODE_TEXT&&((Te=CKEDITOR.tools.rtrim(ke.value))?ke.value=Te:Ee.children.length=ye-1)}}function de(Ee,ye,ke){ye=ye||fe||ge;var Te=fe;void 0===Ee.previous&&(ce(ye,Ee)&&(fe=ye,ue.onTagOpen(ie,{}),Ee.returnPoint=ye=fe),se(Ee),$(Ee)&&!Ee.children.length||ye.add(Ee),"pre"==Ee.name&&(_e=!1),"textarea"==Ee.name&&(be=!1)),Ee.returnPoint?(fe=Ee.returnPoint,delete Ee.returnPoint):fe=ke?ye:Te}function ce(Ee,ye){if((Ee==ge||"body"==Ee.name)&&ie&&(!Ee.name||CKEDITOR.dtd[Ee.name][ie])){var ke,Te;return(ke=ye.attributes&&(Te=ye.attributes["data-cke-real-element-type"])?Te:ye.name)&&ke in CKEDITOR.dtd.$inline&&!(ke in CKEDITOR.dtd.head)&&!ye.isOrphan||ye.type==CKEDITOR.NODE_TEXT}}function me(Ee,ye){return(Ee in CKEDITOR.dtd.$listItem||Ee in CKEDITOR.dtd.$tableContent)&&(Ee==ye||"dt"==Ee&&"dd"==ye||"dd"==Ee&&"dt"==ye)}var ue=new CKEDITOR.htmlParser,ge=ae instanceof CKEDITOR.htmlParser.element?ae:"string"==typeof ae?new CKEDITOR.htmlParser.element(ae):new CKEDITOR.htmlParser.fragment,pe=[],he=[],fe=ge,be="textarea"==ge.name,_e="pre"==ge.name;for(ue.onTagOpen=function(Ee,ye,ke,Te){if(ye=new CKEDITOR.htmlParser.element(Ee,ye),ye.isUnknown&&ke&&(ye.isEmpty=!0),ye.isOptionalClose=Te,$(ye))pe.push(ye);else{if("pre"==Ee)_e=!0;else{if("br"==Ee&&_e)return void fe.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==Ee&&(be=!0)}if("br"==Ee)he.push(ye);else{for(;Te=(ke=fe.name)?CKEDITOR.dtd[ke]||(fe._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):te,!(ye.isUnknown||fe.isUnknown||Te[Ee]);)if(fe.isOptionalClose)ue.onTagClose(ke);else if((Ee in ee)&&(ke in ee))ke=fe.children,(ke=ke[ke.length-1])&&"li"==ke.name||de(ke=new CKEDITOR.htmlParser.element("li"),fe),ye.returnPoint||(ye.returnPoint=fe),fe=ke;else if((Ee in CKEDITOR.dtd.$listItem)&&!me(Ee,ke))ue.onTagOpen("li"==Ee?"ul":"dl",{},0,1);else if((ke in j)&&!me(Ee,ke))ye.returnPoint||(ye.returnPoint=fe),fe=fe.parent;else if((ke in CKEDITOR.dtd.$inline)&&pe.unshift(fe),fe.parent)de(fe,fe.parent,1);else{ye.isOrphan=1;break}le(Ee),re(),ye.parent=fe,ye.isEmpty?de(ye):fe=ye}}},ue.onTagClose=function(Ee){for(var ye=pe.length-1;0<=ye;ye--)if(Ee==pe[ye].name)return void pe.splice(ye,1);for(var ke=[],Te=[],ve=fe;ve!=ge&&ve.name!=Ee;)ve._.isBlockLike||Te.unshift(ve),ke.push(ve),ve=ve.returnPoint||ve.parent;if(ve!=ge){for(ye=0;ye<ke.length;ye++){var Ce=ke[ye];de(Ce,Ce.parent)}fe=ve,ve._.isBlockLike&&re(),de(ve,ve.parent),ve==fe&&(fe=fe.parent),pe=pe.concat(Te)}"body"==Ee&&(ie=!1)},ue.onText=function(Ee){if(fe._.hasInlineStarted&&!he.length||_e||be||(Ee=CKEDITOR.tools.ltrim(Ee),0!==Ee.length)){var ye=fe.name,ke=ye?CKEDITOR.dtd[ye]||(fe._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):te;be||ke["#"]||!(ye in j)?(re(),le(),_e||be||(Ee=Ee.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),Ee=new CKEDITOR.htmlParser.text(Ee),ce(fe,Ee)&&this.onTagOpen(ie,{},0,1),fe.add(Ee)):(ue.onTagOpen(oe[ye]||""),ue.onText(Ee))}},ue.onCDATA=function(Ee){fe.add(new CKEDITOR.htmlParser.cdata(Ee))},ue.onComment=function(Ee){re(),le(),fe.add(new CKEDITOR.htmlParser.comment(Ee))},ue.parse(ne),re();fe!=ge;)de(fe,fe.parent,1);return se(ge),ge},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(ne,ae){isNaN(ae)&&(ae=this.children.length);var ie=0<ae?this.children[ae-1]:null;if(ie){if(ne._.isBlockLike&&ie.type==CKEDITOR.NODE_TEXT&&(ie.value=CKEDITOR.tools.rtrim(ie.value),0===ie.value.length))return this.children.pop(),void this.add(ne);ie.next=ne}ne.previous=ie,ne.parent=this,this.children.splice(ae,0,ne),this._.hasInlineStarted||(this._.hasInlineStarted=ne.type==CKEDITOR.NODE_TEXT||ne.type==CKEDITOR.NODE_ELEMENT&&!ne._.isBlockLike)},filter:function(ne,ae){ae=this.getFilterContext(ae),ne.onRoot(ae,this),this.filterChildren(ne,!1,ae)},filterChildren:function(ne,ae,ie){if(this.childrenFilteredBy!=ne.id)for(ie=this.getFilterContext(ie),ae&&!this.parent&&ne.onRoot(ie,this),this.childrenFilteredBy=ne.id,ae=0;ae<this.children.length;ae++)!1===this.children[ae].filter(ne,ie)&&ae--},writeHtml:function(ne,ae){ae&&this.filter(ae),this.writeChildrenHtml(ne)},writeChildrenHtml:function(ne,ae,ie){var le=this.getFilterContext();for(ie&&!this.parent&&ae&&ae.onRoot(le,this),ae&&this.filterChildren(ae,!1,le),ae=0,ie=this.children,le=ie.length;ae<le;ae++)ie[ae].writeHtml(ne)},forEach:function(ne,ae,ie){if(!(ie||ae&&this.type!=ae))var le=ne(this);if(!1!==le){ie=this.children;for(var re=0;re<ie.length;re++)le=ie[re],le.type==CKEDITOR.NODE_ELEMENT?le.forEach(ne,ae):ae&&le.type!=ae||ne(le)}},getFilterContext:function(ne){return ne||{}}}}(),"use strict",function(){function $(){this.rules=[]}function j(ee,te,oe,ne){var ae,ie;for(ae in te)(ie=ee[ae])||(ie=ee[ae]=new $),ie.add(te[ae],oe,ne)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(ee){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new $,this.attributeNameRules=new $,this.elementsRules={},this.attributesRules={},this.textRules=new $,this.commentRules=new $,this.rootRules=new $,ee&&this.addRules(ee,10)},proto:{addRules:function(ee,te){var oe;"number"==typeof te?oe=te:te&&"priority"in te&&(oe=te.priority),"number"!=typeof oe&&(oe=10),"object"!=typeof te&&(te={}),ee.elementNames&&this.elementNameRules.addMany(ee.elementNames,oe,te),ee.attributeNames&&this.attributeNameRules.addMany(ee.attributeNames,oe,te),ee.elements&&j(this.elementsRules,ee.elements,oe,te),ee.attributes&&j(this.attributesRules,ee.attributes,oe,te),ee.text&&this.textRules.add(ee.text,oe,te),ee.comment&&this.commentRules.add(ee.comment,oe,te),ee.root&&this.rootRules.add(ee.root,oe,te)},applyTo:function(ee){ee.filter(this)},onElementName:function(ee,te){return this.elementNameRules.execOnName(ee,te)},onAttributeName:function(ee,te){return this.attributeNameRules.execOnName(ee,te)},onText:function(ee,te,oe){return this.textRules.exec(ee,te,oe)},onComment:function(ee,te,oe){return this.commentRules.exec(ee,te,oe)},onRoot:function(ee,te){return this.rootRules.exec(ee,te)},onElement:function(ee,te){for(var oe=[this.elementsRules["^"],this.elementsRules[te.name],this.elementsRules.$],ae=0,ne;3>ae;ae++)if(ne=oe[ae]){if(ne=ne.exec(ee,te,this),!1===ne)return null;if(ne&&ne!=te)return this.onNode(ee,ne);if(te.parent&&!te.name)break}return te},onNode:function(ee,te){var oe=te.type;return oe==CKEDITOR.NODE_ELEMENT?this.onElement(ee,te):oe==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(ee,te.value)):oe==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(ee,te.value)):null},onAttribute:function(ee,te,oe,ne){return(oe=this.attributesRules[oe])?oe.exec(ee,ne,te,this):ne}}}),CKEDITOR.htmlParser.filterRulesGroup=$,$.prototype={add:function(ee,te,oe){this.rules.splice(this.findIndex(te),0,{value:ee,priority:te,options:oe})},addMany:function(ee,te,oe){for(var ne=[this.findIndex(te),0],ae=0,ie=ee.length;ae<ie;ae++)ne.push({value:ee[ae],priority:te,options:oe});this.rules.splice.apply(this.rules,ne)},findIndex:function(ee){for(var te=this.rules,oe=te.length-1;0<=oe&&ee<te[oe].priority;)oe--;return oe+1},exec:function(ee,te){var oe=te instanceof CKEDITOR.htmlParser.node||te instanceof CKEDITOR.htmlParser.fragment,ne=Array.prototype.slice.call(arguments,1),ae=this.rules,ie=ae.length,le,re,se,de;for(de=0;de<ie;de++)if(oe&&(le=te.type,re=te.name),se=ae[de],!(ee.nonEditable&&!se.options.applyToAll||ee.nestedEditable&&se.options.excludeNestedEditable)){if(se=se.value.apply(null,ne),!1===se||oe&&se&&(se.name!=re||se.type!=le))return se;null!=se&&(ne[0]=te=se)}return te},execOnName:function(ee,te){for(var oe=0,ne=this.rules,ae=ne.length,ie;te&&oe<ae;oe++)ie=ne[oe],ee.nonEditable&&!ie.options.applyToAll||ee.nestedEditable&&ie.options.excludeNestedEditable||(te=te.replace(ie.value[0],ie.value[1]));return te}}}(),function(){function $(Fe,Be){function Pe(je){return je||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("\xA0"):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function Me(je,Ve){return function(Ke){if(Ke.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var We=[],Ge=ee(Ke),Xe,Ye;if(Ge)for($e(Ge,1)&&We.push(Ge);Ge;)ne(Ge)&&(Xe=te(Ge))&&$e(Xe)&&((Ye=te(Xe))&&!ne(Ye)?We.push(Xe):(Pe(qe).insertAfter(Xe),Xe.remove())),Ge=Ge.previous;for(Ge=0;Ge<We.length;Ge++)We[Ge].remove();(We=!je||!1!==("function"==typeof Ve?Ve(Ke):Ve))&&(qe||CKEDITOR.env.needsBrFiller||Ke.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?qe||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||Ke.name in CKEDITOR.dtd.tr||Ke.name in CKEDITOR.dtd.$listItem)?(We=ee(Ke),We=!We||"form"==Ke.name&&"input"==We.name):We=!1:We=!1),We&&Ke.add(Pe(je))}}}function $e(je,Ve){if((!qe||CKEDITOR.env.needsBrFiller)&&je.type==CKEDITOR.NODE_ELEMENT&&"br"==je.name&&!je.attributes["data-cke-eol"])return!0;var Ke;return je.type==CKEDITOR.NODE_TEXT&&(Ke=je.value.match(fe))&&(Ke.index&&(new CKEDITOR.htmlParser.text(je.value.substring(0,Ke.index)).insertBefore(je),je.value=Ke[0]),!CKEDITOR.env.needsBrFiller&&qe&&(!Ve||je.parent.name in ze)||!qe&&((Ke=je.previous)&&"br"==Ke.name||!Ke||ne(Ke)))}var He={elements:{}},qe="html"==Be,ze=CKEDITOR.tools.extend({},ye),Ue;for(Ue in ze)"#"in _e[Ue]||delete ze[Ue];for(Ue in ze)He.elements[Ue]=Me(qe,Fe.config.fillEmptyBlocks);return He.root=Me(qe,!1),He.elements.br=function(je){return function(Ve){if(Ve.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var Ke=Ve.attributes;if("data-cke-bogus"in Ke||"data-cke-eol"in Ke)delete Ke["data-cke-bogus"];else{for(Ke=Ve.next;Ke&&oe(Ke);)Ke=Ke.next;var We=te(Ve);!Ke&&ne(Ve.parent)?ae(Ve.parent,Pe(je)):ne(Ke)&&We&&!ne(We)&&Pe(je).insertBefore(Ke)}}}}(qe),He}function j(Fe,Be){return Fe!=CKEDITOR.ENTER_BR&&!1!==Be&&(Fe==CKEDITOR.ENTER_DIV?"div":"p")}function ee(Fe){for(Fe=Fe.children[Fe.children.length-1];Fe&&oe(Fe);)Fe=Fe.previous;return Fe}function te(Fe){for(Fe=Fe.previous;Fe&&oe(Fe);)Fe=Fe.previous;return Fe}function oe(Fe){return Fe.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(Fe.value)||Fe.type==CKEDITOR.NODE_ELEMENT&&Fe.attributes["data-cke-bookmark"]}function ne(Fe){return Fe&&(Fe.type==CKEDITOR.NODE_ELEMENT&&Fe.name in ye||Fe.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function ae(Fe,Be){var Pe=Fe.children[Fe.children.length-1];Fe.children.push(Be),Be.parent=Fe,Pe&&(Pe.next=Be,Be.previous=Pe)}function ie(Fe){Fe=Fe.attributes,"false"!=Fe.contenteditable&&(Fe["data-cke-editable"]=Fe.contenteditable?"true":1),Fe.contenteditable="false"}function le(Fe){switch(Fe=Fe.attributes,Fe["data-cke-editable"]){case"true":Fe.contenteditable="true";break;case"1":delete Fe.contenteditable;}}function re(Fe){return Fe.replace(Se,function(Be,Pe,Me){return"<"+Pe+Me.replace(Ne,function($e,He){return xe.test(He)&&-1==Me.indexOf("data-cke-saved-"+He)?" data-cke-saved-"+$e+" data-cke-"+CKEDITOR.rnd+"-"+$e:$e})+">"})}function se(Fe,Be){return Fe.replace(Be,function(Pe,Me,$e){return 0===Pe.indexOf("<textarea")&&(Pe=Me+ge($e).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(Pe)+"</cke:encoded>"})}function de(Fe){return Fe.replace(Oe,function(Be,Pe){return decodeURIComponent(Pe)})}function ce(Fe){return Fe.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(Be){return"<!--"+be+"{C}"+encodeURIComponent(Be).replace(/--/g,"%2D%2D")+"-->"})}function me(Fe){return CKEDITOR.tools.array.reduce(Fe.split(""),function(Be,Pe){var Me=Pe.toLowerCase(),$e=Pe.toUpperCase(),He=ue(Me);return Me!==$e&&(He+="|"+ue($e)),Be+("("+He+")")},"")}function ue(Fe){var Be=Fe.charCodeAt(0);var Pe=Be.toString(16);for(var Me in Be={htmlCode:"&#"+Be+";?",hex:"&#x0*"+Pe+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[Fe]},Be)Be[Me]&&(Fe+="|"+Be[Me]);return Fe}function ge(Fe){return Fe.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(Be,Pe){return decodeURIComponent(Pe)})}function pe(Fe,Be){var Pe=Be._.dataStore;return Fe.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(Me,$e){return decodeURIComponent($e)}).replace(/\{cke_protected_(\d+)\}/g,function(Me,$e){return Pe&&Pe[$e]||""})}function he(Fe,Be){var Pe=[],Me=Be.config.protectedSource,$e=Be._.dataStore||(Be._.dataStore={id:1}),He=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,Me=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(Me);Fe=Fe.replace(/\x3c!--[\s\S]*?--\x3e/g,function(ze){return"<!--{cke_tempcomment}"+(Pe.push(ze)-1)+"-->"});for(var qe=0;qe<Me.length;qe++)Fe=Fe.replace(Me[qe],function(ze){return ze=ze.replace(He,function(Ue,je,Ve){return Pe[Ve]}),/cke_temp(comment)?/.test(ze)?ze:"<!--{cke_temp}"+(Pe.push(ze)-1)+"-->"});return Fe=Fe.replace(He,function(ze,Ue,je){return"<!--"+be+(Ue?"{C}":"")+encodeURIComponent(Pe[je]).replace(/--/g,"%2D%2D")+"-->"}),Fe=Fe.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(ze){return ze.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(Ue,je){return $e[$e.id]=decodeURIComponent(je),"{cke_protected_"+$e.id++ +"}"})}),Fe=Fe.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(ze,Ue,je,Ve){return"<"+Ue+je+">"+pe(ge(Ve),Be)+"</"+Ue+">"})}CKEDITOR.htmlDataProcessor=function(Fe){var Me=this,Be,Pe;this.editor=Fe,this.dataFilter=Be=new CKEDITOR.htmlParser.filter,this.htmlFilter=Pe=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,Be.addRules(ke),Be.addRules(Te,{applyToAll:!0}),Be.addRules($(Fe,"data"),{applyToAll:!0}),Pe.addRules(ve),Pe.addRules(Ce,{applyToAll:!0}),Pe.addRules($(Fe,"html"),{applyToAll:!0}),Fe.on("toHtml",function($e){$e=$e.data;var He=$e.dataValue,He=He.replace(Ae,""),He=he(He,Fe),He=se(He,Ie),He=re(He),He=se(He,we),He=He.replace(De,"$1cke:$2"),He=He.replace(Le,"<cke:$1$2></cke:$1>"),He=He.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),He=He.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),qe;qe=$e.context||Fe.editable().getName();var ze;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==qe&&(qe="div",He="<pre>"+He+"</pre>",ze=1),qe=Fe.document.createElement(qe),qe.setHtml("a"+He),He=qe.getHtml().substr(1),He=He.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),ze&&(He=He.replace(/^<pre>|<\/pre>$/gi,"")),He=He.replace(Re,"$1$2"),He=de(He),He=ge(He),qe=!1!==$e.fixForBody&&j($e.enterMode,Fe.config.autoParagraph),He=CKEDITOR.htmlParser.fragment.fromHtml(He,$e.context,qe),qe&&(ze=He,!ze.children.length&&CKEDITOR.dtd[ze.name][qe]&&(qe=new CKEDITOR.htmlParser.element(qe),ze.add(qe))),$e.dataValue=He},null,null,5),Fe.on("toHtml",function($e){$e.data.filter.applyTo($e.data.dataValue,!0,$e.data.dontFilter,$e.data.enterMode)&&Fe.fire("dataFiltered")},null,null,6),Fe.on("toHtml",function($e){$e.data.dataValue.filterChildren(Me.dataFilter,!0)},null,null,10),Fe.on("toHtml",function($e){$e=$e.data;var He=$e.dataValue,qe=new CKEDITOR.htmlParser.basicWriter;He.writeChildrenHtml(qe),He=qe.getHtml(!0),$e.dataValue=ce(He)},null,null,15),Fe.on("toDataFormat",function($e){var He=$e.data.dataValue;$e.data.enterMode!=CKEDITOR.ENTER_BR&&(He=He.replace(/^<br *\/?>/i,"")),$e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(He,$e.data.context,j($e.data.enterMode,Fe.config.autoParagraph))},null,null,5),Fe.on("toDataFormat",function($e){$e.data.dataValue.filterChildren(Me.htmlFilter,!0)},null,null,10),Fe.on("toDataFormat",function($e){$e.data.filter.applyTo($e.data.dataValue,!1,!0)},null,null,11),Fe.on("toDataFormat",function($e){var He=$e.data.dataValue,qe=Me.writer;qe.reset(),He.writeChildrenHtml(qe),He=qe.getHtml(!0),He=ge(He),He=pe(He,Fe),$e.data.dataValue=He},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(Fe,Be,Pe,Me){var $e=this.editor,He,qe,ze,Ue;return Be&&"object"==typeof Be?(He=Be.context,Pe=Be.fixForBody,Me=Be.dontFilter,qe=Be.filter,ze=Be.enterMode,Ue=Be.protectedWhitespaces):He=Be,He||null===He||(He=$e.editable().getName()),$e.fire("toHtml",{dataValue:Fe,context:He,fixForBody:Pe,dontFilter:Me,filter:qe||$e.filter,enterMode:ze||$e.enterMode,protectedWhitespaces:Ue}).dataValue},toDataFormat:function(Fe,Be){var Pe,Me,$e;return Be&&(Pe=Be.context,Me=Be.filter,$e=Be.enterMode),Pe||null===Pe||(Pe=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:Fe,filter:Me||this.editor.filter,context:Pe,enterMode:$e||this.editor.enterMode}).dataValue}};var fe=/(?:&nbsp;|\xa0)$/,be="{cke_protected}",_e=CKEDITOR.dtd,Ee="caption colgroup col thead tfoot tbody".split(" "),ye=CKEDITOR.tools.extend({},_e.$blockLimit,_e.$block),ke={elements:{input:ie,textarea:ie}},Te={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(Fe){if(Fe.attributes&&Fe.attributes.src){var Be=Fe.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");(0===Be.indexOf("javascript")||0===Be.indexOf("data"))&&(Fe.attributes["data-cke-pa-src"]=Fe.attributes.src,delete Fe.attributes.src)}}}},ve={elements:{embed:function(Fe){var Be=Fe.parent;if(Be&&"object"==Be.name){var Pe=Be.attributes.width,Be=Be.attributes.height;Pe&&(Fe.attributes.width=Pe),Be&&(Fe.attributes.height=Be)}},a:function(Fe){var Be=Fe.attributes;if(!(Fe.children.length||Be.name||Be.id||Fe.attributes["data-cke-saved-name"]))return!1}}},Ce={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(Fe){var Be=Fe.attributes;if(Be){if(Be["data-cke-temp"])return!1;for(var Pe=["name","href","src"],$e=0,Me;$e<Pe.length;$e++)Me="data-cke-saved-"+Pe[$e],Me in Be&&delete Be[Pe[$e]]}return Fe},table:function(Fe){Fe.children.slice(0).sort(function(Be,Pe){var Me,$e;return Be.type==CKEDITOR.NODE_ELEMENT&&Pe.type==Be.type&&(Me=CKEDITOR.tools.indexOf(Ee,Be.name),$e=CKEDITOR.tools.indexOf(Ee,Pe.name)),-1<Me&&-1<$e&&Me!=$e||(Me=Be.parent?Be.getIndex():-1,$e=Pe.parent?Pe.getIndex():-1),Me>$e?1:-1})},param:function(Fe){return Fe.children=[],Fe.isEmpty=!0,Fe},span:function(Fe){"Apple-style-span"==Fe.attributes["class"]&&delete Fe.name},html:function(Fe){delete Fe.attributes.contenteditable,delete Fe.attributes["class"]},body:function(Fe){delete Fe.attributes.spellcheck,delete Fe.attributes.contenteditable},style:function(Fe){var Be=Fe.children[0];Be&&Be.value&&(Be.value=CKEDITOR.tools.trim(Be.value)),Fe.attributes.type||(Fe.attributes.type="text/css")},title:function(Fe){var Be=Fe.children[0];Be||ae(Fe,Be=new CKEDITOR.htmlParser.text),Be.value=Fe.attributes["data-cke-title"]||""},input:le,textarea:le},attributes:{class:function(Fe){return CKEDITOR.tools.ltrim(Fe.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(Ce.attributes.style=function(Fe){return Fe.replace(/(^|;)([^\:]+)/g,function(Be){return Be.toLowerCase()})});var Se=/<(a|area|img|input|source)\b([^>]*)>/gi,Ne=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,xe=/^(href|src|name)$/i,we=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,Ie=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,Oe=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,Ae=new RegExp("("+me("<cke:encoded>")+"(.*?)"+me("</cke:encoded>")+")|("+me("<")+me("/")+"?"+me("cke:encoded>")+")","gi"),De=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,Re=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,Le=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),"use strict",CKEDITOR.htmlParser.element=function($,j){this.name=$,this.attributes=j||{},this.children=[];var ee=$||"",te=ee.match(/^cke:(.*)/);te&&(ee=te[1]),ee=!!(CKEDITOR.dtd.$nonBodyContent[ee]||CKEDITOR.dtd.$block[ee]||CKEDITOR.dtd.$listItem[ee]||CKEDITOR.dtd.$tableContent[ee]||CKEDITOR.dtd.$nonEditable[ee]||"br"==ee),this.isEmpty=!!CKEDITOR.dtd.$empty[$],this.isUnknown=!CKEDITOR.dtd[$],this._={isBlockLike:ee,hasInlineStarted:this.isEmpty||!ee}},CKEDITOR.htmlParser.cssStyle=function($){var j={};return(($ instanceof CKEDITOR.htmlParser.element?$.attributes.style:$)||"").replace(/&quot;/g,"\"").replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(ee,te,oe){"font-family"==te&&(oe=oe.replace(/["']/g,"")),j[te.toLowerCase()]=oe}),{rules:j,populate:function(ee){var te=this.toString();te&&(ee instanceof CKEDITOR.dom.element?ee.setAttribute("style",te):ee instanceof CKEDITOR.htmlParser.element?ee.attributes.style=te:ee.style=te)},toString:function(){var ee=[],te;for(te in j)j[te]&&ee.push(te,":",j[te],";");return ee.join("")}}},function(){function $(te){return function(oe){return oe.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof te?oe.name==te:oe.name in te)}}var j=function(te,oe){return te=te[0],oe=oe[0],te<oe?-1:te>oe?1:0},ee=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:ee.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(te,oe){var ne=this,ae,ie;for(oe=ne.getFilterContext(oe),ne.parent||te.onRoot(oe,ne);;){if(ae=ne.name,!(ie=te.onElementName(oe,ae)))return this.remove(),!1;if(ne.name=ie,!(ne=te.onElement(oe,ne)))return this.remove(),!1;if(ne!==this)return this.replaceWith(ne),!1;if(ne.name==ae)break;if(ne.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(ne),!1;if(!ne.name)return this.replaceWithChildren(),!1}ae=ne.attributes;var le,re;for(le in ae){for(ie=ae[le];;)if(!(re=te.onAttributeName(oe,le))){delete ae[le];break}else if(re!=le)delete ae[le],le=re;else break;re&&(!1===(ie=te.onAttribute(oe,ne,re,ie))?delete ae[re]:ae[re]=ie)}return ne.isEmpty||this.filterChildren(te,!1,oe),!0},filterChildren:ee.filterChildren,writeHtml:function(te,oe){oe&&this.filter(oe);var ne=this.name,ae=[],ie=this.attributes,le,re;for(le in te.openTag(ne,ie),ie)ae.push([le,ie[le]]);for(te.sortAttributes&&ae.sort(j),le=0,re=ae.length;le<re;le++)ie=ae[le],te.attribute(ie[0],ie[1]);te.openTagClose(ne,this.isEmpty),this.writeChildrenHtml(te),this.isEmpty||te.closeTag(ne)},writeChildrenHtml:ee.writeChildrenHtml,replaceWithChildren:function(){for(var te=this.children,oe=te.length;oe;)te[--oe].insertAfter(this);this.remove()},forEach:ee.forEach,getFirst:function(te){if(!te)return this.children.length?this.children[0]:null;"function"!=typeof te&&(te=$(te));for(var oe=0,ne=this.children.length;oe<ne;++oe)if(te(this.children[oe]))return this.children[oe];return null},getHtml:function(){var te=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(te),te.getHtml()},setHtml:function(te){te=this.children=CKEDITOR.htmlParser.fragment.fromHtml(te).children;for(var oe=0,ne=te.length;oe<ne;++oe)te[oe].parent=this},getOuterHtml:function(){var te=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(te),te.getHtml()},split:function(te){for(var oe=this.children.splice(te,this.children.length-te),ne=this.clone(),ae=0;ae<oe.length;++ae)oe[ae].parent=ne;return ne.children=oe,oe[0]&&(oe[0].previous=null),0<te&&(this.children[te-1].next=null),this.parent.add(ne,this.getIndex()+1),ne},find:function(te,oe){void 0===oe&&(oe=!1);var ne=[],ae;for(ae=0;ae<this.children.length;ae++){var ie=this.children[ae];"function"==typeof te&&te(ie)?ne.push(ie):"string"==typeof te&&ie.name===te&&ne.push(ie),oe&&ie.find&&(ne=ne.concat(ie.find(te,oe)))}return ne},addClass:function(te){if(!this.hasClass(te)){var oe=this.attributes["class"]||"";this.attributes["class"]=oe+(oe?" ":"")+te}},removeClass:function(te){var oe=this.attributes["class"];oe&&((oe=CKEDITOR.tools.trim(oe.replace(new RegExp("(?:\\s+|^)"+te+"(?:\\s+|$)")," ")))?this.attributes["class"]=oe:delete this.attributes["class"])},hasClass:function(te){var oe=this.attributes["class"];return!!oe&&new RegExp("(?:^|\\s)"+te+"(?=\\s|$)").test(oe)},getFilterContext:function(te){var oe=[];if(te||(te={nonEditable:!1,nestedEditable:!1}),te.nonEditable||"false"!=this.attributes.contenteditable?te.nonEditable&&!te.nestedEditable&&"true"==this.attributes.contenteditable&&oe.push("nestedEditable",!0):oe.push("nonEditable",!0),oe.length){te=CKEDITOR.tools.copy(te);for(var ne=0;ne<oe.length;ne+=2)te[oe[ne]]=oe[ne+1]}return te}},!0)}(),function(){var $=/{([^}]+)}/g;CKEDITOR.template=function(j){this.source=j+""},CKEDITOR.template.prototype.output=function(j,ee){var te=this.source.replace($,function(oe,ne){return void 0===j[ne]?oe:j[ne]});return ee?ee.push(te):te}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function($){function j(){CKEDITOR.currentInstance==$&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[$.name]=$,$.on("focus",function(){CKEDITOR.currentInstance!=$&&(CKEDITOR.currentInstance=$,CKEDITOR.fire("currentInstance"))}),$.on("blur",j),$.on("destroy",j),CKEDITOR.fire("instance",null,$)},CKEDITOR.remove=function($){delete CKEDITOR.instances[$.name]},function(){var $={};CKEDITOR.addTemplate=function(j,ee){var te=$[j];return te?te:(te={name:j,source:ee},CKEDITOR.fire("template",te),$[j]=new CKEDITOR.template(te.source))},CKEDITOR.getTemplate=function(j){return $[j]}}(),function(){var $=[];CKEDITOR.addCss=function(j){$.push(j)},CKEDITOR.getCss=function(){return $.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function($,j){if(!CKEDITOR.env.isCompatible)return null;if($=CKEDITOR.dom.element.get($),$.getEditor())throw"The editor instance \""+$.getEditor().name+"\" is already attached to the provided element.";var ee=new CKEDITOR.editor(j,$,CKEDITOR.ELEMENT_MODE_INLINE),te=$.is("textarea")?$:null;return te?(ee.setData(te.getValue(),null,!0),$=CKEDITOR.dom.element.createFromHtml("<div contenteditable=\""+!!ee.readOnly+"\" class=\"cke_textarea_inline\">"+te.getValue()+"</div>",CKEDITOR.document),$.insertAfter(te),te.hide(),te.$.form&&ee._attachToForm()):ee.setData($.getHtml(),null,!0),ee.on("loaded",function(){ee.fire("uiReady"),ee.editable($),ee.container=$,ee.ui.contentsElement=$,ee.setData(ee.getData(1)),ee.resetDirty(),ee.fire("contentDom"),ee.mode="wysiwyg",ee.fire("mode"),ee.status="ready",ee.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,ee)},null,null,1E4),ee.on("destroy",function(){te&&(ee.container.clearCustomData(),ee.container.remove(),te.show()),ee.element.clearCustomData(),delete ee.element}),ee},CKEDITOR.inlineAll=function(){var $,j,ee;for(ee in CKEDITOR.dtd.$editable)for(var te=CKEDITOR.document.getElementsByTag(ee),oe=0,ne=te.count();oe<ne;oe++)$=te.getItem(oe),"true"==$.getAttribute("contenteditable")&&(j={element:$,config:{}},!1!==CKEDITOR.fire("inline",j)&&CKEDITOR.inline($,j.config))},CKEDITOR.domReady(function(){CKEDITOR.disableAutoInline||CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function $(te,oe,ne,ae){if(!CKEDITOR.env.isCompatible)return null;if(te=CKEDITOR.dom.element.get(te),te.getEditor())throw"The editor instance \""+te.getEditor().name+"\" is already attached to the provided element.";var ie=new CKEDITOR.editor(oe,te,ae);return ae==CKEDITOR.ELEMENT_MODE_REPLACE&&(te.setStyle("visibility","hidden"),ie._.required=te.hasAttribute("required"),te.removeAttribute("required")),ne&&ie.setData(ne,null,!0),ie.on("loaded",function(){ee(ie),ae==CKEDITOR.ELEMENT_MODE_REPLACE&&ie.config.autoUpdateElement&&te.$.form&&ie._attachToForm(),ie.setMode(ie.config.startupMode,function(){ie.resetDirty(),ie.status="ready",ie.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,ie)})}),ie.on("destroy",j),ie}function j(){var te=this.container,oe=this.element;te&&(te.clearCustomData(),te.remove()),oe&&(oe.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(oe.show(),this._.required&&oe.setAttribute("required","required")),delete this.element)}function ee(te){var oe=te.name,ne=te.element,ae=te.elementMode,ie=te.fire("uiSpace",{space:"top",html:""}).html,le=te.fire("uiSpace",{space:"bottom",html:""}).html,re=new CKEDITOR.template("<{outerEl} id=\"cke_{name}\" class=\"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} "+CKEDITOR.env.cssClass+"\"  dir=\"{langDir}\" lang=\"{langCode}\" role=\"application\""+(te.title?" aria-labelledby=\"cke_{name}_arialbl\"":"")+">"+(te.title?"<span id=\"cke_{name}_arialbl\" class=\"cke_voice_label\">{voiceLabel}</span>":"")+"<{outerEl} class=\"cke_inner cke_reset\" role=\"presentation\">{topHtml}<{outerEl} id=\"{contentId}\" class=\"cke_contents cke_reset\" role=\"presentation\"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>"),oe=CKEDITOR.dom.element.createFromHtml(re.output({id:te.id,name:oe,langDir:te.lang.dir,langCode:te.langCode,voiceLabel:te.title,topHtml:ie?"<span id=\""+te.ui.spaceId("top")+"\" class=\"cke_top cke_reset_all\" role=\"presentation\" style=\"height:auto\">"+ie+"</span>":"",contentId:te.ui.spaceId("contents"),bottomHtml:le?"<span id=\""+te.ui.spaceId("bottom")+"\" class=\"cke_bottom cke_reset_all\" role=\"presentation\">"+le+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));ae==CKEDITOR.ELEMENT_MODE_REPLACE?(ne.hide(),oe.insertAfter(ne)):ne.append(oe),te.container=oe,te.ui.contentsElement=te.ui.space("contents"),ie&&te.ui.space("top").unselectable(),le&&te.ui.space("bottom").unselectable(),ne=te.config.width,ae=te.config.height,ne&&oe.setStyle("width",CKEDITOR.tools.cssLength(ne)),ae&&te.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(ae)),oe.disableContextMenu(),CKEDITOR.env.webkit&&oe.on("focus",function(){te.focus()}),te.fireOnce("uiReady")}CKEDITOR.replace=function(te,oe){return $(te,oe,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(te,oe,ne){return $(te,oe,ne,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var te=document.getElementsByTagName("textarea"),oe=0;oe<te.length;oe++){var ne=null,ae=te[oe];if(ae.name||ae.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(ae.className))continue;}else if("function"==typeof arguments[0]&&(ne={},!1===arguments[0](ae,ne)))continue;this.replace(ae,ne)}}},CKEDITOR.editor.prototype.addMode=function(te,oe){(this._.modes||(this._.modes={}))[te]=oe},CKEDITOR.editor.prototype.setMode=function(te,oe){var ne=this,ae=this._.modes;if(te!=ne.mode&&ae&&ae[te]){if(ne.fire("beforeSetMode",te),ne.mode){var ie=ne.checkDirty(),ae=ne._.previousModeData,re=0,le;ne.fire("beforeModeUnload"),ne.editable(0),ne._.previousMode=ne.mode,ne._.previousModeData=le=ne.getData(1),"source"==ne.mode&&ae==le&&(ne.fire("lockSnapshot",{forceUpdate:!0}),re=1),ne.ui.space("contents").setHtml(""),ne.mode=""}else ne._.previousModeData=ne.getData(1);this._.modes[te](function(){ne.mode=te,void 0===ie||ie||ne.resetDirty(),re?ne.fire("unlockSnapshot"):"wysiwyg"==te&&ne.fire("saveSnapshot"),setTimeout(function(){ne.fire("mode"),oe&&oe.call(ne)},0)})}},CKEDITOR.editor.prototype.resize=function(te,oe,ne,ae){var ie=this.container,le=this.ui.space("contents"),re=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;ae=ae?this.container.getFirst(function(de){return de.type==CKEDITOR.NODE_ELEMENT&&de.hasClass("cke_inner")}):ie,ae.setSize("width",te,!0),re&&(re.style.width="1%");var se=(ae.$.offsetHeight||0)-(le.$.clientHeight||0),ie=_Mathmax(oe-(ne?0:se),0);oe=ne?oe+se:oe,le.setStyle("height",ie+"px"),re&&(re.style.width="100%"),this.fire("resize",{outerHeight:oe,contentsHeight:ie,outerWidth:te||ae.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(te){return te?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function $(_e){var Ee=_e.editor,ye=_e.data.path,ke=ye.blockLimit,Te=_e.data.selection,ve=Te.getRanges()[0],Ce;(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(Te=j(Te,ye))&&(Te.appendBogus(),Ce=CKEDITOR.env.ie),ae(Ee,ye.block,ke)&&ve.collapsed&&!ve.getCommonAncestor().isReadOnly()&&(ye=ve.clone(),ye.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),ke=new CKEDITOR.dom.walker(ye),ke.guard=function(Se){return!te(Se)||Se.type==CKEDITOR.NODE_COMMENT||Se.isReadOnly()},!ke.checkForward()||ye.checkStartOfBlock()&&ye.checkEndOfBlock())&&(Ee=ve.fixBlock(!0,Ee.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(Ee=Ee.getFirst(te))&&Ee.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(Ee.getText()).match(/^(?:&nbsp;|\xa0)$/)&&Ee.remove(),Ce=1,_e.cancel()),Ce&&ve.select()}function j(_e,Ee){if(_e.isFake)return 0;var ye=Ee.block||Ee.blockLimit,ke=ye&&ye.getLast(te);if(!(!ye||!ye.isBlockBoundary()||ke&&ke.type==CKEDITOR.NODE_ELEMENT&&ke.isBlockBoundary()||ye.is("pre")||ye.getBogus()))return ye}function ee(_e){var Ee=_e.data.getTarget();Ee.is("input")&&(Ee=Ee.getAttribute("type"),"submit"!=Ee&&"reset"!=Ee||_e.data.preventDefault())}function te(_e){return se(_e)&&de(_e)}function oe(_e,Ee){return function(ye){var ke=ye.data.$.toElement||ye.data.$.fromElement||ye.data.$.relatedTarget;(ke=ke&&ke.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(ke):null)&&(Ee.equals(ke)||Ee.contains(ke))||_e.call(this,ye)}}function ne(_e){function Ee(Ce){return function(Se,Ne){if(Ne&&Se.type==CKEDITOR.NODE_ELEMENT&&Se.is(Te)&&(ye=Se),!(Ne||!te(Se)||Ce&&me(Se)))return!1}}var ke=_e.getRanges()[0],ye;_e=_e.root;var Te={table:1,ul:1,ol:1,dl:1};if(ke.startPath().contains(Te)){var ve=ke.clone();if(ve.collapse(1),ve.setStartAt(_e,CKEDITOR.POSITION_AFTER_START),_e=new CKEDITOR.dom.walker(ve),_e.guard=Ee(),_e.checkBackward(),ye)return ve=ke.clone(),ve.collapse(),ve.setEndAt(ye,CKEDITOR.POSITION_AFTER_END),_e=new CKEDITOR.dom.walker(ve),_e.guard=Ee(!0),ye=!1,_e.checkForward(),ye}return null}function ae(_e,Ee,ye){return!1!==_e.config.autoParagraph&&_e.activeEnterMode!=CKEDITOR.ENTER_BR&&(_e.editable().equals(ye)&&!Ee||Ee&&"true"==Ee.getAttribute("contenteditable"))}function ie(_e){return _e.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==_e.config.autoParagraph&&(_e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function le(_e){var Ee=_e.editor;Ee.getSelection().scrollIntoView(),setTimeout(function(){Ee.fire("saveSnapshot")},0)}function re(_e,Ee,ye){var ke=_e.getCommonAncestor(Ee);for(Ee=_e=ye?Ee:_e;(_e=_e.getParent())&&!ke.equals(_e)&&1==_e.getChildCount();)Ee=_e;Ee.remove()}var se,de,ce,me,ue,ge,pe,he,fe,be;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(_e,Ee){this.base(Ee.$||Ee),this.editor=_e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var _e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(_e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(_e)))return void _e.focus();CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(CKEDITOR.env.ie&&(!CKEDITOR.env.edge||!(14<CKEDITOR.env.version))&&this.getDocument().equals(CKEDITOR.document))this.$.setActive();else if(CKEDITOR.env.chrome){var Ee=this.$.scrollTop;this.$.focus(),this.$.scrollTop=Ee}else this.$.focus()}catch(ye){if(!CKEDITOR.env.ie)throw ye}CKEDITOR.env.safari&&!this.isInline()&&(_e=CKEDITOR.document.getActive(),_e.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(_e,Ee){var ye=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(_e)&&(_e="focus"==_e?"focusin":"focusout",Ee=oe(Ee,this),ye[0]=_e,ye[1]=Ee),CKEDITOR.dom.element.prototype.on.apply(this,ye)},attachListener:function(_e){this._.listeners||(this._.listeners=[]);var Ee=Array.prototype.slice.call(arguments,1),Ee=_e.on.apply(_e,Ee);return this._.listeners.push(Ee),Ee},clearListeners:function(){var _e=this._.listeners;try{for(;_e.length;)_e.pop().removeListener()}catch(Ee){}},restoreAttrs:function(){var _e=this._.attrChanges,Ee,ye;for(ye in _e)_e.hasOwnProperty(ye)&&(Ee=_e[ye],null===Ee?this.removeAttribute(ye):this.setAttribute(ye,Ee))},attachClass:function(_e){var Ee=this.getCustomData("classes");this.hasClass(_e)||(!Ee&&(Ee=[]),Ee.push(_e),this.setCustomData("classes",Ee),this.addClass(_e))},changeAttr:function(_e,Ee){var ye=this.getAttribute(_e);Ee!==ye&&(!this._.attrChanges&&(this._.attrChanges={}),_e in this._.attrChanges||(this._.attrChanges[_e]=ye),this.setAttribute(_e,Ee))},insertText:function(_e){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(_e),"text")},transformPlainTextToHtml:function(_e){var Ee=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(_e,Ee)},insertHtml:function(_e,Ee,ye){var ke=this.editor;ke.focus(),ke.fire("saveSnapshot"),ye||(ye=ke.getSelection().getRanges()[0]),ge(this,Ee||"html",_e,ye),ye.select(),le(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(_e,Ee,ye){ge(this,ye||"html",_e,Ee),this.editor.fire("afterInsertHtml",{intoRange:Ee})},insertElement:function(_e,Ee){var ye=this.editor;ye.focus(),ye.fire("saveSnapshot");var ke=ye.activeEnterMode,ye=ye.getSelection(),Te=_e.getName(),Te=CKEDITOR.dtd.$block[Te];Ee||(Ee=ye.getRanges()[0]),this.insertElementIntoRange(_e,Ee)&&(Ee.moveToPosition(_e,CKEDITOR.POSITION_AFTER_END),Te&&((Te=_e.getNext(function(ve){return te(ve)&&!me(ve)}))&&Te.type==CKEDITOR.NODE_ELEMENT&&Te.is(CKEDITOR.dtd.$block)?Te.getDtd()["#"]?Ee.moveToElementEditStart(Te):Ee.moveToElementEditEnd(_e):Te||ke==CKEDITOR.ENTER_BR||(Te=Ee.fixBlock(!0,ke==CKEDITOR.ENTER_DIV?"div":"p"),Ee.moveToElementEditStart(Te)))),ye.selectRanges([Ee]),le(this)},insertElementIntoSelection:function(_e){this.insertElement(_e)},insertElementIntoRange:function(_e,Ee){var ye=this.editor,ke=ye.config.enterMode,Te=_e.getName(),ve=CKEDITOR.dtd.$block[Te];if(Ee.checkReadOnly())return!1;Ee.deleteContents(1),Ee.startContainer.type==CKEDITOR.NODE_ELEMENT&&(Ee.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?pe(Ee):Ee.startContainer.is(CKEDITOR.dtd.$list)&&he(Ee));var Ce,Se;if(ve)for(;(Ce=Ee.getCommonAncestor(0,1))&&(Se=CKEDITOR.dtd[Ce.getName()])&&(!Se||!Se[Te]);)Ce.getName()in CKEDITOR.dtd.span?Ee.splitElement(Ce):Ee.checkStartOfBlock()&&Ee.checkEndOfBlock()?(Ee.setStartBefore(Ce),Ee.collapse(!0),Ce.remove()):Ee.splitBlock(ke==CKEDITOR.ENTER_DIV?"div":"p",ye.editable());return Ee.insertNode(_e),!0},setData:function(_e,Ee){Ee||(_e=this.editor.dataProcessor.toHtml(_e)),this.setHtml(_e),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(_e){var Ee=this.getHtml();return _e||(Ee=this.editor.dataProcessor.toDataFormat(Ee)),Ee},setReadOnly:function(_e){this.setAttribute("contenteditable",!_e)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var _e=this.editor;this._.detach(),delete _e.document,delete _e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function _e(){var ke=ye.getDocument().$,Te=ke.getSelection(),ve;a:if(Te.anchorNode&&Te.anchorNode==ye.$)ve=!0;else{if(CKEDITOR.env.webkit&&(ve=ye.getDocument().getActive())&&ve.equals(ye)&&!Te.anchorNode){ve=!0;break a}ve=void 0}ve&&(ve=new CKEDITOR.dom.range(ye),ve.moveToElementEditStart(ye),ke=ke.createRange(),ke.setStart(ve.startContainer.$,ve.startOffset),ke.collapse(!0),Te.removeAllRanges(),Te.addRange(ke))}var ye=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function(){var ke=ye.getDocument().$,Te=ke.selection,ve=ye.getDocument().getActive();"None"==Te.type&&ve.equals(ye)&&(Te=new CKEDITOR.dom.range(ye),ke=ke.body.createTextRange(),Te.moveToElementEditStart(ye),Te=Te.startContainer,Te.type!=CKEDITOR.NODE_ELEMENT&&(Te=Te.getParent()),ke.moveToElementText(Te.$),ke.collapse(!0),ke.select())}()):this.hasFocus?(this.focus(),_e()):this.once("focus",function(){_e()},null,null,-999)},getHtmlFromRange:function(_e){return _e.collapsed?new CKEDITOR.dom.documentFragment(_e.document):(_e={doc:this.getDocument(),range:_e.clone()},fe.eol.detect(_e,this),fe.bogus.exclude(_e),fe.cell.shrink(_e),_e.fragment=_e.range.cloneContents(),fe.tree.rebuild(_e,this),fe.eol.fix(_e,this),new CKEDITOR.dom.documentFragment(_e.fragment.$))},extractHtmlFromRange:function(_e,Ee){var ye=be,ke={range:_e,doc:_e.document},Te=this.getHtmlFromRange(_e);if(_e.collapsed)return _e.optimize(),Te;_e.enlarge(CKEDITOR.ENLARGE_INLINE,1),ye.table.detectPurge(ke),ke.bookmark=_e.createBookmark(),delete ke.range;var ve=this.editor.createRange();if(ve.moveToPosition(ke.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),ke.targetBookmark=ve.createBookmark(),ye.list.detectMerge(ke,this),ye.table.detectRanges(ke,this),ye.block.detectMerge(ke,this),ke.tableContentsRanges?(ye.table.deleteRanges(ke),_e.moveToBookmark(ke.bookmark),ke.range=_e):(_e.moveToBookmark(ke.bookmark),ke.range=_e,_e.extractContents(ye.detectExtractMerge(ke))),_e.moveToBookmark(ke.targetBookmark),_e.optimize(),ye.fixUneditableRangePosition(_e),ye.list.merge(ke,this),ye.table.purge(ke,this),ye.block.merge(ke,this),Ee){if(ye=_e.startPath(),ke=_e.checkStartOfBlock()&&_e.checkEndOfBlock()&&ye.block&&!_e.root.equals(ye.block)){a:{var ke=ye.block.getElementsByTag("span"),ve=0,Ce;if(ke)for(;Ce=ke.getItem(ve++);)if(!de(Ce)){ke=!0;break a}ke=!1}ke=!ke}ke&&(_e.moveToPosition(ye.block,CKEDITOR.POSITION_BEFORE_START),ye.block.remove())}else ye.autoParagraph(this.editor,_e),ce(_e.startContainer)&&_e.startContainer.appendBogus();return _e.startContainer.mergeSiblings(),Te},setup:function(){var _e=this.editor;if(this.attachListener(_e,"beforeGetData",function(){var Se=this.getData();this.is("textarea")||!1!==_e.config.ignoreEmptyParagraph&&(Se=Se.replace(ue,function(Ne,xe){return xe})),_e.setData(Se,null,1)},this),this.attachListener(_e,"getSnapshot",function(Se){Se.data=this.getData(1)},this),this.attachListener(_e,"afterSetData",function(){this.setData(_e.getData(1))},this),this.attachListener(_e,"loadSnapshot",function(Se){this.setData(Se.data,1)},this),this.attachListener(_e,"beforeFocus",function(){var Se=_e.getSelection();(Se=Se&&Se.getNative())&&"Control"==Se.type||this.focus()},this),this.attachListener(_e,"insertHtml",function(Se){this.insertHtml(Se.data.dataValue,Se.data.mode,Se.data.range)},this),this.attachListener(_e,"insertElement",function(Se){this.insertElement(Se.data)},this),this.attachListener(_e,"insertText",function(Se){this.insertText(Se.data)},this),this.setReadOnly(_e.readOnly),this.attachClass("cke_editable"),_e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):_e.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&_e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+_e.config.contentsLangDirection),_e.keystrokeHandler.blockedKeystrokes[8]=+_e.readOnly,_e.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){_e._.previousScrollTop=_e.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var Ee=function(){var Se=_e.editable();null!=_e._.previousScrollTop&&Se.getDocument().equals(CKEDITOR.document)&&(Se.$.scrollTop=_e._.previousScrollTop,_e._.previousScrollTop=null,this.removeListener("scroll",Ee))};this.on("scroll",Ee)}if(_e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,_e.once("contentDom",function(){_e.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",_e.tabIndex),!this.is("textarea")){_e.document=this.getDocument(),_e.window=this.getWindow();var ye=_e.document;this.changeAttr("spellcheck",!_e.config.disableNativeSpellChecker);var ke=_e.config.contentsLangDirection;this.getDirection(1)!=ke&&this.changeAttr("dir",ke);var Te=CKEDITOR.getCss();if(Te){var ke=ye.getHead(),ve=ke.getCustomData("stylesheet");ve?Te!=ve.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?ve.$.styleSheet.cssText=Te:ve.setText(Te)):(Te=ye.appendStyleText(Te),Te=new CKEDITOR.dom.element(Te.ownerNode||Te.owningElement),ke.setCustomData("stylesheet",Te),Te.data("cke-temp",1))}ke=ye.getCustomData("stylesheet_ref")||0,ye.setCustomData("stylesheet_ref",ke+1),this.setCustomData("cke_includeReadonly",!_e.config.disableReadonlyStyling),this.attachListener(this,"click",function(Se){Se=Se.data;var Ne=new CKEDITOR.dom.elementPath(Se.getTarget(),this).contains("a");Ne&&2!=Se.$.button&&Ne.isReadOnly()&&Se.preventDefault()});var Ce={8:1,46:1};this.attachListener(_e,"key",function(Se){if(_e.readOnly)return!0;var Ne=Se.data.domEvent.getKey(),xe;if(Se=_e.getSelection(),0!==Se.getRanges().length){if(Ne in Ce){var Ie=Se.getRanges()[0],Oe=Ie.startPath(),Ne=8==Ne,we,Ae,De,Re;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(we=Se.getSelectedElement())||(we=ne(Se))?(_e.fire("saveSnapshot"),Ie.moveToPosition(we,CKEDITOR.POSITION_BEFORE_START),we.remove(),Ie.select(),_e.fire("saveSnapshot"),xe=1):Ie.collapsed&&((Ae=Oe.block)&&(Re=Ae[Ne?"getPrevious":"getNext"](se))&&Re.type==CKEDITOR.NODE_ELEMENT&&Re.is("table")&&Ie[Ne?"checkStartOfBlock":"checkEndOfBlock"]()?(_e.fire("saveSnapshot"),Ie[Ne?"checkEndOfBlock":"checkStartOfBlock"]()&&Ae.remove(),Ie["moveToElementEdit"+(Ne?"End":"Start")](Re),Ie.select(),_e.fire("saveSnapshot"),xe=1):Oe.blockLimit&&Oe.blockLimit.is("td")&&(De=Oe.blockLimit.getAscendant("table"))&&Ie.checkBoundaryOfElement(De,Ne?CKEDITOR.START:CKEDITOR.END)&&(Re=De[Ne?"getPrevious":"getNext"](se))?(_e.fire("saveSnapshot"),Ie["moveToElementEdit"+(Ne?"End":"Start")](Re),Ie.checkStartOfBlock()&&Ie.checkEndOfBlock()?Re.remove():Ie.select(),_e.fire("saveSnapshot"),xe=1):(De=Oe.contains(["td","th","caption"]))&&Ie.checkBoundaryOfElement(De,Ne?CKEDITOR.START:CKEDITOR.END)&&(xe=1))}return!xe}}),_e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(Se){Se.data.getKeystroke()in Ce&&!this.getFirst(te)&&(this.appendBogus(),Se=_e.createRange(),Se.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),Se.select())}),this.attachListener(this,"dblclick",function(Se){return!_e.readOnly&&void(Se={element:Se.data.getTarget()},_e.fire("doubleclick",Se))}),CKEDITOR.env.ie&&this.attachListener(this,"click",ee),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(Se){var Ne=Se.data.getTarget();Ne.is("img","hr","input","textarea","select")&&!Ne.isReadOnly()&&(_e.getSelection().selectElement(Ne),Ne.is("input","textarea","select")&&Se.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(Se){(Se=Se.data.getTarget())&&Se.is("img")&&!Se.isReadOnly()&&_e.getSelection().selectElement(Se)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(Se){if(2==Se.data.$.button&&(Se=Se.data.getTarget(),!Se.getAscendant("table")&&!Se.getOuterHtml().replace(ue,""))){var Ne=_e.createRange();Ne.moveToElementEditStart(Se),Ne.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(Se){Se.data.getTarget().is("input","select")&&Se.data.preventDefault()}),this.attachListener(this,"mouseup",function(Se){Se.data.getTarget().is("input","textarea")&&Se.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(_e,"key",function(Se){if(_e.readOnly)return!0;var Ne=Se.data.domEvent.getKey();if(Ne in Ce&&(Se=_e.getSelection(),0!==Se.getRanges().length)){var Ne=8==Ne,xe=Se.getRanges()[0];if(Se=xe.startPath(),xe.collapsed)a:{var we=Se.block;if(we&&xe[Ne?"checkStartOfBlock":"checkEndOfBlock"]()&&xe.moveToClosestEditablePosition(we,!Ne)&&xe.collapsed){if(xe.startContainer.type==CKEDITOR.NODE_ELEMENT){var Ie=xe.startContainer.getChild(xe.startOffset-(Ne?1:0));if(Ie&&Ie.type==CKEDITOR.NODE_ELEMENT&&Ie.is("hr")){_e.fire("saveSnapshot"),Ie.remove(),Se=!0;break a}}if(xe=xe.startPath().block,!xe||xe&&xe.contains(we))Se=void 0;else{_e.fire("saveSnapshot");var Oe;(Oe=(Ne?xe:we).getBogus())&&Oe.remove(),Oe=_e.getSelection(),Ie=Oe.createBookmarks(),(Ne?we:xe).moveChildren(Ne?xe:we,!1),Se.lastElement.mergeSiblings(),re(we,xe,!Ne),Oe.selectBookmarks(Ie),Se=!0}}else Se=!1}else Ne=xe,Oe=Se.block,xe=Ne.endPath().block,Oe&&xe&&!Oe.equals(xe)?(_e.fire("saveSnapshot"),(we=Oe.getBogus())&&we.remove(),Ne.enlarge(CKEDITOR.ENLARGE_INLINE),Ne.deleteContents(),xe.getParent()&&(xe.moveChildren(Oe,!1),Se.lastElement.mergeSiblings(),re(Oe,xe,!0)),Ne=_e.getSelection().getRanges()[0],Ne.collapse(1),Ne.optimize(),""===Ne.startContainer.getHtml()&&Ne.startContainer.appendBogus(),Ne.select(),Se=!0):Se=!1;return Se?(_e.getSelection().scrollIntoView(),_e.fire("saveSnapshot"),!1):void 0}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var _e;if(_e=this.removeCustomData("classes"))for(;_e.length;)this.removeClass(_e.pop());if(!this.is("textarea")){_e=this.getDocument();var Ee=_e.getHead();if(Ee.getCustomData("stylesheet")){var ye=_e.getCustomData("stylesheet_ref");--ye?_e.setCustomData("stylesheet_ref",ye):(_e.removeCustomData("stylesheet_ref"),Ee.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(_e){var Ee=this._.editable;return Ee&&_e?0:(arguments.length&&(Ee=this._.editable=_e?_e instanceof CKEDITOR.editable?_e:new CKEDITOR.editable(this,_e):(Ee&&Ee.detach(),null)),Ee)},CKEDITOR.on("instanceLoaded",function(_e){var Ee=_e.editor;Ee.on("insertElement",function(ye){ye=ye.data,ye.type==CKEDITOR.NODE_ELEMENT&&(ye.is("input")||ye.is("textarea"))&&("false"!=ye.getAttribute("contentEditable")&&ye.data("cke-editable",ye.hasAttribute("contenteditable")?"true":"1"),ye.setAttribute("contentEditable",!1))}),Ee.on("selectionChange",function(ye){if(!Ee.readOnly){var ke=Ee.getSelection();ke&&!ke.isLocked&&(ke=Ee.checkDirty(),Ee.fire("lockSnapshot"),$(ye),Ee.fire("unlockSnapshot"),!ke&&Ee.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(_e){var Ee=_e.editor;Ee.on("mode",function(){var ye=Ee.editable();if(ye&&ye.isInline()){var ke=Ee.title;ye.changeAttr("role","textbox"),ye.changeAttr("aria-multiline","true"),ye.changeAttr("aria-label",ke),ke&&ye.changeAttr("title",ke);var Te=Ee.fire("ariaEditorHelpLabel",{}).label;if(Te&&(ke=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var ve=CKEDITOR.tools.getNextId(),Te=CKEDITOR.dom.element.createFromHtml("<span id=\""+ve+"\" class=\"cke_voice_label\">"+Te+"</span>");ke.append(Te),ye.changeAttr("aria-describedby",ve)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),se=CKEDITOR.dom.walker.whitespaces(!0),de=CKEDITOR.dom.walker.bookmark(!1,!0),ce=CKEDITOR.dom.walker.empty(),me=CKEDITOR.dom.walker.bogus(),ue=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,ge=function(){function _e(Ie){return Ie.type==CKEDITOR.NODE_ELEMENT}function Ee(Ie,Oe){var Fe=[],Be=Oe.range.startContainer,Ae,De,Re,Le;Ae=Oe.range.startPath();for(var Be=Se[Be.getName()],Pe=0,Me=Ie.getChildren(),$e=Me.count(),He=-1,qe=-1,ze=0,Ue=Ae.contains(Se.$list);Pe<$e;++Pe)Ae=Me.getItem(Pe),_e(Ae)?(Re=Ae.getName(),Ue&&Re in CKEDITOR.dtd.$list?Fe=Fe.concat(Ee(Ae,Oe)):(Le=!!Be[Re],"br"!=Re||!Ae.data("cke-eol")||Pe&&Pe!=$e-1||(ze=(De=Pe?Fe[Pe-1].node:Me.getItem(Pe+1))&&(!_e(De)||!De.is("br")),De=De&&_e(De)&&Se.$block[De.getName()]),-1!=He||Le||(He=Pe),Le||(qe=Pe),Fe.push({isElement:1,isLineBreak:ze,isBlock:Ae.isBlockBoundary(),hasBlockSibling:De,node:Ae,name:Re,allowed:Le}),De=ze=0)):Fe.push({isElement:0,node:Ae,allowed:1});return-1<He&&(Fe[He].firstNotAllowed=1),-1<qe&&(Fe[qe].lastNotAllowed=1),Fe}function ye(Ie,Oe){var Ae=[],De=Ie.getChildren(),Re=De.count(),Fe=0,Be=Se[Oe],Pe=!Ie.is(Se.$inline)||Ie.is("br"),Le;for(Pe&&Ae.push(" ");Fe<Re;Fe++)Le=De.getItem(Fe),_e(Le)&&!Le.is(Be)?Ae=Ae.concat(ye(Le,Oe)):Ae.push(Le);return Pe&&Ae.push(" "),Ae}function ke(Ie){return _e(Ie.startContainer)&&Ie.startContainer.getChild(Ie.startOffset-1)}function Te(Ie){return Ie&&_e(Ie)&&(Ie.is(Se.$removeEmpty)||Ie.is("a")&&!Ie.isBlockBoundary())}function ve(Ie,Oe,Ae,De){var Re=Ie.clone(),Le,Fe;Re.setEndAt(Oe,CKEDITOR.POSITION_BEFORE_END),(Le=new CKEDITOR.dom.walker(Re).next())&&_e(Le)&&Ne[Le.getName()]&&(Fe=Le.getPrevious())&&_e(Fe)&&!Fe.getParent().equals(Ie.startContainer)&&Ae.contains(Fe)&&De.contains(Le)&&Le.isIdentical(Fe)&&(Le.moveChildren(Fe),Le.remove(),ve(Ie,Oe,Ae,De))}function Ce(Ie,Oe){function Ae(Le,Fe){if(Fe.isBlock&&Fe.isElement&&!Fe.node.is("br")&&_e(Le)&&Le.is("br"))return Le.remove(),1}var De=Oe.endContainer.getChild(Oe.endOffset),Re=Oe.endContainer.getChild(Oe.endOffset-1);De&&Ae(De,Ie[Ie.length-1]),Re&&Ae(Re,Ie[0])&&(Oe.setEnd(Oe.endContainer,Oe.endOffset-1),Oe.collapse())}var Se=CKEDITOR.dtd,Ne={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},xe={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},we=CKEDITOR.tools.extend({},Se.$inline);return delete we.br,function(Ie,Oe,Ae,De){var Re=Ie.editor,Le=!1;if("unfiltered_html"==Oe&&(Oe="html",Le=!0),!De.checkReadOnly()){var Fe=new CKEDITOR.dom.elementPath(De.startContainer,De.root).blockLimit||De.root;Ie={type:Oe,dontFilter:Le,editable:Ie,editor:Re,range:De,blockLimit:Fe,mergeCandidates:[],zombies:[]},Oe=Ie.range,De=Ie.mergeCandidates;var Be,Pe;if("text"==Ie.type&&Oe.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(Be=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",Oe.document),Oe.insertNode(Be),Oe.setStartAfter(Be)),Le=new CKEDITOR.dom.elementPath(Oe.startContainer),Ie.endPath=Fe=new CKEDITOR.dom.elementPath(Oe.endContainer),!Oe.collapsed){var Re=Fe.block||Fe.blockLimit,Me=Oe.getCommonAncestor();Re&&!Re.equals(Me)&&!Re.contains(Me)&&Oe.checkEndOfBlock()&&Ie.zombies.push(Re),Oe.deleteContents()}for(;(Pe=ke(Oe))&&_e(Pe)&&Pe.isBlockBoundary()&&Le.contains(Pe);)Oe.moveToPosition(Pe,CKEDITOR.POSITION_BEFORE_END);for(ve(Oe,Ie.blockLimit,Le,Fe),Be&&(Oe.setEndBefore(Be),Oe.collapse(),Be.remove()),Be=Oe.startPath(),(Re=Be.contains(Te,!1,1))&&(Oe.splitElement(Re),Ie.inlineStylesRoot=Re,Ie.inlineStylesPeak=Be.lastElement),Be=Oe.createBookmark(),(Re=Be.startNode.getPrevious(te))&&_e(Re)&&Te(Re)&&De.push(Re),(Re=Be.startNode.getNext(te))&&_e(Re)&&Te(Re)&&De.push(Re),Re=Be.startNode;(Re=Re.getParent())&&Te(Re);)De.push(Re);if(Oe.moveToBookmark(Be),Be=Ae){if(Be=Ie.range,"text"==Ie.type&&Ie.inlineStylesRoot){for(Pe=Ie.inlineStylesPeak,Oe=Pe.getDocument().createText("{cke-peak}"),De=Ie.inlineStylesRoot.getParent();!Pe.equals(De);)Oe=Oe.appendTo(Pe.clone()),Pe=Pe.getParent();Ae=Oe.getOuterHtml().split("{cke-peak}").join(Ae)}if(Pe=Ie.blockLimit.getName(),/^\s+|\s+$/.test(Ae)&&"span"in CKEDITOR.dtd[Pe]){var $e="<span data-cke-marker=\"1\">&nbsp;</span>";Ae=$e+Ae+$e}if(Ae=Ie.editor.dataProcessor.toHtml(Ae,{context:null,fixForBody:!1,protectedWhitespaces:!!$e,dontFilter:Ie.dontFilter,filter:Ie.editor.activeFilter,enterMode:Ie.editor.activeEnterMode}),Pe=Be.document.createElement("body"),Pe.setHtml(Ae),$e&&(Pe.getFirst().remove(),Pe.getLast().remove()),($e=Be.startPath().block)&&(1!=$e.getChildCount()||!$e.getBogus()))a:{var He;if(1==Pe.getChildCount()&&_e(He=Pe.getFirst())&&He.is(xe)&&!He.hasAttribute("contenteditable")){for($e=He.getElementsByTag("*"),Be=0,De=$e.count();Be<De;Be++)if(Oe=$e.getItem(Be),!Oe.is(we))break a;He.moveChildren(He.getParent(1)),He.remove()}}Ie.dataWrapper=Pe,Be=Ae}if(Be){He=Ie.range,Be=He.document;var qe;Pe=Ie.blockLimit,De=0;var $e=[],ze,Ue,je;Ae=Re=0;var Ve,Ke;Oe=He.startContainer;var Le=Ie.endPath.elements[0],Fe=Le.getPosition(Oe),Me=!!Le.getCommonAncestor(Oe)&&Fe!=CKEDITOR.POSITION_IDENTICAL&&!(Fe&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),We;for(Oe=Ee(Ie.dataWrapper,Ie),Ce(Oe,He);De<Oe.length;De++){if(Fe=Oe[De],qe=Fe.isLineBreak){qe=He,Ve=Pe;var Ge=void 0,Xe=void 0;Fe.hasBlockSibling?qe=1:(Ge=qe.startContainer.getAscendant(Se.$block,1))&&Ge.is({div:1,p:1})?(Xe=Ge.getPosition(Ve),Xe==CKEDITOR.POSITION_IDENTICAL||Xe==CKEDITOR.POSITION_CONTAINS?qe=0:(Ve=qe.splitElement(Ge),qe.moveToPosition(Ve,CKEDITOR.POSITION_AFTER_START),qe=1)):qe=0}if(qe)Ae=0<De;else{if(qe=He.startPath(),!Fe.isBlock&&ae(Ie.editor,qe.block,qe.blockLimit)&&(je=ie(Ie.editor))&&(je=Be.createElement(je),je.appendBogus(),He.insertNode(je),CKEDITOR.env.needsBrFiller&&(ze=je.getBogus())&&ze.remove(),He.moveToPosition(je,CKEDITOR.POSITION_BEFORE_END)),(qe=He.startPath().block)&&!qe.equals(Ue)&&((ze=qe.getBogus())&&(ze.remove(),$e.push(qe)),Ue=qe),Fe.firstNotAllowed&&(Re=1),Re&&Fe.isElement){for(qe=He.startContainer,Ve=null;qe&&!Se[qe.getName()][Fe.name];){if(qe.equals(Pe)){qe=null;break}Ve=qe,qe=qe.getParent()}if(qe)Ve&&(Ke=He.splitElement(Ve),Ie.zombies.push(Ke),Ie.zombies.push(Ve));else{Ve=Pe.getName(),We=!De,qe=De==Oe.length-1,Ve=ye(Fe.node,Ve);for(var Ge=[],Xe=Ve.length,Ye=0,Ze=void 0,Je=0,Qe=-1;Ye<Xe;Ye++)Ze=Ve[Ye]," "==Ze?(Je||We&&!Ye||(Ge.push(new CKEDITOR.dom.text(" ")),Qe=Ge.length),Je=1):(Ge.push(Ze),Je=0);qe&&Qe==Ge.length&&Ge.pop(),We=Ge}}if(We){for(;qe=We.pop();)He.insertNode(qe);We=0}else He.insertNode(Fe.node);Fe.lastNotAllowed&&De<Oe.length-1&&((Ke=Me?Le:Ke)&&He.setEndAt(Ke,CKEDITOR.POSITION_AFTER_START),Re=0),He.collapse()}}1==Oe.length?(ze=Oe[0],ze=ze.isElement&&"false"==ze.node.getAttribute("contenteditable")):ze=!1,ze&&(Ae=!0,qe=Oe[0].node,He.setStartAt(qe,CKEDITOR.POSITION_BEFORE_START),He.setEndAt(qe,CKEDITOR.POSITION_AFTER_END)),Ie.dontMoveCaret=Ae,Ie.bogusNeededBlocks=$e}ze=Ie.range;var et;for(Ke=Ie.bogusNeededBlocks,We=ze.createBookmark();Ue=Ie.zombies.pop();)Ue.getParent()&&(je=ze.clone(),je.moveToElementEditStart(Ue),je.removeEmptyBlocksAtEnd());if(Ke)for(;Ue=Ke.pop();)CKEDITOR.env.needsBrFiller?Ue.appendBogus():Ue.append(ze.document.createText("\xA0"));for(;Ue=Ie.mergeCandidates.pop();)Ue.mergeSiblings();if(ze.moveToBookmark(We),!Ie.dontMoveCaret){for(Ue=ke(ze);Ue&&_e(Ue)&&!Ue.is(Se.$empty);){if(Ue.isBlockBoundary())ze.moveToPosition(Ue,CKEDITOR.POSITION_BEFORE_END);else{if(Te(Ue)&&Ue.getHtml().match(/(\s|&nbsp;)$/g)){et=null;break}et=ze.clone(),et.moveToPosition(Ue,CKEDITOR.POSITION_BEFORE_END)}Ue=Ue.getLast(te)}et&&ze.moveToRange(et)}}}}(),pe=function(){function _e(ke){return ke=new CKEDITOR.dom.walker(ke),ke.guard=function(Te,ve){return!ve&&(Te.type==CKEDITOR.NODE_ELEMENT?Te.is(CKEDITOR.dtd.$tableContent):void 0)},ke.evaluator=function(Te){return Te.type==CKEDITOR.NODE_ELEMENT},ke}function Ee(ke,Te,ve){return Te=ke.getDocument().createElement(Te),ke.append(Te,ve),Te}function ye(ke){var Te=ke.count(),ve;for(Te;0<Te--;)ve=ke.getItem(Te),CKEDITOR.tools.trim(ve.getHtml())||(ve.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&ve.getChildCount()&&ve.getFirst().remove())}return function(ke){var Te=ke.startContainer,ve=Te.getAscendant("table",1),Ce=!1;ye(ve.getElementsByTag("td")),ye(ve.getElementsByTag("th")),ve=ke.clone(),ve.setStart(Te,0),ve=_e(ve).lastBackward(),ve||(ve=ke.clone(),ve.setEndAt(Te,CKEDITOR.POSITION_BEFORE_END),ve=_e(ve).lastForward(),Ce=!0),ve||(ve=Te),ve.is("table")?(ke.setStartAt(ve,CKEDITOR.POSITION_BEFORE_START),ke.collapse(!0),ve.remove()):(ve.is({tbody:1,thead:1,tfoot:1})&&(ve=Ee(ve,"tr",Ce)),ve.is("tr")&&(ve=Ee(ve,ve.getParent().is("thead")?"th":"td",Ce)),(Te=ve.getBogus())&&Te.remove(),ke.moveToPosition(ve,Ce?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),he=function(){function _e(Ee){return Ee=new CKEDITOR.dom.walker(Ee),Ee.guard=function(ye,ke){return!ke&&(ye.type==CKEDITOR.NODE_ELEMENT?ye.is(CKEDITOR.dtd.$list)||ye.is(CKEDITOR.dtd.$listItem):void 0)},Ee.evaluator=function(ye){return ye.type==CKEDITOR.NODE_ELEMENT&&ye.is(CKEDITOR.dtd.$listItem)},Ee}return function(Ee){var ye=Ee.startContainer,ke=!1,Te;Te=Ee.clone(),Te.setStart(ye,0),Te=_e(Te).lastBackward(),Te||(Te=Ee.clone(),Te.setEndAt(ye,CKEDITOR.POSITION_BEFORE_END),Te=_e(Te).lastForward(),ke=!0),Te||(Te=ye),Te.is(CKEDITOR.dtd.$list)?(Ee.setStartAt(Te,CKEDITOR.POSITION_BEFORE_START),Ee.collapse(!0),Te.remove()):((ye=Te.getBogus())&&ye.remove(),Ee.moveToPosition(Te,ke?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),Ee.select())}}(),fe={eol:{detect:function(_e,Ee){var ye=_e.range,ke=ye.clone(),Te=ye.clone(),ve=new CKEDITOR.dom.elementPath(ye.startContainer,Ee),Ce=new CKEDITOR.dom.elementPath(ye.endContainer,Ee);ke.collapse(1),Te.collapse(),ve.block&&ke.checkBoundaryOfElement(ve.block,CKEDITOR.END)&&(ye.setStartAfter(ve.block),_e.prependEolBr=1),Ce.block&&Te.checkBoundaryOfElement(Ce.block,CKEDITOR.START)&&(ye.setEndBefore(Ce.block),_e.appendEolBr=1)},fix:function(_e,Ee){var ye=Ee.getDocument(),ke;_e.appendEolBr&&(ke=this.createEolBr(ye),_e.fragment.append(ke)),_e.prependEolBr&&(!ke||ke.getPrevious())&&_e.fragment.append(this.createEolBr(ye),1)},createEolBr:function(_e){return _e.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(_e){var Ee=_e.range.getBoundaryNodes(),ye=Ee.startNode,Ee=Ee.endNode;!Ee||!me(Ee)||ye&&ye.equals(Ee)||_e.range.setEndBefore(Ee)}},tree:{rebuild:function(_e,Ee){var ye=_e.range,ke=ye.getCommonAncestor(),Te=new CKEDITOR.dom.elementPath(ke,Ee),ve=new CKEDITOR.dom.elementPath(ye.startContainer,Ee),ye=new CKEDITOR.dom.elementPath(ye.endContainer,Ee),Ce;if(ke.type==CKEDITOR.NODE_TEXT&&(ke=ke.getParent()),Te.blockLimit.is({tr:1,table:1})){var Se=Te.contains("table").getParent();Ce=function(xe){return!xe.equals(Se)}}else if(Te.block&&Te.block.is(CKEDITOR.dtd.$listItem)&&(ve=ve.contains(CKEDITOR.dtd.$list),ye=ye.contains(CKEDITOR.dtd.$list),!ve.equals(ye))){var Ne=Te.contains(CKEDITOR.dtd.$list).getParent();Ce=function(xe){return!xe.equals(Ne)}}Ce||(Ce=function(xe){return!xe.equals(Te.block)&&!xe.equals(Te.blockLimit)}),this.rebuildFragment(_e,Ee,ke,Ce)},rebuildFragment:function(_e,Ee,ye,ke){for(var Te;ye&&!ye.equals(Ee)&&ke(ye);)Te=ye.clone(0,1),_e.fragment.appendTo(Te),_e.fragment=Te,ye=ye.getParent()}},cell:{shrink:function(_e){_e=_e.range;var Ee=_e.startContainer,ye=_e.endContainer,ke=_e.startOffset,Te=_e.endOffset;Ee.type==CKEDITOR.NODE_ELEMENT&&Ee.equals(ye)&&Ee.is("tr")&&++ke==Te&&_e.shrink(CKEDITOR.SHRINK_TEXT)}}},be=function(){function _e(ke,Te){var ve=ke.getParent();ve.is(CKEDITOR.dtd.$inline)&&ke[Te?"insertBefore":"insertAfter"](ve)}function Ee(ke,Te,ve){_e(Te),_e(ve,1);for(var Ce;Ce=ve.getNext();)Ce.insertAfter(Te),Te=Ce;ce(ke)&&ke.remove()}function ye(ke,Te){var ve=new CKEDITOR.dom.range(ke);return ve.setStartAfter(Te.startNode),ve.setEndBefore(Te.endNode),ve}return{list:{detectMerge:function(ke,Te){var ve=ye(Te,ke.bookmark),Ce=ve.startPath(),Se=ve.endPath(),Ne=Ce.contains(CKEDITOR.dtd.$list),xe=Se.contains(CKEDITOR.dtd.$list);ke.mergeList=Ne&&xe&&Ne.getParent().equals(xe.getParent())&&!Ne.equals(xe),ke.mergeListItems=Ce.block&&Se.block&&Ce.block.is(CKEDITOR.dtd.$listItem)&&Se.block.is(CKEDITOR.dtd.$listItem),(ke.mergeList||ke.mergeListItems)&&(ve=ve.clone(),ve.setStartBefore(ke.bookmark.startNode),ve.setEndAfter(ke.bookmark.endNode),ke.mergeListBookmark=ve.createBookmark())},merge:function(ke,Te){if(ke.mergeListBookmark){var ve=ke.mergeListBookmark.startNode,Ce=ke.mergeListBookmark.endNode,Se=new CKEDITOR.dom.elementPath(ve,Te),Ne=new CKEDITOR.dom.elementPath(Ce,Te);if(ke.mergeList){var xe=Se.contains(CKEDITOR.dtd.$list),we=Ne.contains(CKEDITOR.dtd.$list);xe.equals(we)||(we.moveChildren(xe),we.remove())}ke.mergeListItems&&(Se=Se.contains(CKEDITOR.dtd.$listItem),Ne=Ne.contains(CKEDITOR.dtd.$listItem),Se.equals(Ne)||Ee(Ne,ve,Ce)),ve.remove(),Ce.remove()}}},block:{detectMerge:function(ke,Te){if(!ke.tableContentsRanges&&!ke.mergeListBookmark){var ve=new CKEDITOR.dom.range(Te);ve.setStartBefore(ke.bookmark.startNode),ve.setEndAfter(ke.bookmark.endNode),ke.mergeBlockBookmark=ve.createBookmark()}},merge:function(ke,Te){if(ke.mergeBlockBookmark&&!ke.purgeTableBookmark){var ve=ke.mergeBlockBookmark.startNode,Ce=ke.mergeBlockBookmark.endNode,Se=new CKEDITOR.dom.elementPath(ve,Te),Ne=new CKEDITOR.dom.elementPath(Ce,Te),Se=Se.block,Ne=Ne.block;Se&&Ne&&!Se.equals(Ne)&&Ee(Ne,ve,Ce),ve.remove(),Ce.remove()}}},table:function(){function ke(Ce){var Se=[],xe=new CKEDITOR.dom.walker(Ce),we=Ce.startPath().contains(ve),Ie=Ce.endPath().contains(ve),Oe={},Ne;return xe.guard=function(Ae,De){if(Ae.type==CKEDITOR.NODE_ELEMENT){var Re="visited_"+(De?"out":"in");if(Ae.getCustomData(Re))return;CKEDITOR.dom.element.setMarker(Oe,Ae,Re,1)}if(De&&we&&Ae.equals(we))Ne=Ce.clone(),Ne.setEndAt(we,CKEDITOR.POSITION_BEFORE_END),Se.push(Ne);else if(!De&&Ie&&Ae.equals(Ie))Ne=Ce.clone(),Ne.setStartAt(Ie,CKEDITOR.POSITION_AFTER_START),Se.push(Ne);else{if((Re=!De)&&(Re=Ae.type==CKEDITOR.NODE_ELEMENT&&Ae.is(ve)&&(!we||Te(Ae,we))&&(!Ie||Te(Ae,Ie))),!Re&&(Re=De))if(Ae.is(ve))var Re=we&&we.getAscendant("table",!0),Le=Ie&&Ie.getAscendant("table",!0),Fe=Ae.getAscendant("table",!0),Re=Re&&Re.contains(Fe)||Le&&Le.contains(Fe);else Re=void 0;Re&&(Ne=Ce.clone(),Ne.selectNodeContents(Ae),Se.push(Ne))}},xe.lastForward(),CKEDITOR.dom.element.clearAllMarkers(Oe),Se}function Te(Ce,Se){var Ne=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,xe=Ce.getPosition(Se);return xe!==CKEDITOR.POSITION_IDENTICAL&&0==(xe&Ne)}var ve={td:1,th:1,caption:1};return{detectPurge:function(Ce){var Se=Ce.range,Ne=Se.clone();Ne.enlarge(CKEDITOR.ENLARGE_ELEMENT);var Ne=new CKEDITOR.dom.walker(Ne),xe=0;if(Ne.evaluator=function(Ie){Ie.type==CKEDITOR.NODE_ELEMENT&&Ie.is(ve)&&++xe},Ne.checkForward(),1<xe){var Ne=Se.startPath().contains("table"),we=Se.endPath().contains("table");Ne&&we&&Se.checkBoundaryOfElement(Ne,CKEDITOR.START)&&Se.checkBoundaryOfElement(we,CKEDITOR.END)&&(Se=Ce.range.clone(),Se.setStartBefore(Ne),Se.setEndAfter(we),Ce.purgeTableBookmark=Se.createBookmark())}},detectRanges:function(Ce,Se){var Ne=ye(Se,Ce.bookmark),xe=Ne.clone(),Oe=Ne.getCommonAncestor(),we,Ie;Oe.is(CKEDITOR.dtd.$tableContent)&&!Oe.is(ve)&&(Oe=Oe.getAscendant("table",!0)),Ie=Oe,Oe=new CKEDITOR.dom.elementPath(Ne.startContainer,Ie),Ie=new CKEDITOR.dom.elementPath(Ne.endContainer,Ie),Oe=Oe.contains("table"),Ie=Ie.contains("table"),(Oe||Ie)&&(Oe&&Ie&&Te(Oe,Ie)?(Ce.tableSurroundingRange=xe,xe.setStartAt(Oe,CKEDITOR.POSITION_AFTER_END),xe.setEndAt(Ie,CKEDITOR.POSITION_BEFORE_START),xe=Ne.clone(),xe.setEndAt(Oe,CKEDITOR.POSITION_AFTER_END),we=Ne.clone(),we.setStartAt(Ie,CKEDITOR.POSITION_BEFORE_START),we=ke(xe).concat(ke(we))):Oe?Ie||(Ce.tableSurroundingRange=xe,xe.setStartAt(Oe,CKEDITOR.POSITION_AFTER_END),Ne.setEndAt(Oe,CKEDITOR.POSITION_AFTER_END)):(Ce.tableSurroundingRange=xe,xe.setEndAt(Ie,CKEDITOR.POSITION_BEFORE_START),Ne.setStartAt(Ie,CKEDITOR.POSITION_AFTER_START)),Ce.tableContentsRanges=we?we:ke(Ne))},deleteRanges:function(Ce){for(var Se;Se=Ce.tableContentsRanges.pop();)Se.extractContents(),ce(Se.startContainer)&&Se.startContainer.appendBogus();Ce.tableSurroundingRange&&Ce.tableSurroundingRange.extractContents()},purge:function(Ce){if(Ce.purgeTableBookmark){var Se=Ce.doc,Ne=Ce.range.clone(),Se=Se.createElement("p");Se.insertBefore(Ce.purgeTableBookmark.startNode),Ne.moveToBookmark(Ce.purgeTableBookmark),Ne.deleteContents(),Ce.range.moveToPosition(Se,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(ke){return!(ke.range.startPath().contains(CKEDITOR.dtd.$listItem)&&ke.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(ke){ke.startContainer.getDtd()["#"]||ke.moveToClosestEditablePosition(null,!0)},autoParagraph:function(ke,Te){var ve=Te.startPath(),Ce;ae(ke,ve.block,ve.blockLimit)&&(Ce=ie(ke))&&(Ce=Te.document.createElement(Ce),Ce.appendBogus(),Te.insertNode(Ce),Te.moveToPosition(Ce,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function $(Ce){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(Ce)}function j(Ce,Se){if(0===Ce.length||$(Ce[0].getEnclosedNode()))return!1;var Ne,xe;if((Ne=!Se&&1===Ce.length)&&!(Ne=Ce[0].collapsed)){var we=Ce[0];Ne=we.startContainer.getAscendant({td:1,th:1},!0);var Ie=we.endContainer.getAscendant({td:1,th:1},!0);xe=CKEDITOR.tools.trim,Ne&&Ne.equals(Ie)&&!Ne.findOne("td, th, tr, tbody, table")?(we=we.cloneContents(),Ne=!we.getFirst()||xe(we.getFirst().getText())!==xe(Ne.getText())):Ne=!1}if(Ne)return!1;for(xe=0;xe<Ce.length;xe++)if(Ne=Ce[xe]._getTableElement(),!Ne)return!1;return!0}function ee(Ce){function Se(Ie){Ie=Ie.find("td, th");var Oe=[],Ae;for(Ae=0;Ae<Ie.count();Ae++)Oe.push(Ie.getItem(Ae));return Oe}var Ne=[],xe,we;for(we=0;we<Ce.length;we++)xe=Ce[we]._getTableElement(),xe.is&&xe.is({td:1,th:1})?Ne.push(xe):Ne=Ne.concat(Se(xe));return Ne}function te(Ce){Ce=ee(Ce);var Se="",Ne=[],xe,we;for(we=0;we<Ce.length;we++)xe&&!xe.equals(Ce[we].getAscendant("tr"))?(Se+=Ne.join("\t")+"\n",xe=Ce[we].getAscendant("tr"),Ne=[]):0===we&&(xe=Ce[we].getAscendant("tr")),Ne.push(Ce[we].getText());return Se+=Ne.join("\t")}function oe(Ce){var Se=this.root.editor,Ne=Se.getSelection(1);this.reset(),_e=!0,Ne.root.once("selectionchange",function(xe){xe.cancel()},null,null,0),Ne.selectRanges([Ce[0]]),Ne=this._.cache,Ne.ranges=new CKEDITOR.dom.rangeList(Ce),Ne.type=CKEDITOR.SELECTION_TEXT,Ne.selectedElement=Ce[0]._getTableElement(),Ne.selectedText=te(Ce),Ne.nativeSel=null,this.isFake=1,this.rev=he++,Se._.fakeSelection=this,_e=!1,this.root.fire("selectionchange")}function ne(){var Ce=this._.fakeSelection,Se;if(Ce){Se=this.getSelection(1);var Ne;if(!(Ne=!Se)&&(Ne=!Se.isHidden())){Ne=Ce;var xe=Se.getRanges(),we=Ne.getRanges(),Ie=xe.length&&xe[0]._getTableElement()&&xe[0]._getTableElement().getAscendant("table",!0),Oe=we.length&&we[0]._getTableElement()&&we[0]._getTableElement().getAscendant("table",!0),Ae=1===xe.length&&xe[0]._getTableElement()&&xe[0]._getTableElement().is("table"),De=1===we.length&&we[0]._getTableElement()&&we[0]._getTableElement().is("table");if($(Ne.getSelectedElement()))Ne=!1;else{var Re=1===xe.length&&xe[0].collapsed,we=j(xe,!!CKEDITOR.env.webkit)&&j(we);Ie=Ie&&Oe&&(Ie.equals(Oe)||Oe.contains(Ie)),Ie&&(Re||we)?(Ae&&!De&&Ne.selectRanges(xe),Ne=!0):Ne=!1}Ne=!Ne}Ne&&(Ce.reset(),Ce=0)}!Ce&&(Ce=Se||this.getSelection(1),!Ce||Ce.getType()==CKEDITOR.SELECTION_NONE)||(this.fire("selectionCheck",Ce),Se=this.elementPath(),Se.compare(this._.selectionPreviousPath)||(Ne=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(Se.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||Ne||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=Se,this.fire("selectionChange",{selection:Ce,path:Se})))}function ae(){ye=!0,Ee||(ie.call(this),Ee=CKEDITOR.tools.setTimeout(ie,200,this))}function ie(){Ee=null,ye&&(CKEDITOR.tools.setTimeout(ne,0,this),ye=!1)}function le(Ce){return ke(Ce)||Ce.type==CKEDITOR.NODE_ELEMENT&&!Ce.is(CKEDITOR.dtd.$empty)}function re(Ce){function Se(Ie,Oe){return Ie&&Ie.type!=CKEDITOR.NODE_TEXT&&Ce.clone()["moveToElementEdit"+(Oe?"End":"Start")](Ie)}if(!(Ce.root instanceof CKEDITOR.editable))return!1;var Ne=Ce.startContainer,xe=Ce.getPreviousNode(le,null,Ne),we=Ce.getNextNode(le,null,Ne);return Se(xe)||Se(we,1)||!(xe||we||Ne.type==CKEDITOR.NODE_ELEMENT&&Ne.isBlockBoundary()&&Ne.getBogus())}function se(Ce){de(Ce,!1);var Se=Ce.getDocument().createText(fe);return Ce.setCustomData("cke-fillingChar",Se),Se}function de(Ce,Se){var Ne=Ce&&Ce.removeCustomData("cke-fillingChar");if(Ne){if(!1!==Se){var xe=Ce.getDocument().getSelection().getNative(),we=xe&&"None"!=xe.type&&xe.getRangeAt(0),Ie=fe.length;if(Ne.getLength()>Ie&&we&&we.intersectsNode(Ne.$)){var Oe=[{node:xe.anchorNode,offset:xe.anchorOffset},{node:xe.focusNode,offset:xe.focusOffset}];xe.anchorNode==Ne.$&&xe.anchorOffset>Ie&&(Oe[0].offset-=Ie),xe.focusNode==Ne.$&&xe.focusOffset>Ie&&(Oe[1].offset-=Ie)}}Ne.setText(ce(Ne.getText(),1)),Oe&&(Ne=Ce.getDocument().$,xe=Ne.getSelection(),Ne=Ne.createRange(),Ne.setStart(Oe[0].node,Oe[0].offset),Ne.collapse(!0),xe.removeAllRanges(),xe.addRange(Ne),xe.extend(Oe[1].node,Oe[1].offset))}}function ce(Ce,Se){return Se?Ce.replace(be,function(Ne,xe){return xe?"\xA0":""}):Ce.replace(fe,"")}function me(Ce,Se){var Ne=Se&&CKEDITOR.tools.htmlEncode(Se)||"&nbsp;",Ne=CKEDITOR.dom.element.createFromHtml("<div data-cke-hidden-sel=\"1\" data-cke-temp=\"1\" style=\""+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+"\">"+Ne+"</div>",Ce.document);Ce.fire("lockSnapshot"),Ce.editable().append(Ne);var xe=Ce.getSelection(1),we=Ce.createRange(),Ie=xe.root.on("selectionchange",function(Oe){Oe.cancel()},null,null,0);we.setStartAt(Ne,CKEDITOR.POSITION_AFTER_START),we.setEndAt(Ne,CKEDITOR.POSITION_BEFORE_END),xe.selectRanges([we]),Ie.removeListener(),Ce.fire("unlockSnapshot"),Ce._.hiddenSelectionContainer=Ne}function ue(Ce){var Se={8:1,37:1,39:1,46:1};return function(Ne){var xe=Ne.data.getKeystroke();if(Se[xe]){var we=Ce.getSelection().getRanges(),Ie=we[0];1==we.length&&Ie.collapsed&&(xe=Ie[38>xe?"getPreviousEditableNode":"getNextEditableNode"]())&&xe.type==CKEDITOR.NODE_ELEMENT&&"false"==xe.getAttribute("contenteditable")&&(Ce.getSelection().fake(xe),Ne.data.preventDefault(),Ne.cancel())}}}function ge(Ce){for(var Se=0,Ne;Se<Ce.length;Se++)if(Ne=Ce[Se],Ne.getCommonAncestor().isReadOnly()&&Ce.splice(Se,1),!Ne.collapsed){if(Ne.startContainer.isReadOnly())for(var xe=Ne.startContainer,we;xe&&!((we=xe.type==CKEDITOR.NODE_ELEMENT)&&xe.is("body")||!xe.isReadOnly());)we&&"false"==xe.getAttribute("contentEditable")&&Ne.setStartAfter(xe),xe=xe.getParent();xe=Ne.startContainer,we=Ne.endContainer;var Ie=Ne.startOffset,Oe=Ne.endOffset,Ae=Ne.clone();xe&&xe.type==CKEDITOR.NODE_TEXT&&(Ie>=xe.getLength()?Ae.setStartAfter(xe):Ae.setStartBefore(xe)),we&&we.type==CKEDITOR.NODE_TEXT&&(Oe?Ae.setEndAfter(we):Ae.setEndBefore(we)),xe=new CKEDITOR.dom.walker(Ae),xe.evaluator=function(De){if(De.type==CKEDITOR.NODE_ELEMENT&&De.isReadOnly()){var Re=Ne.clone();return Ne.setEndBefore(De),Ne.collapsed&&Ce.splice(Se--,1),De.getPosition(Ae.endContainer)&CKEDITOR.POSITION_CONTAINS||(Re.setStartAfter(De),Re.collapsed||Ce.splice(Se+1,0,Re)),!0}return!1},xe.next()}return Ce}var pe="function"!=typeof window.getSelection,he=1,fe=CKEDITOR.tools.repeat("\u200B",7),be=new RegExp(fe+"( )?","g"),ke=CKEDITOR.dom.walker.invisible(1),Te=function(){function Ce(we){return function(Ie){var Oe=Ie.editor.createRange();return Oe.moveToClosestEditablePosition(Ie.selected,we)&&Ie.editor.getSelection().selectRanges([Oe]),!1}}function Se(we){return function(Ie){var Oe=Ie.editor,Ae=Oe.createRange(),De;if(!Oe.readOnly)return(De=Ae.moveToClosestEditablePosition(Ie.selected,we))||(De=Ae.moveToClosestEditablePosition(Ie.selected,!we)),De&&Oe.getSelection().selectRanges([Ae]),Oe.fire("saveSnapshot"),Ie.selected.remove(),De||(Ae.moveToElementEditablePosition(Oe.editable()),Oe.getSelection().selectRanges([Ae])),Oe.fire("saveSnapshot"),!1}}var Ne=Ce(),xe=Ce(1);return{37:Ne,38:Ne,39:xe,40:xe,8:Se(),46:Se(1)}}(),_e,Ee,ye;CKEDITOR.on("instanceCreated",function(Ce){function Se(){var xe=Ne.getSelection();xe&&xe.removeAllRanges()}var Ne=Ce.editor;Ne.on("contentDom",function(){function xe(){Pe=new CKEDITOR.dom.selection(Ne.getSelection()),Pe.lock()}function we(){Ae.removeListener("mouseup",we),Le.removeListener("mouseup",we);var ze=CKEDITOR.document.$.selection,Ue=ze.createRange();"None"!=ze.type&&Ue.parentElement()&&Ue.parentElement().ownerDocument==Oe.$&&Ue.select()}function Ie(ze){return ze=ze.getRanges()[0],ze?(ze=ze.startContainer.getAscendant(function(Ue){return Ue.type==CKEDITOR.NODE_ELEMENT&&Ue.hasAttribute("contenteditable")},!0))&&"false"===ze.getAttribute("contenteditable")?ze:null:null}var Oe=Ne.document,Ae=CKEDITOR.document,De=Ne.editable(),Re=Oe.getBody(),Le=Oe.getDocumentElement(),Fe=De.isInline(),Be,Pe;if(CKEDITOR.env.gecko&&De.attachListener(De,"focus",function(ze){ze.removeListener(),0!==Be&&(ze=Ne.getSelection().getNative())&&ze.isCollapsed&&ze.anchorNode==De.$&&(ze=Ne.createRange(),ze.moveToElementEditStart(De),ze.select())},null,null,-2),De.attachListener(De,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){if(Be&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){Be=Ne._.previousActive&&Ne._.previousActive.equals(Oe.getActive());var ze=null!=Ne._.previousScrollTop&&Ne._.previousScrollTop!=De.$.scrollTop;CKEDITOR.env.webkit&&Be&&ze&&(De.$.scrollTop=Ne._.previousScrollTop)}Ne.unlockSelection(Be),Be=0},null,null,-1),De.attachListener(De,"mousedown",function(){Be=0}),(CKEDITOR.env.ie||Fe)&&(pe?De.attachListener(De,"beforedeactivate",xe,null,null,-1):De.attachListener(Ne,"selectionCheck",xe,null,null,-1),De.attachListener(De,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",function(){Ne.lockSelection(Pe),Be=1},null,null,-1),De.attachListener(De,"mousedown",function(){Be=0})),CKEDITOR.env.ie&&!Fe){var Me;if(De.attachListener(De,"mousedown",function(ze){2==ze.data.$.button&&((ze=Ne.document.getSelection())&&ze.getType()!=CKEDITOR.SELECTION_NONE||(Me=Ne.window.getScrollPosition()))}),De.attachListener(De,"mouseup",function(ze){2==ze.data.$.button&&Me&&(Ne.document.$.documentElement.scrollLeft=Me.x,Ne.document.$.documentElement.scrollTop=Me.y),Me=null}),"BackCompat"!=Oe.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var $e,He;Le.on("mousedown",function(ze){function Ue(Ve){if(Ve=Ve.data.$,$e){var Ke=Re.$.createTextRange();try{Ke.moveToPoint(Ve.clientX,Ve.clientY)}catch(We){}$e.setEndPoint(0>He.compareEndPoints("StartToStart",Ke)?"EndToEnd":"StartToStart",Ke),$e.select()}}function je(){Le.removeListener("mousemove",Ue),Ae.removeListener("mouseup",je),Le.removeListener("mouseup",je),$e.select()}if(ze=ze.data,ze.getTarget().is("html")&&ze.$.y<Le.$.clientHeight&&ze.$.x<Le.$.clientWidth){$e=Re.$.createTextRange();try{$e.moveToPoint(ze.$.clientX,ze.$.clientY)}catch(Ve){}He=$e.duplicate(),Le.on("mousemove",Ue),Ae.on("mouseup",je),Le.on("mouseup",je)}})}7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&Le.on("mousedown",function(ze){ze.data.getTarget().is("html")&&(Ae.on("mouseup",we),Le.on("mouseup",we))})}}if(De.attachListener(De,"selectionchange",ne,Ne),De.attachListener(De,"keyup",ae,Ne),De.attachListener(De,"touchstart",ae,Ne),De.attachListener(De,"touchend",ae,Ne),CKEDITOR.env.ie&&De.attachListener(De,"keydown",function(ze){var Ue=this.getSelection(1),je=Ie(Ue);je&&!je.equals(De)&&(Ue.selectElement(je),ze.data.preventDefault())},Ne),De.attachListener(De,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){Ne.forceNextSelectionCheck(),Ne.selectionChange(1)}),Fe&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var qe;De.attachListener(De,"mousedown",function(){qe=1}),De.attachListener(Oe.getDocumentElement(),"mouseup",function(){qe&&ae.call(Ne),qe=0})}else De.attachListener(CKEDITOR.env.ie?De:Oe.getDocumentElement(),"mouseup",ae,Ne);CKEDITOR.env.webkit&&De.attachListener(Oe,"keydown",function(ze){switch(ze.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:De.hasFocus&&de(De);}},null,null,-1),De.attachListener(De,"keydown",ue(Ne),null,null,-1)}),Ne.on("setData",function(){Ne.unlockSelection(),CKEDITOR.env.webkit&&Se()}),Ne.on("contentDomUnload",function(){Ne.unlockSelection()}),CKEDITOR.env.ie9Compat&&Ne.on("beforeDestroy",Se,null,null,9),Ne.on("dataReady",function(){delete Ne._.fakeSelection,delete Ne._.hiddenSelectionContainer,Ne.selectionChange(1)}),Ne.on("loadSnapshot",function(){var xe=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),we=Ne.editable().getLast(xe);we&&we.hasAttribute("data-cke-hidden-sel")&&(we.remove(),CKEDITOR.env.gecko&&(xe=Ne.editable().getFirst(xe))&&xe.is("br")&&xe.getAttribute("_moz_editor_bogus_node")&&xe.remove())},null,null,100),Ne.on("key",function(xe){if("wysiwyg"==Ne.mode){var we=Ne.getSelection();if(we.isFake){var Ie=Te[xe.data.keyCode];if(Ie)return Ie({editor:Ne,selected:we.getSelectedElement(),selection:we,keyEvent:xe})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(Ce){var Se=Ce.editor;Se.on("selectionChange",function(){var Ne=Se.editable(),xe=Ne.getCustomData("cke-fillingChar");xe&&(xe.getCustomData("ready")?(de(Ne),Ne.editor.fire("selectionCheck")):xe.setCustomData("ready",1))},null,null,-1),Se.on("beforeSetMode",function(){de(Se.editable())},null,null,-1),Se.on("getSnapshot",function(Ne){Ne.data&&(Ne.data=ce(Ne.data))},Se,null,20),Se.on("toDataFormat",function(Ne){Ne.data.dataValue=ce(Ne.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(Ce){(Ce?ne:ae).call(this)},CKEDITOR.editor.prototype.getSelection=function(Ce){return(this._.savedSelection||this._.fakeSelection)&&!Ce?this._.savedSelection||this._.fakeSelection:(Ce=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(Ce):null},CKEDITOR.editor.prototype.lockSelection=function(Ce){return Ce=Ce||this.getSelection(1),Ce.getType()!=CKEDITOR.SELECTION_NONE&&(!Ce.isLocked&&Ce.lock(),this._.savedSelection=Ce,!0)},CKEDITOR.editor.prototype.unlockSelection=function(Ce){var Se=this._.savedSelection;return!!Se&&(Se.unlock(Ce),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var Ce=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return Ce.selectRanges([this]),Ce},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(Ce){if(Ce instanceof CKEDITOR.dom.selection){var Se=Ce;Ce=Ce.root}var Ne=Ce instanceof CKEDITOR.dom.element;if(this.rev=Se?Se.rev:he++,this.document=Ce instanceof CKEDITOR.dom.document?Ce:Ce.getDocument(),this.root=Ne?Ce:this.document.getBody(),this.isLocked=0,this._={cache:{}},Se)return CKEDITOR.tools.extend(this._.cache,Se._.cache),this.isFake=Se.isFake,this.isLocked=Se.isLocked,this;Ce=this.getNative();var xe,we;if(Ce)if(Ce.getRangeAt)xe=(we=Ce.rangeCount&&Ce.getRangeAt(0))&&new CKEDITOR.dom.node(we.commonAncestorContainer);else{try{we=Ce.createRange()}catch(Ie){}xe=we&&CKEDITOR.dom.element.get(we.item&&we.item(0)||we.parentElement())}return xe&&(xe.type==CKEDITOR.NODE_ELEMENT||xe.type==CKEDITOR.NODE_TEXT)&&(this.root.equals(xe)||this.root.contains(xe))||(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var ve={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:ce,_createFillingCharSequenceNode:se,FILLING_CHAR_SEQUENCE:fe}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0===this._.cache.nativeSel?this._.cache.nativeSel=pe?this.document.$.selection:this.document.getWindow().$.getSelection():this._.cache.nativeSel},getType:pe?function(){var Ce=this._.cache;if(Ce.type)return Ce.type;var Se=CKEDITOR.SELECTION_NONE;try{var Ne=this.getNative(),xe=Ne.type;"Text"==xe&&(Se=CKEDITOR.SELECTION_TEXT),"Control"==xe&&(Se=CKEDITOR.SELECTION_ELEMENT),Ne.createRange().parentElement()&&(Se=CKEDITOR.SELECTION_TEXT)}catch(we){}return Ce.type=Se}:function(){var Ce=this._.cache;if(Ce.type)return Ce.type;var Se=CKEDITOR.SELECTION_TEXT,Ne=this.getNative();if(!Ne||!Ne.rangeCount)Se=CKEDITOR.SELECTION_NONE;else if(1==Ne.rangeCount){var Ne=Ne.getRangeAt(0),xe=Ne.startContainer;xe==Ne.endContainer&&1==xe.nodeType&&1==Ne.endOffset-Ne.startOffset&&ve[xe.childNodes[Ne.startOffset].nodeName.toLowerCase()]&&(Se=CKEDITOR.SELECTION_ELEMENT)}return Ce.type=Se},getRanges:function(){var Ce=pe?function(){function Se(xe){return new CKEDITOR.dom.node(xe).getIndex()}var Ne=function(xe,we){xe=xe.duplicate(),xe.collapse(we);var Ie=xe.parentElement();if(!Ie.hasChildNodes())return{container:Ie,offset:0};for(var Oe=Ie.children,Re=xe.duplicate(),Le=0,Fe=Oe.length-1,Be=-1,Ae,De,Pe,Me;Le<=Fe;)if(Be=_Mathfloor((Le+Fe)/2),Ae=Oe[Be],Re.moveToElementText(Ae),Pe=Re.compareEndPoints("StartToStart",xe),0<Pe)Fe=Be-1;else if(0>Pe)Le=Be+1;else return{container:Ie,offset:Se(Ae)};if(-1==Be||Be==Oe.length-1&&0>Pe){if(Re.moveToElementText(Ie),Re.setEndPoint("StartToStart",xe),Re=Re.text.replace(/(\r\n|\r)/g,"\n").length,Oe=Ie.childNodes,!Re)return Ae=Oe[Oe.length-1],Ae.nodeType==CKEDITOR.NODE_TEXT?{container:Ae,offset:Ae.nodeValue.length}:{container:Ie,offset:Oe.length};for(Ie=Oe.length;0<Re&&0<Ie;)De=Oe[--Ie],De.nodeType==CKEDITOR.NODE_TEXT&&(Me=De,Re-=De.nodeValue.length);return{container:Me,offset:-Re}}if(Re.collapse(!!(0<Pe)),Re.setEndPoint(0<Pe?"StartToStart":"EndToStart",xe),Re=Re.text.replace(/(\r\n|\r)/g,"\n").length,!Re)return{container:Ie,offset:Se(Ae)+(0<Pe?0:1)};for(;0<Re;)try{De=Ae[0<Pe?"previousSibling":"nextSibling"],De.nodeType==CKEDITOR.NODE_TEXT&&(Re-=De.nodeValue.length,Me=De),Ae=De}catch($e){return{container:Ie,offset:Se(Ae)}}return{container:Me,offset:0<Pe?-Re:Me.nodeValue.length+Re}};return function(){var xe=this.getNative(),we=xe&&xe.createRange(),Ie=this.getType();if(!xe)return[];if(Ie==CKEDITOR.SELECTION_TEXT)return xe=new CKEDITOR.dom.range(this.root),Ie=Ne(we,!0),xe.setStart(new CKEDITOR.dom.node(Ie.container),Ie.offset),Ie=Ne(we),xe.setEnd(new CKEDITOR.dom.node(Ie.container),Ie.offset),xe.endContainer.getPosition(xe.startContainer)&CKEDITOR.POSITION_PRECEDING&&xe.endOffset<=xe.startContainer.getIndex()&&xe.collapse(),[xe];if(Ie==CKEDITOR.SELECTION_ELEMENT){for(var Ie=[],Oe=0;Oe<we.length;Oe++){for(var Ae=we.item(Oe),De=Ae.parentNode,Re=0,xe=new CKEDITOR.dom.range(this.root);Re<De.childNodes.length&&De.childNodes[Re]!=Ae;Re++);xe.setStart(new CKEDITOR.dom.node(De),Re),xe.setEnd(new CKEDITOR.dom.node(De),Re+1),Ie.push(xe)}return Ie}return[]}}():function(){var Se=[],xe=this.getNative(),Ne;if(!xe)return Se;for(var we=0,Ie;we<xe.rangeCount;we++)Ie=xe.getRangeAt(we),Ne=new CKEDITOR.dom.range(this.root),Ne.setStart(new CKEDITOR.dom.node(Ie.startContainer),Ie.startOffset),Ne.setEnd(new CKEDITOR.dom.node(Ie.endContainer),Ie.endOffset),Se.push(Ne);return Se};return function(Se){var Ne=this._.cache,xe=Ne.ranges;return xe||(Ne.ranges=xe=new CKEDITOR.dom.rangeList(Ce.call(this))),Se?ge(new CKEDITOR.dom.rangeList(xe.slice())):xe}}(),getStartElement:function(){var Ce=this._.cache;if(void 0!==Ce.startElement)return Ce.startElement;var Se;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var Ne=this.getRanges()[0];if(Ne){if(Ne.collapsed)Se=Ne.startContainer,Se.type!=CKEDITOR.NODE_ELEMENT&&(Se=Se.getParent());else{for(Ne.optimize();Se=Ne.startContainer,Ne.startOffset==(Se.getChildCount?Se.getChildCount():Se.getLength())&&!Se.isBlockBoundary();)Ne.setStartAfter(Se);if(Se=Ne.startContainer,Se.type!=CKEDITOR.NODE_ELEMENT)return Se.getParent();if((Se=Se.getChild(Ne.startOffset))&&Se.type==CKEDITOR.NODE_ELEMENT)for(Ne=Se.getFirst();Ne&&Ne.type==CKEDITOR.NODE_ELEMENT;)Se=Ne,Ne=Ne.getFirst();else Se=Ne.startContainer}Se=Se.$}}return Ce.startElement=Se?new CKEDITOR.dom.element(Se):null},getSelectedElement:function(){var Ce=this._.cache;if(void 0!==Ce.selectedElement)return Ce.selectedElement;var Se=this,Ne=CKEDITOR.tools.tryThese(function(){return Se.getNative().createRange().item(0)},function(){for(var xe=Se.getRanges()[0].clone(),Oe=2,we,Ie;Oe&&!((we=xe.getEnclosedNode())&&we.type==CKEDITOR.NODE_ELEMENT&&ve[we.getName()]&&(Ie=we));Oe--)xe.shrink(CKEDITOR.SHRINK_ELEMENT);return Ie&&Ie.$});return Ce.selectedElement=Ne?new CKEDITOR.dom.element(Ne):null},getSelectedText:function(){var Ce=this._.cache;if(void 0!==Ce.selectedText)return Ce.selectedText;var Se=this.getNative(),Se=pe?"Control"==Se.type?"":Se.createRange().text:Se.toString();return Ce.selectedText=Se},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(Ce){if(this.isLocked){if(Ce)var Se=this.getSelectedElement(),Ne=this.getRanges(),xe=this.isFake;this.isLocked=0,this.reset(),Ce&&(Ce=Se||Ne[0]&&Ne[0].getCommonAncestor())&&Ce.getAscendant("body",1)&&(j(Ne)?oe.call(this,Ne):xe?this.fake(Se):Se?this.selectElement(Se):this.selectRanges(Ne))}},reset:function(){this._.cache={},this.isFake=0;var Ce=this.root.editor;if(Ce&&Ce._.fakeSelection)if(this.rev==Ce._.fakeSelection.rev){delete Ce._.fakeSelection;var Se=Ce._.hiddenSelectionContainer;if(Se){var Ne=Ce.checkDirty();Ce.fire("lockSnapshot"),Se.remove(),Ce.fire("unlockSnapshot"),Ne||Ce.resetDirty()}delete Ce._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=he++},selectElement:function(Ce){var Se=new CKEDITOR.dom.range(this.root);Se.setStartBefore(Ce),Se.setEndAfter(Ce),this.selectRanges([Se])},selectRanges:function(Ce){var Se=this.root.editor,Ne=Se&&Se._.hiddenSelectionContainer;if(this.reset(),Ne)for(var Ne=this.root,we=0,xe;we<Ce.length;++we)xe=Ce[we],xe.endContainer.equals(Ne)&&(xe.endOffset=_Mathmin(xe.endOffset,Ne.getChildCount()));if(Ce.length)if(this.isLocked){var Ie=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(Ce),this.lock(),Ie&&!Ie.equals(this.root)&&Ie.focus()}else{var Oe;a:{var Ae,De;if(1==Ce.length&&!(De=Ce[0]).collapsed&&(Oe=De.getEnclosedNode())&&Oe.type==CKEDITOR.NODE_ELEMENT&&(De=De.clone(),De.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(Ae=De.getEnclosedNode())&&Ae.type==CKEDITOR.NODE_ELEMENT&&(Oe=Ae),"false"==Oe.getAttribute("contenteditable")))break a;Oe=void 0}if(Oe)this.fake(Oe);else if(Se&&Se.plugins.tableselection&&CKEDITOR.plugins.tableselection.isSupportedEnvironment&&j(Ce)&&!_e)oe.call(this,Ce);else{if(pe){Ae=CKEDITOR.dom.walker.whitespaces(!0),Oe=/\ufeff|\u00a0/,De={table:1,tbody:1,tr:1},1<Ce.length&&(Se=Ce[Ce.length-1],Ce[0].setEnd(Se.endContainer,Se.endOffset)),Se=Ce[0],Ce=Se.collapsed;var Re,Le,Fe;if((Ne=Se.getEnclosedNode())&&Ne.type==CKEDITOR.NODE_ELEMENT&&Ne.getName()in ve&&(!Ne.is("a")||!Ne.getText()))try{return Fe=Ne.$.createControlRange(),Fe.addElement(Ne.$),void Fe.select()}catch(Be){}(Se.startContainer.type==CKEDITOR.NODE_ELEMENT&&Se.startContainer.getName()in De||Se.endContainer.type==CKEDITOR.NODE_ELEMENT&&Se.endContainer.getName()in De)&&(Se.shrink(CKEDITOR.NODE_ELEMENT,!0),Ce=Se.collapsed),Fe=Se.createBookmark(),De=Fe.startNode,Ce||(Ie=Fe.endNode),Fe=Se.document.$.body.createTextRange(),Fe.moveToElementText(De.$),Fe.moveStart("character",1),Ie?(Oe=Se.document.$.body.createTextRange(),Oe.moveToElementText(Ie.$),Fe.setEndPoint("EndToEnd",Oe),Fe.moveEnd("character",-1)):(Re=De.getNext(Ae),Le=De.hasAscendant("pre"),Re=!(Re&&Re.getText&&Re.getText().match(Oe))&&(Le||!De.hasPrevious()||De.getPrevious().is&&De.getPrevious().is("br")),Le=Se.document.createElement("span"),Le.setHtml("&#65279;"),Le.insertBefore(De),Re&&Se.document.createText("\uFEFF").insertBefore(De)),Se.setStartBefore(De),De.remove(),Ce?(Re?(Fe.moveStart("character",-1),Fe.select(),Se.document.$.selection.clear()):Fe.select(),Se.moveToPosition(Le,CKEDITOR.POSITION_BEFORE_START),Le.remove()):(Se.setEndBefore(Ie),Ie.remove(),Fe.select())}else{if(Ie=this.getNative(),!Ie)return;for(this.removeAllRanges(),Fe=0;Fe<Ce.length;Fe++){if(Fe<Ce.length-1&&(Re=Ce[Fe],Le=Ce[Fe+1],Oe=Re.clone(),Oe.setStart(Re.endContainer,Re.endOffset),Oe.setEnd(Le.startContainer,Le.startOffset),!Oe.collapsed&&(Oe.shrink(CKEDITOR.NODE_ELEMENT,!0),Se=Oe.getCommonAncestor(),Oe=Oe.getEnclosedNode(),Se.isReadOnly()||Oe&&Oe.isReadOnly()))){Le.setStart(Re.startContainer,Re.startOffset),Ce.splice(Fe--,1);continue}Se=Ce[Fe],Le=this.document.$.createRange(),Se.collapsed&&CKEDITOR.env.webkit&&re(Se)&&(Oe=se(this.root),Se.insertNode(Oe),(Re=Oe.getNext())&&!Oe.getPrevious()&&Re.type==CKEDITOR.NODE_ELEMENT&&"br"==Re.getName()?(de(this.root),Se.moveToPosition(Re,CKEDITOR.POSITION_BEFORE_START)):Se.moveToPosition(Oe,CKEDITOR.POSITION_AFTER_END)),Le.setStart(Se.startContainer.$,Se.startOffset);try{Le.setEnd(Se.endContainer.$,Se.endOffset)}catch(Be){if(0<=Be.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))Se.collapse(1),Le.setEnd(Se.endContainer.$,Se.endOffset);else throw Be}Ie.addRange(Le)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(Ce,Se){var Ne=this.root.editor;void 0===Se&&Ce.hasAttribute("aria-label")&&(Se=Ce.getAttribute("aria-label")),this.reset(),me(Ne,Se);var xe=this._.cache,we=new CKEDITOR.dom.range(this.root);we.setStartBefore(Ce),we.setEndAfter(Ce),xe.ranges=new CKEDITOR.dom.rangeList(we),xe.selectedElement=xe.startElement=Ce,xe.type=CKEDITOR.SELECTION_ELEMENT,xe.selectedText=xe.nativeSel=null,this.isFake=1,this.rev=he++,Ne._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var Ce=this.getCommonAncestor();return Ce&&Ce.type==CKEDITOR.NODE_TEXT&&(Ce=Ce.getParent()),Ce&&Ce.data("cke-hidden-sel")},isInTable:function(Ce){return j(this.getRanges(),Ce)},isCollapsed:function(){var Ce=this.getRanges();return 1===Ce.length&&Ce[0].collapsed},createBookmarks:function(Ce){return Ce=this.getRanges().createBookmarks(Ce),this.isFake&&(Ce.isFake=1),Ce},createBookmarks2:function(Ce){return Ce=this.getRanges().createBookmarks2(Ce),this.isFake&&(Ce.isFake=1),Ce},selectBookmarks:function(Ce){for(var Se=[],xe=0,Ne,we;xe<Ce.length;xe++)we=new CKEDITOR.dom.range(this.root),we.moveToBookmark(Ce[xe]),Se.push(we);return Ce.isFake&&(Ne=j(Se)?Se[0]._getTableElement():Se[0].getEnclosedNode(),Ne&&Ne.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),Ce.isFake=0)),Ce.isFake&&!j(Se)?this.fake(Ne):this.selectRanges(Se),this},getCommonAncestor:function(){var Ce=this.getRanges();return Ce.length?Ce[0].startContainer.getCommonAncestor(Ce[Ce.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var Ce=this.getNative();try{Ce&&Ce[pe?"empty":"removeAllRanges"]()}catch(Se){}this.reset()}}}}(),"use strict",CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function $(Oe,Ae){for(var De,Re;(Oe=Oe.getParent())&&!Oe.equals(Ae);)if(Oe.getAttribute("data-nostyle"))De=Oe;else if(!Re){var Le=Oe.getAttribute("contentEditable");"false"==Le?De=Oe:"true"==Le&&(Re=1)}return De}function j(Oe,Ae,De,Re){return(Oe.getPosition(Ae)|Re)==Re&&(!De.childRule||De.childRule(Oe))}function ee(Oe){var Ae=Oe.document;if(Oe.collapsed)Ae=he(this,Ae),Oe.insertNode(Ae),Oe.moveToPosition(Ae,CKEDITOR.POSITION_BEFORE_END);else{var De=this.element,Re=this._.definition,Fe=Re.ignoreReadonly,Be=Fe||Re.includeReadonly,Le;null==Be&&(Be=Oe.root.getCustomData("cke_includeReadonly"));var Pe=CKEDITOR.dtd[De];Pe||(Le=!0,Pe=CKEDITOR.dtd.span),Oe.enlarge(CKEDITOR.ENLARGE_INLINE,1),Oe.trim();var Me=Oe.createBookmark(),$e=Me.startNode,He=Me.endNode,qe=$e,ze;if(!Fe){var Ue=Oe.getCommonAncestor(),Fe=$($e,Ue),Ue=$(He,Ue);Fe&&(qe=Fe.getNextSourceNode(!0)),Ue&&(He=Ue)}for(qe.getPosition(He)==CKEDITOR.POSITION_FOLLOWING&&(qe=0);qe;){if(Fe=!1,qe.equals(He))qe=null,Fe=!0;else{var je=qe.type==CKEDITOR.NODE_ELEMENT?qe.getName():null,Ue=je&&"false"==qe.getAttribute("contentEditable"),Ve=je&&qe.getAttribute("data-nostyle");if(je&&qe.data("cke-bookmark")||qe.type===CKEDITOR.NODE_COMMENT){qe=qe.getNextSourceNode(!0);continue}if(Ue&&Be&&CKEDITOR.dtd.$block[je])for(var Ke=qe,We=oe(Ke),Ge=void 0,Xe=We.length,Ye=0,Ke=Xe&&new CKEDITOR.dom.range(Ke.getDocument());Ye<Xe;++Ye){var Ge=We[Ye],Ze=CKEDITOR.filter.instances[Ge.data("cke-filter")];(Ze?Ze.check(this):1)&&(Ke.selectNodeContents(Ge),ee.call(this,Ke))}if(We=je?!Pe[je]||Ve?0:Ue&&!Be?0:j(qe,He,Re,we):1,!We)Fe=!0;else if(Ge=qe.getParent(),We=Re,Xe=De,Ye=Le,!Ge||!(Ge.getDtd()||CKEDITOR.dtd.span)[Xe]&&!Ye||We.parentRule&&!We.parentRule(Ge))Fe=!0;else if(ze||je&&CKEDITOR.dtd.$removeEmpty[je]&&(qe.getPosition(He)|we)!=we||(ze=Oe.clone(),ze.setStartBefore(qe)),je=qe.type,je==CKEDITOR.NODE_TEXT||Ue||je==CKEDITOR.NODE_ELEMENT&&!qe.getChildCount()){for(var je=qe,Je;(Fe=!je.getNext(Ne))&&(Je=je.getParent(),Pe[Je.getName()])&&j(Je,$e,Re,Ie);)je=Je;ze.setEndAfter(je)}qe=qe.getNextSourceNode(Ve||Ue)}if(Fe&&ze&&!ze.collapsed){for(var Fe=he(this,Ae),Ue=Fe.hasAttributes(),Ve=ze.getCommonAncestor(),je={},We={},Ge={},Xe={},Qe,et,tt;Fe&&Ve;){if(Ve.getName()==De){for(Qe in Re.attributes)!Xe[Qe]&&(tt=Ve.getAttribute(et))&&(Fe.getAttribute(Qe)==tt?We[Qe]=1:Xe[Qe]=1);for(et in Re.styles)!Ge[et]&&(tt=Ve.getStyle(et))&&(Fe.getStyle(et)==tt?je[et]=1:Ge[et]=1)}Ve=Ve.getParent()}for(Qe in We)Fe.removeAttribute(Qe);for(et in je)Fe.removeStyle(et);Ue&&!Fe.hasAttributes()&&(Fe=null),Fe?(ze.extractContents().appendTo(Fe),ze.insertNode(Fe),ue.call(this,Fe),Fe.mergeSiblings(),CKEDITOR.env.ie||Fe.$.normalize()):(Fe=new CKEDITOR.dom.element("span"),ze.extractContents().appendTo(Fe),ze.insertNode(Fe),ue.call(this,Fe),Fe.remove(!0)),ze=null}}Oe.moveToBookmark(Me),Oe.shrink(CKEDITOR.SHRINK_TEXT),Oe.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function te(Oe){function Ae(){for(var ze=new CKEDITOR.dom.elementPath(Re.getParent()),Ue=new CKEDITOR.dom.elementPath(He.getParent()),je=null,Ve=null,Ke=0,We;Ke<ze.elements.length&&(We=ze.elements[Ke],We!=ze.block&&We!=ze.blockLimit);Ke++)qe.checkElementRemovable(We,!0)&&(je=We);for(Ke=0;Ke<Ue.elements.length&&(We=Ue.elements[Ke],We!=Ue.block&&We!=Ue.blockLimit);Ke++)qe.checkElementRemovable(We,!0)&&(Ve=We);Ve&&He.breakParent(Ve),je&&Re.breakParent(je)}Oe.enlarge(CKEDITOR.ENLARGE_INLINE,1);var De=Oe.createBookmark(),Re=De.startNode,Le=this._.definition.alwaysRemoveElement;if(Oe.collapsed){for(var Fe=new CKEDITOR.dom.elementPath(Re.getParent(),Oe.root),Pe=0,Be,Me;Pe<Fe.elements.length&&(Me=Fe.elements[Pe])&&Me!=Fe.block&&Me!=Fe.blockLimit;Pe++)if(this.checkElementRemovable(Me)){var $e;!Le&&Oe.collapsed&&(Oe.checkBoundaryOfElement(Me,CKEDITOR.END)||($e=Oe.checkBoundaryOfElement(Me,CKEDITOR.START)))?(Be=Me,Be.match=$e?"start":"end"):(Me.mergeSiblings(),Me.is(this.element)?me.call(this,Me):ge(Me,_e(this)[Me.getName()]))}if(Be){for(Le=Re,Pe=0;;Pe++){if(Me=Fe.elements[Pe],Me.equals(Be))break;else if(Me.match)continue;else Me=Me.clone();Me.append(Le),Le=Me}Le["start"==Be.match?"insertBefore":"insertAfter"](Be)}}else{var He=De.endNode,qe=this;for(Ae(),Fe=Re;!Fe.equals(He);)Be=Fe.getNextSourceNode(),Fe.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(Fe)&&(Fe.getName()==this.element?me.call(this,Fe):ge(Fe,_e(this)[Fe.getName()]),Be.type==CKEDITOR.NODE_ELEMENT&&Be.contains(Re)&&(Ae(),Be=Re.getNext())),Fe=Be}Oe.moveToBookmark(De),Oe.shrink(CKEDITOR.NODE_ELEMENT,!0)}function oe(Oe){var Ae=[];return Oe.forEach(function(De){if("true"==De.getAttribute("contenteditable"))return Ae.push(De),!1},CKEDITOR.NODE_ELEMENT,!0),Ae}function ne(Oe){var Ae=Oe.getEnclosedNode()||Oe.getCommonAncestor(!1,!0);(Oe=new CKEDITOR.dom.elementPath(Ae,Oe.root).contains(this.element,1))&&!Oe.isReadOnly()&&fe(Oe,this)}function ae(Oe){var Ae=Oe.getCommonAncestor(!0,!0);if(Oe=new CKEDITOR.dom.elementPath(Ae,Oe.root).contains(this.element,1)){var Ae=this._.definition,De=Ae.attributes;if(De)for(var Re in De)Oe.removeAttribute(Re,De[Re]);if(Ae.styles)for(var Le in Ae.styles)Ae.styles.hasOwnProperty(Le)&&Oe.removeStyle(Le)}}function ie(Oe){var Ae=Oe.createBookmark(!0),De=Oe.createIterator();De.enforceRealBlocks=!0,this._.enterMode&&(De.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var Le=Oe.document,Re,Fe;Re=De.getNextParagraph();)!Re.isReadOnly()&&(De.activeFilter?De.activeFilter.check(this):1)&&(Fe=he(this,Le,Re),re(Re,Fe));Oe.moveToBookmark(Ae)}function le(Oe){var Ae=Oe.createBookmark(1),De=Oe.createIterator();De.enforceRealBlocks=!0,De.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var Re,Le;Re=De.getNextParagraph();)this.checkElementRemovable(Re)&&(Re.is("pre")?((Le=this._.enterMode==CKEDITOR.ENTER_BR?null:Oe.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&Re.copyAttributes(Le),re(Re,Le)):me.call(this,Re));Oe.moveToBookmark(Ae)}function re(Oe,Ae){var De=!Ae;De&&(Ae=Oe.getDocument().createElement("div"),Oe.copyAttributes(Ae));var Re=Ae&&Ae.is("pre"),Le=Oe.is("pre"),Fe=!Re&&Le;if(Re&&!Le){if(Le=Ae,(Fe=Oe.getBogus())&&Fe.remove(),Fe=Oe.getHtml(),Fe=de(Fe,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),Fe=Fe.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),Fe=Fe.replace(/([ \t\n\r]+|&nbsp;)/g," "),Fe=Fe.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var Be=Oe.getDocument().createElement("div");Be.append(Le),Le.$.outerHTML="<pre>"+Fe+"</pre>",Le.copyAttributes(Be.getFirst()),Le=Be.getFirst().remove()}else Le.setHtml(Fe);Ae=Le}else Fe?Ae=ce(De?[Oe.getHtml()]:se(Oe),Ae):Oe.moveChildren(Ae);if(Ae.replace(Oe),Re){var De=Ae,Pe;(Pe=De.getPrevious(xe))&&Pe.type==CKEDITOR.NODE_ELEMENT&&Pe.is("pre")&&(Re=de(Pe.getHtml(),/\n$/,"")+"\n\n"+de(De.getHtml(),/^\n/,""),CKEDITOR.env.ie?De.$.outerHTML="<pre>"+Re+"</pre>":De.setHtml(Re),Pe.remove())}else De&&pe(Ae)}function se(Oe){var Ae=[];return de(Oe.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(De,Re,Le){return Re+"</pre>"+Le+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(De,Re){Ae.push(Re)}),Ae}function de(Oe,Ae,De){var Re="",Le="";return Oe=Oe.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(Fe,Be,Pe){return Be&&(Re=Be),Pe&&(Le=Pe),""}),Re+Oe.replace(Ae,De)+Le}function ce(Oe,Ae){var De;1<Oe.length&&(De=new CKEDITOR.dom.documentFragment(Ae.getDocument()));for(var Re=0;Re<Oe.length;Re++){var Le=Oe[Re],Le=Le.replace(/(\r\n|\r)/g,"\n"),Le=de(Le,/^[ \t]*\n/,""),Le=de(Le,/\n$/,""),Le=de(Le,/^[ \t]+|[ \t]+$/g,function(Be,Pe){return 1==Be.length?"&nbsp;":Pe?" "+CKEDITOR.tools.repeat("&nbsp;",Be.length-1):CKEDITOR.tools.repeat("&nbsp;",Be.length-1)+" "}),Le=Le.replace(/\n/g,"<br>"),Le=Le.replace(/[ \t]{2,}/g,function(Be){return CKEDITOR.tools.repeat("&nbsp;",Be.length-1)+" "});if(De){var Fe=Ae.clone();Fe.setHtml(Le),De.append(Fe)}else Ae.setHtml(Le)}return De||Ae}function me(Oe,Ae){var De=this._.definition,Re=De.attributes,De=De.styles,Le=_e(this)[Oe.getName()],Fe=CKEDITOR.tools.isEmpty(Re)&&CKEDITOR.tools.isEmpty(De),Be;for(Be in Re)("class"!=Be&&!this._.definition.fullMatch||Oe.getAttribute(Be)==Ee(Be,Re[Be]))&&(Ae&&"data-"==Be.slice(0,5)||(Fe=Oe.hasAttribute(Be),Oe.removeAttribute(Be)));for(var Pe in De)this._.definition.fullMatch&&Oe.getStyle(Pe)!=Ee(Pe,De[Pe],!0)||(Fe=Fe||!!Oe.getStyle(Pe),Oe.removeStyle(Pe));ge(Oe,Le,Te[Oe.getName()]),Fe&&(this._.definition.alwaysRemoveElement?pe(Oe,1):CKEDITOR.dtd.$block[Oe.getName()]&&(this._.enterMode!=CKEDITOR.ENTER_BR||Oe.hasAttributes())?Oe.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"):pe(Oe))}function ue(Oe){for(var Ae=_e(this),De=Oe.getElementsByTag(this.element),Le=De.count(),Re;0<=--Le;)Re=De.getItem(Le),Re.isReadOnly()||me.call(this,Re,!0);for(var Fe in Ae)if(Fe!=this.element)for(De=Oe.getElementsByTag(Fe),Le=De.count()-1;0<=Le;Le--)Re=De.getItem(Le),Re.isReadOnly()||ge(Re,Ae[Fe])}function ge(Oe,Ae,De){if(Ae=Ae&&Ae.attributes)for(var Re=0;Re<Ae.length;Re++){var Le=Ae[Re][0],Fe;if(Fe=Oe.getAttribute(Le)){var Be=Ae[Re][1];(null===Be||Be.test&&Be.test(Fe)||"string"==typeof Be&&Fe==Be)&&Oe.removeAttribute(Le)}}De||pe(Oe)}function pe(Oe,Ae){if(!Oe.hasAttributes()||Ae)if(CKEDITOR.dtd.$block[Oe.getName()]){var De=Oe.getPrevious(xe),Re=Oe.getNext(xe);!De||De.type!=CKEDITOR.NODE_TEXT&&De.isBlockBoundary({br:1})||Oe.append("br",1),!Re||Re.type!=CKEDITOR.NODE_TEXT&&Re.isBlockBoundary({br:1})||Oe.append("br"),Oe.remove(!0)}else De=Oe.getFirst(),Re=Oe.getLast(),Oe.remove(!0),De&&(De.type==CKEDITOR.NODE_ELEMENT&&De.mergeSiblings(),Re&&!De.equals(Re)&&Re.type==CKEDITOR.NODE_ELEMENT&&Re.mergeSiblings())}function he(Oe,Ae,De){var Re;return Re=Oe.element,"*"==Re&&(Re="span"),Re=new CKEDITOR.dom.element(Re,Ae),De&&De.copyAttributes(Re),Re=fe(Re,Oe),Ae.getCustomData("doc_processing_style")&&Re.hasAttribute("id")?Re.removeAttribute("id"):Ae.setCustomData("doc_processing_style",1),Re}function fe(Oe,Ae){var De=Ae._.definition,Re=De.attributes,De=CKEDITOR.style.getStyleText(De);if(Re)for(var Le in Re)Oe.setAttribute(Le,Re[Le]);return De&&Oe.setAttribute("style",De),Oe.getDocument().removeCustomData("doc_processing_style"),Oe}function be(Oe,Ae){for(var De in Oe)Oe[De]=Oe[De].replace(Se,function(Re,Le){return Ae[Le]})}function _e(Oe){if(Oe._.overrides)return Oe._.overrides;var Ae=Oe._.overrides={},De=Oe._.definition.overrides;if(De){CKEDITOR.tools.isArray(De)||(De=[De]);for(var Re=0;Re<De.length;Re++){var Le=De[Re],Fe,Be;if("string"==typeof Le?Fe=Le.toLowerCase():(Fe=Le.element?Le.element.toLowerCase():Oe.element,Be=Le.attributes),Le=Ae[Fe]||(Ae[Fe]={}),Be){var Le=Le.attributes=Le.attributes||[],Pe;for(Pe in Be)Le.push([Pe.toLowerCase(),Be[Pe]])}}}return Ae}function Ee(Oe,Ae,De){var Re=new CKEDITOR.dom.element("span");return Re[De?"setStyle":"setAttribute"](Oe,Ae),Re[De?"getStyle":"getAttribute"](Oe)}function ye(Oe,Ae){function De(Le,Fe){return"font-family"==Fe.toLowerCase()?Le.replace(/["']/g,""):Le}for(var Re in"string"==typeof Oe&&(Oe=CKEDITOR.tools.parseCssText(Oe)),"string"==typeof Ae&&(Ae=CKEDITOR.tools.parseCssText(Ae,!0)),Oe)if(!(Re in Ae)||De(Ae[Re],Re)!=De(Oe[Re],Re)&&"inherit"!=Oe[Re]&&"inherit"!=Ae[Re])return!1;return!0}function ke(Oe,Ae,De){var Re=Oe.getRanges();Ae=Ae?this.removeFromRange:this.applyToRange;var Le,Fe;if(Oe.isFake&&Oe.isInTable())for(Le=[],Fe=0;Fe<Re.length;Fe++)Le.push(Re[Fe].clone());for(var Be=Re.createIterator();Fe=Be.getNextRange();)Ae.call(this,Fe,De);Oe.selectRanges(Le||Re)}var Te={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},ve={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},Ce=/\s*(?:;\s*|$)/,Se=/#\((.+?)\)/g,Ne=CKEDITOR.dom.walker.bookmark(0,1),xe=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(Oe,Ae){if("string"==typeof Oe.type)return new CKEDITOR.style.customHandlers[Oe.type](Oe);var De=Oe.attributes;De&&De.style&&(Oe.styles=CKEDITOR.tools.extend({},Oe.styles,CKEDITOR.tools.parseCssText(De.style)),delete De.style),Ae&&(Oe=CKEDITOR.tools.clone(Oe),be(Oe.attributes,Ae),be(Oe.styles,Ae)),De=this.element=Oe.element?"string"==typeof Oe.element?Oe.element.toLowerCase():Oe.element:"*",this.type=Oe.type||(Te[De]?CKEDITOR.STYLE_BLOCK:ve[De]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:Oe}},CKEDITOR.style.prototype={apply:function(Oe){if(Oe instanceof CKEDITOR.dom.document)return ke.call(this,Oe.getSelection());if(this.checkApplicable(Oe.elementPath(),Oe)){var Ae=this._.enterMode;Ae||(this._.enterMode=Oe.activeEnterMode),ke.call(this,Oe.getSelection(),0,Oe),this._.enterMode=Ae}},remove:function(Oe){if(Oe instanceof CKEDITOR.dom.document)return ke.call(this,Oe.getSelection(),1);if(this.checkApplicable(Oe.elementPath(),Oe)){var Ae=this._.enterMode;Ae||(this._.enterMode=Oe.activeEnterMode),ke.call(this,Oe.getSelection(),1,Oe),this._.enterMode=Ae}},applyToRange:function(Oe){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?ee:this.type==CKEDITOR.STYLE_BLOCK?ie:this.type==CKEDITOR.STYLE_OBJECT?ne:null,this.applyToRange(Oe)},removeFromRange:function(Oe){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?te:this.type==CKEDITOR.STYLE_BLOCK?le:this.type==CKEDITOR.STYLE_OBJECT?ae:null,this.removeFromRange(Oe)},applyToObject:function(Oe){fe(Oe,this)},checkActive:function(Oe,Ae){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(Oe.block||Oe.blockLimit,!0,Ae);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var De=Oe.elements,Re=0,Le;Re<De.length;Re++)if(Le=De[Re],this.type!=CKEDITOR.STYLE_INLINE||Le!=Oe.block&&Le!=Oe.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var Fe=Le.getName();if("string"==typeof this.element?Fe!=this.element:!(Fe in this.element))continue}if(this.checkElementRemovable(Le,!0,Ae))return!0}}return!1},checkApplicable:function(Oe,Ae,De){if(Ae&&Ae instanceof CKEDITOR.filter&&(De=Ae),De&&!De.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!Oe.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!Oe.blockLimit.getDtd()[this.element];}return!0},checkElementMatch:function(Oe,Ae){var De=this._.definition;if(!Oe||!De.ignoreReadonly&&Oe.isReadOnly())return!1;var Re=Oe.getName();if("string"==typeof this.element?Re==this.element:Re in this.element){if(!Ae&&!Oe.hasAttributes())return!0;if(Re=De._AC)De=Re;else{var Re={},Le=0,Fe=De.attributes;if(Fe)for(var Be in Fe)Le++,Re[Be]=Fe[Be];(Be=CKEDITOR.style.getStyleText(De))&&(Re.style||Le++,Re.style=Be),Re._length=Le,De=De._AC=Re}if(De._length){for(var Pe in De)if("_length"!=Pe)if(Re=Oe.getAttribute(Pe)||"","style"==Pe?ye(De[Pe],Re):De[Pe]==Re){if(!Ae)return!0;}else if(Ae)return!1;if(Ae)return!0}else return!0}return!1},checkElementRemovable:function(Oe,Ae,De){if(this.checkElementMatch(Oe,Ae,De))return!0;if(Ae=_e(this)[Oe.getName()]){var Re;if(!(Ae=Ae.attributes))return!0;for(De=0;De<Ae.length;De++)if(Re=Ae[De][0],Re=Oe.getAttribute(Re)){var Le=Ae[De][1];if(null===Le)return!0;if("string"==typeof Le){if(Re==Le)return!0;}else if(Le.test(Re))return!0}}return!1},buildPreview:function(Oe){var Ae=this._.definition,De=[],Re=Ae.element;"bdo"==Re&&(Re="span");var De=["<",Re],Le=Ae.attributes;if(Le)for(var Fe in Le)De.push(" ",Fe,"=\"",Le[Fe],"\"");return(Le=CKEDITOR.style.getStyleText(Ae))&&De.push(" style=\"",Le,"\""),De.push(">",Oe||Ae.name,"</",Re,">"),De.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(Oe){var Ae=Oe._ST;if(Ae)return Ae;var Ae=Oe.styles,De=Oe.attributes&&Oe.attributes.style||"",Re="";for(var Le in De.length&&(De=De.replace(Ce,";")),Ae){var Fe=Ae[Le],Be=(Le+":"+Fe).replace(Ce,";");"inherit"==Fe?Re+=Be:De+=Be}return De.length&&(De=CKEDITOR.tools.normalizeCssText(De,!0)),Oe._ST=De+Re},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(Oe){var Ae=function(De){this._={definition:De},this.setup&&this.setup(De)};return Ae.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},Oe,!0),this.customHandlers[Oe.type]=Ae};var we=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,Ie=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function($,j){this.requiredContent=this.allowedContent=this.style=$,CKEDITOR.tools.extend(this,j,!0)},CKEDITOR.styleCommand.prototype.exec=function($){$.focus(),this.state==CKEDITOR.TRISTATE_OFF?$.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&$.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function($,j,ee){CKEDITOR.stylesSet.addExternal($,j,""),CKEDITOR.stylesSet.load($,ee)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function($,j){var ee=this._.styleStateChangeCallbacks;ee||(ee=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(te){for(var oe=0;oe<ee.length;oe++){var ne=ee[oe],ae=ne.style.checkActive(te.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;ne.fn.call(this,ae)}})),ee.push({style:$,fn:j})},applyStyle:function($){$.apply(this)},removeStyle:function($){$.remove(this)},getStylesSet:function($){if(this._.stylesDefinitions)$(this._.stylesDefinitions);else{var j=this,ee=j.config.stylesCombo_stylesSet||j.config.stylesSet;if(!1===ee)$(null);else if(ee instanceof Array)j._.stylesDefinitions=ee,$(ee);else{ee||(ee="default");var ee=ee.split(":"),te=ee[0];CKEDITOR.stylesSet.addExternal(te,ee[1]?ee.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(te,function(oe){j._.stylesDefinitions=oe[te],$(j._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function($,j){"string"==typeof $&&($=(j?j.$:document).createComment($)),CKEDITOR.dom.domObject.call(this,$)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),"use strict",function(){var $={},j={},ee;for(ee in CKEDITOR.dtd.$blockLimit)ee in CKEDITOR.dtd.$list||($[ee]=1);for(ee in CKEDITOR.dtd.$block)ee in CKEDITOR.dtd.$blockLimit||ee in CKEDITOR.dtd.$empty||(j[ee]=1);CKEDITOR.dom.elementPath=function(te,oe){var ne=null,ae=null,ie=[],le=te,re;oe=oe||te.getDocument().getBody(),le||(le=oe);do if(le.type==CKEDITOR.NODE_ELEMENT){if(ie.push(le),!this.lastElement&&(this.lastElement=le,le.is(CKEDITOR.dtd.$object)||"false"==le.getAttribute("contenteditable")))continue;if(le.equals(oe))break;if(!ae&&(re=le.getName(),"true"==le.getAttribute("contenteditable")?ae=le:!ne&&j[re]&&(ne=le),$[re])){if(re=!ne&&"div"==re){a:{re=le.getChildren();for(var se=0,de=re.count(),ce;se<de;se++)if(ce=re.getItem(se),ce.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[ce.getName()]){re=!0;break a}re=!1}re=!re}re?ne=le:ae=le}}while(le=le.getParent());ae||(ae=oe),this.block=ne,this.blockLimit=ae,this.root=oe,this.elements=ie}}(),CKEDITOR.dom.elementPath.prototype={compare:function($){var j=this.elements;if($=$&&$.elements,!$||j.length!=$.length)return!1;for(var ee=0;ee<j.length;ee++)if(!j[ee].equals($[ee]))return!1;return!0},contains:function($,j,ee){var te=0,oe;"string"==typeof $&&(oe=function(ie){return ie.getName()==$}),$ instanceof CKEDITOR.dom.element?oe=function(ie){return ie.equals($)}:CKEDITOR.tools.isArray($)?oe=function(ie){return-1<CKEDITOR.tools.indexOf($,ie.getName())}:"function"==typeof $?oe=$:"object"==typeof $&&(oe=function(ie){return ie.getName()in $});var ne=this.elements,ae=ne.length;for(j&&(ee?te+=1:--ae),ee&&(ne=Array.prototype.slice.call(ne,0),ne.reverse());te<ae;te++)if(oe(ne[te]))return ne[te];return null},isContextFor:function($){var j;return!($ in CKEDITOR.dtd.$block)||(j=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!j.getDtd()[$])},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function($,j){"string"==typeof $&&($=(j?j.$:document).createTextNode($)),this.$=$},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function($){this.$.nodeValue=$},split:function($){var j=this.$.parentNode,ee=j.childNodes.length,te=this.getLength(),oe=this.getDocument(),ne=new CKEDITOR.dom.text(this.$.splitText($),oe);return j.childNodes.length==ee&&($>=te?(ne=oe.createText(""),ne.insertAfter(this)):($=oe.createText(""),$.insertAfter(ne),$.remove())),ne},substring:function($,j){return"number"==typeof j?this.$.nodeValue.substring($,j):this.$.nodeValue.substr($)}}),function(){function $(ee,te,oe){var ne=ee.serializable,ae=te[oe?"endContainer":"startContainer"],ie=oe?"endOffset":"startOffset",le=ne?te.document.getById(ee.startNode):ee.startNode;return ee=ne?te.document.getById(ee.endNode):ee.endNode,ae.equals(le.getPrevious())?(te.startOffset=te.startOffset-ae.getLength()-ee.getPrevious().getLength(),ae=ee.getNext()):ae.equals(ee.getPrevious())&&(te.startOffset-=ae.getLength(),ae=ee.getNext()),ae.equals(le.getParent())&&te[ie]++,ae.equals(ee.getParent())&&te[ie]++,te[oe?"endContainer":"startContainer"]=ae,te}CKEDITOR.dom.rangeList=function(ee){return ee instanceof CKEDITOR.dom.rangeList?ee:(ee?ee instanceof CKEDITOR.dom.range&&(ee=[ee]):ee=[],CKEDITOR.tools.extend(ee,j))};var j={createIterator:function(){var ee=this,te=CKEDITOR.dom.walker.bookmark(),oe=[],ne;return{getNextRange:function(ae){ne=void 0==ne?0:ne+1;var ie=ee[ne];if(ie&&1<ee.length){if(!ne)for(var le=ee.length-1;0<=le;le--)oe.unshift(ee[le].createBookmark(!0));if(ae)for(var re=0,se;ee[ne+re+1];){for(se=ie.document,ae=0,le=se.getById(oe[re].endNode),se=se.getById(oe[re+1].startNode);;){if(le=le.getNextSourceNode(!1),se.equals(le))ae=1;else if(te(le)||le.type==CKEDITOR.NODE_ELEMENT&&le.isBlockBoundary())continue;break}if(!ae)break;re++}for(ie.moveToBookmark(oe.shift());re--;)le=ee[++ne],le.moveToBookmark(oe.shift()),ie.setEnd(le.endContainer,le.endOffset)}return ie}}},createBookmarks:function(ee){for(var te=[],ne=0,oe;ne<this.length;ne++){te.push(oe=this[ne].createBookmark(ee,!0));for(var ae=ne+1;ae<this.length;ae++)this[ae]=$(oe,this[ae]),this[ae]=$(oe,this[ae],!0)}return te},createBookmarks2:function(ee){for(var te=[],oe=0;oe<this.length;oe++)te.push(this[oe].createBookmark2(ee));return te},moveToBookmarks:function(ee){for(var te=0;te<this.length;te++)this[te].moveToBookmark(ee[te])}}}(),function(){function $(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function j(re){var se=CKEDITOR.skin["ua_"+re],de=CKEDITOR.env;if(se)for(var se=se.split(",").sort(function(ue,ge){return ue>ge?-1:1}),ce=0,me;ce<se.length;ce++)if(me=se[ce],de.ie&&(me.replace(/^ie/,"")==de.version||de.quirks&&"iequirks"==me)&&(me="ie"),de[me]){re+="_"+se[ce];break}return CKEDITOR.getUrl($()+re+".css")}function ee(re,se){ne[re]||(CKEDITOR.document.appendStyleSheet(j(re)),ne[re]=1),se&&se()}function te(re){var se=re.getById(ae);return se||(se=re.getHead().append("style"),se.setAttribute("id",ae),se.setAttribute("type","text/css")),se}function oe(re,se,de){var ce,me,ue;if(CKEDITOR.env.webkit)for(se=se.split("}").slice(0,-1),me=0;me<se.length;me++)se[me]=se[me].split("{");for(var ge=0;ge<re.length;ge++)if(CKEDITOR.env.webkit)for(me=0;me<se.length;me++){for(ue=se[me][1],ce=0;ce<de.length;ce++)ue=ue.replace(de[ce][0],de[ce][1]);re[ge].$.sheet.addRule(se[me][0],ue)}else{for(ue=se,ce=0;ce<de.length;ce++)ue=ue.replace(de[ce][0],de[ce][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?re[ge].$.styleSheet.cssText+=ue:re[ge].$.innerHTML+=ue}}var ne={};CKEDITOR.skin={path:$,loadPart:function(re,se){CKEDITOR.skin.name==CKEDITOR.skinName.split(",")[0]?ee(re,se):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl($()+"skin.js"),function(){ee(re,se)})},getPath:function(re){return CKEDITOR.getUrl(j(re))},icons:{},addIcon:function(re,se,de,ce){re=re.toLowerCase(),this.icons[re]||(this.icons[re]={path:se,offset:de||0,bgsize:ce||"16px"})},getIconStyle:function(re,se,de,ce,me){var ue;return re&&(re=re.toLowerCase(),se&&(ue=this.icons[re+"-rtl"]),ue||(ue=this.icons[re])),re=de||ue&&ue.path||"",ce=ce||ue&&ue.offset,me=me||ue&&ue.bgsize||"16px",re&&(re=re.replace(/'/g,"\\'")),re&&"background-image:url('"+CKEDITOR.getUrl(re)+"');background-position:0 "+ce+"px;background-size:"+me+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(re){var se=te(CKEDITOR.document);return(this.setUiColor=function(de){this.uiColor=de;var ce=CKEDITOR.skin.chameleon,me="",ue="";"function"==typeof ce&&(me=ce(this,"editor"),ue=ce(this,"panel")),de=[[le,de]],oe([se],me,de),oe(ie,ue,de)}).call(this,re)}});var ae="cke_ui_color",ie=[],le=/\$color/g;CKEDITOR.on("instanceLoaded",function(re){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var se=re.editor;re=function(de){if(de=(de.data[0]||de.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!de.getById("cke_ui_color")){var ce=te(de);ie.push(ce),se.on("destroy",function(){ie=CKEDITOR.tools.array.filter(ie,function(me){return ce!==me})}),(de=se.getUiColor())&&oe([ce],CKEDITOR.skin.chameleon(se,"panel"),[[le,de]])}},se.on("panelShow",re),se.on("menuShow",re),se.config.uiColor&&se.setUiColor(se.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var $=CKEDITOR.dom.element.createFromHtml("<div style=\"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue\"></div>",CKEDITOR.document);$.appendTo(CKEDITOR.document.getHead());try{var j=$.getComputedStyle("border-top-color"),ee=$.getComputedStyle("border-right-color");CKEDITOR.env.hc=j&&j==ee}catch(te){CKEDITOR.env.hc=!1}$.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),$=CKEDITOR._.pending)for(delete CKEDITOR._.pending,j=0;j<$.length;j++)CKEDITOR.editor.prototype.constructor.apply($[j][0],$[j][1]),CKEDITOR.add($[j][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var $=function(){return function(ee,te){for(var oe=ee.match(/[^#]./g),ne=0;3>ne;ne++){var ae=ne,ie;ie=parseInt(oe[ne],16),ie=("0"+(0>te?0|ie*(1+te):0|ie+(255-ie)*te).toString(16)).slice(-2),oe[ae]=ie}return"#"+oe.join("")}}(),j={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(ee,te){var oe=$(ee.uiColor,.4),oe={id:"."+ee.id,defaultBorder:$(oe,-.2),toolbarElementsBorder:$(oe,-.25),defaultBackground:oe,lightBackground:$(oe,.8),darkBackground:$(oe,-.15),ckeButtonOn:$(oe,.4),ckeResizer:$(oe,-.4),ckeColorauto:$(oe,.8),dialogBody:$(oe,.7),dialogTab:$(oe,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:$(oe,-.6),menubuttonHover:$(oe,.1),menubuttonIcon:$(oe,.5),menubuttonIconHover:$(oe,.3)};return j[te].output(oe).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("basicstyles",{init:function($){var j=0,ee=function(ae,ie,le,re){if(re){re=new CKEDITOR.style(re);var se=te[le];se.unshift(re),$.attachStyleStateChange(re,function(de){$.readOnly||$.getCommand(le).setState(de)}),$.addCommand(le,new CKEDITOR.styleCommand(re,{contentForms:se})),$.ui.addButton&&$.ui.addButton(ae,{label:ie,command:le,toolbar:"basicstyles,"+(j+=10)})}},te={bold:["strong","b",["span",function(ae){return ae=ae.styles["font-weight"],"bold"==ae||700<=+ae}]],italic:["em","i",["span",function(ae){return"italic"==ae.styles["font-style"]}]],underline:["u",["span",function(ae){return"underline"==ae.styles["text-decoration"]}]],strike:["s","strike",["span",function(ae){return"line-through"==ae.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},oe=$.config,ne=$.lang.basicstyles;ee("Bold",ne.bold,"bold",oe.coreStyles_bold),ee("Italic",ne.italic,"italic",oe.coreStyles_italic),ee("Underline",ne.underline,"underline",oe.coreStyles_underline),ee("Strike",ne.strike,"strike",oe.coreStyles_strike),ee("Subscript",ne.subscript,"subscript",oe.coreStyles_subscript),ee("Superscript",ne.superscript,"superscript",oe.coreStyles_superscript),$.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var $={exec:function(j){var ee=j.getCommand("blockquote").state,te=j.getSelection(),oe=te&&te.getRanges()[0];if(oe){var ne=te.createBookmarks();if(CKEDITOR.env.ie){var ae=ne[0].startNode,ie=ne[0].endNode,le;if(ae&&"blockquote"==ae.getParent().getName())for(le=ae;le=le.getNext();)if(le.type==CKEDITOR.NODE_ELEMENT&&le.isBlockBoundary()){ae.move(le,!0);break}if(ie&&"blockquote"==ie.getParent().getName())for(le=ie;le=le.getPrevious();)if(le.type==CKEDITOR.NODE_ELEMENT&&le.isBlockBoundary()){ie.move(le);break}}var re=oe.createIterator();if(re.enlargeBr=j.config.enterMode!=CKEDITOR.ENTER_BR,ee==CKEDITOR.TRISTATE_OFF){for(ae=[];ee=re.getNextParagraph();)ae.push(ee);for(1>ae.length&&(ee=j.document.createElement(j.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),ie=ne.shift(),oe.insertNode(ee),ee.append(new CKEDITOR.dom.text("\uFEFF",j.document)),oe.moveToBookmark(ie),oe.selectNodeContents(ee),oe.collapse(!0),ie=oe.createBookmark(),ae.push(ee),ne.unshift(ie)),le=ae[0].getParent(),oe=[],ie=0;ie<ae.length;ie++)ee=ae[ie],le=le.getCommonAncestor(ee.getParent());for(ee={table:1,tbody:1,tr:1,ol:1,ul:1};ee[le.getName()];)le=le.getParent();for(ie=null;0<ae.length;){for(ee=ae.shift();!ee.getParent().equals(le);)ee=ee.getParent();ee.equals(ie)||oe.push(ee),ie=ee}for(;0<oe.length;)if(ee=oe.shift(),"blockquote"==ee.getName()){for(ie=new CKEDITOR.dom.documentFragment(j.document);ee.getFirst();)ie.append(ee.getFirst().remove()),ae.push(ie.getLast());ie.replace(ee)}else ae.push(ee);for(oe=j.document.createElement("blockquote"),oe.insertBefore(ae[0]);0<ae.length;)ee=ae.shift(),oe.append(ee)}else if(ee==CKEDITOR.TRISTATE_ON){for(ie=[],le={};ee=re.getNextParagraph();){for(ae=oe=null;ee.getParent();){if("blockquote"==ee.getParent().getName()){oe=ee.getParent(),ae=ee;break}ee=ee.getParent()}oe&&ae&&!ae.getCustomData("blockquote_moveout")&&(ie.push(ae),CKEDITOR.dom.element.setMarker(le,ae,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(le),ee=[],ae=[],le={};0<ie.length;)re=ie.shift(),oe=re.getParent(),re.getPrevious()?re.getNext()?(re.breakParent(re.getParent()),ae.push(re.getNext())):re.remove().insertAfter(oe):re.remove().insertBefore(oe),oe.getCustomData("blockquote_processed")||(ae.push(oe),CKEDITOR.dom.element.setMarker(le,oe,"blockquote_processed",!0)),ee.push(re);for(CKEDITOR.dom.element.clearAllMarkers(le),ie=ae.length-1;0<=ie;ie--){oe=ae[ie];a:{le=oe;for(var re=0,se=le.getChildCount(),de=void 0;re<se&&(de=le.getChild(re));re++)if(de.type==CKEDITOR.NODE_ELEMENT&&de.isBlockBoundary()){le=!1;break a}le=!0}le&&oe.remove()}if(j.config.enterMode==CKEDITOR.ENTER_BR)for(oe=!0;ee.length;)if(re=ee.shift(),"div"==re.getName()){for(ie=new CKEDITOR.dom.documentFragment(j.document),oe&&re.getPrevious()&&(re.getPrevious().type!=CKEDITOR.NODE_ELEMENT||!re.getPrevious().isBlockBoundary())&&ie.append(j.document.createElement("br")),oe=re.getNext()&&!(re.getNext().type==CKEDITOR.NODE_ELEMENT&&re.getNext().isBlockBoundary());re.getFirst();)re.getFirst().remove().appendTo(ie);oe&&ie.append(j.document.createElement("br")),ie.replace(re),oe=!1}}te.selectBookmarks(ne),j.focus()}},refresh:function(j,ee){this.setState(j.elementPath(ee.block||ee.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(j){j.blockless||(j.addCommand("blockquote",$),j.ui.addButton&&j.ui.addButton("Blockquote",{label:j.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var $=function(le){this._||(this._={}),this._["default"]=this._.initValue=le["default"]||"",this._.required=le.required||!1;for(var re=[this._],se=1;se<arguments.length;se++)re.push(arguments[se]);return re.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,re),this._},j={build:function(le,re,se){return new CKEDITOR.ui.dialog.textInput(le,re,se)}},ee={build:function(le,re,se){return new CKEDITOR.ui.dialog[re.type](le,re,se)}},te={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(le){this.setValue(this.getInitValue(),le)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},oe=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(le,re){this._.domOnChangeRegistered||(le.on("load",function(){this.getInputElement().on("change",function(){le.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",re)}},!0),ne=/^on([A-Z]\w+)/,ae=function(le){for(var re in le)(ne.test(re)||"title"==re||"type"==re)&&delete le[re];return le},ie=function(le){le=le.data.getKeystroke(),le==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):le==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(le,re,se,de){if(!(4>arguments.length)){var ce=$.call(this,re);ce.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var me={role:re.role||"presentation"};re.includeLabel&&(me["aria-labelledby"]=ce.labelId),CKEDITOR.ui.dialog.uiElement.call(this,le,re,se,"div",null,me,function(){var ue=[],ge=re.required?" cke_required":"";return"horizontal"==re.labelLayout?(ge={type:"hbox",widths:re.widths,padding:0,children:[{type:"html",html:"<label class=\"cke_dialog_ui_labeled_label"+ge+"\" id=\""+ce.labelId+"\" for=\""+ce.inputId+"\""+(re.labelStyle?" style=\""+re.labelStyle+"\"":"")+">"+CKEDITOR.tools.htmlEncode(re.label)+"</label>"},{type:"html",html:"<span class=\"cke_dialog_ui_labeled_content\""+(re.controlStyle?" style=\""+re.controlStyle+"\"":"")+">"+de.call(this,le,re)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(le,ge,ue)):ue.push("<label class=\"cke_dialog_ui_labeled_label"+ge+"\" "," id=\""+ce.labelId+"\"",ce.inputId?" for=\""+ce.inputId+"\"":"",(re.labelStyle?" style=\""+re.labelStyle+"\"":"")+">",re.label,"</label>","<div class=\"cke_dialog_ui_labeled_content\"",re.controlStyle?" style=\""+re.controlStyle+"\"":""," role=\"presentation\">",de.call(this,le,re),"</div>"),ue.join("")})}},textInput:function(le,re,se){if(!(3>arguments.length)){$.call(this,re);var de=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",ce={class:"cke_dialog_ui_input_"+re.type,id:de,type:re.type};re.validate&&(this.validate=re.validate),re.maxLength&&(ce.maxlength=re.maxLength),re.size&&(ce.size=re.size),re.inputStyle&&(ce.style=re.inputStyle);var me=this,ue=!1;le.on("load",function(){me.getInputElement().on("keydown",function(ge){13==ge.data.getKeystroke()&&(ue=!0)}),me.getInputElement().on("keyup",function(ge){13==ge.data.getKeystroke()&&ue&&(le.getButton("ok")&&setTimeout(function(){le.getButton("ok").click()},0),ue=!1),me.bidi&&ie.call(me,ge)},null,null,1E3)}),CKEDITOR.ui.dialog.labeledElement.call(this,le,re,se,function(){var ge=["<div class=\"cke_dialog_ui_input_",re.type,"\" role=\"presentation\""];for(var pe in re.width&&ge.push("style=\"width:"+re.width+"\" "),ge.push("><input "),ce["aria-labelledby"]=this._.labelId,this._.required&&(ce["aria-required"]=this._.required),ce)ge.push(pe+"=\""+ce[pe]+"\" ");return ge.push(" /></div>"),ge.join("")})}},textarea:function(le,re,se){if(!(3>arguments.length)){$.call(this,re);var de=this,ce=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",me={};re.validate&&(this.validate=re.validate),me.rows=re.rows||5,me.cols=re.cols||20,me["class"]="cke_dialog_ui_input_textarea "+(re["class"]||""),"undefined"!=typeof re.inputStyle&&(me.style=re.inputStyle),re.dir&&(me.dir=re.dir),de.bidi&&le.on("load",function(){de.getInputElement().on("keyup",ie)},de),CKEDITOR.ui.dialog.labeledElement.call(this,le,re,se,function(){me["aria-labelledby"]=this._.labelId,this._.required&&(me["aria-required"]=this._.required);var ue=["<div class=\"cke_dialog_ui_input_textarea\" role=\"presentation\"><textarea id=\"",ce,"\" "],ge;for(ge in me)ue.push(ge+"=\""+CKEDITOR.tools.htmlEncode(me[ge])+"\" ");return ue.push(">",CKEDITOR.tools.htmlEncode(de._["default"]),"</textarea></div>"),ue.join("")})}},checkbox:function(le,re,se){if(!(3>arguments.length)){var de=$.call(this,re,{default:!!re["default"]});re.validate&&(this.validate=re.validate),CKEDITOR.ui.dialog.uiElement.call(this,le,re,se,"span",null,null,function(){var ce=CKEDITOR.tools.extend({},re,{id:re.id?re.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),me=[],ue=CKEDITOR.tools.getNextId()+"_label",ge={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":ue};return ae(ce),re["default"]&&(ge.checked="checked"),"undefined"!=typeof ce.inputStyle&&(ce.style=ce.inputStyle),de.checkbox=new CKEDITOR.ui.dialog.uiElement(le,ce,me,"input",null,ge),me.push(" <label id=\"",ue,"\" for=\"",ge.id,"\""+(re.labelStyle?" style=\""+re.labelStyle+"\"":"")+">",CKEDITOR.tools.htmlEncode(re.label),"</label>"),me.join("")})}},radio:function(le,re,se){if(!(3>arguments.length)){$.call(this,re),this._["default"]||(this._["default"]=this._.initValue=re.items[0][1]),re.validate&&(this.validate=re.validate);var de=[],ce=this;re.role="radiogroup",re.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,le,re,se,function(){for(var me=[],ue=[],ge=(re.id?re.id:CKEDITOR.tools.getNextId())+"_radio",pe=0;pe<re.items.length;pe++){var he=re.items[pe],fe=void 0===he[2]?he[0]:he[2],be=void 0===he[1]?he[0]:he[1],_e=CKEDITOR.tools.getNextId()+"_radio_input",Ee=_e+"_label",_e=CKEDITOR.tools.extend({},re,{id:_e,title:null,type:null},!0),fe=CKEDITOR.tools.extend({},_e,{title:fe},!0),ye={type:"radio",class:"cke_dialog_ui_radio_input",name:ge,value:be,"aria-labelledby":Ee},ke=[];ce._["default"]==be&&(ye.checked="checked"),ae(_e),ae(fe),"undefined"!=typeof _e.inputStyle&&(_e.style=_e.inputStyle),_e.keyboardFocusable=!0,de.push(new CKEDITOR.ui.dialog.uiElement(le,_e,ke,"input",null,ye)),ke.push(" "),new CKEDITOR.ui.dialog.uiElement(le,fe,ke,"label",null,{id:Ee,for:ye.id},he[0]),me.push(ke.join(""))}return new CKEDITOR.ui.dialog.hbox(le,de,me,ue),ue.join("")}),this._.children=de}},button:function(le,re,se){if(arguments.length){"function"==typeof re&&(re=re(le.getParentEditor())),$.call(this,re,{disabled:re.disabled||!1}),CKEDITOR.event.implementOn(this);var de=this;le.on("load",function(){var ue=this.getElement();(function(){ue.on("click",function(ge){de.click(),ge.data.preventDefault()}),ue.on("keydown",function(ge){ge.data.getKeystroke()in{32:1}&&(de.click(),ge.data.preventDefault())})})(),ue.unselectable()},this);var ce=CKEDITOR.tools.extend({},re);delete ce.style;var me=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,le,ce,se,"a",null,{style:re.style,href:"javascript:void(0)",title:re.label,hidefocus:"true",class:re["class"],role:"button","aria-labelledby":me},"<span id=\""+me+"\" class=\"cke_dialog_ui_button\">"+CKEDITOR.tools.htmlEncode(re.label)+"</span>")}},select:function(le,re,se){if(!(3>arguments.length)){var de=$.call(this,re);re.validate&&(this.validate=re.validate),de.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,le,re,se,function(){var ce=CKEDITOR.tools.extend({},re,{id:re.id?re.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),me=[],ue=[],ge={id:de.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};me.push("<div class=\"cke_dialog_ui_input_",re.type,"\" role=\"presentation\""),re.width&&me.push("style=\"width:"+re.width+"\" "),me.push(">"),void 0!==re.size&&(ge.size=re.size),void 0!==re.multiple&&(ge.multiple=re.multiple),ae(ce);for(var pe=0,he;pe<re.items.length&&(he=re.items[pe]);pe++)ue.push("<option value=\"",CKEDITOR.tools.htmlEncode(void 0===he[1]?he[0]:he[1]).replace(/"/g,"&quot;"),"\" /> ",CKEDITOR.tools.htmlEncode(he[0]));return"undefined"!=typeof ce.inputStyle&&(ce.style=ce.inputStyle),de.select=new CKEDITOR.ui.dialog.uiElement(le,ce,me,"select",null,ge,ue.join("")),me.push("</div>"),me.join("")})}},file:function(le,re,se){if(!(3>arguments.length)){void 0===re["default"]&&(re["default"]="");var de=CKEDITOR.tools.extend($.call(this,re),{definition:re,buttons:[]});re.validate&&(this.validate=re.validate),le.on("load",function(){CKEDITOR.document.getById(de.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,le,re,se,function(){de.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var ce=["<iframe frameborder=\"0\" allowtransparency=\"0\" class=\"cke_dialog_ui_input_file\" role=\"presentation\" id=\"",de.frameId,"\" title=\"",re.label,"\" src=\"javascript:void(",CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0",")\"></iframe>"];return ce.join("")})}},fileButton:function(le,re,se){var de=this;if(!(3>arguments.length)){$.call(this,re),re.validate&&(this.validate=re.validate);var ce=CKEDITOR.tools.extend({},re),me=ce.onClick;ce.className=(ce.className?ce.className+" ":"")+"cke_dialog_ui_button",ce.onClick=function(ue){var ge=re["for"];ue=!!me&&me.call(this,ue),!1!==ue&&("xhr"!==ue&&le.getContentElement(ge[0],ge[1]).submit(),this.disable())},le.on("load",function(){le.getContentElement(re["for"][0],re["for"][1])._.buttons.push(de)}),CKEDITOR.ui.dialog.button.call(this,le,ce,se)}},html:function(){var le=/^\s*<[\w:]+\s+([^>]*)?>/,re=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,se=/\/$/;return function(de,ce,me){if(!(3>arguments.length)){var ue=[],ge=ce.html;"<"!=ge.charAt(0)&&(ge="<span>"+ge+"</span>");var pe=ce.focus;if(pe){var he=this.focus;this.focus=function(){("function"==typeof pe?pe:he).call(this),this.fire("focus")},ce.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,de,ce,ue,"span",null,null,""),ue=ue.join("").match(le),ge=ge.match(re)||["","",""],se.test(ge[1])&&(ge[1]=ge[1].slice(0,-1),ge[2]="/"+ge[2]),me.push([ge[1]," ",ue[1]||"",ge[2]].join(""))}}}(),fieldset:function(le,re,se,de,ce){var me=ce.label;this._={children:re},CKEDITOR.ui.dialog.uiElement.call(this,le,ce,de,"fieldset",null,null,function(){var ue=[];me&&ue.push("<legend"+(ce.labelStyle?" style=\""+ce.labelStyle+"\"":"")+">"+me+"</legend>");for(var ge=0;ge<se.length;ge++)ue.push(se[ge]);return ue.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(le){var re=CKEDITOR.document.getById(this._.labelId);return 1>re.getChildCount()?new CKEDITOR.dom.text(le,CKEDITOR.document).appendTo(re):re.getChild(0).$.nodeValue=le,this},getLabel:function(){var le=CKEDITOR.document.getById(this._.labelId);return!le||1>le.getChildCount()?"":le.getChild(0).getText()},eventProcessors:oe},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var le=this.getElement();le&&le.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(le,re){this.on("click",function(){re.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var le=this.selectParentTab();setTimeout(function(){var re=le.getInputElement();re&&re.$.focus()},0)},select:function(){var le=this.selectParentTab();setTimeout(function(){var re=le.getInputElement();re&&(re.$.focus(),re.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(le){if(this.bidi){var re=le&&le.charAt(0);(re="\u202A"==re?"ltr":"\u202B"==re?"rtl":null)&&(le=le.slice(1)),this.setDirectionMarker(re)}return le||(le=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var le=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&le){var re=this.getDirectionMarker();re&&(le=("ltr"==re?"\u202A":"\u202B")+le)}return le},setDirectionMarker:function(le){var re=this.getInputElement();le?re.setAttributes({dir:le,"data-cke-dir-marker":le}):this.getDirectionMarker()&&re.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},te,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(le,re,se){var de=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),ce=this.getInputElement().$;return de.$.text=le,de.$.value=void 0===re||null===re?le:re,void 0===se||null===se?CKEDITOR.env.ie?ce.add(de.$):ce.add(de.$,null):ce.add(de.$,se),this},remove:function(le){return this.getInputElement().$.remove(le),this},clear:function(){for(var le=this.getInputElement().$;0<le.length;)le.remove(0);return this},keyboardFocusable:!0},te,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(le,re){this.getInputElement().$.checked=le,re||this.fire("change",{value:le})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(le,re){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?oe.onChange.apply(this,arguments):(le.on("load",function(){var se=this._.checkbox.getElement();se.on("propertychange",function(de){de=de.data.$,"checked"==de.propertyName&&this.fire("change",{value:se.$.checked})},this)},this),this.on("change",re),null)}},keyboardFocusable:!0},te,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(le,re){for(var se=this._.children,ce=0,de;ce<se.length&&(de=se[ce]);ce++)de.getElement().$.checked=de.getValue()==le;re||this.fire("change",{value:le})},getValue:function(){for(var le=this._.children,re=0;re<le.length;re++)if(le[re].getElement().$.checked)return le[re].getValue();return null},accessKeyUp:function(){var le=this._.children,re;for(re=0;re<le.length;re++)if(le[re].getElement().$.checked)return void le[re].getElement().focus();le[0].getElement().focus()},eventProcessors:{onChange:function(le,re){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?oe.onChange.apply(this,arguments):(le.on("load",function(){for(var se=this._.children,de=this,ce=0;ce<se.length;ce++)se[ce].getElement().on("propertychange",function(me){me=me.data.$,"checked"==me.propertyName&&this.$.checked&&de.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",re),null)}}},te,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,te,{getInputElement:function(){var le=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<le.$.forms.length?new CKEDITOR.dom.element(le.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(le){var re=/^on([A-Z]\w+)/,de=function(me,ue,ge,pe){me.on("formLoaded",function(){me.getInputElement().on(ge,pe,me)})},se,ce;for(ce in le)(se=ce.match(re))&&(this.eventProcessors[ce]?this.eventProcessors[ce].call(this,this._.dialog,le[ce]):de(this,this._.dialog,se[1].toLowerCase(),le[ce]));return this},reset:function(){function le(){se.$.open();var he="";de.size&&(he=de.size-(CKEDITOR.env.ie?7:0));var fe=re.frameId+"_input";for(se.$.write(["<html dir=\""+ge+"\" lang=\""+pe+"\"><head><title></title></head><body style=\"margin: 0; overflow: hidden; background: transparent;\">","<form enctype=\"multipart/form-data\" method=\"POST\" dir=\""+ge+"\" lang=\""+pe+"\" action=\"",CKEDITOR.tools.htmlEncode(de.action),"\"><label id=\"",re.labelId,"\" for=\"",fe,"\" style=\"display:none\">",CKEDITOR.tools.htmlEncode(de.label),"</label><input style=\"width:100%\" id=\"",fe,"\" aria-labelledby=\"",re.labelId,"\" type=\"file\" name=\"",CKEDITOR.tools.htmlEncode(de.id||"cke_upload"),"\" size=\"",CKEDITOR.tools.htmlEncode(0<he?he:""),"\" /></form></body></html><script>",CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+me+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+ue+")}","</script>"].join("")),se.$.close(),he=0;he<ce.length;he++)ce[he].enable()}var re=this._,se=CKEDITOR.document.getById(re.frameId).getFrameDocument(),de=re.definition,ce=re.buttons,me=this.formLoadedNumber,ue=this.formUnloadNumber,ge=re.dialog._.editor.lang.dir,pe=re.dialog._.editor.langCode;me||(me=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),ue=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(me),CKEDITOR.tools.removeFunction(ue)})),CKEDITOR.env.gecko?setTimeout(le,500):le()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(le,re){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",re)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",j),CKEDITOR.dialog.addUIElement("password",j),CKEDITOR.dialog.addUIElement("tel",j),CKEDITOR.dialog.addUIElement("textarea",ee),CKEDITOR.dialog.addUIElement("checkbox",ee),CKEDITOR.dialog.addUIElement("radio",ee),CKEDITOR.dialog.addUIElement("button",ee),CKEDITOR.dialog.addUIElement("select",ee),CKEDITOR.dialog.addUIElement("file",ee),CKEDITOR.dialog.addUIElement("fileButton",ee),CKEDITOR.dialog.addUIElement("html",ee),CKEDITOR.dialog.addUIElement("fieldset",{build:function(le,re,se){for(var de=re.children,me=[],ue=[],ge=0,ce,pe;ge<de.length&&(ce=de[ge]);ge++)pe=[],me.push(pe),ue.push(CKEDITOR.dialog._.uiElementBuilders[ce.type].build(le,ce,pe));return new CKEDITOR.ui.dialog[re.type](le,ue,me,se,re)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function $(){for(var Ie=this._.tabIdList.length,Oe=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+Ie,Ae=Oe-1;Ae>Oe-Ie;Ae--)if(this._.tabs[this._.tabIdList[Ae%Ie]][0].$.offsetHeight)return this._.tabIdList[Ae%Ie];return null}function j(){for(var Ie=this._.tabIdList.length,Oe=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),Ae=Oe+1;Ae<Oe+Ie;Ae++)if(this._.tabs[this._.tabIdList[Ae%Ie]][0].$.offsetHeight)return this._.tabIdList[Ae%Ie];return null}function ee(Ie,Oe){for(var Ae=Ie.$.getElementsByTagName("input"),De=0,Re=Ae.length,Le;De<Re;De++)Le=new CKEDITOR.dom.element(Ae[De]),"text"==Le.getAttribute("type").toLowerCase()&&(Oe?(Le.setAttribute("value",Le.getCustomData("fake_value")||""),Le.removeCustomData("fake_value")):(Le.setCustomData("fake_value",Le.getAttribute("value")),Le.setAttribute("value","")))}function te(Ie,Oe){var Ae=this.getInputElement();Ae&&(Ie?Ae.removeAttribute("aria-invalid"):Ae.setAttribute("aria-invalid",!0)),Ie||(this.select?this.select():this.focus()),Oe&&alert(Oe),this.fire("validated",{valid:Ie,msg:Oe})}function oe(){var Ie=this.getInputElement();Ie&&Ie.removeAttribute("aria-invalid")}function ne(Ie){var Oe=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",ge).output({id:CKEDITOR.tools.getNextNumber(),editorId:Ie.id,langDir:Ie.lang.dir,langCode:Ie.langCode,editorDialogClass:"cke_editor_"+Ie.name.replace(/\./g,"\\.")+"_dialog",closeTitle:Ie.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),Ae=Oe.getChild([0,0,0,0,0]),De=Ae.getChild(0),Re=Ae.getChild(1);return Ie.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(Ae),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(Ie="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml("<iframe frameBorder=\"0\" class=\"cke_iframe_shim\" src=\""+Ie+"\" tabIndex=\"-1\"></iframe>").appendTo(Ae.getParent())),De.unselectable(),Re.unselectable(),{element:Oe,parts:{dialog:Oe.getChild(0),title:De,close:Re,tabs:Ae.getChild(2),contents:Ae.getChild([3,0,0,0]),footer:Ae.getChild([3,0,1,0])}}}function ae(Ie,Oe,Ae){this.element=Oe,this.focusIndex=Ae,this.tabIndex=0,this.isFocusable=function(){return!Oe.getAttribute("disabled")&&Oe.isVisible()},this.focus=function(){Ie._.currentFocusIndex=this.focusIndex,this.element.focus()},Oe.on("keydown",function(De){De.data.getKeystroke()in{13:1,32:1}&&this.fire("click")}),Oe.on("focus",function(){this.fire("mouseover")}),Oe.on("blur",function(){this.fire("mouseout")})}function ie(Ie){function Oe(){Ie.layout()}var Ae=CKEDITOR.document.getWindow();Ae.on("resize",Oe),Ie.on("hide",function(){Ae.removeListener("resize",Oe)})}function le(Ie,Oe){this._={dialog:Ie},CKEDITOR.tools.extend(this,Oe)}function re(Ie){function Oe(Pe){var Me=Ie.getSize(),$e=CKEDITOR.document.getWindow().getViewPaneSize(),He=Pe.data.$.screenX,qe=Pe.data.$.screenY,ze=He-De.x,Ue=qe-De.y;De={x:He,y:qe},Re.x+=ze,Re.y+=Ue,Ie.move(Re.x+Be[3]<Fe?-Be[3]:Re.x-Be[1]>$e.width-Me.width-Fe?$e.width-Me.width+("rtl"==Le.lang.dir?0:Be[1]):Re.x,Re.y+Be[0]<Fe?-Be[0]:Re.y-Be[2]>$e.height-Me.height-Fe?$e.height-Me.height+Be[2]:Re.y,1),Pe.data.preventDefault()}function Ae(){if(CKEDITOR.document.removeListener("mousemove",Oe),CKEDITOR.document.removeListener("mouseup",Ae),CKEDITOR.env.ie6Compat){var Pe=ke.getChild(0).getFrameDocument();Pe.removeListener("mousemove",Oe),Pe.removeListener("mouseup",Ae)}}var De=null,Re=null,Le=Ie.getParentEditor(),Fe=Le.config.dialog_magnetDistance,Be=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof Fe&&(Fe=20),Ie.parts.title.on("mousedown",function(Pe){if(De={x:Pe.data.$.screenX,y:Pe.data.$.screenY},CKEDITOR.document.on("mousemove",Oe),CKEDITOR.document.on("mouseup",Ae),Re=Ie.getPosition(),CKEDITOR.env.ie6Compat){var Me=ke.getChild(0).getFrameDocument();Me.on("mousemove",Oe),Me.on("mouseup",Ae)}Pe.data.preventDefault()},Ie)}function se(Ie){function Oe(ze){var Ue="rtl"==Le.lang.dir,je=$e.width,Ve=$e.height,Ke=je+(ze.data.$.screenX-Me.x)*(Ue?-1:1)*(Ie._.moved?1:2),We=Ve+(ze.data.$.screenY-Me.y)*(Ie._.moved?1:2),Ge=Ie._.element.getFirst(),Ge=Ue&&Ge.getComputedStyle("right"),Xe=Ie.getPosition();Xe.y+We>Pe.height&&(We=Pe.height-Xe.y),(Ue?Ge:Xe.x)+Ke>Pe.width&&(Ke=Pe.width-(Ue?Ge:Xe.x)),(Re==CKEDITOR.DIALOG_RESIZE_WIDTH||Re==CKEDITOR.DIALOG_RESIZE_BOTH)&&(je=_Mathmax(De.minWidth||0,Ke-Fe)),(Re==CKEDITOR.DIALOG_RESIZE_HEIGHT||Re==CKEDITOR.DIALOG_RESIZE_BOTH)&&(Ve=_Mathmax(De.minHeight||0,We-Be)),Ie.resize(je,Ve),Ie._.moved||Ie.layout(),ze.data.preventDefault()}function Ae(){if(CKEDITOR.document.removeListener("mouseup",Ae),CKEDITOR.document.removeListener("mousemove",Oe),He&&(He.remove(),He=null),CKEDITOR.env.ie6Compat){var ze=ke.getChild(0).getFrameDocument();ze.removeListener("mouseup",Ae),ze.removeListener("mousemove",Oe)}}var De=Ie.definition,Re=De.resizable;if(Re!=CKEDITOR.DIALOG_RESIZE_NONE){var Le=Ie.getParentEditor(),qe=CKEDITOR.tools.addFunction(function(ze){$e=Ie.getSize();var Ue=Ie.parts.contents;Ue.$.getElementsByTagName("iframe").length&&(He=CKEDITOR.dom.element.createFromHtml("<div class=\"cke_dialog_resize_cover\" style=\"height: 100%; position: absolute; width: 100%;\"></div>"),Ue.append(He)),Be=$e.height-Ie.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),Fe=$e.width-Ie.parts.contents.getSize("width",1),Me={x:ze.screenX,y:ze.screenY},Pe=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",Oe),CKEDITOR.document.on("mouseup",Ae),CKEDITOR.env.ie6Compat&&(Ue=ke.getChild(0).getFrameDocument(),Ue.on("mousemove",Oe),Ue.on("mouseup",Ae)),ze.preventDefault&&ze.preventDefault()}),Fe,Be,Pe,Me,$e,He;Ie.on("load",function(){var ze="";Re==CKEDITOR.DIALOG_RESIZE_WIDTH?ze=" cke_resizer_horizontal":Re==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(ze=" cke_resizer_vertical"),ze=CKEDITOR.dom.element.createFromHtml("<div class=\"cke_resizer"+ze+" cke_resizer_"+Le.lang.dir+"\" title=\""+CKEDITOR.tools.htmlEncode(Le.lang.common.resize)+"\" onmousedown=\"CKEDITOR.tools.callFunction("+qe+", event )\">"+("ltr"==Le.lang.dir?"\u25E2":"\u25E3")+"</div>"),Ie.parts.footer.append(ze,1)}),Le.on("destroy",function(){CKEDITOR.tools.removeFunction(qe)})}}function de(Ie){Ie.data.preventDefault(1)}function ce(Ie){var Oe=CKEDITOR.document.getWindow(),Ae=Ie.config,De=CKEDITOR.skinName||Ie.config.skin,Re=Ae.dialog_backgroundCoverColor||("moono-lisa"==De?"black":"white"),De=Ae.dialog_backgroundCoverOpacity,Le=Ae.baseFloatZIndex,Ae=CKEDITOR.tools.genKey(Re,De,Le),Fe=ye[Ae];Fe?Fe.show():(Le=["<div tabIndex=\"-1\" style=\"position: ",CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",Le,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+Re,"\" class=\"cke_dialog_background_cover\">"],CKEDITOR.env.ie6Compat&&(Re="<html><body style=\\'background-color:"+Re+";\\'></body></html>",Le.push("<iframe hidefocus=\"true\" frameborder=\"0\" id=\"cke_dialog_background_iframe\" src=\"javascript:"),Le.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+Re+"' );document.close();")+"})())"),Le.push("\" style=\"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)\"></iframe>")),Le.push("</div>"),Fe=CKEDITOR.dom.element.createFromHtml(Le.join("")),Fe.setOpacity(void 0===De?.5:De),Fe.on("keydown",de),Fe.on("keypress",de),Fe.on("keyup",de),Fe.appendTo(CKEDITOR.document.getBody()),ye[Ae]=Fe),Ie.focusManager.add(Fe),ke=Fe,Ie=function(){var Me=Oe.getViewPaneSize();Fe.setStyles({width:Me.width+"px",height:Me.height+"px"})};var Be=function(){var Me=Oe.getScrollPosition(),$e=CKEDITOR.dialog._.currentTop;if(Fe.setStyles({left:Me.x+"px",top:Me.y+"px"}),$e)do Me=$e.getPosition(),$e.move(Me.x,Me.y);while($e=$e._.parentDialog)};if(Ee=Ie,Oe.on("resize",Ie),Ie(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||Fe.focus(),CKEDITOR.env.ie6Compat){var Pe=function(){Be(),arguments.callee.prevScrollHandler.apply(this,arguments)};Oe.$.setTimeout(function(){Pe.prevScrollHandler=window.onscroll||function(){},window.onscroll=Pe},0),Be()}}function me(Ie){ke&&(Ie.focusManager.remove(ke),Ie=CKEDITOR.document.getWindow(),ke.hide(),ke=null,Ie.removeListener("resize",Ee),CKEDITOR.env.ie6Compat&&Ie.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),Ee=null)}var ue=CKEDITOR.tools.cssLength,ge="<div class=\"cke_reset_all {editorId} {editorDialogClass} {hidpi}\" dir=\"{langDir}\" lang=\"{langCode}\" role=\"dialog\" aria-labelledby=\"cke_dialog_title_{id}\"><table class=\"cke_dialog "+CKEDITOR.env.cssClass+" cke_{langDir}\" style=\"position:absolute\" role=\"presentation\"><tr><td role=\"presentation\"><div class=\"cke_dialog_body\" role=\"presentation\"><div id=\"cke_dialog_title_{id}\" class=\"cke_dialog_title\" role=\"presentation\"></div><a id=\"cke_dialog_close_button_{id}\" class=\"cke_dialog_close_button\" href=\"javascript:void(0)\" title=\"{closeTitle}\" role=\"button\"><span class=\"cke_label\">X</span></a><div id=\"cke_dialog_tabs_{id}\" class=\"cke_dialog_tabs\" role=\"tablist\"></div><table class=\"cke_dialog_contents\" role=\"presentation\"><tr><td id=\"cke_dialog_contents_{id}\" class=\"cke_dialog_contents_body\" role=\"presentation\"></td></tr><tr><td id=\"cke_dialog_footer_{id}\" class=\"cke_dialog_footer\" role=\"presentation\"></td></tr></table></div></td></tr></table></div>";CKEDITOR.dialog=function(Ie,Oe){function Ae(){var Ke=Ue._.focusList;Ke.sort(function(Xe,Ye){return Xe.tabIndex==Ye.tabIndex?Xe.focusIndex-Ye.focusIndex:Ye.tabIndex-Xe.tabIndex});for(var We=Ke.length,Ge=0;Ge<We;Ge++)Ke[Ge].focusIndex=Ge}function De(Ke){var We=Ue._.focusList;if(Ke=Ke||0,!(1>We.length)){var Ge=Ue._.currentFocusIndex;Ue._.tabBarMode&&0>Ke&&(Ge=0);try{We[Ge].getInputElement().$.blur()}catch(Ze){}var Xe=Ge,Ye=1<Ue._.pageCount;do{if(Xe+=Ke,Ye&&!Ue._.tabBarMode&&(Xe==We.length||-1==Xe))return Ue._.tabBarMode=!0,Ue._.tabs[Ue._.currentTabId][0].focus(),void(Ue._.currentFocusIndex=-1);if(Xe=(Xe+We.length)%We.length,Xe==Ge)break}while(Ke&&!We[Xe].isFocusable());We[Xe].focus(),"text"==We[Xe].type&&We[Xe].select()}}function Re(Ke){if(Ue==CKEDITOR.dialog._.currentTop){var We=Ke.data.getKeystroke(),Ge="rtl"==Ie.lang.dir;if(He=qe=0,9==We||We==CKEDITOR.SHIFT+9)De(We==CKEDITOR.SHIFT+9?-1:1),He=1;else if(We==CKEDITOR.ALT+121&&!Ue._.tabBarMode&&1<Ue.getPageCount())Ue._.tabBarMode=!0,Ue._.tabs[Ue._.currentTabId][0].focus(),Ue._.currentFocusIndex=-1,He=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],We)&&Ue._.tabBarMode)We=-1==CKEDITOR.tools.indexOf([Ge?39:37,38],We)?j.call(Ue):$.call(Ue),Ue.selectPage(We),Ue._.tabs[We][0].focus(),He=1;else if((13==We||32==We)&&Ue._.tabBarMode)this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,De(1),He=1;else if(13==We)We=Ke.data.getTarget(),We.is("a","button","select","textarea")||We.is("input")&&"button"==We.$.type||((We=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(We.click,0,We),He=1),qe=1;else if(27==We)(We=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(We.click,0,We):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),qe=1;else return;Le(Ke)}}function Le(Ke){He?Ke.data.preventDefault(1):qe&&Ke.data.stopPropagation()}var Fe=CKEDITOR.dialog._.dialogDefinitions[Oe],Be=CKEDITOR.tools.clone(pe),Pe=Ie.config.dialog_buttonsOrder||"OS",Me=Ie.lang.dir,$e={},He,qe;if(("OS"==Pe&&CKEDITOR.env.mac||"rtl"==Pe&&"ltr"==Me||"ltr"==Pe&&"rtl"==Me)&&Be.buttons.reverse(),Fe=CKEDITOR.tools.extend(Fe(Ie),Be),Fe=CKEDITOR.tools.clone(Fe),Fe=new _e(this,Fe),Be=ne(Ie),this._={editor:Ie,element:Be.element,name:Oe,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=Be.parts,CKEDITOR.tools.setTimeout(function(){Ie.fire("ariaWidget",this.parts.contents)},0,this),Be={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},Be["rtl"==Me?"right":"left"]=0,this.parts.dialog.setStyles(Be),CKEDITOR.event.call(this),this.definition=Fe=CKEDITOR.fire("dialogDefinition",{name:Oe,definition:Fe},Ie).definition,!("removeDialogTabs"in Ie._)&&Ie.config.removeDialogTabs){for(Be=Ie.config.removeDialogTabs.split(";"),Me=0;Me<Be.length;Me++)if(Pe=Be[Me].split(":"),2==Pe.length){var ze=Pe[0];$e[ze]||($e[ze]=[]),$e[ze].push(Pe[1])}Ie._.removeDialogTabs=$e}if(Ie._.removeDialogTabs&&($e=Ie._.removeDialogTabs[Oe]))for(Me=0;Me<$e.length;Me++)Fe.removeContents($e[Me]);Fe.onLoad&&this.on("load",Fe.onLoad),Fe.onShow&&this.on("show",Fe.onShow),Fe.onHide&&this.on("hide",Fe.onHide),Fe.onOk&&this.on("ok",function(Ke){Ie.fire("saveSnapshot"),setTimeout(function(){Ie.fire("saveSnapshot")},0),!1===Fe.onOk.call(this,Ke)&&(Ke.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,Fe.onCancel&&this.on("cancel",function(Ke){!1===Fe.onCancel.call(this,Ke)&&(Ke.data.hide=!1)});var Ue=this,je=function(Ke){var We=Ue._.contents,Ge=!1,Xe;for(Xe in We)for(var Ye in We[Xe])if(Ge=Ke.call(this,We[Xe][Ye]))return};this.on("ok",function(Ke){je(function(We){if(We.validate){var Ge=We.validate(this),Xe="string"==typeof Ge||!1===Ge;return Xe&&(Ke.data.hide=!1,Ke.stop()),te.call(We,!Xe,"string"==typeof Ge?Ge:void 0),Xe}})},this,null,0),this.on("cancel",function(Ke){je(function(We){if(We.isChanged())return Ie.config.dialog_noConfirmCancel||confirm(Ie.lang.common.confirmCancel)||(Ke.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(Ke){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),Ke.data.preventDefault()},this),this.changeFocus=De;var Ve=this._.element;for(Ie.focusManager.add(Ve,1),this.on("show",function(){Ve.on("keydown",Re,this),CKEDITOR.env.gecko&&Ve.on("keypress",Le,this)}),this.on("hide",function(){Ve.removeListener("keydown",Re),CKEDITOR.env.gecko&&Ve.removeListener("keypress",Le),je(function(Ke){oe.apply(Ke)})}),this.on("iframeAdded",function(Ke){new CKEDITOR.dom.document(Ke.data.iframe.$.contentWindow.document).on("keydown",Re,this,null,0)}),this.on("show",function(){Ae();var Ke=1<Ue._.pageCount;Ie.config.dialog_startupFocusTab&&Ke?(Ue._.tabBarMode=!0,Ue._.tabs[Ue._.currentTabId][0].focus(),Ue._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=Ke?-1:this._.focusList.length-1,Fe.onFocus?(Ke=Fe.onFocus.call(this))&&Ke.focus():De(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var Ke=this.getElement(),We=Ke.getFirst();We.remove(),We.appendTo(Ke)},this),re(this),se(this),new CKEDITOR.dom.text(Fe.title,CKEDITOR.document).appendTo(this.parts.title),Me=0;Me<Fe.contents.length;Me++)($e=Fe.contents[Me])&&this.addPage($e);for(this.parts.tabs.on("click",function(Ke){var We=Ke.data.getTarget();We.hasClass("cke_dialog_tab")&&(We=We.$.id,this.selectPage(We.substring(4,We.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,De(1)),Ke.data.preventDefault())},this),Me=[],$e=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:Fe.buttons},Me).getChild(),this.parts.footer.setHtml(Me.join("")),Me=0;Me<$e.length;Me++)this._.buttons[$e[Me].id]=$e[Me]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(Ie,Oe){this._.contentSize&&this._.contentSize.width==Ie&&this._.contentSize.height==Oe||(CKEDITOR.dialog.fire("resize",{dialog:this,width:Ie,height:Oe},this._.editor),this.fire("resize",{width:Ie,height:Oe},this._.editor),this.parts.contents.setStyles({width:Ie+"px",height:Oe+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:Ie,height:Oe})}}(),getSize:function(){var Ie=this._.element.getFirst();return{width:Ie.$.offsetWidth||0,height:Ie.$.offsetHeight||0}},move:function(Ie,Oe,Ae){var De=this._.element.getFirst(),Re="rtl"==this._.editor.lang.dir,Le="fixed"==De.getComputedStyle("position");CKEDITOR.env.ie&&De.setStyle("zoom","100%"),Le&&this._.position&&this._.position.x==Ie&&this._.position.y==Oe||(this._.position={x:Ie,y:Oe},Le||(Le=CKEDITOR.document.getWindow().getScrollPosition(),Ie+=Le.x,Oe+=Le.y),Re&&(Le=this.getSize(),Ie=CKEDITOR.document.getWindow().getViewPaneSize().width-Le.width-Ie),Oe={top:(0<Oe?Oe:0)+"px"},Oe[Re?"right":"left"]=(0<Ie?Ie:0)+"px",De.setStyles(Oe),Ae&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var Ie=this._.element,Oe=this.definition;for(var Ae in Ie.getParent()&&Ie.getParent().equals(CKEDITOR.document.getBody())?Ie.setStyle("display","block"):Ie.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||Oe.width||Oe.minWidth,this._.contentSize&&this._.contentSize.height||Oe.height||Oe.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,ce(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=_Mathfloor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),Ie.on("keydown",ve),Ie.on("keyup",Ce),this._.hasFocus=!1,Oe.contents)if(Oe.contents[Ae]){var Ie=Oe.contents[Ae],De=this._.tabs[Ie.id],Re=Ie.requiredContent,Le=0;if(De){for(var Fe in this._.contents[Ie.id]){var Be=this._.contents[Ie.id][Fe];"hbox"!=Be.type&&"vbox"!=Be.type&&Be.getInputElement()&&(Be.requiredContent&&!this._.editor.activeFilter.check(Be.requiredContent)?Be.disable():(Be.enable(),Le++))}Le&&(!Re||this._.editor.activeFilter.check(Re))?De[0].removeClass("cke_dialog_tab_disabled"):De[0].addClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),ie(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(Pe){Pe.setInitValue&&Pe.setInitValue()})},100,this)},layout:function(){var Ie=this.parts.dialog,Oe=this.getSize(),Ae=CKEDITOR.document.getWindow().getViewPaneSize(),De=(Ae.width-Oe.width)/2,Re=(Ae.height-Oe.height)/2;CKEDITOR.env.ie6Compat||(Oe.height+(0<Re?Re:0)>Ae.height||Oe.width+(0<De?De:0)>Ae.width?Ie.setStyle("position","absolute"):Ie.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:De,this._.moved?this._.position.y:Re)},foreach:function(Ie){for(var Oe in this._.contents)for(var Ae in this._.contents[Oe])Ie.call(this,this._.contents[Oe][Ae]);return this},reset:function(){var Ie=function(Oe){Oe.reset&&Oe.reset(1)};return function(){return this.foreach(Ie),this}}(),setupContent:function(){var Ie=arguments;this.foreach(function(Oe){Oe.setup&&Oe.setup.apply(Oe,Ie)})},commitContent:function(){var Ie=arguments;this.foreach(function(Oe){CKEDITOR.env.ie&&this._.currentFocusIndex==Oe.focusIndex&&Oe.getInputElement().$.blur(),Oe.commit&&Oe.commit.apply(Oe,Ie)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var Ie=this._.element;for(Ie.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),Ne(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var Oe=this._.parentDialog.getElement().getFirst();Oe.setStyle("z-index",parseInt(Oe.$.style.zIndex,10)+_Mathfloor(this._.editor.config.baseFloatZIndex/2))}else me(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,Ie.removeListener("keydown",ve),Ie.removeListener("keyup",Ce);var Ae=this._.editor;Ae.focus(),setTimeout(function(){Ae.focusManager.unlock(),CKEDITOR.env.iOS&&Ae.window.focus()},0)}delete this._.parentDialog,this.foreach(function(De){De.resetInitValue&&De.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(Ie){if(!Ie.requiredContent||this._.editor.filter.check(Ie.requiredContent)){for(var Oe=[],Ae=Ie.label?" title=\""+CKEDITOR.tools.htmlEncode(Ie.label)+"\"":"",De=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:Ie.elements,expand:!!Ie.expand,padding:Ie.padding,style:Ie.style||"width: 100%;"},Oe),Re=this._.contents[Ie.id]={},Le=De.getChild(),Fe=0;De=Le.shift();)De.notAllowed||"hbox"==De.type||"vbox"==De.type||Fe++,Re[De.id]=De,"function"==typeof De.getChild&&Le.push.apply(Le,De.getChild());Fe||(Ie.hidden=!0),Oe=CKEDITOR.dom.element.createFromHtml(Oe.join("")),Oe.setAttribute("role","tabpanel"),De=CKEDITOR.env,Re="cke_"+Ie.id+"_"+CKEDITOR.tools.getNextNumber(),Ae=CKEDITOR.dom.element.createFromHtml(["<a class=\"cke_dialog_tab\"",0<this._.pageCount?" cke_last":"cke_first",Ae,Ie.hidden?" style=\"display:none\"":""," id=\"",Re,"\"",De.gecko&&!De.hc?"":" href=\"javascript:void(0)\""," tabIndex=\"-1\" hidefocus=\"true\" role=\"tab\">",Ie.label,"</a>"].join("")),Oe.setAttribute("aria-labelledby",Re),this._.tabs[Ie.id]=[Ae,Oe],this._.tabIdList.push(Ie.id),Ie.hidden||this._.pageCount++,this._.lastTab=Ae,this.updateStyle(),Oe.setAttribute("name",Ie.id),Oe.appendTo(this.parts.contents),Ae.unselectable(),this.parts.tabs.append(Ae),Ie.accessKey&&(Se(this,this,"CTRL+"+Ie.accessKey,we,xe),this._.accessKeyMap["CTRL+"+Ie.accessKey]=Ie.id)}},selectPage:function(Ie){if(this._.currentTabId!=Ie&&!this._.tabs[Ie][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:Ie,currentPage:this._.currentTabId})){for(var Oe in this._.tabs){var Ae=this._.tabs[Oe][0],De=this._.tabs[Oe][1];Oe!=Ie&&(Ae.removeClass("cke_dialog_tab_selected"),De.hide()),De.setAttribute("aria-hidden",Oe!=Ie)}var Re=this._.tabs[Ie];Re[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(ee(Re[1]),Re[1].show(),setTimeout(function(){ee(Re[1],1)},0)):Re[1].show(),this._.currentTabId=Ie,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,Ie)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(Ie){var Oe=this._.tabs[Ie]&&this._.tabs[Ie][0];Oe&&1!=this._.pageCount&&Oe.isVisible()&&(Ie==this._.currentTabId&&this.selectPage($.call(this)),Oe.hide(),this._.pageCount--,this.updateStyle())},showPage:function(Ie){(Ie=this._.tabs[Ie]&&this._.tabs[Ie][0])&&(Ie.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(Ie,Oe){var Ae=this._.contents[Ie];return Ae&&Ae[Oe]},getValueOf:function(Ie,Oe){return this.getContentElement(Ie,Oe).getValue()},setValueOf:function(Ie,Oe,Ae){return this.getContentElement(Ie,Oe).setValue(Ae)},getButton:function(Ie){return this._.buttons[Ie]},click:function(Ie){return this._.buttons[Ie].click()},disableButton:function(Ie){return this._.buttons[Ie].disable()},enableButton:function(Ie){return this._.buttons[Ie].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(Ie,Oe){if("undefined"==typeof Oe)Oe=this._.focusList.length,this._.focusList.push(new ae(this,Ie,Oe));else{this._.focusList.splice(Oe,0,new ae(this,Ie,Oe));for(var Ae=Oe+1;Ae<this._.focusList.length;Ae++)this._.focusList[Ae].focusIndex++}},setState:function(Ie){if(this.state!=Ie){if(this.state=Ie,Ie==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var Oe=this.getParentEditor().lang.dir,Ae={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==Oe?"right":"left"}};Ae.styles["margin-"+("rtl"==Oe?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",Ae),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else Ie==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",Ie)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(Ie,Oe){this._.dialogDefinitions[Ie]&&"function"!=typeof Oe||(this._.dialogDefinitions[Ie]=Oe)},exists:function(Ie){return!!this._.dialogDefinitions[Ie]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(Ie,Oe,Ae){return Ie=Ie.config.removeDialogTabs,!(Ie&&Ie.match(new RegExp("(?:^|;)"+Oe+":"+Ae+"(?:$|;)","i")))},okButton:function(){var Ie=function(Oe,Ae){return Ae=Ae||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:Oe.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(De){De=De.data.dialog,!1!==De.fire("ok",{hide:!0}).hide&&De.hide()}},Ae,!0)};return Ie.type="button",Ie.override=function(Oe){return CKEDITOR.tools.extend(function(Ae){return Ie(Ae,Oe)},{type:"button"},!0)},Ie}(),cancelButton:function(){var Ie=function(Oe,Ae){return Ae=Ae||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:Oe.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(De){De=De.data.dialog,!1!==De.fire("cancel",{hide:!0}).hide&&De.hide()}},Ae,!0)};return Ie.type="button",Ie.override=function(Oe){return CKEDITOR.tools.extend(function(Ae){return Ie(Ae,Oe)},{type:"button"},!0)},Ie}(),addUIElement:function(Ie,Oe){this._.uiElementBuilders[Ie]=Oe}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var pe={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},he=function(Ie,Oe,Ae){for(var De=0,Re;Re=Ie[De];De++)if(Re.id==Oe||Ae&&Re[Ae]&&(Re=he(Re[Ae],Oe,Ae)))return Re;return null},fe=function(Ie,Oe,Ae,De,Re){if(Ae){for(var Le=0,Fe;Fe=Ie[Le];Le++){if(Fe.id==Ae)return Ie.splice(Le,0,Oe),Oe;if(De&&Fe[De]&&(Fe=fe(Fe[De],Oe,Ae,De,!0)))return Fe}if(Re)return null}return Ie.push(Oe),Oe},be=function(Ie,Oe,Ae){for(var De=0,Re;Re=Ie[De];De++){if(Re.id==Oe)return Ie.splice(De,1);if(Ae&&Re[Ae]&&(Re=be(Re[Ae],Oe,Ae)))return Re}return null},_e=function(Ie,Oe){this.dialog=Ie;for(var Ae=Oe.contents,De=0,Re;Re=Ae[De];De++)Ae[De]=Re&&new le(Ie,Re);CKEDITOR.tools.extend(this,Oe)};_e.prototype={getContents:function(Ie){return he(this.contents,Ie)},getButton:function(Ie){return he(this.buttons,Ie)},addContents:function(Ie,Oe){return fe(this.contents,Ie,Oe)},addButton:function(Ie,Oe){return fe(this.buttons,Ie,Oe)},removeContents:function(Ie){be(this.contents,Ie)},removeButton:function(Ie){be(this.buttons,Ie)}},le.prototype={get:function(Ie){return he(this.elements,Ie,"children")},add:function(Ie,Oe){return fe(this.elements,Ie,Oe,"children")},remove:function(Ie){be(this.elements,Ie,"children")}};var ye={},Te={},ve=function(Ie){var Oe=Ie.data.$.ctrlKey||Ie.data.$.metaKey,Ae=Ie.data.$.altKey,De=Ie.data.$.shiftKey,Re=_StringfromCharCode(Ie.data.$.keyCode);(Oe=Te[(Oe?"CTRL+":"")+(Ae?"ALT+":"")+(De?"SHIFT+":"")+Re])&&Oe.length&&(Oe=Oe[Oe.length-1],Oe.keydown&&Oe.keydown.call(Oe.uiElement,Oe.dialog,Oe.key),Ie.data.preventDefault())},Ce=function(Ie){var Oe=Ie.data.$.ctrlKey||Ie.data.$.metaKey,Ae=Ie.data.$.altKey,De=Ie.data.$.shiftKey,Re=_StringfromCharCode(Ie.data.$.keyCode);(Oe=Te[(Oe?"CTRL+":"")+(Ae?"ALT+":"")+(De?"SHIFT+":"")+Re])&&Oe.length&&(Oe=Oe[Oe.length-1],Oe.keyup&&(Oe.keyup.call(Oe.uiElement,Oe.dialog,Oe.key),Ie.data.preventDefault()))},Se=function(Ie,Oe,Ae,De,Re){(Te[Ae]||(Te[Ae]=[])).push({uiElement:Ie,dialog:Oe,key:Ae,keyup:Re||Ie.accessKeyUp,keydown:De||Ie.accessKeyDown})},Ne=function(Ie){for(var Oe in Te){for(var Ae=Te[Oe],De=Ae.length-1;0<=De;De--)Ae[De].dialog!=Ie&&Ae[De].uiElement!=Ie||Ae.splice(De,1);0===Ae.length&&delete Te[Oe]}},xe=function(Ie,Oe){Ie._.accessKeyMap[Oe]&&Ie.selectPage(Ie._.accessKeyMap[Oe])},we=function(){},Ee,ke;(function(){CKEDITOR.ui.dialog={uiElement:function(Ie,Oe,Ae,De,Re,Le,Fe){if(!(4>arguments.length)){var Be=(De.call?De(Oe):De)||"div",Pe=["<",Be," "],Me=(Re&&Re.call?Re(Oe):Re)||{},$e=(Le&&Le.call?Le(Oe):Le)||{},He=(Fe&&Fe.call?Fe.call(this,Ie,Oe):Fe)||"",qe=this.domId=$e.id||CKEDITOR.tools.getNextId()+"_uiElement";Oe.requiredContent&&!Ie.getParentEditor().filter.check(Oe.requiredContent)&&(Me.display="none",this.notAllowed=!0),$e.id=qe;var ze={};Oe.type&&(ze["cke_dialog_ui_"+Oe.type]=1),Oe.className&&(ze[Oe.className]=1),Oe.disabled&&(ze.cke_disabled=1);for(var Ue=$e["class"]&&$e["class"].split?$e["class"].split(" "):[],qe=0;qe<Ue.length;qe++)Ue[qe]&&(ze[Ue[qe]]=1);for(qe in Ue=[],ze)Ue.push(qe);for(qe in $e["class"]=Ue.join(" "),Oe.title&&($e.title=Oe.title),ze=(Oe.style||"").split(";"),Oe.align&&(Ue=Oe.align,Me["margin-left"]="left"==Ue?0:"auto",Me["margin-right"]="right"==Ue?0:"auto"),Me)ze.push(qe+":"+Me[qe]);for(Oe.hidden&&ze.push("display:none"),qe=ze.length-1;0<=qe;qe--)""===ze[qe]&&ze.splice(qe,1);for(qe in 0<ze.length&&($e.style=($e.style?$e.style+"; ":"")+ze.join("; ")),$e)Pe.push(qe+"=\""+CKEDITOR.tools.htmlEncode($e[qe])+"\" ");Pe.push(">",He,"</",Be,">"),Ae.push(Pe.join("")),(this._||(this._={})).dialog=Ie,"boolean"==typeof Oe.isChanged&&(this.isChanged=function(){return Oe.isChanged}),"function"==typeof Oe.isChanged&&(this.isChanged=Oe.isChanged),"function"==typeof Oe.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(Ve){return function(Ke){Ve.call(this,Oe.setValue.call(this,Ke))}})),"function"==typeof Oe.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(Ve){return function(){return Oe.getValue.call(this,Ve.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(Oe),this.accessKeyUp&&this.accessKeyDown&&Oe.accessKey&&Se(this,Ie,"CTRL+"+Oe.accessKey);var je=this;Ie.on("load",function(){var Ve=je.getInputElement();if(Ve){var Ke=je.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";Ve.on("focus",function(){Ie._.tabBarMode=!1,Ie._.hasFocus=!0,je.fire("focus"),Ke&&this.addClass(Ke)}),Ve.on("blur",function(){je.fire("blur"),Ke&&this.removeClass(Ke)})}}),CKEDITOR.tools.extend(this,Oe),this.keyboardFocusable&&(this.tabIndex=Oe.tabIndex||0,this.focusIndex=Ie._.focusList.push(this)-1,this.on("focus",function(){Ie._.currentFocusIndex=je.focusIndex}))}},hbox:function(Ie,Oe,Ae,De,Re){if(!(4>arguments.length)){this._||(this._={});var Le=this._.children=Oe,Fe=Re&&Re.widths||null,Be=Re&&Re.height||null,Me={role:"presentation"},Pe;Re&&Re.align&&(Me.align=Re.align),CKEDITOR.ui.dialog.uiElement.call(this,Ie,Re||{type:"hbox"},De,"table",{},Me,function(){var $e=["<tbody><tr class=\"cke_dialog_ui_hbox\">"];for(Pe=0;Pe<Ae.length;Pe++){var He="cke_dialog_ui_hbox_child",qe=[];0===Pe&&(He="cke_dialog_ui_hbox_first"),Pe==Ae.length-1&&(He="cke_dialog_ui_hbox_last"),$e.push("<td class=\"",He,"\" role=\"presentation\" "),Fe?Fe[Pe]&&qe.push("width:"+ue(Fe[Pe])):qe.push("width:"+_Mathfloor(100/Ae.length)+"%"),Be&&qe.push("height:"+ue(Be)),Re&&void 0!==Re.padding&&qe.push("padding:"+ue(Re.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&Le[Pe].align&&qe.push("text-align:"+Le[Pe].align),0<qe.length&&$e.push("style=\""+qe.join("; ")+"\" "),$e.push(">",Ae[Pe],"</td>")}return $e.push("</tr></tbody>"),$e.join("")})}},vbox:function(Ie,Oe,Ae,De,Re){if(!(3>arguments.length)){this._||(this._={});var Le=this._.children=Oe,Fe=Re&&Re.width||null,Be=Re&&Re.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,Ie,Re||{type:"vbox"},De,"div",null,{role:"presentation"},function(){var Pe=["<table role=\"presentation\" cellspacing=\"0\" border=\"0\" "];Pe.push("style=\""),Re&&Re.expand&&Pe.push("height:100%;"),Pe.push("width:"+ue(Fe||"100%"),";"),CKEDITOR.env.webkit&&Pe.push("float:none;"),Pe.push("\""),Pe.push("align=\"",CKEDITOR.tools.htmlEncode(Re&&Re.align||("ltr"==Ie.getParentEditor().lang.dir?"left":"right")),"\" "),Pe.push("><tbody>");for(var Me=0,$e;Me<Ae.length;Me++)$e=[],Pe.push("<tr><td role=\"presentation\" "),Fe&&$e.push("width:"+ue(Fe||"100%")),Be?$e.push("height:"+ue(Be[Me])):Re&&Re.expand&&$e.push("height:"+_Mathfloor(100/Ae.length)+"%"),Re&&void 0!==Re.padding&&$e.push("padding:"+ue(Re.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&Le[Me].align&&$e.push("text-align:"+Le[Me].align),0<$e.length&&Pe.push("style=\"",$e.join("; "),"\" "),Pe.push(" class=\"cke_dialog_ui_vbox_child\">",Ae[Me],"</td></tr>");return Pe.push("</tbody></table>"),Pe.join("")})}}}})(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(Ie,Oe){return this.getInputElement().setValue(Ie),Oe||this.fire("change",{value:Ie}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var Ie=this.getInputElement();(Ie=Ie.getParent())&&-1==Ie.$.className.search("cke_dialog_page_contents"););return Ie?(Ie=Ie.getAttribute("name"),this._.dialog._.currentTabId!=Ie&&this._.dialog.selectPage(Ie),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(Ie){var Oe=/^on([A-Z]\w+)/,De=function(Le,Fe,Be,Pe){Fe.on("load",function(){Le.getInputElement().on(Be,Pe,Le)})},Ae,Re;for(Re in Ie)(Ae=Re.match(Oe))&&(this.eventProcessors[Re]?this.eventProcessors[Re].call(this,this._.dialog,Ie[Re]):De(this,this._.dialog,Ae[1].toLowerCase(),Ie[Re]));return this},eventProcessors:{onLoad:function(Ie,Oe){Ie.on("load",Oe,this)},onShow:function(Ie,Oe){Ie.on("show",Oe,this)},onHide:function(Ie,Oe){Ie.on("hide",Oe,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var Ie=this.getElement();this.getInputElement().setAttribute("disabled","true"),Ie.addClass("cke_disabled")},enable:function(){var Ie=this.getElement();this.getInputElement().removeAttribute("disabled"),Ie.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(Ie){return 1>arguments.length?this._.children.concat():(Ie.splice||(Ie=[Ie]),2>Ie.length?this._.children[Ie[0]]:this._.children[Ie[0]]&&this._.children[Ie[0]].getChild?this._.children[Ie[0]].getChild(Ie.slice(1,Ie.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var Ie={build:function(Oe,Ae,De){for(var Re=Ae.children,Fe=[],Be=[],Pe=0,Le,Me;Pe<Re.length&&(Le=Re[Pe]);Pe++)Me=[],Fe.push(Me),Be.push(CKEDITOR.dialog._.uiElementBuilders[Le.type].build(Oe,Le,Me));return new CKEDITOR.ui.dialog[Ae.type](Oe,Be,Fe,De,Ae)}};CKEDITOR.dialog.addUIElement("hbox",Ie),CKEDITOR.dialog.addUIElement("vbox",Ie)}(),CKEDITOR.dialogCommand=function(Ie,Oe){this.dialogName=Ie,CKEDITOR.tools.extend(this,Oe,!0)},CKEDITOR.dialogCommand.prototype={exec:function(Ie){var Oe=this.tabId;Ie.openDialog(this.dialogName,function(Ae){Oe&&Ae.selectPage(Oe)})},canUndo:!1,editorFocus:1},function(){var Ie=/^([a]|[^a])+$/,Oe=/^\d*$/,Ae=/^\d*(?:\.\d+)?$/,De=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,Re=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,Le=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var Fe=arguments;return function(){var Be=this&&this.getValue?this.getValue():Fe[0],Me=CKEDITOR.VALIDATE_AND,$e=[],Pe,He;for(He=0;He<Fe.length&&"function"==typeof Fe[He];He++)$e.push(Fe[He]);He<Fe.length&&"string"==typeof Fe[He]&&(Pe=Fe[He],He++),He<Fe.length&&"number"==typeof Fe[He]&&(Me=Fe[He]);var qe=Me==CKEDITOR.VALIDATE_AND;for(He=0;He<$e.length;He++)qe=Me==CKEDITOR.VALIDATE_AND?qe&&$e[He](Be):qe||$e[He](Be);return!!qe||Pe}},regex:function(Fe,Be){return function(Pe){return Pe=this&&this.getValue?this.getValue():Pe,!!Fe.test(Pe)||Be}},notEmpty:function(Fe){return this.regex(Ie,Fe)},integer:function(Fe){return this.regex(Oe,Fe)},number:function(Fe){return this.regex(Ae,Fe)},cssLength:function(Fe){return this.functions(function(Be){return Re.test(CKEDITOR.tools.trim(Be))},Fe)},htmlLength:function(Fe){return this.functions(function(Be){return De.test(CKEDITOR.tools.trim(Be))},Fe)},inlineStyle:function(Fe){return this.functions(function(Be){return Le.test(CKEDITOR.tools.trim(Be))},Fe)},equals:function(Fe,Be){return this.functions(function(Pe){return Pe==Fe},Be)},notEqual:function(Fe,Be){return this.functions(function(Pe){return Pe!=Fe},Be)}},CKEDITOR.on("instanceDestroyed",function(Fe){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var Be;Be=CKEDITOR.dialog._.currentTop;)Be.hide();for(var Pe in ye)ye[Pe].remove();ye={}}for(var Me in Fe=Fe.editor._.storedDialogs,Fe)Fe[Me].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(Ie,Oe){var Ae=null,De=CKEDITOR.dialog._.dialogDefinitions[Ie];if(null===CKEDITOR.dialog._.currentTop&&ce(this),"function"==typeof De)Ae=this._.storedDialogs||(this._.storedDialogs={}),Ae=Ae[Ie]||(Ae[Ie]=new CKEDITOR.dialog(this,Ie)),Oe&&Oe.call(Ae,Ae),Ae.show();else{if("failed"==De)throw me(this),Error("[CKEDITOR.dialog.openDialog] Dialog \""+Ie+"\" failed when loading definition.");"string"==typeof De&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(De),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[Ie]&&(CKEDITOR.dialog._.dialogDefinitions[Ie]="failed"),this.openDialog(Ie,Oe)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),Ae}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function($){$.on("doubleclick",function(j){j.data.dialog&&$.openDialog(j.data.dialog)},null,null,999)}}),function(){function $(ee,te){CKEDITOR.tools.extend(this,te,{editor:ee,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:ee._.notificationArea}),te.type||(this.type="info"),this.element=this._createElement(),ee.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function j(ee){var te=this;this.editor=ee,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),ee.on("destroy",function(){te._removeListeners(),te.element.remove()})}CKEDITOR.plugins.add("notification",{init:function(ee){function te(oe){var ne=new CKEDITOR.dom.element("div");ne.setStyles({position:"fixed","margin-left":"-9999px"}),ne.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),ne.setText(oe),CKEDITOR.document.getBody().append(ne),setTimeout(function(){ne.remove()},100)}ee._.notificationArea=new j(ee),ee.showNotification=function(oe,ne,ae){var ie,le;return"progress"==ne?ie=ae:le=ae,oe=new CKEDITOR.plugins.notification(ee,{message:oe,type:ne,progress:ie,duration:le}),oe.show(),oe},ee.on("key",function(oe){if(27==oe.data.keyCode){var ne=ee._.notificationArea.notifications;ne.length&&(te(ee.lang.notification.closed),ne[ne.length-1].hide(),oe.cancel())}})}}),$.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(ee){var te=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:ee})&&(te=!1);var oe=this.element,ne=oe.findOne(".cke_notification_message"),ae=oe.findOne(".cke_notification_progress"),ie=ee.type;oe.removeAttribute("role"),ee.progress&&"progress"!=this.type&&(ie="progress"),ie&&(oe.removeClass(this._getClass()),oe.removeAttribute("aria-label"),this.type=ie,oe.addClass(this._getClass()),oe.setAttribute("aria-label",this.type),"progress"!=this.type||ae?"progress"!=this.type&&ae&&ae.remove():(ae=this._createProgressElement(),ae.insertBefore(ne))),void 0!==ee.message&&(this.message=ee.message,ne.setHtml(this.message)),void 0!==ee.progress&&(this.progress=ee.progress,ae&&ae.setStyle("width",this._getPercentageProgress())),te&&ee.important&&(oe.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=ee.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var ee=this,ne=this.editor.lang.common.close,te,oe;return te=new CKEDITOR.dom.element("div"),te.addClass("cke_notification"),te.addClass(this._getClass()),te.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&te.append(this._createProgressElement()),oe=new CKEDITOR.dom.element("p"),oe.addClass("cke_notification_message"),oe.setHtml(this.message),te.append(oe),oe=CKEDITOR.dom.element.createFromHtml("<a class=\"cke_notification_close\" href=\"javascript:void(0)\" title=\""+ne+"\" role=\"button\" tabindex=\"-1\"><span class=\"cke_label\">X</span></a>"),te.append(oe),oe.on("click",function(){ee.editor.focus(),ee.hide()}),te},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var ee=new CKEDITOR.dom.element("span");return ee.addClass("cke_notification_progress"),ee.setStyle("width",this._getPercentageProgress()),ee},_getPercentageProgress:function(){return _Mathround(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var ee=this,te;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?te=this.duration:("info"==this.type||"success"==this.type)&&(te="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5E3),te&&(ee._hideTimeoutId=setTimeout(function(){ee.hide()},te))}},j.prototype={add:function(ee){this.notifications.push(ee),this.element.append(ee.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(ee){var te=CKEDITOR.tools.indexOf(this.notifications,ee);0>te||(this.notifications.splice(te,1),ee.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var ee=this.editor,te=ee.config,oe=new CKEDITOR.dom.element("div");return oe.addClass("cke_notifications_area"),oe.setAttribute("id","cke_notifications_area_"+ee.name),oe.setStyle("z-index",te.baseFloatZIndex-2),oe},_attachListeners:function(){var ee=CKEDITOR.document.getWindow(),te=this.editor;ee.on("scroll",this._uiBuffer.input),ee.on("resize",this._uiBuffer.input),te.on("change",this._changeBuffer.input),te.on("floatingSpaceLayout",this._layout,this,null,20),te.on("blur",this._layout,this,null,20)},_removeListeners:function(){var ee=CKEDITOR.document.getWindow(),te=this.editor;ee.removeListener("scroll",this._uiBuffer.input),ee.removeListener("resize",this._uiBuffer.input),te.removeListener("change",this._changeBuffer.input),te.removeListener("floatingSpaceLayout",this._layout),te.removeListener("blur",this._layout)},_layout:function(){function ee(){te.setStyle("left",he(fe+ne.width-de-ce))}var te=this.element,oe=this.editor,ne=oe.ui.contentsElement.getClientRect(),ae=oe.ui.contentsElement.getDocumentPosition(),re=te.getClientRect(),de=this._notificationWidth,ce=this._notificationMargin,ie,le,se;se=CKEDITOR.document.getWindow();var me=se.getScrollPosition(),ue=se.getViewPaneSize(),ge=CKEDITOR.document.getBody(),pe=ge.getDocumentPosition(),he=CKEDITOR.tools.cssLength;de&&ce||(se=this.element.getChild(0),de=this._notificationWidth=se.getClientRect().width,ce=this._notificationMargin=parseInt(se.getComputedStyle("margin-left"),10)+parseInt(se.getComputedStyle("margin-right"),10)),oe.toolbar&&(ie=oe.ui.space("top"),le=ie.getClientRect()),ie&&ie.isVisible()&&le.bottom>ne.top&&le.bottom<ne.bottom-re.height?te.setStyles({position:"fixed",top:he(le.bottom)}):0<ne.top?te.setStyles({position:"absolute",top:he(ae.y)}):ae.y+ne.height-re.height>me.y?te.setStyles({position:"fixed",top:0}):te.setStyles({position:"absolute",top:he(ae.y+ne.height-re.height)});var fe="fixed"==te.getStyle("position")?ne.left:"static"==ge.getComputedStyle("position")?ae.x:ae.x-pe.x;ne.width<de+ce?ae.x+de+ce>me.x+ue.width?ee():te.setStyle("left",he(fe)):ae.x+de+ce>me.x+ue.width?te.setStyle("left",he(fe)):ae.x+ne.width/2+de/2+ce>me.x+ue.width?te.setStyle("left",he(fe-ae.x+me.x+ue.width-de-ce)):0>ne.left+ne.width-de-ce?ee():0>ne.left+ne.width/2-de/2?te.setStyle("left",he(fe-ae.x+me.x)):te.setStyle("left",he(fe+ne.width/2-de/2-ce/2))}},CKEDITOR.plugins.notification=$}(),function(){var $="<a id=\"{id}\" class=\"cke_button cke_button__{name} cke_button_{state} {cls}\""+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+" title=\"{title}\" tabindex=\"-1\" hidefocus=\"true\" role=\"button\" aria-labelledby=\"{id}_label\" aria-describedby=\"{id}_description\" aria-haspopup=\"{hasArrow}\" aria-disabled=\"{ariaDisabled}\"";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&($+=" onkeypress=\"return false;\""),CKEDITOR.env.gecko&&($+=" onblur=\"this.style.cssText = this.style.cssText;\"");var j="";CKEDITOR.env.ie&&(j="return false;\" onmouseup=\"CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&");var $=$+(" onkeydown=\"return CKEDITOR.tools.callFunction({keydownFn},event);\" onfocus=\"return CKEDITOR.tools.callFunction({focusFn},event);\" onclick=\""+j+"CKEDITOR.tools.callFunction({clickFn},this);return false;\"><span class=\"cke_button_icon cke_button__{iconName}_icon\" style=\"{style}\">&nbsp;</span><span id=\"{id}_label\" class=\"cke_button_label cke_button__{name}_label\" aria-hidden=\"false\">{label}</span><span id=\"{id}_description\" class=\"cke_button_label\" aria-hidden=\"false\">{ariaShortcut}</span>{arrowHtml}</a>"),ee=CKEDITOR.addTemplate("buttonArrow","<span class=\"cke_button_arrow\">"+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),te=CKEDITOR.addTemplate("button",$);CKEDITOR.plugins.add("button",{beforeInit:function(oe){oe.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(oe){CKEDITOR.tools.extend(this,oe,{title:oe.label,click:oe.click||function(ne){ne.execCommand(oe.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(oe){return new CKEDITOR.ui.button(oe)}},CKEDITOR.ui.button.prototype={render:function(oe,ne){function ae(){var ye=oe.mode;ye&&(ye=this.modes[ye]?void 0===ie[ye]?CKEDITOR.TRISTATE_OFF:ie[ye]:CKEDITOR.TRISTATE_DISABLED,ye=oe.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:ye,this.setState(ye),this.refresh&&this.refresh())}var ie=null,le=CKEDITOR.env,re=this._.id=CKEDITOR.tools.getNextId(),se="",de=this.command,ce,me,ue;this._.editor=oe;var ge={id:re,button:this,editor:oe,focus:function(){CKEDITOR.document.getById(re).focus()},execute:function(){this.button.click(oe)},attach:function(ye){this.button.attach(ye)}},pe=CKEDITOR.tools.addFunction(function(ye){if(ge.onkey)return ye=new CKEDITOR.dom.event(ye),!1!==ge.onkey(ge,ye.getKeystroke())}),he=CKEDITOR.tools.addFunction(function(ye){var ke;return ge.onfocus&&(ke=!1!==ge.onfocus(ge,new CKEDITOR.dom.event(ye))),ke}),fe=0;ge.clickFn=ce=CKEDITOR.tools.addFunction(function(){fe&&(oe.unlockSelection(1),fe=0),ge.execute(),le.iOS&&oe.focus()}),this.modes?(ie={},oe.on("beforeModeUnload",function(){oe.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(ie[oe.mode]=this._.state)},this),oe.on("activeFilterChange",ae,this),oe.on("mode",ae,this),!this.readOnly&&oe.on("readOnly",ae,this)):de&&(de=oe.getCommand(de))&&(de.on("state",function(){this.setState(de.state)},this),se+=de.state==CKEDITOR.TRISTATE_ON?"on":de.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");var be;this.directional&&oe.on("contentDirChanged",function(ye){var ke=CKEDITOR.document.getById(this._.id),Te=ke.getFirst();ye=ye.data,ye==oe.lang.dir?ke.removeClass("cke_ltr").removeClass("cke_rtl"):ke.addClass("cke_"+ye),Te.setAttribute("style",CKEDITOR.skin.getIconStyle(be,"rtl"==ye,this.icon,this.iconOffset))},this),de?(me=oe.getCommandKeystroke(de))&&(ue=CKEDITOR.tools.keystrokeToString(oe.lang.common.keyboard,me)):se+="off",me=this.name||this.command;var _e=null,Ee=this.icon;return be=me,this.icon&&!/\./.test(this.icon)?(be=this.icon,Ee=null):(this.icon&&(_e=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(_e=this.iconHiDpi)),_e?(CKEDITOR.skin.addIcon(_e,_e),Ee=null):_e=be,se={id:re,name:me,iconName:be,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:se,ariaDisabled:"disabled"==se?"true":"false",title:this.title+(ue?" ("+ue.display+")":""),ariaShortcut:ue?oe.lang.common.keyboardShortcut+" "+ue.aria:"",titleJs:le.gecko&&!le.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:pe,focusFn:he,clickFn:ce,style:CKEDITOR.skin.getIconStyle(_e,"rtl"==oe.lang.dir,Ee,this.iconOffset),arrowHtml:this.hasArrow?ee.output():""},te.output(se,ne),this.onRender&&this.onRender(),ge},setState:function(oe){if(this._.state==oe)return!1;this._.state=oe;var ne=CKEDITOR.document.getById(this._.id);return!!ne&&(ne.setState(oe,"cke_button"),ne.setAttribute("aria-disabled",oe==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?ne.setAttribute("aria-expanded",oe==CKEDITOR.TRISTATE_ON):oe===CKEDITOR.TRISTATE_ON?ne.setAttribute("aria-pressed",!0):ne.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(oe){if(this._.feature)return this._.feature;var ne=this;return this.allowedContent||this.requiredContent||!this.command||(ne=oe.getCommand(this.command)||ne),this._.feature=ne}},CKEDITOR.ui.prototype.addButton=function(oe,ne){this.add(oe,CKEDITOR.UI_BUTTON,ne)}}(),function(){function $(oe){function ae(){var de={},ce,me,ue;for(ce in oe.ui.items)me=oe.ui.items[ce],ue=me.toolbar||"others",ue=ue.split(","),me=ue[0],ue=parseInt(ue[1]||-1,10),de[me]||(de[me]=[]),de[me].push({name:ce,order:ue});for(me in de)de[me]=de[me].sort(function(ge,pe){return ge.order==pe.order?0:0>pe.order?-1:0>ge.order?1:ge.order<pe.order?-1:1});return de}function ie(de,ce){if(ce.length){de.items?de.items.push(oe.ui.create("-")):de.items=[];for(var me;me=ce.shift();)me="string"==typeof me?me:me.name,re&&-1!=CKEDITOR.tools.indexOf(re,me)||(me=oe.ui.create(me))&&oe.addFeature(me)&&de.items.push(me)}}var re=oe.config.removeButtons,re=re&&re.split(","),se=oe.config.toolbar;return"string"==typeof se&&(se=oe.config["toolbar_"+se]),oe.toolbar=se?function(de){var ce=[],me,ue,ge;for(me=0;me<de.length;++me)ue=de[me],ge={},"/"==ue?ce.push(ue):CKEDITOR.tools.isArray(ue)?(ie(ge,CKEDITOR.tools.clone(ue)),ce.push(ge)):ue.items&&(ie(ge,CKEDITOR.tools.clone(ue.items)),ge.name=ue.name,ce.push(ge));return ce}(se):function(){for(var de=ae(),ce=CKEDITOR.tools.clone(oe.config.toolbarGroups)||j(oe),me=0,ue;me<ce.length;me++)if(ue=ce[me],"/"!=ue){"string"==typeof ue&&(ue=ce[me]={name:ue});var pe=ue.groups,ge;if(pe)for(var he=0;he<pe.length;he++)ge=pe[he],(ge=de[ge])&&ie(ue,ge);(ge=de[ue.name])&&ie(ue,ge)}return ce}()}function j(oe){return oe._.toolbarGroups||(oe._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var ee=function(){this.toolbars=[],this.focusCommandExecuted=!1};ee.prototype.focus=function(){for(var oe=0,ne;ne=this.toolbars[oe++];)for(var ae=0,ie;ie=ne.items[ae++];)if(ie.focus)return void ie.focus()};var te={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(oe){oe.toolbox&&(oe.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){oe.toolbox.focus()},100):oe.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(oe){var ae=function(ie,le){var se="rtl"==oe.lang.dir,de=oe.config.toolbarGroupCycling,ce=se?37:39,se=se?39:37,de=void 0===de||de,re;switch(le){case 9:case CKEDITOR.SHIFT+9:for(;!re||!re.items.length;)if(re=9==le?(re?re.next:ie.toolbar.next)||oe.toolbox.toolbars[0]:(re?re.previous:ie.toolbar.previous)||oe.toolbox.toolbars[oe.toolbox.toolbars.length-1],re.items.length)for(ie=re.items[ne?re.items.length-1:0];ie&&!ie.focus;)(ie=ne?ie.previous:ie.next)||(re=0);return ie&&ie.focus(),!1;case ce:re=ie;do re=re.next,!re&&de&&(re=ie.toolbar.items[0]);while(re&&!re.focus);return re?re.focus():ae(ie,9),!1;case 40:return ie.button&&ie.button.hasArrow?ie.execute():ae(ie,40==le?ce:se),!1;case se:case 38:re=ie;do re=re.previous,!re&&de&&(re=ie.toolbar.items[ie.toolbar.items.length-1]);while(re&&!re.focus);return re?re.focus():(ne=1,ae(ie,CKEDITOR.SHIFT+9),ne=0),!1;case 27:return oe.focus(),!1;case 13:case 32:return ie.execute(),!1;}return!0},ne;oe.on("uiSpace",function(ie){if(ie.data.space==oe.config.toolbarLocation){ie.removeListener(),oe.toolbox=new ee;var le=CKEDITOR.tools.getNextId(),re=["<span id=\"",le,"\" class=\"cke_voice_label\">",oe.lang.toolbar.toolbars,"</span>","<span id=\""+oe.ui.spaceId("toolbox")+"\" class=\"cke_toolbox\" role=\"group\" aria-labelledby=\"",le,"\" onmousedown=\"return false;\">"],le=!1!==oe.config.toolbarStartupExpanded,se,de;oe.config.toolbarCanCollapse&&oe.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&re.push("<span class=\"cke_toolbox_main\""+(le?">":" style=\"display:none\">"));for(var ce=oe.toolbox.toolbars,me=$(oe),ue=me.length,ge=0;ge<ue;ge++){var he=0,be=me[ge],_e="/"!==be&&("/"===me[ge+1]||ge==ue-1),pe,fe,Ee;if(be)if(se&&(re.push("</span>"),de=se=0),"/"===be)re.push("<span class=\"cke_toolbar_break\"></span>");else{Ee=be.items||be;for(var ye=0;ye<Ee.length;ye++){var ke=Ee[ye],Te;if(ke){var ve=function(Ne){Ne=Ne.render(oe,re),Ce=he.items.push(Ne)-1,0<Ce&&(Ne.previous=he.items[Ce-1],Ne.previous.next=Ne),Ne.toolbar=he,Ne.onkey=ae,Ne.onfocus=function(){oe.toolbox.focusCommandExecuted||oe.focus()}};if(ke.type==CKEDITOR.UI_SEPARATOR)de=se&&ke;else{if(Te=!1!==ke.canGroup,!he){pe=CKEDITOR.tools.getNextId(),he={id:pe,items:[]},fe=be.name&&(oe.lang.toolbar.toolbarGroups[be.name]||be.name),re.push("<span id=\"",pe,"\" class=\"cke_toolbar"+(_e?" cke_toolbar_last\"":"\""),fe?" aria-labelledby=\""+pe+"_label\"":""," role=\"toolbar\">"),fe&&re.push("<span id=\"",pe,"_label\" class=\"cke_voice_label\">",fe,"</span>"),re.push("<span class=\"cke_toolbar_start\"></span>");var Ce=ce.push(he)-1;0<Ce&&(he.previous=ce[Ce-1],he.previous.next=he)}Te?se||(re.push("<span class=\"cke_toolgroup\" role=\"presentation\">"),se=1):se&&(re.push("</span>"),se=0),de&&(ve(de),de=0),ve(ke)}}}se&&(re.push("</span>"),de=se=0),he&&re.push("<span class=\"cke_toolbar_end\"></span></span>")}}if(oe.config.toolbarCanCollapse&&re.push("</span>"),oe.config.toolbarCanCollapse&&oe.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var Se=CKEDITOR.tools.addFunction(function(){oe.execCommand("toolbarCollapse")});oe.on("destroy",function(){CKEDITOR.tools.removeFunction(Se)}),oe.addCommand("toolbarCollapse",{readOnly:1,exec:function(Ne){var xe=Ne.ui.space("toolbar_collapser"),we=xe.getPrevious(),Ie=Ne.ui.space("contents"),Oe=we.getParent(),Ae=parseInt(Ie.$.style.height,10),De=Oe.$.offsetHeight,Re=xe.hasClass("cke_toolbox_collapser_min");Re?(we.show(),xe.removeClass("cke_toolbox_collapser_min"),xe.setAttribute("title",Ne.lang.toolbar.toolbarCollapse)):(we.hide(),xe.addClass("cke_toolbox_collapser_min"),xe.setAttribute("title",Ne.lang.toolbar.toolbarExpand)),xe.getFirst().setText(Re?"\u25B2":"\u25C0"),Ie.setStyle("height",Ae-(Oe.$.offsetHeight-De)+"px"),Ne.fire("resize",{outerHeight:Ne.container.$.offsetHeight,contentsHeight:Ie.$.offsetHeight,outerWidth:Ne.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),oe.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),re.push("<a title=\""+(le?oe.lang.toolbar.toolbarCollapse:oe.lang.toolbar.toolbarExpand)+"\" id=\""+oe.ui.spaceId("toolbar_collapser")+"\" tabIndex=\"-1\" class=\"cke_toolbox_collapser"),le||re.push(" cke_toolbox_collapser_min"),re.push("\" onclick=\"CKEDITOR.tools.callFunction("+Se+")\">","<span class=\"cke_arrow\">&#9650;</span>","</a>")}re.push("</span>"),ie.data.html+=re.join("")}}),oe.on("destroy",function(){if(this.toolbox){var le=0,ie,re,se,de;for(ie=this.toolbox.toolbars;le<ie.length;le++)for(se=ie[le].items,re=0;re<se.length;re++)de=se[re],de.clickFn&&CKEDITOR.tools.removeFunction(de.clickFn),de.keyDownFn&&CKEDITOR.tools.removeFunction(de.keyDownFn)}}),oe.on("uiReady",function(){var ie=oe.ui.space("toolbox");ie&&oe.focusManager.add(ie,1)}),oe.addCommand("toolbarFocus",te),oe.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),oe.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),oe.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(ie,le){return le.push("<span class=\"cke_toolbar_separator\" role=\"separator\"></span>"),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(oe,ne,ae){var ie=j(this.editor),le=0===ne;if(ae){if(ae=CKEDITOR.tools.search(ie,function(se){return se.name==ae}))return(ae.groups||(ae.groups=[]),ne&&(ne=CKEDITOR.tools.indexOf(ae.groups,ne),0<=ne))?void ae.groups.splice(ne+1,0,oe):void(le?ae.groups.splice(0,0,oe):ae.groups.push(oe));ne=null}ne&&(ne=CKEDITOR.tools.indexOf(ie,function(se){return se.name==ne})),le?ie.splice(0,0,oe):"number"==typeof ne?ie.splice(ne+1,0,{name:oe}):ie.push(oe)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function $(se,de,ce){return(de.type||(de.type="auto"),!(ce&&!1===se.fire("beforePaste",de)||!de.dataValue&&de.dataTransfer.isEmpty()))&&(de.dataValue||(de.dataValue=""),CKEDITOR.env.gecko&&"drop"==de.method&&se.toolbox&&se.once("afterPaste",function(){se.toolbox.focus()}),se.fire("paste",de))}function j(se){function de(){var Se=se.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var Ne=function(we){se.getSelection().isCollapsed()||(se.readOnly&&"cut"==we.name||Te.initPasteDataTransfer(we,se),we.data.preventDefault())};Se.on("copy",Ne),Se.on("cut",Ne),Se.on("cut",function(){se.readOnly||se.extractSelectedHtml()},null,null,999)}Se.on(Te.mainPasteEvent,function(we){"beforepaste"==Te.mainPasteEvent&&ve||Ee(we)}),"beforepaste"==Te.mainPasteEvent&&(Se.on("paste",function(we){Ce||(ue(),we.data.preventDefault(),Ee(we),pe("paste"))}),Se.on("contextmenu",ge,null,null,0),Se.on("beforepaste",function(we){!we.data||we.data.$.ctrlKey||we.data.$.shiftKey||ge()},null,null,0)),Se.on("beforecut",function(){ve||he(se)});var xe;Se.attachListener(CKEDITOR.env.ie?Se:se.document.getDocumentElement(),"mouseup",function(){xe=setTimeout(ye,0)}),se.on("destroy",function(){clearTimeout(xe)}),Se.on("keyup",ye)}function ce(Se){return{type:Se,canUndo:"cut"==Se,startDisabled:!0,fakeKeystroke:"cut"==Se?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&he();var xe=this.type,Ne;if(CKEDITOR.env.ie)Ne=pe(xe);else try{Ne=se.document.$.execCommand(xe,!1,null)}catch(we){Ne=!1}return Ne||se.showNotification(se.lang.clipboard[this.type+"Error"]),Ne}}}function me(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(Se,Ne){function xe(Re,Le){Le="undefined"==typeof Le||Le,Re?(Re.method="paste",Re.dataTransfer||(Re.dataTransfer=Te.initPasteDataTransfer()),$(Se,Re,Le)):Ie&&!Se._.forcePasteDialog&&Se.showNotification(De,"info",Se.config.clipboard_notificationDuration),Se._.forcePasteDialog=!1,Se.fire("afterCommandExec",{name:"paste",command:we,returnValue:!!Re})}Ne="undefined"!=typeof Ne&&null!==Ne?Ne:{};var we=this,Ie="undefined"==typeof Ne.notification||Ne.notification,Oe=Ne.type,Ae=CKEDITOR.tools.keystrokeToString(Se.lang.common.keyboard,Se.getCommandKeystroke(this)),De="string"==typeof Ie?Ie:Se.lang.clipboard.pasteNotification.replace(/%1/,"<kbd aria-label=\""+Ae.aria+"\">"+Ae.display+"</kbd>"),Ae="string"==typeof Ne?Ne:Ne.dataValue;Oe&&!0!==Se.config.forcePasteAsPlainText&&"allow-word"!==Se.config.forcePasteAsPlainText?Se._.nextPasteType=Oe:delete Se._.nextPasteType,"string"==typeof Ae?xe({dataValue:Ae}):Se.getClipboardData(xe)}}}function ue(){Ce=1,setTimeout(function(){Ce=0},100)}function ge(){ve=1,setTimeout(function(){ve=0},10)}function pe(Se){var Ne=se.document,xe=Ne.getBody(),we=!1,Ie=function(){we=!0};return xe.on(Se,Ie),7<CKEDITOR.env.version?Ne.$.execCommand(Se):Ne.$.selection.createRange().execCommand(Se),xe.removeListener(Se,Ie),we}function he(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var Se=se.getSelection(),Ne,xe,we;Se.getType()==CKEDITOR.SELECTION_ELEMENT&&(Ne=Se.getSelectedElement())&&(xe=Se.getRanges()[0],we=se.document.createText(""),we.insertBefore(Ne),xe.setStartBefore(we),xe.setEndAfter(Ne),Se.selectRanges([xe]),setTimeout(function(){Ne.getParent()&&(we.remove(),Se.selectElement(Ne))},0))}}function fe(Se,Ne){var xe=se.document,we=se.editable(),Ie=function(Pe){Pe.cancel()},Oe;if(!xe.getById("cke_pastebin")){var Ae=se.getSelection(),De=Ae.createBookmarks();CKEDITOR.env.ie&&Ae.root.fire("selectionchange");var Re=new CKEDITOR.dom.element((CKEDITOR.env.webkit||we.is("body"))&&!CKEDITOR.env.ie?"body":"div",xe);Re.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var Le=0,xe=xe.getWindow();CKEDITOR.env.webkit?(we.append(Re),Re.addClass("cke_editable"),we.is("body")||(Le="static"==we.getComputedStyle("position")?CKEDITOR.dom.element.get(we.$.offsetParent):we,Le=Le.getDocumentPosition().y)):we.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(Re),Re.setStyles({position:"absolute",top:xe.getScrollPosition().y-Le+10+"px",width:"1px",height:_Mathmax(1,xe.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&Re.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(Le=Re.getParent().isReadOnly())?(Re.setOpacity(0),Re.setAttribute("contenteditable",!0)):Re.setStyle("ltr"==se.config.contentsLangDirection?"left":"right","-10000px"),se.on("selectionChange",Ie,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(Oe=we.once("blur",Ie,null,null,-100)),Le&&Re.focus(),Le=new CKEDITOR.dom.range(Re),Le.selectNodeContents(Re);var Fe=Le.select();CKEDITOR.env.ie&&(Oe=we.once("blur",function(){se.lockSelection(Fe)}));var Be=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=Be),Oe&&Oe.removeListener(),CKEDITOR.env.ie&&we.focus(),Ae.selectBookmarks(De),Re.remove();var Pe;CKEDITOR.env.webkit&&(Pe=Re.getFirst())&&Pe.is&&Pe.hasClass("Apple-style-span")&&(Re=Pe),se.removeListener("selectionChange",Ie),Ne(Re.getHtml())},0)}}function be(){if("paste"==Te.mainPasteEvent)return se.fire("beforePaste",{type:"auto",method:"paste"}),!1;se.focus(),ue();var Se=se.focusManager;return(Se.lock(),se.editable().fire(Te.mainPasteEvent)&&!pe("paste"))?(Se.unlock(),!1):(Se.unlock(),!0)}function _e(Se){if("wysiwyg"==se.mode)switch(Se.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:Se=se.editable(),ue(),"paste"==Te.mainPasteEvent&&Se.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:se.fire("saveSnapshot"),setTimeout(function(){se.fire("saveSnapshot")},50);}}function Ee(Se){var Ne={type:"auto",method:"paste",dataTransfer:Te.initPasteDataTransfer(Se)};Ne.dataTransfer.cacheData();var xe=!1!==se.fire("beforePaste",Ne);xe&&Te.canClipboardApiBeTrusted(Ne.dataTransfer,se)?(Se.data.preventDefault(),setTimeout(function(){$(se,Ne)},0)):fe(Se,function(we){Ne.dataValue=we.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,""),xe&&$(se,Ne)})}function ye(){if("wysiwyg"==se.mode){var Se=ke("paste");se.getCommand("cut").setState(ke("cut")),se.getCommand("copy").setState(ke("copy")),se.getCommand("paste").setState(Se),se.fire("pasteState",Se)}}function ke(Se){var Ne=se.getSelection(),Ne=Ne&&Ne.getRanges()[0];return(se.readOnly||Ne&&Ne.checkReadOnly())&&Se in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==Se?CKEDITOR.TRISTATE_OFF:(Se=se.getSelection(),Ne=Se.getRanges(),Se.getType()==CKEDITOR.SELECTION_NONE||1==Ne.length&&Ne[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var Te=CKEDITOR.plugins.clipboard,ve=0,Ce=0;(function(){if(se.on("key",_e),se.on("contentDom",de),se.on("selectionChange",ye),se.contextMenu){se.contextMenu.addListener(function(){return{cut:ke("cut"),copy:ke("copy"),paste:ke("paste")}});var Se=null;se.on("menuShow",function(){Se&&(Se.removeListener(),Se=null);var Ne=se.contextMenu.findItemByCommandName("paste");Ne&&Ne.element&&(Se=Ne.element.on("touchend",function(){se._.forcePasteDialog=!0}))})}se.ui.addButton&&se.once("instanceReady",function(){se._.pasteButtons&&CKEDITOR.tools.array.forEach(se._.pasteButtons,function(Ne){(Ne=se.ui.get(Ne))&&(Ne=CKEDITOR.document.getById(Ne._.id))&&Ne.on("touchend",function(){se._.forcePasteDialog=!0})})})})(),function(){function Se(Ne,xe,we,Ie,Oe){var Ae=se.lang.clipboard[xe];se.addCommand(xe,we),se.ui.addButton&&se.ui.addButton(Ne,{label:Ae,command:xe,toolbar:"clipboard,"+Ie}),se.addMenuItems&&se.addMenuItem(xe,{label:Ae,command:xe,group:"clipboard",order:Oe})}Se("Cut","cut",ce("cut"),10,1),Se("Copy","copy",ce("copy"),20,4),Se("Paste","paste",me(),30,8),se._.pasteButtons||(se._.pasteButtons=[]),se._.pasteButtons.push("Paste")}(),se.getClipboardData=function(Se,Ne){function xe(Ae){Ae.removeListener(),Ae.cancel(),Ne(Ae.data)}function we(Ae){Ae.removeListener(),Ae.cancel(),Ne({type:Oe,dataValue:Ae.data.dataValue,dataTransfer:Ae.data.dataTransfer,method:"paste"})}var Ie=!1,Oe="auto";Ne||(Ne=Se,Se=null),se.on("beforePaste",function(Ae){Ae.removeListener(),Ie=!0,Oe=Ae.data.type},null,null,1E3),se.on("paste",xe,null,null,0),!1===be()&&(se.removeListener("paste",xe),se._.forcePasteDialog&&Ie&&se.fire("pasteDialog")?(se.on("pasteDialogCommit",we),se.on("dialogHide",function(Ae){Ae.removeListener(),Ae.data.removeListener("pasteDialogCommit",we),Ae.data._.committed||Ne(null)})):Ne(null))}}function ee(se){if(CKEDITOR.env.webkit){if(!se.match(/^[^<]*$/g)&&!se.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html";}else if(!CKEDITOR.env.ie){if(!CKEDITOR.env.gecko)return"html";if(!se.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else if(!se.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!se.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html";return"htmlifiedtext"}function te(se,de){function ce(me){return CKEDITOR.tools.repeat("</p><p>",~~(me/2))+(1==me%2?"<br>":"")}return(de=de.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),de=de.replace(/<\/?[A-Z]+>/g,function(me){return me.toLowerCase()}),de.match(/^[^<]$/))?de:(CKEDITOR.env.webkit&&-1<de.indexOf("<div>")&&(de=de.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),de.match(/<div>(<br>|)<\/div>/)&&(de="<p>"+de.replace(/(<div>(<br>|)<\/div>)+/g,function(me){return ce(me.split("</div><div>").length+1)})+"</p>"),de=de.replace(/<\/div><div>/g,"<br>"),de=de.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&se.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(de=de.replace(/^<br><br>$/,"<br>")),-1<de.indexOf("<br><br>")&&(de="<p>"+de.replace(/(<br>){2,}/g,function(me){return ce(me.length/4)})+"</p>")),ae(se,de))}function oe(se){function de(){var me={},ue;for(ue in CKEDITOR.dtd)"$"!=ue.charAt(0)&&"div"!=ue&&"span"!=ue&&(me[ue]=1);return me}var ce={};return{get:function(me){return"plain-text"==me?ce.plainText||(ce.plainText=new CKEDITOR.filter(se,"br")):"semantic-content"==me?((me=ce.semanticContent)||(me=new CKEDITOR.filter(se,{}),me.allow({$1:{elements:de(),attributes:!0,styles:!1,classes:!1}}),me=ce.semanticContent=me),me):me?new CKEDITOR.filter(se,me):null}}}function ne(se,de,ce){de=CKEDITOR.htmlParser.fragment.fromHtml(de);var me=new CKEDITOR.htmlParser.basicWriter;return ce.applyTo(de,!0,!1,se.activeEnterMode),de.writeHtml(me),me.getHtml()}function ae(se,de){return se.enterMode==CKEDITOR.ENTER_BR?de=de.replace(/(<\/p><p>)+/g,function(ce){return CKEDITOR.tools.repeat("<br>",2*(ce.length/7))}).replace(/<\/?p>/g,""):se.enterMode==CKEDITOR.ENTER_DIV&&(de=de.replace(/<(\/)?p>/g,"<$1div>")),de}function ie(se){se.data.preventDefault(),se.data.$.dataTransfer.dropEffect="none"}function le(se){var de=CKEDITOR.plugins.clipboard;se.on("contentDom",function(){function ce(_e,Ee,ye){Ee.select(),$(se,{dataTransfer:ye,method:"drop"},1),ye.sourceEditor.fire("saveSnapshot"),ye.sourceEditor.editable().extractHtmlFromRange(_e),ye.sourceEditor.getSelection().selectRanges([_e]),ye.sourceEditor.fire("saveSnapshot")}function me(_e,Ee){_e.select(),$(se,{dataTransfer:Ee,method:"drop"},1),de.resetDragDataTransfer()}function ue(_e,Ee,ye){var ke={$:_e.data.$,target:_e.data.getTarget()};Ee&&(ke.dragRange=Ee),ye&&(ke.dropRange=ye),!1===se.fire(_e.name,ke)&&_e.data.preventDefault()}function ge(_e){return _e.type!=CKEDITOR.NODE_ELEMENT&&(_e=_e.getParent()),_e.getChildCount()}var pe=se.editable(),he=CKEDITOR.plugins.clipboard.getDropTarget(se),fe=se.ui.space("top"),be=se.ui.space("bottom");de.preventDefaultDropOnElement(fe),de.preventDefaultDropOnElement(be),pe.attachListener(he,"dragstart",ue),pe.attachListener(se,"dragstart",de.resetDragDataTransfer,de,null,1),pe.attachListener(se,"dragstart",function(_e){de.initDragDataTransfer(_e,se)},null,null,2),pe.attachListener(se,"dragstart",function(){var _e=de.dragRange=se.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(de.dragStartContainerChildCount=_e?ge(_e.startContainer):null,de.dragEndContainerChildCount=_e?ge(_e.endContainer):null)},null,null,100),pe.attachListener(he,"dragend",ue),pe.attachListener(se,"dragend",de.initDragDataTransfer,de,null,1),pe.attachListener(se,"dragend",de.resetDragDataTransfer,de,null,100),pe.attachListener(he,"dragover",function(_e){if(CKEDITOR.env.edge)_e.data.preventDefault();else{var Ee=_e.data.getTarget();Ee&&Ee.is&&Ee.is("html")?_e.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&_e.data.$.dataTransfer.types.contains("Files")&&_e.data.preventDefault()}}),pe.attachListener(he,"drop",function(_e){if(!_e.data.$.defaultPrevented){_e.data.preventDefault();var Ee=_e.data.getTarget();if(!Ee.isReadOnly()||Ee.type==CKEDITOR.NODE_ELEMENT&&Ee.is("html")){var Ee=de.getRangeAtDropPosition(_e,se),ye=de.dragRange;Ee&&ue(_e,ye,Ee)}}},null,null,9999),pe.attachListener(se,"drop",de.initDragDataTransfer,de,null,1),pe.attachListener(se,"drop",function(_e){if(_e=_e.data){var Ee=_e.dropRange,ye=_e.dragRange,ke=_e.dataTransfer;ke.getTransferType(se)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){de.internalDrop(ye,Ee,ke,se)},0):ke.getTransferType(se)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?ce(ye,Ee,ke):me(Ee,ke)}},null,null,9999)})}var re;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(se){var ce=oe(se),de;if(se.config.forcePasteAsPlainText?de="plain-text":se.config.pasteFilter?de=se.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in se.config||(de="semantic-content"),se.pasteFilter=ce.get(de),j(se),le(se),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var me=["image/png","image/jpeg","image/gif"],ue;se.on("paste",function(ge){var pe=ge.data,he=pe.dataTransfer;if(!pe.dataValue&&"paste"==pe.method&&he&&1==he.getFilesCount()&&ue!=he.id&&(he=he.getFile(0),-1!=CKEDITOR.tools.indexOf(me,he.type))){var fe=new FileReader;fe.addEventListener("load",function(){ge.data.dataValue="<img src=\""+fe.result+"\" />",se.fire("paste",ge.data)},!1),fe.addEventListener("abort",function(){se.fire("paste",ge.data)},!1),fe.addEventListener("error",function(){se.fire("paste",ge.data)},!1),fe.readAsDataURL(he),ue=pe.dataTransfer.id,ge.stop()}},null,null,1)}se.on("paste",function(ge){if(ge.data.dataTransfer||(ge.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!ge.data.dataValue){var pe=ge.data.dataTransfer,he=pe.getData("text/html");he?(ge.data.dataValue=he,ge.data.type="html"):(he=pe.getData("text/plain"))&&(ge.data.dataValue=se.editable().transformPlainTextToHtml(he),ge.data.type="text")}},null,null,1),se.on("paste",function(ge){var pe=ge.data.dataValue,he=CKEDITOR.dtd.$block;if(-1<pe.indexOf("Apple-")&&(pe=pe.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=ge.data.type&&(pe=pe.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(Ee,ye){return ye.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<pe.indexOf("<br class=\"Apple-interchange-newline\">")&&(ge.data.startsWithEOL=1,ge.data.preSniffing="html",pe=pe.replace(/<br class="Apple-interchange-newline">/,"")),pe=pe.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),pe.match(/^<[^<]+cke_(editable|contents)/i)){var _e=new CKEDITOR.dom.element("div"),fe,be;for(_e.setHtml(pe);1==_e.getChildCount()&&(fe=_e.getFirst())&&fe.type==CKEDITOR.NODE_ELEMENT&&(fe.hasClass("cke_editable")||fe.hasClass("cke_contents"));)_e=be=fe;be&&(pe=be.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?pe=pe.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(Ee,ye){return ye.toLowerCase()in he?(ge.data.preSniffing="html","<"+ye):Ee}):CKEDITOR.env.webkit?pe=pe.replace(/<\/(\w+)><div><br><\/div>$/,function(Ee,ye){return ye in he?(ge.data.endsWithEOL=1,"</"+ye+">"):Ee}):CKEDITOR.env.gecko&&(pe=pe.replace(/(\s)<br>$/,"$1")),ge.data.dataValue=pe},null,null,3),se.on("paste",function(ge){ge=ge.data;var pe=se._.nextPasteType||ge.type,he=ge.dataValue,be=se.config.clipboard_defaultContentType||"html",_e=ge.dataTransfer.getTransferType(se)==CKEDITOR.DATA_TRANSFER_EXTERNAL,Ee=!0===se.config.forcePasteAsPlainText,fe;fe="html"==pe||"html"==ge.preSniffing?"html":ee(he),delete se._.nextPasteType,"htmlifiedtext"==fe&&(he=te(se.config,he)),"text"==pe&&"html"==fe?he=ne(se,he,ce.get("plain-text")):(_e&&se.pasteFilter&&!ge.dontFilter||Ee)&&(he=ne(se,he,se.pasteFilter)),ge.startsWithEOL&&(he="<br data-cke-eol=\"1\">"+he),ge.endsWithEOL&&(he+="<br data-cke-eol=\"1\">"),"auto"==pe&&(pe="html"==fe||"html"==be?"html":"text"),ge.type=pe,ge.dataValue=he,delete ge.preSniffing,delete ge.startsWithEOL,delete ge.endsWithEOL},null,null,6),se.on("paste",function(ge){ge=ge.data,ge.dataValue&&(se.insertHtml(ge.dataValue,ge.type,ge.range),setTimeout(function(){se.fire("afterPaste")},0))},null,null,1E3),se.on("pasteDialog",function(ge){setTimeout(function(){se.openDialog("paste",ge.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(se,de,ce){se.ui.addButton&&(se.ui.addButton(de,ce),se._.pasteButtons||(se._.pasteButtons=[]),se._.pasteButtons.push(de))},canClipboardApiBeTrusted:function(se,de){return se.getTransferType(de)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!se.isEmpty()||CKEDITOR.env.gecko&&(se.getData("text/html")||se.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version},getDropTarget:function(se){var de=se.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||de.isInline()?de:se.document},fixSplitNodesAfterDrop:function(se,de,ce,me){function ue(pe,he,fe){var be=pe;if(be.type==CKEDITOR.NODE_TEXT&&(be=pe.getParent()),be.equals(he)&&fe!=he.getChildCount())return pe=de.startContainer.getChild(de.startOffset-1),he=de.startContainer.getChild(de.startOffset),pe&&pe.type==CKEDITOR.NODE_TEXT&&he&&he.type==CKEDITOR.NODE_TEXT&&(fe=pe.getLength(),pe.setText(pe.getText()+he.getText()),he.remove(),de.setStart(pe,fe),de.collapse(!0)),!0}var ge=de.startContainer;"number"==typeof me&&"number"==typeof ce&&ge.type==CKEDITOR.NODE_ELEMENT&&(ue(se.startContainer,ge,ce)||ue(se.endContainer,ge,me))},isDropRangeAffectedByDragRange:function(se,de){var ce=de.startContainer,me=de.endOffset;return se.endContainer.equals(ce)&&se.endOffset<=me||se.startContainer.getParent().equals(ce)&&se.startContainer.getIndex()<me||se.endContainer.getParent().equals(ce)&&se.endContainer.getIndex()<me},internalDrop:function(se,de,ce,me){var ue=CKEDITOR.plugins.clipboard,ge=me.editable(),pe,he;me.fire("saveSnapshot"),me.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(se,de,ue.dragStartContainerChildCount,ue.dragEndContainerChildCount),(he=this.isDropRangeAffectedByDragRange(se,de))||(pe=se.createBookmark(!1)),ue=de.clone().createBookmark(!1),he&&(pe=se.createBookmark(!1)),se=pe.startNode,de=pe.endNode,he=ue.startNode,de&&se.getPosition(he)&CKEDITOR.POSITION_PRECEDING&&de.getPosition(he)&CKEDITOR.POSITION_FOLLOWING&&he.insertBefore(se),se=me.createRange(),se.moveToBookmark(pe),ge.extractHtmlFromRange(se,1),de=me.createRange(),ue.startNode.getCommonAncestor(ge)||(ue=me.getSelection().createBookmarks()[0]),de.moveToBookmark(ue),$(me,{dataTransfer:ce,method:"drop",range:de},1),me.fire("unlockSnapshot")},getRangeAtDropPosition:function(se,de){var ce=se.data.$,me=ce.clientX,ue=ce.clientY,ge=de.getSelection(!0).getRanges()[0],pe=de.createRange();if(se.data.testRange)return se.data.testRange;if(document.caretRangeFromPoint&&de.document.$.caretRangeFromPoint(me,ue))ce=de.document.$.caretRangeFromPoint(me,ue),pe.setStart(CKEDITOR.dom.node(ce.startContainer),ce.startOffset),pe.collapse(!0);else if(ce.rangeParent)pe.setStart(CKEDITOR.dom.node(ce.rangeParent),ce.rangeOffset),pe.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&ge&&de.editable().hasFocus)return ge;if(document.body.createTextRange){de.focus(),ce=de.document.getBody().$.createTextRange();try{for(var he=!1,fe=0;20>fe&&!he;fe++){if(!he)try{ce.moveToPoint(me,ue-fe),he=!0}catch(Te){}if(!he)try{ce.moveToPoint(me,ue+fe),he=!0}catch(Te){}}if(he){var be="cke-temp-"+new Date().getTime();ce.pasteHTML("<span id=\""+be+"\">\u200B</span>");var _e=de.document.getById(be);pe.moveToPosition(_e,CKEDITOR.POSITION_BEFORE_START),_e.remove()}else{var Ee=de.document.$.elementFromPoint(me,ue),ye=new CKEDITOR.dom.element(Ee),ke;if(ye.equals(de.editable())||"html"==ye.getName())return ge&&ge.startContainer&&!ge.startContainer.equals(de.editable())?ge:null;ke=ye.getClientRect(),me<ke.left?pe.setStartAt(ye,CKEDITOR.POSITION_AFTER_START):pe.setStartAt(ye,CKEDITOR.POSITION_BEFORE_END),pe.collapse(!0)}}catch(Te){return null}}else return null}return pe},initDragDataTransfer:function(se,de){var ce=se.data.$?se.data.$.dataTransfer:null,me=new this.dataTransfer(ce,de);"dragstart"===se.name&&me.storeId(),ce?this.dragData&&me.id==this.dragData.id?me=this.dragData:this.dragData=me:this.dragData?me=this.dragData:this.dragData=me,se.data.dataTransfer=me},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(se,de){if(this.isCustomCopyCutSupported){if(se&&se.data&&se.data.$){var ce=se.data.$.clipboardData,me=new this.dataTransfer(ce,de);return"copy"!==se.name&&"cut"!==se.name||me.storeId(),this.copyCutData&&me.id==this.copyCutData.id?(me=this.copyCutData,me.$=ce):this.copyCutData=me,me}return new this.dataTransfer(null,de)}return new this.dataTransfer(CKEDITOR.env.edge&&se&&se.data.$&&se.data.$.clipboardData||null,de)},preventDefaultDropOnElement:function(se){se&&se.on("dragover",ie)}},re=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(se,de){se&&(this.$=se),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(ce){return ce=ce.toLowerCase(),"text"==ce||"text/plain"==ce?"Text":"url"==ce?"URL":ce}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(re),this.id||(this.id="Text"==re?"":"cke-"+CKEDITOR.tools.getUniqueId()),de&&(this.sourceEditor=de,this.setData("text/html",de.getSelectedHtml(1)),"Text"==re||this.getData("text/plain")||this.setData("text/plain",de.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(se,de){se=this._.normalizeType(se);var ce="text/html"==se&&de?this._.nativeHtmlCache:this._.data[se];if(void 0===ce||null===ce||""===ce){if(this._.fallbackDataTransfer.isRequired())ce=this._.fallbackDataTransfer.getData(se,de);else try{ce=this.$.getData(se)||""}catch(ue){ce=""}"text/html"!=se||de||(ce=this._stripHtml(ce))}if("Text"==se&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==ce.substring(0,7)&&(ce=""),"string"==typeof ce)var me=ce.indexOf("</html>"),ce=-1===me?ce:ce.substring(0,me+7);return ce},setData:function(se,de){if(se=this._.normalizeType(se),"text/html"==se?(this._.data[se]=this._stripHtml(de),this._.nativeHtmlCache=de):this._.data[se]=de,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==se||"Text"==se)if("Text"==re&&"Text"==se&&(this.id=de),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(se,de);else try{this.$.setData(se,de)}catch(ce){}},storeId:function(){"Text"!==re&&this.setData(re,this.id)},getTransferType:function(se){return this.sourceEditor?this.sourceEditor==se?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function se(ue){ue=de._.normalizeType(ue);var ge=de.getData(ue);"text/html"==ue&&(de._.nativeHtmlCache=de.getData(ue,!0),ge=de._stripHtml(ge)),ge&&(de._.data[ue]=ge)}if(this.$){var de=this,ce,me;if(!CKEDITOR.plugins.clipboard.isCustomDataTypesSupported)se("Text"),se("URL");else if(this.$.types)for(ce=0;ce<this.$.types.length;ce++)se(this.$.types[ce]);if(me=this._getImageFromClipboard(),this.$&&this.$.files||me){if(this._.files=[],this.$.files&&this.$.files.length)for(ce=0;ce<this.$.files.length;ce++)this._.files.push(this.$.files[ce]);0===this._.files.length&&me&&this._.files.push(me)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(se){return this._.files.length?this._.files[se]:this.$&&this.$.files&&this.$.files.length?this.$.files[se]:0===se?this._getImageFromClipboard():void 0},isEmpty:function(){var se={},de;if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(this._.data),function(me){se[me]=1}),this.$)if(!CKEDITOR.plugins.clipboard.isCustomDataTypesSupported)se.Text=1,se.URL=1;else if(this.$.types)for(var ce=0;ce<this.$.types.length;ce++)se[this.$.types[ce]]=1;for(de in"Text"!=re&&(se[re]=0),se)if(se[de]&&""!==this.getData(de))return!1;return!0},_getImageFromClipboard:function(){var se;try{if(this.$&&this.$.items&&this.$.items[0]&&(se=this.$.items[0].getAsFile())&&se.type)return se}catch(de){}},_stripHtml:function(se){if(se&&se.length){se=se.replace(this._.metaRegExp,"");var de=this._.bodyRegExp.exec(se);de&&de.length&&(se=de[1],se=se.replace(this._.fragmentRegExp,""))}return se}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(se){this._dataTransfer=se,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var se=CKEDITOR.plugins.clipboard.fallbackDataTransfer,de=this._dataTransfer.$;if(null===se._isCustomMimeTypeSupported)if(de){if(se._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{de.setData("cke/mimetypetest","cke test value"),se._isCustomMimeTypeSupported="cke test value"===de.getData("cke/mimetypetest"),de.clearData("cke/mimetypetest")}catch(ce){}}else return!1;return!se._isCustomMimeTypeSupported},getData:function(se,de){var ce=this._getData(this._customDataFallbackType,!0);if(de)return ce;var ce=this._extractDataComment(ce),me=null,me=se===this._customDataFallbackType?ce.content:ce.data&&ce.data[se]?ce.data[se]:this._getData(se,!0);return null===me?"":me},setData:function(se,de){var ce=se===this._customDataFallbackType;ce&&(de=this._applyDataComment(de,this._getFallbackTypeData()));var me=de,ue=this._dataTransfer.$;try{ue.setData(se,me),ce&&(this._dataTransfer._.nativeHtmlCache=me)}catch(pe){if(this._isUnsupportedMimeTypeError(pe)){ce=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(ce._customTypes,se)&&ce._customTypes.push(se);var ce=this._getFallbackTypeContent(),ge=this._getFallbackTypeData();ge[se]=me;try{me=this._applyDataComment(ce,ge),ue.setData(this._customDataFallbackType,me),this._dataTransfer._.nativeHtmlCache=me}catch(he){me=""}}}return me},_getData:function(se,de){var ce=this._dataTransfer._.data;if(!de&&ce[se])return ce[se];try{return this._dataTransfer.$.getData(se)}catch(me){return null}},_getFallbackTypeContent:function(){var se=this._dataTransfer._.data[this._customDataFallbackType];return se||(se=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),se},_getFallbackTypeData:function(){var se=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,de=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},ce=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(se,function(me){void 0===ce[me]?void 0!==de[me]&&(de[me]=de[me]):de[me]=ce[me]},this),de},_isUnsupportedMimeTypeError:function(se){return se.message&&-1!==se.message.search(/element not found/gi)},_extractDataComment:function(se){var de={data:null,content:se||""};if(se&&16<se.length){var ce;(ce=/\x3c!--cke-data:(.*?)--\x3e/g.exec(se))&&ce[1]&&(de.data=JSON.parse(decodeURIComponent(ce[1])),de.content=se.replace(ce[0],""))}return de},_applyDataComment:function(se,de){var ce="";return de&&CKEDITOR.tools.objectKeys(de).length&&(ce="<!--cke-data:"+encodeURIComponent(JSON.stringify(de))+"-->"),ce+(se&&se.length?se:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1E4,CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function $(j){var ee=this._;ee.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(j),ee.on?ee.panel.hide():ee.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(j){var ee=j.panel||{};delete j.panel,this.base(j),this.document=ee.parent&&ee.parent.getDocument()||CKEDITOR.document,ee.block={attributes:ee.attributes},ee.toolbarRelated=!0,this.hasArrow="listbox",this.click=$,this._={panelDefinition:ee}},statics:{handler:{create:function(j){return new CKEDITOR.ui.panelButton(j)}}},proto:{createPanel:function(j){var ee=this._;if(!ee.panel){var te=this._.panelDefinition,oe=this._.panelDefinition.block,ne=te.parent||CKEDITOR.document.getBody(),ae=this._.panel=new CKEDITOR.ui.floatPanel(j,ne,te),te=ae.addBlock(ee.id,oe),ie=this;ae.onShow=function(){ie.className&&this.element.addClass(ie.className+"_panel"),ie.setState(CKEDITOR.TRISTATE_ON),ee.on=1,ie.editorFocus&&j.focus(),ie.onOpen&&ie.onOpen()},ae.onHide=function(le){ie.className&&this.element.getFirst().removeClass(ie.className+"_panel"),ie.setState(ie.modes&&ie.modes[j.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),ee.on=0,!le&&ie.onClose&&ie.onClose()},ae.onEscape=function(){ae.hide(1),ie.document.getById(ee.id).focus()},this.onBlock&&this.onBlock(ae,te),te.onHide=function(){ee.on=0,ie.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function($){$.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(te){te.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(te,oe){oe&&CKEDITOR.tools.extend(this,oe),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=te,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(te){return new CKEDITOR.ui.panel(te)}};var $=CKEDITOR.addTemplate("panel","<div lang=\"{langCode}\" id=\"{id}\" dir={dir} class=\"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}\" style=\"z-index:{z-index}\" role=\"presentation\">{frame}</div>"),j=CKEDITOR.addTemplate("panel-frame","<iframe id=\"{id}\" class=\"cke_panel_frame\" role=\"presentation\" frameborder=\"0\" src=\"{src}\"></iframe>"),ee=CKEDITOR.addTemplate("panel-frame-inner","<!DOCTYPE html><html class=\"cke_panel_container {env}\" dir=\"{dir}\" lang=\"{langCode}\"><head>{css}</head><body class=\"cke_{dir}\" style=\"margin:0;padding:0\" onload=\"{onload}\"></body></html>");CKEDITOR.ui.panel.prototype={render:function(te,oe){var ne={editorId:te.id,id:this.id,langCode:te.langCode,dir:te.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":te.config.baseFloatZIndex+1};if(this.getHolderElement=function(){var ie=this._.holder;if(!ie){if(this.isFramed){var ie=this.document.getById(this.id+"_frame"),le=ie.getParent(),ie=ie.getFrameDocument();CKEDITOR.env.iOS&&le.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),le=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),ie.write(ee.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+le+");"},ne))),ie.getWindow().$.CKEDITOR=CKEDITOR,ie.on("keydown",function(re){var se=re.data.getKeystroke(),de=this.document.getById(this.id).getAttribute("dir");("input"!==re.data.getTarget().getName()||37!==se&&39!==se)&&(this._.onKeyDown&&!1===this._.onKeyDown(se)?"input"===re.data.getTarget().getName()&&32===se||re.data.preventDefault():(27==se||se==("rtl"==de?39:37))&&this.onEscape&&!1===this.onEscape(se)&&re.data.preventDefault())},this),ie=ie.getBody(),ie.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(le)}else ie=this.document.getById(this.id);this._.holder=ie}return ie},this.isFramed){var ae=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";ne.frame=j.output({id:this.id+"_frame",src:ae})}return ae=$.output(ne),oe&&oe.push(ae),ae},addBlock:function(te,oe){return oe=this._.blocks[te]=oe instanceof CKEDITOR.ui.panel.block?oe:new CKEDITOR.ui.panel.block(this.getHolderElement(),oe),this._.currentBlock||this.showBlock(te),oe},getBlock:function(te){return this._.blocks[te]},showBlock:function(te){te=this._.blocks[te];var oe=this._.currentBlock,ne=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return oe&&oe.hide(),this._.currentBlock=te,CKEDITOR.fire("ariaWidget",ne),te._.focusIndex=-1,this._.onKeyDown=te.onKeyDown&&CKEDITOR.tools.bind(te.onKeyDown,te),te.show(),te},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(te,oe){this.element=te.append(te.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),oe&&CKEDITOR.tools.extend(this,oe),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(te){-1!=te&&(te=this._.getItems().getItem(this._.focusIndex=te),CKEDITOR.env.webkit&&te.getDocument().getWindow().focus(),te.focus(),this.onMark&&this.onMark(te))},markFirstDisplayed:function(te){for(var oe=function(re){return re.type==CKEDITOR.NODE_ELEMENT&&"none"==re.getStyle("display")},ne=this._.getItems(),le=ne.count()-1,ae,ie;0<=le;le--)if(ae=ne.getItem(le),ae.getAscendant(oe)||(ie=ae,this._.focusIndex=le),"true"==ae.getAttribute("aria-selected")){ie=ae,this._.focusIndex=le;break}ie&&(te&&te(),CKEDITOR.env.webkit&&ie.getDocument().getWindow().focus(),ie.focus(),this.onMark&&this.onMark(ie))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(te,oe){var ne=this.keys[te];switch(ne){case"next":for(var ae=this._.focusIndex,ne=this._.getItems(),ie;ie=ne.getItem(++ae);)if(ie.getAttribute("_cke_focus")&&ie.$.offsetWidth){this._.focusIndex=ae,ie.focus(!0);break}return ie||oe?!1:(this._.focusIndex=-1,this.onKeyDown(te,1));case"prev":for(ae=this._.focusIndex,ne=this._.getItems();0<ae&&(ie=ne.getItem(--ae));){if(ie.getAttribute("_cke_focus")&&ie.$.offsetWidth){this._.focusIndex=ae,ie.focus(!0);break}ie=null}return ie||oe?!1:(this._.focusIndex=ne.count(),this.onKeyDown(te,1));case"click":case"mouseup":return ae=this._.focusIndex,(ie=0<=ae&&this._.getItems().getItem(ae))&&(ie.$[ne]?ie.$[ne]():ie.$["on"+ne]()),!1;}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function $(ee,te,oe,ne,ae){ae=CKEDITOR.tools.genKey(te.getUniqueId(),oe.getUniqueId(),ee.lang.dir,ee.uiColor||"",ne.css||"",ae||"");var ie=j[ae];return ie||(ie=j[ae]=new CKEDITOR.ui.panel(te,ne),ie.element=oe.append(CKEDITOR.dom.element.createFromHtml(ie.render(ee),te)),ie.element.setStyles({display:"none",position:"absolute"})),ie}var j={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(ee,te,oe,ne){function ae(){se.hide()}oe.forceIFrame=1,oe.toolbarRelated&&ee.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(te=CKEDITOR.document.getById("cke_"+ee.name));var ie=te.getDocument();ne=$(ee,ie,te,oe,ne||0);var le=ne.element,re=le.getFirst(),se=this;le.disableContextMenu(),this.element=le,this._={editor:ee,panel:ne,parentElement:te,definition:oe,document:ie,iframe:re,children:[],dir:ee.lang.dir,showBlockParams:null,markFirst:void 0===oe.markFirst||oe.markFirst},ee.on("mode",ae),ee.on("resize",ae),ie.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(ee,te){return this._.panel.addBlock(ee,te)},addListBlock:function(ee,te){return this._.panel.addListBlock(ee,te)},getBlock:function(ee){return this._.panel.getBlock(ee)},showBlock:function(ee,te,oe,ne,ae,ie){var le=this._.panel,re=le.showBlock(ee);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var se=this._.editor.editable();this._.returnFocus=se.hasFocus?se:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var de=this.element,se=this._.iframe,se=CKEDITOR.env.ie&&!CKEDITOR.env.edge?se:new CKEDITOR.dom.window(se.$.contentWindow),ce=de.getDocument(),me=this._.parentElement.getPositionedAncestor(),ue=te.getDocumentPosition(ce),ce=me?me.getDocumentPosition(ce):{x:0,y:0},ge="rtl"==this._.dir,pe=ue.x+(ne||0)-ce.x,he=ue.y+(ae||0)-ce.y;ge&&(1==oe||4==oe)?pe+=te.$.offsetWidth:ge||2!=oe&&3!=oe||(pe+=te.$.offsetWidth-1),(3==oe||4==oe)&&(he+=te.$.offsetHeight-1),this._.panel._.offsetParentId=te.getId(),de.setStyles({top:he+"px",left:0,display:""}),de.setOpacity(0),de.getFirst().removeStyle("width"),this._.editor.focusManager.add(se),this._.blurSet||(CKEDITOR.event.useCapture=!0,se.on("blur",function(fe){function be(){delete this._.returnFocus,this.hide()}this.allowBlur()&&fe.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(be,0,this)):be.call(this))},this),se.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(se.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),se.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),le.onEscape=CKEDITOR.tools.bind(function(fe){if(this.onEscape&&!1===this.onEscape(fe))return!1},this),CKEDITOR.tools.setTimeout(function(){var fe=CKEDITOR.tools.bind(function(){var be=de;if(be.removeStyle("width"),re.autoSize){var _e=re.element.getDocument(),_e=(CKEDITOR.env.webkit||CKEDITOR.env.edge?re.element:_e.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<_e&&(_e+=(be.$.offsetWidth||0)-(be.$.clientWidth||0)+3),be.setStyle("width",_e+10+"px"),_e=re.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<_e&&(_e+=(be.$.offsetHeight||0)-(be.$.clientHeight||0)+3),be.setStyle("height",_e+"px"),le._.currentBlock.element.setStyle("display","none").removeStyle("display")}else be.removeStyle("height");ge&&(pe-=de.$.offsetWidth),de.setStyle("left",pe+"px");var _e=le.element.getWindow(),be=de.$.getBoundingClientRect(),_e=_e.getViewPaneSize(),Ee=be.width||be.right-be.left,ye=be.height||be.bottom-be.top,ke=ge?be.right:_e.width-be.left,Te=ge?_e.width-be.right:be.left;ge?ke<Ee&&(pe=Te>Ee?pe+Ee:_e.width>Ee?pe-be.left:pe-be.right+_e.width):ke<Ee&&(pe=Te>Ee?pe-Ee:_e.width>Ee?pe-be.right+_e.width:pe-be.left),Ee=be.top,_e.height-be.top<ye&&(he=Ee>ye?he-ye:_e.height>ye?he-be.bottom+_e.height:he-be.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&(_e=be=new CKEDITOR.dom.element(de.$.offsetParent),"html"==_e.getName()&&(_e=_e.getDocument().getBody()),"rtl"==_e.getComputedStyle("direction")&&(pe=CKEDITOR.env.ie8Compat?pe-2*de.getDocument().getDocumentElement().$.scrollLeft:pe-(be.$.scrollWidth-be.$.clientWidth)));var be=de.getFirst(),ve;(ve=be.getCustomData("activePanel"))&&ve.onHide&&ve.onHide.call(this,1),be.setCustomData("activePanel",this),de.setStyles({top:he+"px",left:pe+"px"}),de.setOpacity(1),ie&&ie()},this);le.isLoaded?fe():le.onLoad=fe,CKEDITOR.tools.setTimeout(function(){var be=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),re.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=be),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){re.markFirstDisplayed?re.markFirstDisplayed():re._.markFirstDisplayed()},0):re.markFirstDisplayed?re.markFirstDisplayed():re._.markFirstDisplayed()),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var ee=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,ee))},focus:function(){if(CKEDITOR.env.webkit){var ee=CKEDITOR.document.getActive();ee&&!ee.equals(this._.iframe)&&ee.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var ee=this._.iframe.getFrameDocument().getActive();ee&&ee.is("a")&&(this._.lastFocused=ee)},hide:function(ee){this.visible&&(!this.onHide||!0!==this.onHide.call(this))&&(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(ee=ee&&this._.returnFocus)&&(CKEDITOR.env.webkit&&ee.type&&ee.getWindow().$.focus(),ee.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(ee){var te=this._.panel;return void 0!==ee&&(te.allowBlur=ee),te.allowBlur},showAsChild:function(ee,te,oe,ne,ae,ie){(this._.activeChild!=ee||ee._.panel._.offsetParentId!=oe.getId())&&(this.hideChild(),ee.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=ee,this._.focused=!1,ee.showBlock(te,oe,ne,ae,ie),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){ee.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(ee){var te=this._.activeChild;te&&(delete te.onHide,delete this._.activeChild,te.hide(),ee&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var ee=CKEDITOR.tools.isEmpty(CKEDITOR.instances),te;for(te in j){var oe=j[te];ee?oe.destroy():oe.element.hide()}ee&&(j={})})}(),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function($){function j(re,se,de,ce,me){var ue=new CKEDITOR.style(ne["colorButton_"+se+"Style"]),ge=CKEDITOR.tools.getNextId()+"_colorBox",pe;me=me||{},$.ui.add(re,CKEDITOR.UI_PANELBUTTON,{label:de,title:de,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+ce,allowedContent:ue,requiredContent:ue,contentTransformations:me.contentTransformations,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":ae.panelTitle}},onBlock:function(he,fe){pe=fe,fe.autoSize=!0,fe.element.addClass("cke_colorblock"),fe.element.setHtml(ee(he,se,ge)),fe.element.getDocument().getBody().setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var be=fe.keys,_e="rtl"==$.lang.dir;be[_e?37:39]="next",be[40]="next",be[9]="next",be[_e?39:37]="prev",be[38]="prev",be[CKEDITOR.SHIFT+9]="prev",be[32]="click"},refresh:function(){$.activeFilter.check(ue)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var he=$.getSelection(),fe=he&&he.getStartElement(),be=$.elementPath(fe);if(be){fe=be.block||be.blockLimit||$.document.getBody();do be=fe&&fe.getComputedStyle("back"==se?"background-color":"color")||"transparent";while("back"==se&&"transparent"==be&&fe&&(fe=fe.getParent()));if(be&&"transparent"!=be||(be="#ffffff"),!1!==ne.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(ge).setStyle("background-color",be),fe=he&&he.getRanges()[0]){for(var he=new CKEDITOR.dom.walker(fe),_e=fe.collapsed?fe.startContainer:he.next(),fe="";_e;){if(_e.type!==CKEDITOR.NODE_ELEMENT&&(_e=_e.getParent()),_e=oe(_e.getComputedStyle("back"==se?"background-color":"color")),fe=fe||_e,fe!==_e){fe="";break}_e=he.next()}for(he=fe,fe=pe._.getItems(),_e=0;_e<fe.count();_e++){var Ee=fe.getItem(_e);Ee.removeAttribute("aria-selected"),he&&he==oe(Ee.getAttribute("data-value"))&&Ee.setAttribute("aria-selected",!0)}}return be}}})}function ee(re,se,de){re=[];var ce=ne.colorButton_colors.split(","),me=ne.colorButton_colorsPerRow||6,ue=$.plugins.colordialog&&!1!==ne.colorButton_enableMore,ge=ce.length+(ue?2:1),pe=CKEDITOR.tools.addFunction(function(_e,Ee){function ye(ke){var Te=ne["colorButton_"+Ee+"Style"];$.removeStyle(new CKEDITOR.style(Te,{color:"inherit"})),Te.childRule="back"==Ee?function(ve){return te(ve)}:function(ve){return!(ve.is("a")||ve.getElementsByTag("a").count())||te(ve)},$.focus(),ke&&$.applyStyle(new CKEDITOR.style(Te,{color:ke})),$.fire("saveSnapshot")}return $.focus(),$.fire("saveSnapshot"),"?"==_e?void $.getColorFromDialog(function(ke){if(ke)return ye(ke)}):ye(_e)});for(!1!==ne.colorButton_enableAutomatic&&re.push("<a class=\"cke_colorauto\" _cke_focus=1 hidefocus=true title=\"",ae.auto,"\" draggable=\"false\" ondragstart=\"return false;\" onclick=\"CKEDITOR.tools.callFunction(",pe,",null,'",se,"');return false;\" href=\"javascript:void('",ae.auto,"')\" role=\"option\" aria-posinset=\"1\" aria-setsize=\"",ge,"\"><table role=\"presentation\" cellspacing=0 cellpadding=0 width=\"100%\"><tr><td colspan=\""+me+"\" align=\"center\"><span class=\"cke_colorbox\" id=\"",de,"\"></span>",ae.auto,"</td></tr></table></a>"),re.push("<table role=\"presentation\" cellspacing=0 cellpadding=0 width=\"100%\">"),de=0;de<ce.length;de++){0==de%me&&re.push("</tr><tr>");var he=ce[de].split("/"),fe=he[0],be=he[1]||fe;he[1]?he=fe:(fe="#"+fe.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"),he=$.lang.colorbutton.colors[be]||be),re.push("<td><a class=\"cke_colorbox\" _cke_focus=1 hidefocus=true title=\"",he,"\" draggable=\"false\" ondragstart=\"return false;\" onclick=\"CKEDITOR.tools.callFunction(",pe,",'",fe,"','",se,"'); return false;\" href=\"javascript:void('",he,"')\" data-value=\""+be+"\" role=\"option\" aria-posinset=\"",de+2,"\" aria-setsize=\"",ge,"\"><span class=\"cke_colorbox\" style=\"background-color:#",be,"\"></span></a></td>")}return ue&&re.push("</tr><tr><td colspan=\""+me+"\" align=\"center\"><a class=\"cke_colormore\" _cke_focus=1 hidefocus=true title=\"",ae.more,"\" draggable=\"false\" ondragstart=\"return false;\" onclick=\"CKEDITOR.tools.callFunction(",pe,",'?','",se,"');return false;\" href=\"javascript:void('",ae.more,"')\""," role=\"option\" aria-posinset=\"",ge,"\" aria-setsize=\"",ge,"\">",ae.more,"</a></td>"),re.push("</tr></table>"),re.join("")}function te(re){return"false"==re.getAttribute("contentEditable")||re.getAttribute("data-nostyle")}function oe(re){return CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(re||"")).replace(/#/g,"")}var ne=$.config,ae=$.lang.colorbutton;if(!CKEDITOR.env.hc){j("TextColor","fore",ae.textColorTitle,10,{contentTransformations:[[{element:"font",check:"span{color}",left:function(re){return!!re.attributes.color},right:function(re){re.name="span",re.attributes.color&&(re.styles.color=re.attributes.color),delete re.attributes.color}}]]});var ie={},le=$.config.colorButton_normalizeBackground;(void 0===le||le)&&(ie.contentTransformations=[[{element:"span",left:function(re){var se=CKEDITOR.tools;return"span"==re.name&&re.styles&&re.styles.background&&(re=se.style.parse.background(re.styles.background),re.color&&1===se.objectKeys(re).length)},right:function(re){var se=new CKEDITOR.style($.config.colorButton_backStyle,{color:re.styles.background}).getDefinition();return re.name=se.element,re.styles=se.styles,re.attributes=se.attributes||{},re}}]]),j("BGColor","back",ae.bgColorTitle,20,ie)}}}),CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.plugins.colordialog={requires:"dialog",init:function($){var j=new CKEDITOR.dialogCommand("colordialog");j.editorFocus=!1,$.addCommand("colordialog",j),CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js"),$.getColorFromDialog=function(ee,te){var oe,ne,ae;oe=function(ie){ne(this),ie="ok"==ie.name?this.getValueOf("picker","selectedColor"):null,/^[0-9a-f]{3}([0-9a-f]{3})?$/i.test(ie)&&(ie="#"+ie),ee.call(te,ie)},ne=function(ie){ie.removeListener("ok",oe),ie.removeListener("cancel",oe)},ae=function(ie){ie.on("ok",oe),ie.on("cancel",oe)},$.execCommand("colordialog"),$._.storedDialogs&&$._.storedDialogs.colordialog?ae($._.storedDialogs.colordialog):CKEDITOR.on("dialogDefinition",function(ie){if("colordialog"==ie.data.name){var le=ie.data.definition;ie.removeListener(),le.onLoad=CKEDITOR.tools.override(le.onLoad,function(re){return function(){ae(this),le.onLoad=re,"function"==typeof re&&re.call(this)}})}})}}},CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function($){for(var j=$.config.menu_groups.split(","),ee=$._.menuGroups={},te=$._.menuItems={},oe=0;oe<j.length;oe++)ee[j[oe]]=oe+1;$.addMenuGroup=function(ne,ae){ee[ne]=ae||100},$.addMenuItem=function(ne,ae){ee[ae.group]&&(te[ne]=new CKEDITOR.menuItem(this,ne,ae))},$.addMenuItems=function(ne){for(var ae in ne)this.addMenuItem(ae,ne[ae])},$.getMenuItem=function(ne){return te[ne]},$.removeMenuItem=function(ne){delete te[ne]}}}),function(){function $(ne){ne.sort(function(ae,ie){return ae.group<ie.group?-1:ae.group>ie.group?1:ae.order<ie.order?-1:ae.order>ie.order?1:0})}var j="<span class=\"cke_menuitem\"><a id=\"{id}\" class=\"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}\" href=\"{href}\" title=\"{title}\" tabindex=\"-1\" _cke_focus=1 hidefocus=\"true\" role=\"{role}\" aria-label=\"{label}\" aria-describedby=\"{id}_description\" aria-haspopup=\"{hasPopup}\" aria-disabled=\"{disabled}\" {ariaChecked} draggable=\"false\"";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(j+=" onkeypress=\"return false;\""),CKEDITOR.env.gecko&&(j+=" onblur=\"this.style.cssText = this.style.cssText;\" ondragstart=\"return false;\"");var j=j+(" onmouseover=\"CKEDITOR.tools.callFunction({hoverFn},{index});\" onmouseout=\"CKEDITOR.tools.callFunction({moveOutFn},{index});\" "+(CKEDITOR.env.ie?"onclick=\"return false;\" onmouseup":"onclick")+"=\"CKEDITOR.tools.callFunction({clickFn},{index}); return false;\">"),ee=CKEDITOR.addTemplate("menuItem",j+"<span class=\"cke_menubutton_inner\"><span class=\"cke_menubutton_icon\"><span class=\"cke_button_icon cke_button__{iconName}_icon\" style=\"{iconStyle}\"></span></span><span class=\"cke_menubutton_label\">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id=\"{id}_description\" class=\"cke_voice_label\" aria-hidden=\"false\">{ariaShortcut}</span></span>"),te=CKEDITOR.addTemplate("menuArrow","<span class=\"cke_menuarrow\"><span>{label}</span></span>"),oe=CKEDITOR.addTemplate("menuShortcut","<span class=\"cke_menubutton_label cke_menubutton_shortcut\">{shortcut}</span>");CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(ne,ae){ae=this._.definition=ae||{},this.id=CKEDITOR.tools.getNextId(),this.editor=ne,this.items=[],this._.listeners=[],this._.level=ae.level||1;var ie=CKEDITOR.tools.extend({},ae.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),le=ie.block.attributes=ie.attributes||{};le.role||(le.role="menu"),this._.panelDefinition=ie},_:{onShow:function(){var ne=this.editor.getSelection(),ae=ne&&ne.getStartElement(),ie=this.editor.elementPath(),le=this._.listeners;this.removeAll();for(var re=0,se;re<le.length;re++)if(se=le[re](ae,ne,ie),se)for(var de in se){var ce=this.editor.getMenuItem(de);ce&&(!ce.command||this.editor.getCommand(ce.command).state)&&(ce.state=se[de],this.add(ce))}},onClick:function(ne){this.hide(),ne.onClick?ne.onClick():ne.command&&this.editor.execCommand(ne.command)},onEscape:function(ne){var ae=this.parent;return ae?ae._.panel.hideChild(1):27==ne&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(ne){var ae=this._.subMenu,ie=this.items[ne];if(ie=ie.getItems&&ie.getItems()){for(var le in ae?ae.removeAll():(ae=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),ae.parent=this,ae._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),ie){var re=this.editor.getMenuItem(le);re&&(re.state=ie[le],ae.add(re))}var se=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(ne+""));setTimeout(function(){ae.show(se,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(ne){ne.order||(ne.order=this.items.length),this.items.push(ne)},removeAll:function(){this.items=[]},show:function(ne,ae,ie,le){if(this.parent||(this._.onShow(),!!this.items.length)){ae=ae||("rtl"==this.editor.lang.dir?2:1);var re=this.items,se=this.editor,de=this._.panel,ce=this._.element;if(!de){de=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),de.onEscape=CKEDITOR.tools.bind(function(fe){if(!1===this._.onEscape(fe))return!1},this),de.onShow=function(){de._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},de.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),ce=de.addBlock(this.id,this._.panelDefinition.block),ce.autoSize=!0;var me=ce.keys;me[40]="next",me[9]="next",me[38]="prev",me[CKEDITOR.SHIFT+9]="prev",me["rtl"==se.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",me[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(me[13]="mouseup"),ce=this._.element=ce.element,me=ce.getDocument(),me.getBody().setStyle("overflow","hidden"),me.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(fe){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,se.config.menu_subMenuDelay||400,this,[fe])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(fe){var be=this.items[fe];be.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):be.getItems?this._.showSubMenu(fe):this._.onClick(be)},this)}$(re);for(var me=se.elementPath(),me=["<div class=\"cke_menu"+(me&&me.direction()!=se.lang.dir?" cke_mixed_dir_content":"")+"\" role=\"presentation\">"],ue=re.length,ge=ue&&re[0].group,pe=0,he;pe<ue;pe++)he=re[pe],ge!=he.group&&(me.push("<div class=\"cke_menuseparator\" role=\"separator\"></div>"),ge=he.group),he.render(this,pe,me);me.push("</div>"),ce.setHtml(me.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(de,this.id,ne,ae,ie,le):de.showBlock(this.id,ne,ae,ie,le),se.fire("menuShow",[de])}},addListener:function(ne){this._.listeners.push(ne)},hide:function(ne){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(ne)},findItemByCommandName:function(ne){var ae=CKEDITOR.tools.array.filter(this.items,function(ie){return ne===ie.command});return ae.length?(ae=ae[0],{item:ae,element:this._.element.findOne("."+ae.className)}):null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(ne,ae,ie){CKEDITOR.tools.extend(this,ie,{order:0,className:"cke_menubutton__"+ae}),this.group=ne._.menuGroups[this.group],this.editor=ne,this.name=ae},proto:{render:function(ne,ae,ie){var le=ne.id+(ae+""),re="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,se="",de=this.editor,ue=re==CKEDITOR.TRISTATE_ON?"on":re==CKEDITOR.TRISTATE_DISABLED?"disabled":"off",ce,me;this.role in{menuitemcheckbox:1,menuitemradio:1}&&(se=" aria-checked=\""+(re==CKEDITOR.TRISTATE_ON?"true":"false")+"\"");var ge=this.getItems,pe="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",he=this.name;this.icon&&!/\./.test(this.icon)&&(he=this.icon),this.command&&(ce=de.getCommand(this.command),(ce=de.getCommandKeystroke(ce))&&(me=CKEDITOR.tools.keystrokeToString(de.lang.common.keyboard,ce))),ne={id:le,name:this.name,iconName:he,label:this.label,cls:this.className||"",state:ue,hasPopup:ge?"true":"false",disabled:re==CKEDITOR.TRISTATE_DISABLED,title:this.label+(me?" ("+me.display+")":""),ariaShortcut:me?de.lang.common.keyboardShortcut+" "+me.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:ne._.itemOverFn,moveOutFn:ne._.itemOutFn,clickFn:ne._.itemClickFn,index:ae,iconStyle:CKEDITOR.skin.getIconStyle(he,"rtl"==this.editor.lang.dir,he==this.icon?null:this.icon,this.iconOffset),shortcutHtml:me?oe.output({shortcut:me.display}):"",arrowHtml:ge?te.output({label:pe}):"",role:this.role?this.role:"menuitem",ariaChecked:se},ee.output(ne,ie)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function($){this.base.call(this,$,{panel:{css:$.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":$.lang.contextmenu.options}}})},proto:{addTarget:function($,j){function ee(){oe=!1}var te,oe;if($.on("contextmenu",function(ae){ae=ae.data;var ie=CKEDITOR.env.webkit?te:CKEDITOR.env.mac?ae.$.metaKey:ae.$.ctrlKey;if((!j||!ie)&&(ae.preventDefault(),!oe)){if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var ie=this.editor,le=new CKEDITOR.dom.elementPath(ae.getTarget(),ie.editable()).contains(function(ce){return ce.hasAttribute("contenteditable")},!0);le&&"false"==le.getAttribute("contenteditable")&&ie.getSelection().fake(le)}var le=ae.getTarget().getDocument(),re=ae.getTarget().getDocument().getDocumentElement(),ie=!le.equals(CKEDITOR.document),le=le.getWindow().getScrollPosition(),se=ie?ae.$.clientX:ae.$.pageX||le.x+ae.$.clientX,de=ie?ae.$.clientY:ae.$.pageY||le.y+ae.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(re,null,se,de)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var ne=function(){te=0};$.on("keydown",function(ae){te=CKEDITOR.env.mac?ae.data.$.metaKey:ae.data.$.ctrlKey}),$.on("keyup",ne),$.on("contextmenu",ne)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&($.on("keydown",function(ae){ae.data.$.shiftKey&&121===ae.data.$.keyCode&&(oe=!0)},null,null,0),$.on("keyup",ee),$.on("contextmenu",ee))},open:function($,j,ee,te){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),$=$||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show($,j,ee,te))}}})},beforeInit:function($){var j=$.contextMenu=new CKEDITOR.plugins.contextMenu($);$.on("contentDom",function(){j.addTarget($.editable(),!1!==$.config.browserContextMenuOnCtrl)}),$.addCommand("contextMenu",{exec:function(ee){var te=0,oe=0,ne=ee.getSelection().getRanges(),ne=ne[ne.length-1].getClientRects(ee.editable().isInline());(ne=ne[ne.length-1])&&(te=ne["rtl"===ee.lang.dir?"left":"right"],oe=ne.bottom),ee.contextMenu.open(ee.document.getBody().getParent(),null,te,oe)}}),$.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),$.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function $(ae,ie,le,re){var se=new CKEDITOR.dom.walker(ae);if(!((ae=ae.startContainer.getAscendant(ie,!0)||ae.endContainer.getAscendant(ie,!0))&&(le(ae),re)))for(;(ae=se.next())&&!((ae=ae.getAscendant(ie,!0))&&(le(ae),re)););}function j(ae,ie){var le={ul:"ol",ol:"ul"};return-1!==te(ie,function(re){return re.element===ae||re.element===le[ae]})}function ee(ae){this.styles=null,this.sticky=!1,this.editor=ae,this.filter=new CKEDITOR.filter(ae,ae.config.copyFormatting_allowRules),!0===ae.config.copyFormatting_allowRules&&(this.filter.disabled=!0),ae.config.copyFormatting_disallowRules&&this.filter.disallow(ae.config.copyFormatting_disallowRules)}var te=CKEDITOR.tools.indexOf,oe=CKEDITOR.tools.getMouseButton,ne=!1;CKEDITOR.plugins.add("copyformatting",{lang:"az,de,en,it,ja,nb,nl,oc,pl,pt-br,ru,sv,tr,zh,zh-cn",icons:"copyformatting",hidpi:!0,init:function(ae){var ie=CKEDITOR.plugins.copyformatting;ie._addScreenReaderContainer(),ne||(CKEDITOR.document.appendStyleSheet(this.path+"styles/copyformatting.css"),ne=!0),ae.addContentsCss&&ae.addContentsCss(this.path+"styles/copyformatting.css"),ae.copyFormatting=new ie.state(ae),ae.addCommand("copyFormatting",ie.commands.copyFormatting),ae.addCommand("applyFormatting",ie.commands.applyFormatting),ae.ui.addButton("CopyFormatting",{label:ae.lang.copyformatting.label,command:"copyFormatting",toolbar:"cleanup,0"}),ae.on("contentDom",function(){var le=ae.getCommand("copyFormatting"),re=ae.editable(),se=re.isInline()?re:ae.document,de=ae.ui.get("CopyFormatting");re.attachListener(se,"mouseup",function(ce){oe(ce)===CKEDITOR.MOUSE_BUTTON_LEFT&&le.state===CKEDITOR.TRISTATE_ON&&ae.execCommand("applyFormatting")}),re.attachListener(CKEDITOR.document,"mouseup",function(ce){oe(ce)!==CKEDITOR.MOUSE_BUTTON_LEFT||le.state!==CKEDITOR.TRISTATE_ON||re.contains(ce.data.getTarget())||ae.execCommand("copyFormatting")}),de&&(se=CKEDITOR.document.getById(de._.id),re.attachListener(se,"dblclick",function(){ae.execCommand("copyFormatting",{sticky:!0})}),re.attachListener(se,"mouseup",function(ce){ce.data.stopPropagation()}))}),ae.config.copyFormatting_keystrokeCopy&&ae.setKeystroke(ae.config.copyFormatting_keystrokeCopy,"copyFormatting"),ae.on("key",function(le){var re=ae.getCommand("copyFormatting");le=le.data.domEvent,le.getKeystroke&&27===le.getKeystroke()&&re.state===CKEDITOR.TRISTATE_ON&&ae.execCommand("copyFormatting")}),ae.copyFormatting.on("extractFormatting",function(le){var re=le.data.element;return re.contains(ae.editable())||re.equals(ae.editable())?le.cancel():(re=ie._convertElementToStyleDef(re),ae.copyFormatting.filter.check(new CKEDITOR.style(re),!0,!0)?void(le.data.styleDef=re):le.cancel())}),ae.copyFormatting.on("applyFormatting",function(le){if(!le.data.preventFormatStripping){var re=le.data.range,se=ie._extractStylesFromRange(ae,re),de=ie._determineContext(re),ce,me;if(ae.copyFormatting._isContextAllowed(de))for(me=0;me<se.length;me++)de=se[me],ce=re.createBookmark(),-1===te(ie.preservedElements,de.element)?CKEDITOR.env.webkit&&!CKEDITOR.env.chrome?se[me].removeFromRange(le.data.range,le.editor):se[me].remove(le.editor):j(de.element,le.data.styles)&&ie._removeStylesFromElementInRange(re,de.element),re.moveToBookmark(ce)}}),ae.copyFormatting.on("applyFormatting",function(le){var re=CKEDITOR.plugins.copyformatting,se=re._determineContext(le.data.range);"list"===se&&ae.copyFormatting._isContextAllowed("list")?re._applyStylesToListContext(le.editor,le.data.range,le.data.styles):"table"===se&&ae.copyFormatting._isContextAllowed("table")?re._applyStylesToTableContext(le.editor,le.data.range,le.data.styles):ae.copyFormatting._isContextAllowed("text")&&re._applyStylesToTextContext(le.editor,le.data.range,le.data.styles)},null,null,999)}}),ee.prototype._isContextAllowed=function(ae){var ie=this.editor.config.copyFormatting_allowedContexts;return!0===ie||-1!==te(ie,ae)},CKEDITOR.event.implementOn(ee.prototype),CKEDITOR.plugins.copyformatting={state:ee,inlineBoundary:"h1 h2 h3 h4 h5 h6 p div".split(" "),excludedAttributes:["id","style","href","data-cke-saved-href","dir"],elementsForInlineTransform:["li"],excludedElementsFromInlineTransform:["table","thead","tbody","ul","ol"],excludedAttributesFromInlineTransform:["value","type"],preservedElements:"ul ol li td th tr thead tbody table".split(" "),breakOnElements:["ul","ol","table"],_initialKeystrokePasteCommand:null,commands:{copyFormatting:{exec:function(ae,ie){var le=CKEDITOR.plugins.copyformatting,re=ae.copyFormatting,se=!!ie&&"keystrokeHandler"==ie.from,de=!!ie&&(ie.sticky||se),ce=le._getCursorContainer(ae),me=CKEDITOR.document.getDocumentElement();return this.state===CKEDITOR.TRISTATE_ON?(re.styles=null,re.sticky=!1,ce.removeClass("cke_copyformatting_active"),me.removeClass("cke_copyformatting_disabled"),me.removeClass("cke_copyformatting_tableresize_cursor"),le._putScreenReaderMessage(ae,"canceled"),le._detachPasteKeystrokeHandler(ae),this.setState(CKEDITOR.TRISTATE_OFF)):void(re.styles=le._extractStylesFromElement(ae,ae.elementPath().lastElement),this.setState(CKEDITOR.TRISTATE_ON),se||(ce.addClass("cke_copyformatting_active"),me.addClass("cke_copyformatting_tableresize_cursor"),ae.config.copyFormatting_outerCursor&&me.addClass("cke_copyformatting_disabled")),re.sticky=de,le._putScreenReaderMessage(ae,"copied"),le._attachPasteKeystrokeHandler(ae))}},applyFormatting:{editorFocus:CKEDITOR.env.ie&&!CKEDITOR.env.edge?!1:!0,exec:function(ae,ie){var le=ae.getCommand("copyFormatting"),re=!!ie&&"keystrokeHandler"==ie.from,se=CKEDITOR.plugins.copyformatting,de=ae.copyFormatting,ce=se._getCursorContainer(ae),me=CKEDITOR.document.getDocumentElement();return re&&!de.styles?(se._putScreenReaderMessage(ae,"failed"),se._detachPasteKeystrokeHandler(ae),!1):void(re=se._applyFormat(ae,de.styles),de.sticky||(de.styles=null,ce.removeClass("cke_copyformatting_active"),me.removeClass("cke_copyformatting_disabled"),me.removeClass("cke_copyformatting_tableresize_cursor"),le.setState(CKEDITOR.TRISTATE_OFF),se._detachPasteKeystrokeHandler(ae)),se._putScreenReaderMessage(ae,re?"applied":"canceled"))}}},_getCursorContainer:function(ae){return ae.elementMode===CKEDITOR.ELEMENT_MODE_INLINE?ae.editable():ae.editable().getParent()},_convertElementToStyleDef:function(ae){var ie=CKEDITOR.tools,le=ae.getAttributes(CKEDITOR.plugins.copyformatting.excludedAttributes),ie=ie.parseCssText(ae.getAttribute("style"),!0,!0);return{element:ae.getName(),type:CKEDITOR.STYLE_INLINE,attributes:le,styles:ie}},_extractStylesFromElement:function(ae,ie){var le={},re=[];do if(ie.type===CKEDITOR.NODE_ELEMENT&&!ie.hasAttribute("data-cke-bookmark")&&(le.element=ie,ae.copyFormatting.fire("extractFormatting",le,ae)&&le.styleDef&&re.push(new CKEDITOR.style(le.styleDef)),ie.getName&&-1!==te(CKEDITOR.plugins.copyformatting.breakOnElements,ie.getName())))break;while((ie=ie.getParent())&&ie.type===CKEDITOR.NODE_ELEMENT);return re},_extractStylesFromRange:function(ae,ie){for(var le=[],re=new CKEDITOR.dom.walker(ie),se;se=re.next();)le=le.concat(CKEDITOR.plugins.copyformatting._extractStylesFromElement(ae,se));return le},_removeStylesFromElementInRange:function(ae,ie){for(var le=-1!==te(["ol","ul","table"],ie),re=new CKEDITOR.dom.walker(ae),se;(se=re.next())&&!((se=se.getAscendant(ie,!0))&&(se.removeAttributes(se.getAttributes()),le)););},_getSelectedWordOffset:function(ae){function ie(pe,he){return pe[he?"getPrevious":"getNext"](function(fe){return fe.type!==CKEDITOR.NODE_COMMENT})}function le(pe){return pe.type==CKEDITOR.NODE_ELEMENT?(pe=pe.getHtml().replace(/<span.*?>&nbsp;<\/span>/g,""),pe.replace(/<.*?>/g,"")):pe.getText()}function re(pe,he){var fe=pe,be=/\s/g,_e="p br ol ul li td th div caption body".split(" "),Ee=!1,ye=!1,ke,Te;do{for(ke=ie(fe,he);!ke&&fe.getParent();){if(fe=fe.getParent(),-1!==te(_e,fe.getName())){ye=Ee=!0;break}ke=ie(fe,he)}if(ke&&ke.getName&&-1!==te(_e,ke.getName())){Ee=!0;break}fe=ke}while(fe&&fe.getStyle&&("none"==fe.getStyle("display")||!fe.getText()));for(fe||(fe=pe);fe.type!==CKEDITOR.NODE_TEXT;)fe=!Ee||he||ye?fe.getChild(0):fe.getChild(fe.getChildCount()-1);for(_e=le(fe);null!=(ye=be.exec(_e))&&(Te=ye.index,he););if("number"!=typeof Te&&!Ee)return re(fe,he);if(Ee)he?Te=0:(be=/([\.\b]*$)/,Te=(ye=be.exec(_e))?ye.index:_e.length);else if(he&&(Te+=1,Te>_e.length))return re(fe);return{node:fe,offset:Te}}var se=/\b\w+\b/ig,de,ce,me,ue,ge;for(me=ue=ge=ae.startContainer,de=le(me);null!=(ce=se.exec(de));)if(ce.index+ce[0].length>=ae.startOffset)return ae=ce.index,se=ce.index+ce[0].length,0===ce.index&&(ce=re(me,!0),ue=ce.node,ae=ce.offset),se>=de.length&&(de=re(me),ge=de.node,se=de.offset),{startNode:ue,startOffset:ae,endNode:ge,endOffset:se};return null},_filterStyles:function(ae){var ie=CKEDITOR.tools.isEmpty,le=[],re,se;for(se=0;se<ae.length;se++)re=ae[se]._.definition,-1!==CKEDITOR.tools.indexOf(CKEDITOR.plugins.copyformatting.inlineBoundary,re.element)&&(re.element=ae[se].element="span"),"span"===re.element&&ie(re.attributes)&&ie(re.styles)||le.push(ae[se]);return le},_determineContext:function(ae){function ie(le){var re=new CKEDITOR.dom.walker(ae),se;if(ae.startContainer.getAscendant(le,!0)||ae.endContainer.getAscendant(le,!0))return!0;for(;se=re.next();)if(se.getAscendant(le,!0))return!0}return ie({ul:1,ol:1})?"list":ie("table")?"table":"text"},_applyStylesToTextContext:function(ae,ie,le){var re=CKEDITOR.plugins.copyformatting,se=re.excludedAttributesFromInlineTransform,de,ce;for(CKEDITOR.env.webkit&&!CKEDITOR.env.chrome&&ae.getSelection().selectRanges([ie]),de=0;de<le.length;de++)if(ie=le[de],-1===te(re.excludedElementsFromInlineTransform,ie.element)){if(-1!==te(re.elementsForInlineTransform,ie.element))for(ie.element=ie._.definition.element="span",ce=0;ce<se.length;ce++)ie._.definition.attributes[se[ce]]&&delete ie._.definition.attributes[se[ce]];ie.apply(ae)}},_applyStylesToListContext:function(ae,ie,le){var re,se,de;for(de=0;de<le.length;de++)re=le[de],se=ie.createBookmark(),"ol"===re.element||"ul"===re.element?$(ie,{ul:1,ol:1},function(ce){var me=re;ce.getName()!==me.element&&ce.renameNode(me.element),me.applyToObject(ce)},!0):"li"===re.element?$(ie,"li",function(ce){re.applyToObject(ce)}):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(ae,ie,[re]),ie.moveToBookmark(se)},_applyStylesToTableContext:function(ae,ie,le){function re(me,ue){me.getName()!==ue.element&&(ue=ue.getDefinition(),ue.element=me.getName(),ue=new CKEDITOR.style(ue)),ue.applyToObject(me)}var se,de,ce;for(ce=0;ce<le.length;ce++)se=le[ce],de=ie.createBookmark(),-1===te(["table","tr"],se.element)?-1===te(["td","th"],se.element)?-1===te(["thead","tbody"],se.element)?CKEDITOR.plugins.copyformatting._applyStylesToTextContext(ae,ie,[se]):$(ie,{thead:1,tbody:1},function(me){re(me,se)}):$(ie,{td:1,th:1},function(me){re(me,se)}):$(ie,se.element,function(me){se.applyToObject(me)}),ie.moveToBookmark(de)},_applyFormat:function(ae,ie){var le=ae.getSelection().getRanges()[0],re=CKEDITOR.plugins.copyformatting,se,de;if(!le)return!1;if(le.collapsed){if(de=ae.getSelection().createBookmarks(),!(se=re._getSelectedWordOffset(le)))return;le=ae.createRange(),le.setStart(se.startNode,se.startOffset),le.setEnd(se.endNode,se.endOffset),le.select()}return(ie=re._filterStyles(ie),!!ae.copyFormatting.fire("applyFormatting",{styles:ie,range:le,preventFormatStripping:!1},ae))&&(de&&ae.getSelection().selectBookmarks(de),!0)},_putScreenReaderMessage:function(ae,ie){var le=this._getScreenReaderContainer();le&&le.setText(ae.lang.copyformatting.notification[ie])},_addScreenReaderContainer:function(){return this._getScreenReaderContainer()?this._getScreenReaderContainer():CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?void 0:CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml("<div class=\"cke_screen_reader_only cke_copyformatting_notification\"><div aria-live=\"polite\"></div></div>")).getChild(0)},_getScreenReaderContainer:function(){if(!CKEDITOR.env.ie6Compat&&!CKEDITOR.env.ie7Compat)return CKEDITOR.document.getBody().findOne(".cke_copyformatting_notification div[aria-live]")},_attachPasteKeystrokeHandler:function(ae){var ie=ae.config.copyFormatting_keystrokePaste;ie&&(this._initialKeystrokePasteCommand=ae.keystrokeHandler.keystrokes[ie],ae.setKeystroke(ie,"applyFormatting"))},_detachPasteKeystrokeHandler:function(ae){var ie=ae.config.copyFormatting_keystrokePaste;ie&&ae.setKeystroke(ie,this._initialKeystrokePasteCommand||!1)}},CKEDITOR.config.copyFormatting_outerCursor=!0,CKEDITOR.config.copyFormatting_allowRules="b s u i em strong span p div td th ol ul li(*)[*]{*}",CKEDITOR.config.copyFormatting_disallowRules="*[data-cke-widget*,data-widget*,data-cke-realelement](cke_widget*)",CKEDITOR.config.copyFormatting_allowedContexts=!0,CKEDITOR.config.copyFormatting_keystrokeCopy=CKEDITOR.CTRL+CKEDITOR.SHIFT+67,CKEDITOR.config.copyFormatting_keystrokePaste=CKEDITOR.CTRL+CKEDITOR.SHIFT+86}(),function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function($){if(!$.blockless){var j=$.lang.div,ee="div(*)";CKEDITOR.dialog.isTabEnabled($,"editdiv","advanced")&&(ee+=";div[dir,id,lang,title]{*}"),$.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:ee,requiredContent:"div",contextSensitive:!0,contentTransformations:[["div: alignmentToStyle"]],refresh:function(te,oe){this.setState("div"in(te.config.div_wrapTable?oe.root:oe.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})),$.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"})),$.addCommand("removediv",{requiredContent:"div",exec:function(te){function oe(de){(de=CKEDITOR.plugins.div.getSurroundDiv(te,de))&&!de.data("cke-div-added")&&(re.push(de),de.data("cke-div-added"))}for(var ne=te.getSelection(),ae=ne&&ne.getRanges(),le=ne.createBookmarks(),re=[],se=0,ie;se<ae.length;se++)ie=ae[se],ie.collapsed?oe(ne.getStartElement()):(ie=new CKEDITOR.dom.walker(ie),ie.evaluator=oe,ie.lastForward());for(se=0;se<re.length;se++)re[se].remove(!0);ne.selectBookmarks(le)}}),$.ui.addButton&&$.ui.addButton("CreateDiv",{label:j.toolbar,command:"creatediv",toolbar:"blocks,50"}),$.addMenuItems&&($.addMenuItems({editdiv:{label:j.edit,command:"editdiv",group:"div",order:1},removediv:{label:j.remove,command:"removediv",group:"div",order:5}}),$.contextMenu&&$.contextMenu.addListener(function(te){return!te||te.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv($)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null})),CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js"),CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}}),CKEDITOR.plugins.div={getSurroundDiv:function($,j){var ee=$.elementPath(j);return $.elementPath(ee.blockLimit).contains(function(te){return te.is("div")&&!te.isReadOnly()},1)}}}(),CKEDITOR.plugins.add("resize",{init:function($){function j(ce){var me=le.width,ue=le.height,ge=me+(ce.data.$.screenX-ie.x)*("rtl"==ne?-1:1);ce=ue+(ce.data.$.screenY-ie.y),re&&(me=_Mathmax(te.resize_minWidth,_Mathmin(ge,te.resize_maxWidth))),se&&(ue=_Mathmax(te.resize_minHeight,_Mathmin(ce,te.resize_maxHeight))),$.resize(re?me:null,ue)}function ee(){CKEDITOR.document.removeListener("mousemove",j),CKEDITOR.document.removeListener("mouseup",ee),$.document&&($.document.removeListener("mousemove",j),$.document.removeListener("mouseup",ee))}var te=$.config,oe=$.ui.spaceId("resizer"),ne=$.element?$.element.getDirection(1):"ltr";if(te.resize_dir||(te.resize_dir="vertical"),void 0===te.resize_maxWidth&&(te.resize_maxWidth=3E3),void 0===te.resize_maxHeight&&(te.resize_maxHeight=3E3),void 0===te.resize_minWidth&&(te.resize_minWidth=750),void 0===te.resize_minHeight&&(te.resize_minHeight=250),!1!==te.resize_enabled){var ae=null,re=("both"==te.resize_dir||"horizontal"==te.resize_dir)&&te.resize_minWidth!=te.resize_maxWidth,se=("both"==te.resize_dir||"vertical"==te.resize_dir)&&te.resize_minHeight!=te.resize_maxHeight,de=CKEDITOR.tools.addFunction(function(ce){ae||(ae=$.getResizable()),le={width:ae.$.offsetWidth||0,height:ae.$.offsetHeight||0},ie={x:ce.screenX,y:ce.screenY},te.resize_minWidth>le.width&&(te.resize_minWidth=le.width),te.resize_minHeight>le.height&&(te.resize_minHeight=le.height),CKEDITOR.document.on("mousemove",j),CKEDITOR.document.on("mouseup",ee),$.document&&($.document.on("mousemove",j),$.document.on("mouseup",ee)),ce.preventDefault&&ce.preventDefault()}),ie,le;$.on("destroy",function(){CKEDITOR.tools.removeFunction(de)}),$.on("uiSpace",function(ce){if("bottom"==ce.data.space){var me="";re&&!se&&(me=" cke_resizer_horizontal"),!re&&se&&(me=" cke_resizer_vertical");var ue="<span id=\""+oe+"\" class=\"cke_resizer"+me+" cke_resizer_"+ne+"\" title=\""+CKEDITOR.tools.htmlEncode($.lang.common.resize)+"\" onmousedown=\"CKEDITOR.tools.callFunction("+de+", event)\">"+("ltr"==ne?"\u25E2":"\u25E3")+"</span>";"ltr"==ne&&"ltr"==me?ce.data.html+=ue:ce.data.html=ue+ce.data.html}},$,null,100),$.on("maximize",function(ce){$.ui.space("resizer")[ce.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){function $(oe,ne){function ae(ue){ue=se.list[ue];var ge;ue.equals(oe.editable())||"true"==ue.getAttribute("contenteditable")?(ge=oe.createRange(),ge.selectNodeContents(ue),ge=ge.select()):(ge=oe.getSelection(),ge.selectElement(ue)),CKEDITOR.env.ie&&oe.fire("selectionChange",{selection:ge,path:new CKEDITOR.dom.elementPath(ue)}),oe.focus()}function ie(){re&&re.setHtml("<span class=\"cke_path_empty\">&nbsp;</span>"),delete se.list}var le=oe.ui.spaceId("path"),se=oe._.elementsPath,de=se.idBase,re;ne.html+="<span id=\""+le+"_label\" class=\"cke_voice_label\">"+oe.lang.elementspath.eleLabel+"</span><span id=\""+le+"\" class=\"cke_path\" role=\"group\" aria-labelledby=\""+le+"_label\"><span class=\"cke_path_empty\">&nbsp;</span></span>",oe.on("uiReady",function(){var ue=oe.ui.space("path");ue&&oe.focusManager.add(ue,1)}),se.onClick=ae;var ce=CKEDITOR.tools.addFunction(ae),me=CKEDITOR.tools.addFunction(function(ue,ge){var pe=se.idBase,he;switch(ge=new CKEDITOR.dom.event(ge),he="rtl"==oe.lang.dir,ge.getKeystroke()){case he?39:37:case 9:return(he=CKEDITOR.document.getById(pe+(ue+1)))||(he=CKEDITOR.document.getById(pe+"0")),he.focus(),!1;case he?37:39:case CKEDITOR.SHIFT+9:return(he=CKEDITOR.document.getById(pe+(ue-1)))||(he=CKEDITOR.document.getById(pe+(se.list.length-1))),he.focus(),!1;case 27:return oe.focus(),!1;case 13:case 32:return ae(ue),!1;}return!0});oe.on("selectionChange",function(ue){for(var ge=[],pe=se.list=[],he=[],fe=se.filters,be=!0,_e=ue.data.path.elements,Ee=_e.length;Ee--;){var ye=_e[Ee],ke=0;ue=ye.data("cke-display-name")?ye.data("cke-display-name"):ye.data("cke-real-element-type")?ye.data("cke-real-element-type"):ye.getName(),(be=ye.hasAttribute("contenteditable")?"true"==ye.getAttribute("contenteditable"):be)||ye.hasAttribute("contenteditable")||(ke=1);for(var Te=0,ve;Te<fe.length;Te++){if(ve=fe[Te](ye,ue),!1===ve){ke=1;break}ue=ve||ue}ke||(pe.unshift(ye),he.unshift(ue))}for(pe=pe.length,fe=0;fe<pe;fe++)ue=he[fe],be=oe.lang.elementspath.eleTitle.replace(/%1/,ue),ue=te.output({id:de+fe,label:be,text:ue,jsTitle:"javascript:void('"+ue+"')",index:fe,keyDownFn:me,clickFn:ce}),ge.unshift(ue);re||(re=CKEDITOR.document.getById(le)),he=re,he.setHtml(ge.join("")+"<span class=\"cke_path_empty\">&nbsp;</span>"),oe.fire("elementsPathUpdate",{space:he})}),oe.on("readOnly",ie),oe.on("contentDomUnload",ie),oe.addCommand("elementsPathFocus",j.toolbarFocus),oe.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var j={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(oe){(oe=CKEDITOR.document.getById(oe._.elementsPath.idBase+"0"))&&oe.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},ee="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(ee+=" onkeypress=\"return false;\""),CKEDITOR.env.gecko&&(ee+=" onblur=\"this.style.cssText = this.style.cssText;\"");var te=CKEDITOR.addTemplate("pathItem","<a id=\"{id}\" href=\"{jsTitle}\" tabindex=\"-1\" class=\"cke_path_item\" title=\"{label}\""+ee+" hidefocus=\"true\"  draggable=\"false\"  ondragstart=\"return false;\" onkeydown=\"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );\" onclick=\"CKEDITOR.tools.callFunction({clickFn},{index}); return false;\" role=\"button\" aria-label=\"{label}\">{text}</a>");CKEDITOR.plugins.add("elementspath",{init:function(oe){oe._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},oe.on("uiSpace",function(ne){"bottom"==ne.data.space&&$(oe,ne.data)})}})}(),function(){function $(re,se,de){if(de=re.config.forceEnterMode||de,"wysiwyg"==re.mode){se||(se=re.activeEnterMode);var ce=re.elementPath();ce&&!ce.isContextFor("p")&&(se=CKEDITOR.ENTER_BR,de=1),re.fire("saveSnapshot"),se==CKEDITOR.ENTER_BR?ae(re,se,null,de):ie(re,se,null,de),re.fire("saveSnapshot")}}function j(re){re=re.getSelection().getRanges(!0);for(var se=re.length-1;0<se;se--)re[se].deleteContents();return re[0]}function ee(re){var se=re.startContainer.getAscendant(function(de){return de.type==CKEDITOR.NODE_ELEMENT&&"true"==de.getAttribute("contenteditable")},!0);return re.root.equals(se)?re:(se=new CKEDITOR.dom.range(se),se.moveToRange(re),se)}CKEDITOR.plugins.add("enterkey",{init:function(re){re.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(se){$(se)}}),re.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(se){$(se,se.activeShiftEnterMode,1)}}),re.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var te=CKEDITOR.dom.walker.whitespaces(),oe=CKEDITOR.dom.walker.bookmark(),ne,ae,ie,le;CKEDITOR.plugins.enterkey={enterBlock:function(re,se,de,ce){function me(ve){var Ce;return ve===CKEDITOR.ENTER_BR||-1===CKEDITOR.tools.indexOf(["td","th"],he.lastElement.getName())||1!==he.lastElement.getChildCount()?!1:(ve=he.lastElement.getChild(0).clone(!0),(Ce=ve.getBogus())&&Ce.remove(),!ve.getText().length)}if(de=de||j(re)){de=ee(de);var ue=de.document,ge=de.checkStartOfBlock(),pe=de.checkEndOfBlock(),he=re.elementPath(de.startContainer),fe=he.block,be=se==CKEDITOR.ENTER_DIV?"div":"p",_e;if(fe&&ge&&pe){if(ge=fe.getParent(),ge.is("li")&&1<ge.getChildCount())return ue=new CKEDITOR.dom.element("li"),_e=re.createRange(),ue.insertAfter(ge),fe.remove(),_e.setStart(ue,0),void re.getSelection().selectRanges([_e]);if(fe.is("li")||fe.getParent().is("li")){fe.is("li")||(fe=fe.getParent(),ge=fe.getParent()),_e=ge.getParent(),de=!fe.hasPrevious();var Ee=!fe.hasNext();ce=re.getSelection();var be=ce.createBookmarks(),ye=fe.getDirection(1),pe=fe.getAttribute("class"),ke=fe.getAttribute("style"),Te=_e.getDirection(1)!=ye;if(re=re.enterMode!=CKEDITOR.ENTER_BR||Te||ke||pe,_e.is("li"))de||Ee?(de&&Ee&&ge.remove(),fe[Ee?"insertAfter":"insertBefore"](_e)):fe.breakParent(_e);else{if(re)(he.block.is("li")?(_e=ue.createElement(se==CKEDITOR.ENTER_P?"p":"div"),Te&&_e.setAttribute("dir",ye),ke&&_e.setAttribute("style",ke),pe&&_e.setAttribute("class",pe),fe.moveChildren(_e)):_e=he.block,de||Ee)?_e[de?"insertBefore":"insertAfter"](ge):(fe.breakParent(ge),_e.insertAfter(ge));else if(fe.appendBogus(!0),de||Ee)for(;ue=fe[de?"getFirst":"getLast"]();)ue[de?"insertBefore":"insertAfter"](ge);else for(fe.breakParent(ge);ue=fe.getLast();)ue.insertAfter(ge);fe.remove()}return void ce.selectBookmarks(be)}if(fe&&fe.getParent().is("blockquote"))return fe.breakParent(fe.getParent()),fe.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||fe.getPrevious().remove(),fe.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||fe.getNext().remove(),de.moveToElementEditStart(fe),void de.select()}else if(fe&&fe.is("pre")&&!pe)return void ae(re,se,de,ce);if(ke=de.splitBlock(be)){if(re=ke.previousBlock,fe=ke.nextBlock,ge=ke.wasStartOfBlock,pe=ke.wasEndOfBlock,fe?(Ee=fe.getParent(),Ee.is("li")&&(fe.breakParent(Ee),fe.move(fe.getNext(),1))):re&&(Ee=re.getParent())&&Ee.is("li")&&(re.breakParent(Ee),Ee=re.getNext(),de.moveToElementEditStart(Ee),re.move(re.getPrevious())),!(ge||pe))fe.is("li")&&(_e=de.clone(),_e.selectNodeContents(fe),_e=new CKEDITOR.dom.walker(_e),_e.evaluator=function(ve){return!(oe(ve)||te(ve)||ve.type==CKEDITOR.NODE_ELEMENT&&ve.getName()in CKEDITOR.dtd.$inline&&!(ve.getName()in CKEDITOR.dtd.$empty))},(Ee=_e.next())&&Ee.type==CKEDITOR.NODE_ELEMENT&&Ee.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?ue.createElement("br"):ue.createText("\xA0")).insertBefore(Ee)),fe&&de.moveToElementEditStart(fe);else if(me(se))de.moveToElementEditStart(de.getTouchedStartNode());else{if(re?(re.is("li")||!le.test(re.getName())&&!re.is("pre"))&&(_e=re.clone()):fe&&(_e=fe.clone()),_e?ce&&!_e.is("li")&&_e.renameNode(be):Ee&&Ee.is("li")?_e=Ee:(_e=ue.createElement(be),re&&(ye=re.getDirection())&&_e.setAttribute("dir",ye)),ue=ke.elementPath)for(se=0,ce=ue.elements.length;se<ce&&(be=ue.elements[se],!(be.equals(ue.block)||be.equals(ue.blockLimit)));se++)CKEDITOR.dtd.$removeEmpty[be.getName()]&&(be=be.clone(),_e.moveChildren(be),_e.append(be));_e.appendBogus(),_e.getParent()||de.insertNode(_e),_e.is("li")&&_e.removeAttribute("value"),!CKEDITOR.env.ie||!ge||pe&&re.getChildCount()||(de.moveToElementEditStart(pe?re:_e),de.select()),de.moveToElementEditStart(ge&&!pe?fe:_e)}de.select(),de.scrollIntoView()}}},enterBr:function(re,se,de,ce){if(de=de||j(re)){var me=de.document,ue=de.checkEndOfBlock(),ge=new CKEDITOR.dom.elementPath(re.getSelection().getStartElement()),pe=ge.block,he=pe&&ge.block.getName();ce||"li"!=he?(!ce&&ue&&le.test(he)?(ue=pe.getDirection())?(me=me.createElement("div"),me.setAttribute("dir",ue),me.insertAfter(pe),de.setStart(me,0)):(me.createElement("br").insertAfter(pe),CKEDITOR.env.gecko&&me.createText("").insertAfter(pe),de.setStartAt(pe.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(re="pre"==he&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?me.createText("\r"):me.createElement("br"),de.deleteContents(),de.insertNode(re),CKEDITOR.env.needsBrFiller?(me.createText("\uFEFF").insertAfter(re),ue&&(pe||ge.blockLimit).appendBogus(),re.getNext().$.nodeValue="",de.setStartAt(re.getNext(),CKEDITOR.POSITION_AFTER_START)):de.setStartAt(re,CKEDITOR.POSITION_AFTER_END)),de.collapse(!0),de.select(),de.scrollIntoView()):ie(re,se,de,ce)}}},ne=CKEDITOR.plugins.enterkey,ae=ne.enterBr,ie=ne.enterBlock,le=/^h[1-6]$/}(),function(){function $(j,ee){var te={},oe=[],ne={nbsp:"\xA0",shy:"\xAD",gt:">",lt:"<",amp:"&",apos:"'",quot:"\""};if(j=j.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(re,se){var de=ee?"&"+se+";":ne[se];return te[de]=ee?ne[se]:"&"+se+";",oe.push(de),""}),j=j.replace(/,$/,""),!ee&&j){j=j.split(",");var ae=document.createElement("div"),ie;for(ae.innerHTML="&"+j.join(";&")+";",ie=ae.innerHTML,ae=null,ae=0;ae<ie.length;ae++){var le=ie.charAt(ae);te[le]="&"+j[ae]+";",oe.push(le)}}return te.regex=oe.join(ee?"|":""),te}CKEDITOR.plugins.add("entities",{afterInit:function(j){function ee(se){return le[se]}function te(se){return"force"!=oe.entities_processNumerical&&ae[se]?ae[se]:"&#"+se.charCodeAt(0)+";"}var oe=j.config;if(j=(j=j.dataProcessor)&&j.htmlFilter){var ne=[];!1!==oe.basicEntities&&ne.push("nbsp,gt,lt,amp"),oe.entities&&(ne.length&&ne.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),oe.entities_latin&&ne.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),oe.entities_greek&&ne.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),oe.entities_additional&&ne.push(oe.entities_additional));var ae=$(ne.join(",")),ie=ae.regex?"["+ae.regex+"]":"a^";delete ae.regex,oe.entities&&oe.entities_processNumerical&&(ie="[^ -~]|"+ie);var ie=new RegExp(ie,"g"),le=$("nbsp,gt,lt,amp,shy",!0),re=new RegExp(le.regex,"g");j.addRules({text:function(se){return se.replace(re,ee).replace(ie,te)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("find",{requires:"dialog",init:function($){var j=$.addCommand("find",new CKEDITOR.dialogCommand("find")),ee=$.addCommand("replace",new CKEDITOR.dialogCommand("find",{tabId:"replace"}));j.canUndo=!1,j.readOnly=1,ee.canUndo=!1,$.ui.addButton&&($.ui.addButton("Find",{label:$.lang.find.find,command:"find",toolbar:"find,10"}),$.ui.addButton("Replace",{label:$.lang.find.replace,command:"replace",toolbar:"find,20"})),CKEDITOR.dialog.add("find",this.path+"dialogs/find.js")}}),CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function $(te){var oe=te.config,ne=te.fire("uiSpace",{space:"top",html:""}).html,ae=function(){function de(Te,ve,Ce){le.setStyle(ve,ee(Ce)),le.setStyle("position",Te)}function ce(Te){var ve=ue.getDocumentPosition();"top"===Te?de("absolute","top",ve.y-fe-Ee):"pin"===Te?de("fixed","top",ke):"bottom"===Te?de("absolute","top",ve.y+(pe.height||pe.bottom-pe.top)+Ee):void 0,me=Te}var _e=oe.floatSpaceDockedOffsetX||0,Ee=oe.floatSpaceDockedOffsetY||0,ye=oe.floatSpacePinnedOffsetX||0,ke=oe.floatSpacePinnedOffsetY||0,me,ue,ge,pe,he,fe,be;return function(Te){if(ue=te.editable()){var ve=Te&&"focus"==Te.name;ve&&le.show(),te.fire("floatingSpaceLayout",{show:ve}),le.removeStyle("left"),le.removeStyle("right"),ge=le.getClientRect(),pe=ue.getClientRect(),he=j.getViewPaneSize(),fe=ge.height,be="pageXOffset"in j.$?j.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,me?(fe+Ee<=pe.top?ce("top"):fe+Ee>he.height-pe.bottom?ce("pin"):ce("bottom"),Te=he.width/2,Te=oe.floatSpacePreferRight?"right":0<pe.left&&pe.right<he.width&&pe.width>ge.width?"rtl"==oe.contentsLangDirection?"right":"left":Te-pe.left>pe.right-Te?"left":"right",ge.width>he.width?(Te="left",ve=0):(ve="left"==Te?0<pe.left?pe.left:0:pe.right<he.width?he.width-pe.right:0,ve+ge.width>he.width&&(Te="left"==Te?"right":"left",ve=0)),le.setStyle(Te,ee(("pin"==me?ye:_e)+ve+("pin"==me?0:"left"==Te?be:-be)))):(me="pin",ce("pin"),ae(Te))}}}();if(ne){var ie=new CKEDITOR.template("<div id=\"cke_{name}\" class=\"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} "+CKEDITOR.env.cssClass+"\" dir=\"{langDir}\" title=\""+(CKEDITOR.env.gecko?" ":"")+"\" lang=\"{langCode}\" role=\"application\" style=\"{style}\""+(te.title?" aria-labelledby=\"cke_{name}_arialbl\"":" ")+">"+(te.title?"<span id=\"cke_{name}_arialbl\" class=\"cke_voice_label\">{voiceLabel}</span>":" ")+"<div class=\"cke_inner\"><div id=\"{topId}\" class=\"cke_top\" role=\"presentation\">{content}</div></div></div>"),le=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(ie.output({content:ne,id:te.id,langDir:te.lang.dir,langCode:te.langCode,name:te.name,style:"display:none;z-index:"+(oe.baseFloatZIndex-1),topId:te.ui.spaceId("top"),voiceLabel:te.title}))),re=CKEDITOR.tools.eventsBuffer(500,ae),se=CKEDITOR.tools.eventsBuffer(100,ae);le.unselectable(),le.on("mousedown",function(de){de=de.data,de.getTarget().hasAscendant("a",1)||de.preventDefault()}),te.on("focus",function(de){ae(de),te.on("change",re.input),j.on("scroll",se.input),j.on("resize",se.input)}),te.on("blur",function(){le.hide(),te.removeListener("change",re.input),j.removeListener("scroll",se.input),j.removeListener("resize",se.input)}),te.on("destroy",function(){j.removeListener("scroll",se.input),j.removeListener("resize",se.input),le.clearCustomData(),le.remove()}),te.focusManager.hasFocus&&le.show(),te.focusManager.add(le,1)}}var j=CKEDITOR.document.getWindow(),ee=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(te){te.on("loaded",function(){$(this)},null,null,20)}})}(),function(){function $(ne,ae){var ie=te.exec(ne),le=te.exec(ae);if(ie){if(!ie[2]&&"px"==le[2])return le[1];if("px"==ie[2]&&!le[2])return le[1]+"px"}return ae}var j=CKEDITOR.htmlParser.cssStyle,ee=CKEDITOR.tools.cssLength,te=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,oe={elements:{$:function(ne){var ae=ne.attributes;if((ae=(ae=(ae=ae&&ae["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(ae)))&&ae.children[0])&&ne.attributes["data-cke-resizable"]){var ie=new j(ne).rules;ne=ae.attributes;var le=ie.width,ie=ie.height;le&&(ne.width=$(ne.width,le)),ie&&(ne.height=$(ne.height,ie))}return ae}}};CKEDITOR.plugins.add("fakeobjects",{init:function(ne){ne.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(ne){(ne=(ne=ne.dataProcessor)&&ne.htmlFilter)&&ne.addRules(oe,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(ne,ae,ie,le){var re=this.lang.fakeobjects,re=re[ie]||re.unknown;return ae={class:ae,"data-cke-realelement":encodeURIComponent(ne.getOuterHtml()),"data-cke-real-node-type":ne.type,alt:re,title:re,align:ne.getAttribute("align")||""},CKEDITOR.env.hc||(ae.src=CKEDITOR.tools.transparentImageData),ie&&(ae["data-cke-real-element-type"]=ie),le&&(ae["data-cke-resizable"]=le,ie=new j,le=ne.getAttribute("width"),ne=ne.getAttribute("height"),le&&(ie.rules.width=ee(le)),ne&&(ie.rules.height=ee(ne)),ie.populate(ae)),this.document.createElement("img",{attributes:ae})},CKEDITOR.editor.prototype.createFakeParserElement=function(ne,ae,ie,le){var re=this.lang.fakeobjects,re=re[ie]||re.unknown,se;return se=new CKEDITOR.htmlParser.basicWriter,ne.writeHtml(se),se=se.getHtml(),ae={class:ae,"data-cke-realelement":encodeURIComponent(se),"data-cke-real-node-type":ne.type,alt:re,title:re,align:ne.attributes.align||""},CKEDITOR.env.hc||(ae.src=CKEDITOR.tools.transparentImageData),ie&&(ae["data-cke-real-element-type"]=ie),le&&(ae["data-cke-resizable"]=le,le=ne.attributes,ne=new j,ie=le.width,le=le.height,void 0!==ie&&(ne.rules.width=ee(ie)),void 0!==le&&(ne.rules.height=ee(le)),ne.populate(ae)),new CKEDITOR.htmlParser.element("img",ae)},CKEDITOR.editor.prototype.restoreRealElement=function(ne){if(ne.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var ae=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(ne.data("cke-realelement")),this.document);if(ne.data("cke-resizable")){var ie=ne.getStyle("width");ne=ne.getStyle("height"),ie&&ae.setAttribute("width",$(ae.getAttribute("width"),ie)),ne&&ae.setAttribute("height",$(ae.getAttribute("height"),ne))}return ae}}(),CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n"),CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function($){var j=$.lang,ee=0,te={email:1,password:1,search:1,tel:1,text:1,url:1},oe={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},ne={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},ae=function(re,se,de){var ce={allowedContent:oe[se],requiredContent:ne[se]};"form"==se&&(ce.context="form"),$.addCommand(se,new CKEDITOR.dialogCommand(se,ce)),$.ui.addButton&&$.ui.addButton(re,{label:j.common[re.charAt(0).toLowerCase()+re.slice(1)],command:se,toolbar:"forms,"+(ee+=10)}),CKEDITOR.dialog.add(se,de)},ie=this.path+"dialogs/";$.blockless||ae("Form","form",ie+"form.js"),ae("Checkbox","checkbox",ie+"checkbox.js"),ae("Radio","radio",ie+"radio.js"),ae("TextField","textfield",ie+"textfield.js"),ae("Textarea","textarea",ie+"textarea.js"),ae("Select","select",ie+"select.js"),ae("Button","button",ie+"button.js");var le=$.plugins.image;le&&!$.plugins.image2&&ae("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js"),ae("HiddenField","hiddenfield",ie+"hiddenfield.js"),$.addMenuItems&&(ae={checkbox:{label:j.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:j.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:j.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:j.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:j.forms.button.title,command:"button",group:"button"},select:{label:j.forms.select.title,command:"select",group:"select"},textarea:{label:j.forms.textarea.title,command:"textarea",group:"textarea"}},le&&(ae.imagebutton={label:j.image.titleButton,command:"imagebutton",group:"imagebutton"}),!$.blockless&&(ae.form={label:j.forms.form.menu,command:"form",group:"form"}),$.addMenuItems(ae)),$.contextMenu&&(!$.blockless&&$.contextMenu.addListener(function(re,se,de){if((re=de.contains("form",1))&&!re.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),$.contextMenu.addListener(function(re){if(re&&!re.isReadOnly()){var se=re.getName();if("select"==se)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==se)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==se){var de=re.getAttribute("type")||"text";switch(de){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return le?{imagebutton:CKEDITOR.TRISTATE_OFF}:null;}if(te[de])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==se&&"hiddenfield"==re.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}})),$.on("doubleclick",function(re){var se=re.data.element;!$.blockless&&se.is("form")?re.data.dialog="form":se.is("select")?re.data.dialog="select":se.is("textarea")?re.data.dialog="textarea":se.is("img")&&"hiddenfield"==se.data("cke-real-element-type")?re.data.dialog="hiddenfield":se.is("input")&&(se=se.getAttribute("type")||"text","button"===se||"submit"===se||"reset"===se?re.data.dialog="button":"checkbox"===se?re.data.dialog="checkbox":"radio"===se?re.data.dialog="radio":"image"===se?re.data.dialog="imagebutton":void 0,te[se]&&(re.data.dialog="textfield"))})},afterInit:function($){var j=$.dataProcessor,ee=j&&j.htmlFilter,j=j&&j.dataFilter;CKEDITOR.env.ie&&ee&&ee.addRules({elements:{input:function(te){te=te.attributes;var oe=te.type;oe||(te.type="text"),"checkbox"!=oe&&"radio"!=oe||"on"!=te.value||delete te.value}}},{applyToAll:!0}),j&&j.addRules({elements:{input:function(te){if("hidden"==te.attributes.type)return $.createFakeParserElement(te,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}}),CKEDITOR.plugins.forms={_setupRequiredAttribute:function($){this.setValue($.hasAttribute("required"))}},function(){var $={canUndo:!1,exec:function(j){var ee=j.document.createElement("hr");j.insertElement(ee)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(j){j.blockless||(j.addCommand("horizontalrule",$),j.ui.addButton&&j.ui.addButton("HorizontalRule",{label:j.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function($){var j=new CKEDITOR.htmlWriter;j.forceSimpleAmpersand=$.config.forceSimpleAmpersand,j.indentationChars=$.config.dataIndentationChars||"\t",$.dataProcessor.writer=j}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var $=CKEDITOR.dtd,j;for(j in CKEDITOR.tools.extend({},$.$nonBodyContent,$.$block,$.$listItem,$.$tableContent))this.setRules(j,{indent:!$[j]["#"],breakBeforeOpen:1,breakBeforeClose:!$[j]["#"],breakAfterClose:1,needsSpace:j in $.$block&&!(j in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function($){var j=this._.rules[$];this._.afterCloser&&j&&j.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():j&&j.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",$),this._.afterCloser=0},openTagClose:function($,j){var ee=this._.rules[$];j?(this._.output.push(this.selfClosingEnd),ee&&ee.breakAfterClose&&(this._.needsSpace=ee.needsSpace)):(this._.output.push(">"),ee&&ee.indent&&(this._.indentation+=this.indentationChars)),ee&&ee.breakAfterOpen&&this.lineBreak(),"pre"==$&&(this._.inPre=1)},attribute:function($,j){"string"==typeof j&&(j=CKEDITOR.tools.htmlEncodeAttr(j),this.forceSimpleAmpersand&&(j=j.replace(/&amp;/g,"&"))),this._.output.push(" ",$,"=\"",j,"\"")},closeTag:function($){var j=this._.rules[$];j&&j.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():j&&j.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",$,">"),"pre"==$&&(this._.inPre=0),j&&j.breakAfterClose&&(this.lineBreak(),this._.needsSpace=j.needsSpace),this._.afterCloser=1},text:function($){this._.indent&&(this.indentation(),!this._.inPre&&($=CKEDITOR.tools.ltrim($))),this._.output.push($)},comment:function($){this._.indent&&this.indentation(),this._.output.push("<!--",$,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function($,j){var ee=this._.rules[$];ee?CKEDITOR.tools.extend(ee,j,!0):this._.rules[$]=j}}}),function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function($){var j=$.lang.iframe,ee="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";$.plugins.dialogadvtab&&(ee+=";iframe"+$.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1})),CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js"),$.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:ee,requiredContent:"iframe"})),$.ui.addButton&&$.ui.addButton("Iframe",{label:j.toolbar,command:"iframe",toolbar:"insert,80"}),$.on("doubleclick",function(te){var oe=te.data.element;oe.is("img")&&"iframe"==oe.data("cke-real-element-type")&&(te.data.dialog="iframe")}),$.addMenuItems&&$.addMenuItems({iframe:{label:j.title,command:"iframe",group:"image"}}),$.contextMenu&&$.contextMenu.addListener(function(te){if(te&&te.is("img")&&"iframe"==te.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function($){var j=$.dataProcessor;(j=j&&j.dataFilter)&&j.addRules({elements:{iframe:function(ee){return $.createFakeParserElement(ee,"cke_iframe","iframe",!0)}}})}})}(),function(){function $(oe){function ne(de){var ce=!1;se.attachListener(se,"keydown",function(){var me=ie.getBody().getElementsByTag(de);if(!ce){for(var ue=0;ue<me.count();ue++)me.getItem(ue).setCustomData("retain",!0);ce=!0}},null,null,1),se.attachListener(se,"keyup",function(){var me=ie.getElementsByTag(de);ce&&(1==me.count()&&!me.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(me.getItem(0).getAttributes())&&me.getItem(0).remove(1),ce=!1)})}var ae=this.editor,ie=oe.document,le=ie.body,re=ie.getElementById("cke_actscrpt");re&&re.parentNode.removeChild(re),(re=ie.getElementById("cke_shimscrpt"))&&re.parentNode.removeChild(re),(re=ie.getElementById("cke_basetagscrpt"))&&re.parentNode.removeChild(re),le.contentEditable=!0,CKEDITOR.env.ie&&(le.hideFocus=!0,le.disabled=!0,le.removeAttribute("disabled")),delete this._.isLoadingData,this.$=le,ie=new CKEDITOR.dom.document(ie),this.setup(),this.fixInitialSelection();var se=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&ie.getDocumentElement().addClass(ie.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&ae.enterMode!=CKEDITOR.ENTER_P?ne("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&ae.enterMode!=CKEDITOR.ENTER_DIV&&ne("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&ie.getDocumentElement().on("mousedown",function(de){de.data.getTarget().is("html")&&setTimeout(function(){ae.editable().focus()})}),j(ae);try{ae.document.$.execCommand("2D-position",!1,!0)}catch(de){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==ae.document.$.compatMode)&&this.attachListener(this,"keydown",function(de){var ce=de.data.getKeystroke();if(33==ce||34==ce)if(CKEDITOR.env.ie)setTimeout(function(){ae.getSelection().scrollIntoView()},0);else if(ae.window.$.innerHeight>this.$.offsetHeight){var me=ae.createRange();me[33==ce?"moveToElementEditStart":"moveToElementEditEnd"](this),me.select(),de.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(ie,"blur",function(){try{ie.$.selection.empty()}catch(de){}}),CKEDITOR.env.iOS&&this.attachListener(ie,"touchend",function(){oe.focus()}),le=ae.document.getElementsByTag("title").getItem(0),le.data("cke-title",le.getText()),CKEDITOR.env.ie&&(ae.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),ae.fire("contentDom"),this._.isPendingFocus&&(ae.focus(),this._.isPendingFocus=!1),setTimeout(function(){ae.fire("dataReady")},0)},0,this)}function j(oe){function ae(le){le.returnValue=!1}if(CKEDITOR.env.gecko)try{var ie=oe.document.$;ie.execCommand("enableObjectResizing",!1,!oe.config.disableObjectResizing),ie.execCommand("enableInlineTableEditing",!1,!oe.config.disableNativeTableHandles)}catch(le){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&oe.config.disableObjectResizing&&function(){var le;oe.editable().attachListener(oe,"selectionChange",function(){var re=oe.getSelection().getSelectedElement();re&&(le&&(le.detachEvent("onresizestart",ae),le=null),re.$.attachEvent("onresizestart",ae),le=re.$)})}(oe)}function ee(){var oe=[];if(8<=CKEDITOR.document.$.documentMode){oe.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var ne=[],ae;for(ae in CKEDITOR.dtd.$removeEmpty)ne.push("html.CSS1Compat "+ae+"[contenteditable=false]");oe.push(ne.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(oe.push("html{height:100% !important}"),oe.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return oe.push("html{cursor:text;*cursor:auto}"),oe.push("img,input,textarea{cursor:default}"),oe.join("\n")}var te;CKEDITOR.plugins.add("wysiwygarea",{init:function(oe){oe.config.fullPage&&oe.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),oe.addMode("wysiwyg",function(ne){function ae(me){me&&me.removeListener(),oe.editable(new te(oe,le.$.contentWindow.document.body)),oe.setData(oe.getData(1),ne)}var ie="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",ie=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(ie)+"}())":"",le=CKEDITOR.dom.element.createFromHtml("<iframe src=\""+ie+"\" frameBorder=\"0\"></iframe>");le.setStyles({width:"100%",height:"100%"}),le.addClass("cke_wysiwyg_frame").addClass("cke_reset"),ie=oe.ui.space("contents"),ie.append(le);var re=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;re&&le.on("load",ae);var se=oe.title,de=oe.fire("ariaEditorHelpLabel",{}).label;if(se&&(CKEDITOR.env.ie&&de&&(se+=", "+de),le.setAttribute("title",se)),de){var se=CKEDITOR.tools.getNextId(),ce=CKEDITOR.dom.element.createFromHtml("<span id=\""+se+"\" class=\"cke_voice_label\">"+de+"</span>");ie.append(ce,1),le.setAttribute("aria-describedby",se)}oe.on("beforeModeUnload",function(me){me.removeListener(),ce&&ce.remove()}),le.setAttributes({tabIndex:oe.tabIndex,allowTransparency:"true"}),re||ae(),oe.fire("ariaWidget",le)})}}),CKEDITOR.editor.prototype.addContentsCss=function(oe){var ne=this.config,ae=ne.contentsCss;CKEDITOR.tools.isArray(ae)||(ne.contentsCss=ae?[ae]:[]),ne.contentsCss.push(oe)},te=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(oe){CKEDITOR.tools.setTimeout($,0,this,oe)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(oe,ne){var ae=this.editor;if(ne)this.setHtml(oe),this.fixInitialSelection(),ae.fire("dataReady");else{this._.isLoadingData=!0,ae._.dataStore={id:1};var ie=ae.config,le=ie.fullPage,re=ie.docType,se=CKEDITOR.tools.buildStyleHtml(ee()).replace(/<style>/,"<style data-cke-temp=\"1\">");le||(se+=CKEDITOR.tools.buildStyleHtml(ae.config.contentsCss));var de=ie.baseHref?"<base href=\""+ie.baseHref+"\" data-cke-temp=\"1\" />":"";le&&(oe=oe.replace(/<!DOCTYPE[^>]*>/i,function(me){return ae.docType=re=me,""}).replace(/<\?xml\s[^\?]*\?>/i,function(me){return ae.xmlDeclaration=me,""})),oe=ae.dataProcessor.toHtml(oe),le?(/<body[\s|>]/.test(oe)||(oe="<body>"+oe),/<html[\s|>]/.test(oe)||(oe="<html>"+oe+"</html>"),/<head[\s|>]/.test(oe)?/<title[\s|>]/.test(oe)||(oe=oe.replace(/<head[^>]*>/,"$&<title></title>")):oe=oe.replace(/<html[^>]*>/,"$&<head><title></title></head>"),de&&(oe=oe.replace(/<head[^>]*?>/,"$&"+de)),oe=oe.replace(/<\/head\s*>/,se+"$&"),oe=re+oe):oe=ie.docType+"<html dir=\""+ie.contentsLangDirection+"\" lang=\""+(ie.contentsLanguage||ae.langCode)+"\"><head><title>"+this._.docTitle+"</title>"+de+se+"</head><body"+(ie.bodyId?" id=\""+ie.bodyId+"\"":"")+(ie.bodyClass?" class=\""+ie.bodyClass+"\"":"")+">"+oe+"</body></html>",CKEDITOR.env.gecko&&(oe=oe.replace(/<body/,"<body contenteditable=\"true\" "),2E4>CKEDITOR.env.version&&(oe=oe.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),ie="<script id=\"cke_actscrpt\" type=\"text/javascript\""+(CKEDITOR.env.ie?" defer=\"defer\" ":"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":"document.addEventListener(\"DOMContentLoaded\", onload, false );")+"</script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(ie+="<script id=\"cke_shimscrpt\">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>"),de&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(ie+="<script id=\"cke_basetagscrpt\">var baseTag = document.querySelector( \"base\" );baseTag.href = baseTag.href;</script>"),oe=oe.replace(/(?=\s*<\/(:?head)>)/,ie),this.clearCustomData(),this.clearListeners(),ae.fire("contentDomUnload");var ce=this.getDocument();try{ce.write(oe)}catch(me){setTimeout(function(){ce.write(oe)},0)}}},getData:function(oe){if(oe)return this.getHtml();oe=this.editor;var ne=oe.config,ae=ne.fullPage,ie=ae&&oe.docType,le=ae&&oe.xmlDeclaration,re=this.getDocument(),ae=ae?re.getDocumentElement().getOuterHtml():re.getBody().getHtml();return CKEDITOR.env.gecko&&ne.enterMode!=CKEDITOR.ENTER_BR&&(ae=ae.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),ae=oe.dataProcessor.toDataFormat(ae),le&&(ae=le+"\n"+ae),ie&&(ae=ie+"\n"+ae),ae},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:te.baseProto.focus.call(this)},detach:function(){var oe=this.editor,ne=oe.document,ae;try{ae=oe.window.getFrame()}catch(ie){}te.baseProto.detach.call(this),this.clearCustomData(),ne.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),ae&&ae.getParent()?(ae.clearCustomData(),(oe=ae.removeCustomData("onResize"))&&oe.removeListener(),ae.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,function(){function $(te,oe){var ne,ae;oe.on("refresh",function(ie){var le=[j],re;for(re in ie.data.states)le.push(ie.data.states[re]);this.setState(CKEDITOR.tools.search(le,ee)?ee:j)},oe,null,100),oe.on("exec",function(ie){ne=te.getSelection(),ae=ne.createBookmarks(1),ie.data||(ie.data={}),ie.data.done=!1},oe,null,0),oe.on("exec",function(){te.forceNextSelectionCheck(),ne.selectBookmarks(ae)},oe,null,100)}var j=CKEDITOR.TRISTATE_DISABLED,ee=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(te){var oe=CKEDITOR.plugins.indent.genericDefinition;$(te,te.addCommand("indent",new oe(!0))),$(te,te.addCommand("outdent",new oe)),te.ui.addButton&&(te.ui.addButton("Indent",{label:te.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),te.ui.addButton("Outdent",{label:te.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),te.on("dirChanged",function(ne){var ae=te.createRange(),ie=ne.data.node;ae.setStartBefore(ie),ae.setEndAfter(ie);for(var le=new CKEDITOR.dom.walker(ae),re;re=le.next();)if(re.type==CKEDITOR.NODE_ELEMENT)if(!re.equals(ie)&&re.getDirection())ae.setStartAfter(re),le=new CKEDITOR.dom.walker(ae);else{var se=te.config.indentClasses;if(se)for(var de="ltr"==ne.data.dir?["_rtl",""]:["","_rtl"],ce=0;ce<se.length;ce++)re.hasClass(se[ce]+de[0])&&(re.removeClass(se[ce]+de[0]),re.addClass(se[ce]+de[1]));se=re.getStyle("margin-right"),de=re.getStyle("margin-left"),se?re.setStyle("margin-left",se):re.removeStyle("margin-left"),de?re.setStyle("margin-right",de):re.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(te){this.isIndent=!!te,this.startDisabled=!this.isIndent},specificDefinition:function(te,oe,ne){this.name=oe,this.editor=te,this.jobs={},this.enterBr=te.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!ne,this.relatedGlobal=ne?"indent":"outdent",this.indentKey=ne?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(te,oe){te.on("pluginsLoaded",function(){for(var ne in oe)(function(ae,ie){var le=ae.getCommand(ie.relatedGlobal),re;for(re in ie.jobs)le.on("exec",function(se){se.data.done||(ae.fire("lockSnapshot"),ie.execJob(ae,re)&&(se.data.done=!0),ae.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(ie.database))},this,null,re),le.on("refresh",function(se){se.data.states||(se.data.states={}),se.data.states[ie.name+"@"+re]=ie.refreshJob(ae,re,se.data.path)},this,null,re);ae.addFeature(ie)})(this,oe[ne])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(te,oe){var ne=this.jobs[oe];if(ne.state!=j)return ne.exec.call(this,te)},refreshJob:function(te,oe,ne){return oe=this.jobs[oe],oe.state=te.activeFilter.checkFeature(this)?oe.refresh.call(this,te,ne):j,oe.state},getContext:function(te){return te.contains(this.context)}}}(),function(){function $(ae,ie,le){if(!ae.getCustomData("indent_processed")){var re=this.editor,se=this.isIndent;if(ie){if(re=ae.$.className.match(this.classNameRegex),le=0,re&&(re=re[1],le=CKEDITOR.tools.indexOf(ie,re)+1),0>(le+=se?1:-1))return;le=_Mathmin(le,ie.length),le=_Mathmax(le,0),ae.$.className=CKEDITOR.tools.ltrim(ae.$.className.replace(this.classNameRegex,"")),0<le&&ae.addClass(ie[le-1])}else{ie=j(ae,le),le=parseInt(ae.getStyle(ie),10);var de=re.config.indentOffset||40;if(isNaN(le)&&(le=0),le+=(se?1:-1)*de,0>le)return;le=_Mathmax(le,0),le=_Mathceil(le/de)*de,ae.setStyle(ie,le?le+(re.config.indentUnit||"px"):""),""===ae.getAttribute("style")&&ae.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,ae,"indent_processed",1)}}function j(ae,ie){return"ltr"==(ie||ae.getComputedStyle("direction"))?"margin-left":"margin-right"}var ee=CKEDITOR.dtd.$listItem,te=CKEDITOR.dtd.$list,oe=CKEDITOR.TRISTATE_DISABLED,ne=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(ae){function ie(){le.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:re?null:"margin-left,margin-right",classes:re||null}},this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]],this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(re?"("+re.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(se,de){var ce=de.block||de.blockLimit;if(!ce.is(ee))var me=ce.getAscendant(ee),ce=me&&de.contains(me)||ce;if(ce.is(ee)&&(ce=ce.getParent()),this.enterBr||this.getContext(de)){if(re){var me=re,ce=ce.$.className.match(this.classNameRegex),ue=this.isIndent,me=ce?!ue||ce[1]!=me.slice(-1):ue;return me?ne:oe}return this.isIndent?ne:ce?CKEDITOR[0>=(parseInt(ce.getStyle(j(ce)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:oe}return oe},exec:function(se){var de=se.getSelection(),de=de&&de.getRanges()[0],ce;if(ce=se.elementPath().contains(te))$.call(this,ce,re);else for(de=de.createIterator(),se=se.config.enterMode,de.enforceRealBlocks=!0,de.enlargeBr=se!=CKEDITOR.ENTER_BR;ce=de.getNextParagraph(se==CKEDITOR.ENTER_P?"p":"div");)ce.isReadOnly()||$.call(this,ce,re);return!0}}}}var le=CKEDITOR.plugins.indent,re=ae.config.indentClasses;le.registerCommands(ae,{indentblock:new ie(ae,"indentblock",!0),outdentblock:new ie(ae,"outdentblock")}),CKEDITOR.tools.extend(ie.prototype,le.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:re?new RegExp("(?:^|\\s+)("+re.join("|")+")(?=$|\\s)"):null})}})}(),function(){function $(ie){function le(pe){for(var he=ce.startContainer,fe=ce.endContainer;he&&!he.getParent().equals(pe);)he=he.getParent();for(;fe&&!fe.getParent().equals(pe);)fe=fe.getParent();if(!he||!fe)return!1;for(var be=[],_e=!1;!_e;)he.equals(fe)&&(_e=!0),be.push(he),he=he.getNext();if(1>be.length)return!1;for(he=pe.getParents(!0),fe=0;fe<he.length;fe++)if(he[fe].getName&&de[he[fe].getName()]){pe=he[fe];break}for(var he=re.isIndent?1:-1,fe=be[0],be=be[be.length-1],_e=CKEDITOR.plugins.list.listToArray(pe,se),Ee=_e[be.getCustomData("listarray_index")].indent,fe=fe.getCustomData("listarray_index");fe<=be.getCustomData("listarray_index");fe++)if(_e[fe].indent+=he,0<he){for(var ye=_e[fe].parent,ke=fe-1;0<=ke;ke--)if(_e[ke].indent===he){ye=_e[ke].parent;break}_e[fe].parent=new CKEDITOR.dom.element(ye.getName(),ye.getDocument())}for(fe=be.getCustomData("listarray_index")+1;fe<_e.length&&_e[fe].indent>Ee;fe++)_e[fe].indent+=he;if(he=CKEDITOR.plugins.list.arrayToList(_e,se,null,ie.config.enterMode,pe.getDirection()),!re.isIndent){var Te;if((Te=pe.getParent())&&Te.is("li"))for(var be=he.listNode.getChildren(),ve=[],fe=be.count()-1,Ce;0<=fe;fe--)(Ce=be.getItem(fe))&&Ce.is&&Ce.is("li")&&ve.push(Ce)}if(he&&he.listNode.replace(pe),ve.length)for(fe=0;fe<ve.length;fe++){for(Ce=pe=ve[fe];(Ce=Ce.getNext())&&Ce.is&&Ce.getName()in de;)CKEDITOR.env.needsNbspFiller&&!pe.getFirst(ee)&&pe.append(ce.document.createText("\xA0")),pe.append(Ce);pe.insertAfter(Te)}return he&&ie.fire("contentDomInvalidated"),!0}for(var re=this,se=this.database,de=this.context,me=ie.getSelection(),me=(me&&me.getRanges()).createIterator(),ce;ce=me.getNextRange();){for(var ue=ce.getCommonAncestor();ue&&(ue.type!=CKEDITOR.NODE_ELEMENT||!de[ue.getName()]);){if(ie.editable().equals(ue)){ue=!1;break}ue=ue.getParent()}if(ue||(ue=ce.startPath().contains(de))&&ce.setEndAt(ue,CKEDITOR.POSITION_BEFORE_END),!ue){var ge=ce.getEnclosedNode();ge&&ge.type==CKEDITOR.NODE_ELEMENT&&ge.getName()in de&&(ce.setStartAt(ge,CKEDITOR.POSITION_AFTER_START),ce.setEndAt(ge,CKEDITOR.POSITION_BEFORE_END),ue=ge)}if(ue&&ce.startContainer.type==CKEDITOR.NODE_ELEMENT&&ce.startContainer.getName()in de&&(ge=new CKEDITOR.dom.walker(ce),ge.evaluator=j,ce.startContainer=ge.next()),ue&&ce.endContainer.type==CKEDITOR.NODE_ELEMENT&&ce.endContainer.getName()in de&&(ge=new CKEDITOR.dom.walker(ce),ge.evaluator=j,ce.endContainer=ge.previous()),ue)return le(ue)}return 0}function j(ie){return ie.type==CKEDITOR.NODE_ELEMENT&&ie.is("li")}function ee(ie){return te(ie)&&oe(ie)}var te=CKEDITOR.dom.walker.whitespaces(!0),oe=CKEDITOR.dom.walker.bookmark(!1,!0),ne=CKEDITOR.TRISTATE_DISABLED,ae=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(ie){function le(se){re.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],se.on("key",function(de){var ce=se.elementPath();if("wysiwyg"==se.mode&&de.data.keyCode==this.indentKey&&ce){var me=this.getContext(ce);!me||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,ce,me)||(se.execCommand(this.relatedGlobal),de.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(de,ce){var me=this.getContext(ce),ue=CKEDITOR.plugins.indentList.firstItemInPath(this.context,ce,me);return me&&this.isIndent&&!ue?ae:ne}:function(de,ce){return!this.getContext(ce)||this.isIndent?ne:ae},exec:CKEDITOR.tools.bind($,this)}}var re=CKEDITOR.plugins.indent;re.registerCommands(ie,{indentlist:new le(ie,"indentlist",!0),outdentlist:new le(ie,"outdentlist")}),CKEDITOR.tools.extend(le.prototype,re.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(ie,le,re){var se=le.contains(j);return re||(re=le.contains(ie)),re&&se&&se.equals(re.getFirst(j))}}(),CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function($){$.config.smiley_path=$.config.smiley_path||this.path+"images/",$.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"})),$.ui.addButton&&$.ui.addButton("Smiley",{label:$.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"}),CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" "),CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";"),function(){function $(te,oe){oe=void 0===oe||oe;var ne;if(oe)ne=te.getComputedStyle("text-align");else{for(;(!te.hasAttribute||!te.hasAttribute("align")&&!te.getStyle("text-align"))&&(ne=te.getParent(),!!ne);)te=ne;ne=te.getStyle("text-align")||te.getAttribute("align")||""}return ne&&(ne=ne.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!ne&&oe&&(ne="rtl"==te.getComputedStyle("direction")?"right":"left"),ne}function j(te,oe,ne){this.editor=te,this.name=oe,this.value=ne,this.context="p",oe=te.config.justifyClasses;var ae=te.config.enterMode==CKEDITOR.ENTER_P?"p":"div";oe?("left"===ne?this.cssClassName=oe[0]:"center"===ne?this.cssClassName=oe[1]:"right"===ne?this.cssClassName=oe[2]:"justify"===ne?this.cssClassName=oe[3]:void 0,this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+oe.join("|")+")(?=$|\\s)"),this.requiredContent=ae+"("+this.cssClassName+")"):this.requiredContent=ae+"{text-align}",this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},te.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function ee(te){var oe=te.editor,ne=oe.createRange();ne.setStartBefore(te.data.node),ne.setEndAfter(te.data.node);for(var ae=new CKEDITOR.dom.walker(ne),ie;ie=ae.next();)if(ie.type==CKEDITOR.NODE_ELEMENT)if(!ie.equals(te.data.node)&&ie.getDirection())ne.setStartAfter(ie),ae=new CKEDITOR.dom.walker(ne);else{var le=oe.config.justifyClasses;le&&(ie.hasClass(le[0])?(ie.removeClass(le[0]),ie.addClass(le[2])):ie.hasClass(le[2])&&(ie.removeClass(le[2]),ie.addClass(le[0]))),le=ie.getStyle("text-align"),"left"==le?ie.setStyle("text-align","right"):"right"==le&&ie.setStyle("text-align","left")}}j.prototype={exec:function(te){var oe=te.getSelection(),ne=te.config.enterMode;if(oe){for(var ae=oe.createBookmarks(),ie=oe.getRanges(),le=this.cssClassName,de=te.config.useComputedState,de=void 0===de||de,ce=ie.length-1,re,se;0<=ce;ce--)for(re=ie[ce].createIterator(),re.enlargeBr=ne!=CKEDITOR.ENTER_BR;se=re.getNextParagraph(ne==CKEDITOR.ENTER_P?"p":"div");)if(!se.isReadOnly()){var me=se.getName(),ue;if(ue=te.activeFilter.check(me+"{text-align}"),(me=te.activeFilter.check(me+"("+le+")"))||ue){se.removeAttribute("align"),se.removeStyle("text-align");var ge=le&&(se.$.className=CKEDITOR.tools.ltrim(se.$.className.replace(this.cssClassRegex,""))),pe=this.state==CKEDITOR.TRISTATE_OFF&&(!de||$(se,!0)!=this.value);le&&me?pe?se.addClass(le):ge||se.removeAttribute("class"):pe&&ue&&se.setStyle("text-align",this.value)}}te.focus(),te.forceNextSelectionCheck(),oe.selectBookmarks(ae)}},refresh:function(te,oe){var ne=oe.block||oe.blockLimit,ae=ne.getName(),ie=ne.equals(te.editable()),ae=this.cssClassName?te.activeFilter.check(ae+"("+this.cssClassName+")"):te.activeFilter.check(ae+"{text-align}");ie&&!CKEDITOR.dtd.$list[oe.lastElement.getName()]?this.setState(CKEDITOR.TRISTATE_OFF):!ie&&ae?this.setState($(ne,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}},CKEDITOR.plugins.add("justify",{init:function(te){if(!te.blockless){var oe=new j(te,"justifyleft","left"),ne=new j(te,"justifycenter","center"),ae=new j(te,"justifyright","right"),ie=new j(te,"justifyblock","justify");te.addCommand("justifyleft",oe),te.addCommand("justifycenter",ne),te.addCommand("justifyright",ae),te.addCommand("justifyblock",ie),te.ui.addButton&&(te.ui.addButton("JustifyLeft",{label:te.lang.common.alignLeft,command:"justifyleft",toolbar:"align,10"}),te.ui.addButton("JustifyCenter",{label:te.lang.common.center,command:"justifycenter",toolbar:"align,20"}),te.ui.addButton("JustifyRight",{label:te.lang.common.alignRight,command:"justifyright",toolbar:"align,30"}),te.ui.addButton("JustifyBlock",{label:te.lang.common.justify,command:"justifyblock",toolbar:"align,40"})),te.on("dirChanged",ee)}}})}(),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var $=function(j){var ee=this._,te=ee.menu;ee.state!==CKEDITOR.TRISTATE_DISABLED&&(ee.on&&te?te.hide():(ee.previousState=ee.state,te||(te=ee.menu=new CKEDITOR.menu(j,{panel:{className:"cke_menu_panel",attributes:{"aria-label":j.lang.common.options}}}),te.onHide=CKEDITOR.tools.bind(function(){var oe=this.command?j.getCommand(this.command).modes:this.modes;this.setState(!oe||oe[j.mode]?ee.previousState:CKEDITOR.TRISTATE_DISABLED),ee.on=0},this),this.onMenu&&te.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),ee.on=1,setTimeout(function(){te.show(CKEDITOR.document.getById(ee.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(j){delete j.panel,this.base(j),this.hasArrow="menu",this.click=$},statics:{handler:{create:function(j){return new CKEDITOR.ui.menuButton(j)}}}})},beforeInit:function($){$.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function($){var j=$.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],ee=this,te=$.lang.language,oe={},ne,ae,ie,le;for($.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(re,se){var de=oe["language_"+se];de&&re[de.style.checkActive(re.elementPath(),re)?"removeStyle":"applyStyle"](de.style)},refresh:function(re){this.setState(ee.getCurrentLangElement(re)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}}),le=0;le<j.length;le++)ne=j[le].split(":"),ae=ne[0],ie="language_"+ae,oe[ie]={label:ne[1],langId:ae,group:"language",order:le,ltr:"rtl"!=(""+ne[2]).toLowerCase(),onClick:function(){$.execCommand("language",this.langId)},role:"menuitemcheckbox"},oe[ie].style=new CKEDITOR.style({element:"span",attributes:{lang:ae,dir:oe[ie].ltr?"ltr":"rtl"}});oe.language_remove={label:te.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:oe.length,onClick:function(){var re=ee.getCurrentLangElement($);re&&$.execCommand("language",re.getAttribute("lang"))}},$.addMenuGroup("language",1),$.addMenuGroup("language_remove"),$.addMenuItems(oe),$.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:te.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var re={},se=ee.getCurrentLangElement($),de;for(de in oe)re[de]=CKEDITOR.TRISTATE_OFF;return re.language_remove=se?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,se&&(re["language_"+se.getAttribute("lang")]=CKEDITOR.TRISTATE_ON),re}}),$.addRemoveFormatFilter&&$.addRemoveFormatFilter(function(re){return!(re.is("span")&&re.getAttribute("dir")&&re.getAttribute("lang"))})},getCurrentLangElement:function($){var j=$.elementPath();$=j&&j.elements;var ee;if(j)for(var te=0;te<$.length;te++)j=$[te],!ee&&"span"==j.getName()&&j.hasAttribute("dir")&&j.hasAttribute("lang")&&(ee=j);return ee}})}(),function(){function $(he){return he.replace(/'/g,"\\$&")}function j(he){for(var be=he.length,_e=[],Ee=0,fe;Ee<be;Ee++)fe=he.charCodeAt(Ee),_e.push(fe);return"String.fromCharCode("+_e.join(",")+")"}function ee(he,fe){var be=he.plugins.link,_e=be.compiledProtectionFunction.params,Ee,ye;ye=[be.compiledProtectionFunction.name,"("];for(var ke=0;ke<_e.length;ke++)be=_e[ke].toLowerCase(),Ee=fe[be],0<ke&&ye.push(","),ye.push("'",Ee?$(encodeURIComponent(fe[be])):"","'");return ye.push(")"),ye.join("")}function te(he){he=he.config.emailProtection||"";var fe;return he&&"encode"!=he&&(fe={},he.replace(/^([^(]+)\(([^)]+)\)$/,function(be,_e,Ee){fe.name=_e,fe.params=[],Ee.replace(/[^,\s]+/g,function(ye){fe.params.push(ye)})})),fe}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function he(_e){return be.replace(/%1/g,"rtl"==_e?"right":"left").replace(/%2/g,"cke_contents_"+_e)}var fe="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",be=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+fe+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+fe+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(he("ltr")+he("rtl"))},init:function(he){var fe="a[!href]";CKEDITOR.dialog.isTabEnabled(he,"link","advanced")&&(fe=fe.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(he,"link","target")&&(fe=fe.replace("]",",target,onclick]")),he.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:fe,requiredContent:"a[href]"})),he.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),he.addCommand("unlink",new CKEDITOR.unlinkCommand),he.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),he.setKeystroke(CKEDITOR.CTRL+76,"link"),he.setKeystroke(CKEDITOR.CTRL+75,"link"),he.ui.addButton&&(he.ui.addButton("Link",{label:he.lang.link.toolbar,command:"link",toolbar:"links,10"}),he.ui.addButton("Unlink",{label:he.lang.link.unlink,command:"unlink",toolbar:"links,20"}),he.ui.addButton("Anchor",{label:he.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),he.on("doubleclick",function(be){var _e=be.data.element.getAscendant({a:1,img:1},!0);_e&&!_e.isReadOnly()&&(_e.is("a")?(be.data.dialog=!_e.getAttribute("name")||_e.getAttribute("href")&&_e.getChildCount()?"link":"anchor",be.data.link=_e):CKEDITOR.plugins.link.tryRestoreFakeAnchor(he,_e)&&(be.data.dialog="anchor"))},null,null,0),he.on("doubleclick",function(be){be.data.dialog in{link:1,anchor:1}&&be.data.link&&he.getSelection().selectElement(be.data.link)},null,null,20),he.addMenuItems&&he.addMenuItems({anchor:{label:he.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:he.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:he.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:he.lang.link.unlink,command:"unlink",group:"link",order:5}}),he.contextMenu&&he.contextMenu.addListener(function(be){if(!be||be.isReadOnly())return null;if(be=CKEDITOR.plugins.link.tryRestoreFakeAnchor(he,be),!be&&!(be=CKEDITOR.plugins.link.getSelectedLink(he)))return null;var _e={};return be.getAttribute("href")&&be.getChildCount()&&(_e={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),be&&be.hasAttribute("name")&&(_e.anchor=_e.removeAnchor=CKEDITOR.TRISTATE_OFF),_e}),this.compiledProtectionFunction=te(he)},afterInit:function(he){he.dataProcessor.dataFilter.addRules({elements:{a:function(be){return be.attributes.name?be.children.length?null:he.createFakeParserElement(be,"cke_anchor","anchor"):null}}});var fe=he._.elementsPath&&he._.elementsPath.filters;fe&&fe.push(function(be,_e){if("a"==_e&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(he,be)||be.getAttribute("name")&&(!be.getAttribute("href")||!be.getChildCount())))return"anchor"})}});var oe=/^javascript:/,ne=/^mailto:([^?]+)(?:\?(.+))?$/,ae=/subject=([^;?:@&=$,\/]*)/i,ie=/body=([^;?:@&=$,\/]*)/i,le=/^#(.*)$/,re=/^((?:http|https|ftp|news):\/\/)?(.*)$/,se=/^(_(?:self|top|parent|blank))$/,de=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,ce=/^javascript:([^(]+)\(([^)]+)\)$/,me=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,ue=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,ge=/^tel:(.*)$/,pe={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(he,fe){var be=he.getSelection(),_e=be.getSelectedElement(),Ee=be.getRanges(),ye=[],ke;if(!fe&&_e&&_e.is("a"))return _e;for(_e=0;_e<Ee.length;_e++)if(ke=be.getRanges()[_e],ke.shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(ke=he.elementPath(ke.getCommonAncestor()).contains("a",1))&&fe)ye.push(ke);else if(ke)return ke;return fe?ye:null},getEditorAnchors:function(he){for(var fe=he.editable(),be=fe.isInline()&&!he.plugins.divarea?he.document:fe,fe=be.getElementsByTag("a"),be=be.getElementsByTag("img"),_e=[],Ee=0,ye;ye=fe.getItem(Ee++);)(ye.data("cke-saved-name")||ye.hasAttribute("name"))&&_e.push({name:ye.data("cke-saved-name")||ye.getAttribute("name"),id:ye.getAttribute("id")});for(Ee=0;ye=be.getItem(Ee++);)(ye=this.tryRestoreFakeAnchor(he,ye))&&_e.push({name:ye.getAttribute("name"),id:ye.getAttribute("id")});return _e},fakeAnchor:!0,tryRestoreFakeAnchor:function(he,fe){if(fe&&fe.data("cke-real-element-type")&&"anchor"==fe.data("cke-real-element-type")){var be=he.restoreRealElement(fe);if(be.data("cke-saved-name"))return be}},parseLinkAttributes:function(he,fe){var be=fe&&(fe.data("cke-saved-href")||fe.getAttribute("href"))||"",_e=he.plugins.link.compiledProtectionFunction,Ee=he.config.emailProtection,ke={},ye;if(be.match(oe)&&("encode"==Ee?be=be.replace(de,function(Ce,Se,Ne){return Ne=Ne||"","mailto:"+_StringfromCharCode.apply(String,Se.split(","))+Ne.replace(/\\'/g,"'")}):Ee&&be.replace(ce,function(Ce,Se,Ne){if(Se==_e.name){ke.type="email",Ce=ke.email={},Se=/(^')|('$)/g,Ne=Ne.match(/[^,\s]+/g);for(var xe=Ne.length,Oe=0,we,Ie;Oe<xe;Oe++)we=decodeURIComponent,Ie=Ne[Oe].replace(Se,"").replace(/\\'/g,"'"),Ie=we(Ie),we=_e.params[Oe].toLowerCase(),Ce[we]=Ie;Ce.address=[Ce.name,Ce.domain].join("@")}})),!ke.type)if(Ee=be.match(le))ke.type="anchor",ke.anchor={},ke.anchor.name=ke.anchor.id=Ee[1];else if(Ee=be.match(ge))ke.type="tel",ke.tel=Ee[1];else if(Ee=be.match(ne)){ye=be.match(ae),be=be.match(ie),ke.type="email";var Te=ke.email={};Te.address=Ee[1],ye&&(Te.subject=decodeURIComponent(ye[1])),be&&(Te.body=decodeURIComponent(be[1]))}else be&&(ye=be.match(re))&&(ke.type="url",ke.url={},ke.url.protocol=ye[1],ke.url.url=ye[2]);if(fe){if(be=fe.getAttribute("target"))ke.target={type:be.match(se)?be:"frame",name:be};else if(be=(be=fe.data("cke-pa-onclick")||fe.getAttribute("onclick"))&&be.match(me))for(ke.target={type:"popup",name:be[1]};Ee=ue.exec(be[2]);)"yes"!=Ee[2]&&"1"!=Ee[2]||Ee[1]in{height:1,width:1,top:1,left:1}?isFinite(Ee[2])&&(ke.target[Ee[1]]=Ee[2]):ke.target[Ee[1]]=!0;null!==fe.getAttribute("download")&&(ke.download=!0);var be={},ve;for(ve in pe)(Ee=fe.getAttribute(ve))&&(be[pe[ve]]=Ee);(ve=fe.data("cke-saved-name")||be.advName)&&(be.advName=ve),CKEDITOR.tools.isEmpty(be)||(ke.advanced=be)}return ke},getLinkAttributes:function(he,fe){var be=he.config.emailProtection||"",_e={};switch(fe.type){case"url":var be=fe.url&&void 0!==fe.url.protocol?fe.url.protocol:"http://",Ee=fe.url&&CKEDITOR.tools.trim(fe.url.url)||"";_e["data-cke-saved-href"]=0===Ee.indexOf("/")?Ee:be+Ee;break;case"anchor":be=fe.anchor&&fe.anchor.id,_e["data-cke-saved-href"]="#"+(fe.anchor&&fe.anchor.name||be||"");break;case"email":var ye=fe.email,Ee=ye.address;switch(be){case"":case"encode":var ke=encodeURIComponent(ye.subject||""),Te=encodeURIComponent(ye.body||""),ye=[];ke&&ye.push("subject="+ke),Te&&ye.push("body="+Te),ye=ye.length?"?"+ye.join("&"):"","encode"==be?(be=["javascript:void(location.href='mailto:'+",j(Ee)],ye&&be.push("+'",$(ye),"'"),be.push(")")):be=["mailto:",Ee,ye];break;default:be=Ee.split("@",2),ye.name=be[0],ye.domain=be[1],be=["javascript:",ee(he,ye)];}_e["data-cke-saved-href"]=be.join("");break;case"tel":_e["data-cke-saved-href"]="tel:"+fe.tel;}if(fe.target)if("popup"==fe.target.type){for(var be=["window.open(this.href, '",fe.target.name||"","', '"],ve="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),Ee=ve.length,ke=function(Ne){fe.target[Ne]&&ve.push(Ne+"="+fe.target[Ne])},ye=0;ye<Ee;ye++)ve[ye]+=fe.target[ve[ye]]?"=yes":"=no";ke("width"),ke("left"),ke("height"),ke("top"),be.push(ve.join(","),"'); return false;"),_e["data-cke-pa-onclick"]=be.join("")}else"notSet"!=fe.target.type&&fe.target.name&&(_e.target=fe.target.name);if(fe.download&&(_e.download=""),fe.advanced){for(var Ce in pe)(be=fe.advanced[pe[Ce]])&&(_e[Ce]=be);_e.name&&(_e["data-cke-saved-name"]=_e.name)}for(var Se in _e["data-cke-saved-href"]&&(_e.href=_e["data-cke-saved-href"]),Ce={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},fe.advanced&&CKEDITOR.tools.extend(Ce,pe),_e)delete Ce[Se];return{set:_e,removed:CKEDITOR.tools.objectKeys(Ce)}},showDisplayTextForElement:function(he,fe){var _e=fe.getSelection();return fe.widgets&&fe.widgets.focused||_e&&1<_e.getRanges().length?!1:!he||!he.getName||!he.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1})}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(he){if(CKEDITOR.env.ie){var fe=he.getSelection().getRanges()[0],be=fe.getPreviousEditableNode()&&fe.getPreviousEditableNode().getAscendant("a",!0)||fe.getNextEditableNode()&&fe.getNextEditableNode().getAscendant("a",!0),_e;fe.collapsed&&be&&(_e=fe.createBookmark(),fe.selectNodeContents(be),fe.select())}be=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),he.removeStyle(be),_e&&(fe.moveToBookmark(_e),fe.select())},refresh:function(he,fe){var be=fe.lastElement&&fe.lastElement.getAscendant("a",!0);be&&"a"==be.getName()&&be.getAttribute("href")&&be.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(he){var fe=he.getSelection(),be=fe.createBookmarks(),_e;fe&&(_e=fe.getSelectedElement())&&(_e.getChildCount()?_e.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(he,_e))?_e.remove(1):(_e=CKEDITOR.plugins.link.getSelectedLink(he))&&(_e.hasAttribute("href")?(_e.removeAttributes({name:1,"data-cke-saved-name":1}),_e.removeClass("cke_anchor")):_e.remove(1)),fe.selectBookmarks(be)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function $(pe,he,fe,be){for(var _e=CKEDITOR.plugins.list.listToArray(he.root,fe),Ee=[],ye=0,ke;ye<he.contents.length;ye++)ke=he.contents[ye],(ke=ke.getAscendant("li",!0))&&!ke.getCustomData("list_item_processed")&&(Ee.push(ke),CKEDITOR.dom.element.setMarker(fe,ke,"list_item_processed",!0));for(var ke=he.root.getDocument(),ye=0,Te,ve,Ce;ye<Ee.length;ye++)Ce=Ee[ye].getCustomData("listarray_index"),Te=_e[Ce].parent,Te.is(this.type)||(ve=ke.createElement(this.type),Te.copyAttributes(ve,{start:1,type:1}),ve.removeStyle("list-style-type"),_e[Ce].parent=ve);fe=CKEDITOR.plugins.list.arrayToList(_e,fe,null,pe.config.enterMode);for(var _e=fe.listNode.getChildCount(),ye=0,Se;ye<_e&&(Se=fe.listNode.getChild(ye));ye++)Se.getName()==this.type&&be.push(Se);fe.listNode.replace(he.root),pe.fire("contentDomInvalidated")}function j(pe,he,fe){var be=he.contents,_e=he.root.getDocument(),Ee=[];if(1==be.length&&be[0].equals(he.root)){var ye=_e.createElement("div");be[0].moveChildren&&be[0].moveChildren(ye),be[0].append(ye),be[0]=ye}for(he=he.contents[0].getParent(),ye=0;ye<be.length;ye++)he=he.getCommonAncestor(be[ye].getParent());pe=pe.config.useComputedState;var ke,Te;for(pe=void 0===pe||pe,ye=0;ye<be.length;ye++)for(var ve=be[ye],Ce;Ce=ve.getParent();){if(Ce.equals(he)){Ee.push(ve),!Te&&ve.getDirection()&&(Te=1),ve=ve.getDirection(pe),null!==ke&&(ke=ke&&ke!=ve?null:ve);break}ve=Ce}if(!(1>Ee.length)){for(be=Ee[Ee.length-1].getNext(),ye=_e.createElement(this.type),fe.push(ye);Ee.length;)fe=Ee.shift(),pe=_e.createElement("li"),ve=fe,ve.is("pre")||ue.test(ve.getName())||"false"==ve.getAttribute("contenteditable")?fe.appendTo(pe):(fe.copyAttributes(pe),ke&&fe.getDirection()&&(pe.removeStyle("direction"),pe.removeAttribute("dir")),fe.moveChildren(pe),fe.remove()),pe.appendTo(ye);ke&&Te&&ye.setAttribute("dir",ke),be?ye.insertBefore(be):ye.appendTo(he)}}function ee(pe,he,fe){function be(Se){!(ve=Te[Se?"getFirst":"getLast"]())||ve.is&&ve.isBlockBoundary()||!(Ce=he.root[Se?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||Ce.is&&Ce.isBlockBoundary({br:1})||pe.document.createElement("br")[Se?"insertBefore":"insertAfter"](ve)}for(var _e=CKEDITOR.plugins.list.listToArray(he.root,fe),Ee=[],ye=0,ke;ye<he.contents.length;ye++)ke=he.contents[ye],(ke=ke.getAscendant("li",!0))&&!ke.getCustomData("list_item_processed")&&(Ee.push(ke),CKEDITOR.dom.element.setMarker(fe,ke,"list_item_processed",!0));for(ke=null,ye=0;ye<Ee.length;ye++)ke=Ee[ye].getCustomData("listarray_index"),_e[ke].indent=-1;for(ye=ke+1;ye<_e.length;ye++)if(_e[ye].indent>_e[ye-1].indent+1){for(Ee=_e[ye-1].indent+1-_e[ye].indent,ke=_e[ye].indent;_e[ye]&&_e[ye].indent>=ke;)_e[ye].indent+=Ee,ye++;ye--}var Te=CKEDITOR.plugins.list.arrayToList(_e,fe,null,pe.config.enterMode,he.root.getAttribute("dir")).listNode,ve,Ce;be(!0),be(),Te.replace(he.root),pe.fire("contentDomInvalidated")}function te(pe,he){this.name=pe,this.context=this.type=he,this.allowedContent=he+" li",this.requiredContent=he}function oe(pe,he,fe,be){for(var _e,Ee;_e=pe[be?"getLast":"getFirst"](ge);)(Ee=_e.getDirection(1))!==he.getDirection(1)&&_e.setAttribute("dir",Ee),_e.remove(),fe?_e[be?"insertBefore":"insertAfter"](fe):he.append(_e,be),fe=_e}function ne(pe){function he(fe){var be=pe[fe?"getPrevious":"getNext"](ce);be&&be.type==CKEDITOR.NODE_ELEMENT&&be.is(pe.getName())&&(oe(pe,be,null,!fe),pe.remove(),pe=be)}he(),he(1)}function ae(pe){return pe.type==CKEDITOR.NODE_ELEMENT&&(pe.getName()in CKEDITOR.dtd.$block||pe.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[pe.getName()]["#"]}function ie(pe,he,fe){pe.fire("saveSnapshot"),fe.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var be=fe.extractContents();he.trim(!1,!0);var _e=he.createBookmark(),Ee=new CKEDITOR.dom.elementPath(he.startContainer),ye=Ee.block,Ee=Ee.lastElement.getAscendant("li",1)||ye,ke=new CKEDITOR.dom.elementPath(fe.startContainer),Te=ke.contains(CKEDITOR.dtd.$listItem),ke=ke.contains(CKEDITOR.dtd.$list);for(ye?(ye=ye.getBogus())&&ye.remove():ke&&(ye=ke.getPrevious(ce))&&me(ye)&&ye.remove(),(ye=be.getLast())&&ye.type==CKEDITOR.NODE_ELEMENT&&ye.is("br")&&ye.remove(),(ye=he.startContainer.getChild(he.startOffset))?be.insertBefore(ye):he.startContainer.append(be),Te&&(be=le(Te))&&(Ee.contains(Te)?(oe(be,Te.getParent(),Te),be.remove()):Ee.append(be));fe.checkStartOfBlock()&&fe.checkEndOfBlock()&&(ke=fe.startPath(),be=ke.block,!!be);)be.is("li")&&(Ee=be.getParent(),be.equals(Ee.getLast(ce))&&be.equals(Ee.getFirst(ce))&&(be=Ee)),fe.moveToPosition(be,CKEDITOR.POSITION_BEFORE_START),be.remove();fe=fe.clone(),be=pe.editable(),fe.setEndAt(be,CKEDITOR.POSITION_BEFORE_END),fe=new CKEDITOR.dom.walker(fe),fe.evaluator=function(ve){return ce(ve)&&!me(ve)},(fe=fe.next())&&fe.type==CKEDITOR.NODE_ELEMENT&&fe.getName()in CKEDITOR.dtd.$list&&ne(fe),he.moveToBookmark(_e),he.select(),pe.fire("saveSnapshot")}function le(pe){return(pe=pe.getLast(ce))&&pe.type==CKEDITOR.NODE_ELEMENT&&pe.getName()in re?pe:null}var re={ol:1,ul:1},se=CKEDITOR.dom.walker.whitespaces(),de=CKEDITOR.dom.walker.bookmark(),ce=function(pe){return!(se(pe)||de(pe))},me=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(pe,he,fe,be,_e){if(!re[pe.getName()])return[];be||(be=0),fe||(fe=[]);for(var Ee=0,ye=pe.getChildCount(),ke;Ee<ye;Ee++)if(ke=pe.getChild(Ee),ke.type==CKEDITOR.NODE_ELEMENT&&ke.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(ke,he,fe,be+1),"li"==ke.$.nodeName.toLowerCase()){var Te={parent:pe,indent:be,element:ke,contents:[]};_e?Te.grandparent=_e:(Te.grandparent=pe.getParent(),Te.grandparent&&"li"==Te.grandparent.$.nodeName.toLowerCase()&&(Te.grandparent=Te.grandparent.getParent())),he&&CKEDITOR.dom.element.setMarker(he,ke,"listarray_index",fe.length),fe.push(Te);for(var ve=0,Ce=ke.getChildCount(),Se;ve<Ce;ve++)Se=ke.getChild(ve),Se.type==CKEDITOR.NODE_ELEMENT&&re[Se.getName()]?CKEDITOR.plugins.list.listToArray(Se,he,fe,be+1,Te.grandparent):Te.contents.push(Se)}return fe},arrayToList:function(pe,he,fe,be,_e){if(fe||(fe=0),!pe||pe.length<fe+1)return null;for(var ye=pe[fe].parent.getDocument(),ke=new CKEDITOR.dom.documentFragment(ye),Te=null,ve=fe,Ce=_Mathmax(pe[fe].indent,0),Se=null,we=be==CKEDITOR.ENTER_P?"p":"div",Ee,Ne,xe,Ie;;){if(Ie=pe[ve],Ee=Ie.grandparent,Ne=Ie.element.getDirection(1),Ie.indent==Ce){for(Te&&pe[ve].parent.getName()==Te.getName()||(Te=pe[ve].parent.clone(!1,1),_e&&Te.setAttribute("dir",_e),ke.append(Te)),Se=Te.append(Ie.element.clone(0,1)),Ne!=Te.getDirection(1)&&Se.setAttribute("dir",Ne),Ee=0;Ee<Ie.contents.length;Ee++)Se.append(Ie.contents[Ee].clone(1,1));ve++}else if(Ie.indent==_Mathmax(Ce,0)+1)Ie=pe[ve-1].element.getDirection(1),ve=CKEDITOR.plugins.list.arrayToList(pe,null,ve,be,Ie==Ne?null:Ne),!Se.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=ye.$.documentMode&&Se.append(ye.createText("\xA0")),Se.append(ve.listNode),ve=ve.nextIndex;else if(-1==Ie.indent&&!fe&&Ee){re[Ee.getName()]?(Se=Ie.element.clone(!1,!0),Ne!=Ee.getDirection(1)&&Se.setAttribute("dir",Ne)):Se=new CKEDITOR.dom.documentFragment(ye);var Te=Ee.getDirection(1)!=Ne,Oe=Ie.element,Ae=Oe.getAttribute("class"),De=Oe.getAttribute("style"),Re=Se.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(be!=CKEDITOR.ENTER_BR||Te||De||Ae),Fe=Ie.contents.length,Le,Be;for(Ee=0;Ee<Fe;Ee++)if(Le=Ie.contents[Ee],de(Le)&&1<Fe)Re?Be=Le.clone(1,1):Se.append(Le.clone(1,1));else if(Le.type==CKEDITOR.NODE_ELEMENT&&Le.isBlockBoundary()){Te&&!Le.getDirection()&&Le.setAttribute("dir",Ne),xe=Le;var Pe=Oe.getAttribute("style");Pe&&xe.setAttribute("style",Pe.replace(/([^;])$/,"$1;")+(xe.getAttribute("style")||"")),Ae&&Le.addClass(Ae),xe=null,Be&&(Se.append(Be),Be=null),Se.append(Le.clone(1,1))}else Re?(xe||(xe=ye.createElement(we),Se.append(xe),Te&&xe.setAttribute("dir",Ne)),De&&xe.setAttribute("style",De),Ae&&xe.setAttribute("class",Ae),Be&&(xe.append(Be),Be=null),xe.append(Le.clone(1,1))):Se.append(Le.clone(1,1));Be&&((xe||Se).append(Be),Be=null),Se.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&ve!=pe.length-1&&(CKEDITOR.env.needsBrFiller&&(Ne=Se.getLast())&&Ne.type==CKEDITOR.NODE_ELEMENT&&Ne.is("br")&&Ne.remove(),(Ne=Se.getLast(ce))&&Ne.type==CKEDITOR.NODE_ELEMENT&&Ne.is(CKEDITOR.dtd.$block)||Se.append(ye.createElement("br"))),Ne=Se.$.nodeName.toLowerCase(),"div"!=Ne&&"p"!=Ne||Se.appendBogus(),ke.append(Se),Te=null,ve++}else return null;if(xe=null,pe.length<=ve||_Mathmax(pe[ve].indent,0)<Ce)break}if(he)for(pe=ke.getFirst();pe;){if(pe.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(he,pe),pe.getName()in CKEDITOR.dtd.$listItem&&(fe=pe,ye=_e=be=void 0,be=fe.getDirection()))){for(_e=fe.getParent();_e&&!(ye=_e.getDirection());)_e=_e.getParent();be==ye&&fe.removeAttribute("dir")}pe=pe.getNextSourceNode()}return{listNode:ke,nextIndex:ve}}};var ue=/^h[1-6]$/,ge=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);te.prototype={exec:function(pe){function he(Ae){return re[Ae.root.getName()]&&!fe(Ae.root,[CKEDITOR.NODE_COMMENT])}function fe(Ae,De){return CKEDITOR.tools.array.filter(Ae.getChildren().toArray(),function(Re){return-1===CKEDITOR.tools.array.indexOf(De,Re.type)}).length}function be(Ae){var De=!0;return 0!==Ae.getChildCount()&&(Ae.forEach(function(Re){if(Re.type!==CKEDITOR.NODE_COMMENT)return De=!1},null,!0),De)}this.refresh(pe,pe.elementPath());var _e=pe.config,Ee=pe.getSelection(),ye=Ee&&Ee.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var ke=pe.editable();if(ke.getFirst(ce)){var Te=1==ye.length&&ye[0];(_e=Te&&Te.getEnclosedNode())&&_e.is&&this.type==_e.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else _e.enterMode==CKEDITOR.ENTER_BR?ke.appendBogus():ye[0].fixBlock(1,_e.enterMode==CKEDITOR.ENTER_P?"p":"div"),Ee.selectRanges(ye)}for(var _e=Ee.createBookmarks(!0),ke=[],ve={},ye=ye.createIterator(),Ce=0;(Te=ye.getNextRange())&&++Ce;){var Se=Te.getBoundaryNodes(),Ne=Se.startNode,xe=Se.endNode;for(Ne.type==CKEDITOR.NODE_ELEMENT&&"td"==Ne.getName()&&Te.setStartAt(Se.startNode,CKEDITOR.POSITION_AFTER_START),xe.type==CKEDITOR.NODE_ELEMENT&&"td"==xe.getName()&&Te.setEndAt(Se.endNode,CKEDITOR.POSITION_BEFORE_END),Te=Te.createIterator(),Te.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;Se=Te.getNextParagraph();)if(!Se.getCustomData("list_block")&&!be(Se)){CKEDITOR.dom.element.setMarker(ve,Se,"list_block",1);for(var we=pe.elementPath(Se),Ne=we.elements,xe=0,we=we.blockLimit,Oe=Ne.length-1,Ie;0<=Oe&&(Ie=Ne[Oe]);Oe--)if(re[Ie.getName()]&&we.contains(Ie)){we.removeCustomData("list_group_object_"+Ce),(Ne=Ie.getCustomData("list_group_object"))?Ne.contents.push(Se):(Ne={root:Ie,contents:[Se]},ke.push(Ne),CKEDITOR.dom.element.setMarker(ve,Ie,"list_group_object",Ne)),xe=1;break}xe||(xe=we,xe.getCustomData("list_group_object_"+Ce)?xe.getCustomData("list_group_object_"+Ce).contents.push(Se):(Ne={root:xe,contents:[Se]},CKEDITOR.dom.element.setMarker(ve,xe,"list_group_object_"+Ce,Ne),ke.push(Ne)))}}for(Ie=[];0<ke.length;)Ne=ke.shift(),this.state==CKEDITOR.TRISTATE_OFF?he(Ne)||(re[Ne.root.getName()]?$.call(this,pe,Ne,ve,Ie):j.call(this,pe,Ne,Ie)):this.state==CKEDITOR.TRISTATE_ON&&re[Ne.root.getName()]&&!he(Ne)&&ee.call(this,pe,Ne,ve);for(Oe=0;Oe<Ie.length;Oe++)ne(Ie[Oe]);CKEDITOR.dom.element.clearAllMarkers(ve),Ee.selectBookmarks(_e),pe.focus()},refresh:function(pe,he){var fe=he.contains(re,1),be=he.blockLimit||he.root;fe&&be.contains(fe)?this.setState(fe.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(pe){pe.blockless||(pe.addCommand("numberedlist",new te("numberedlist","ol")),pe.addCommand("bulletedlist",new te("bulletedlist","ul")),pe.ui.addButton&&(pe.ui.addButton("NumberedList",{label:pe.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),pe.ui.addButton("BulletedList",{label:pe.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),pe.on("key",function(he){var fe=he.data.domEvent.getKey(),be;if("wysiwyg"==pe.mode&&fe in{8:1,46:1}){var _e=pe.getSelection().getRanges()[0],Ee=_e&&_e.startPath();if(_e&&_e.collapsed){var ye=8==fe,ke=pe.editable(),Te=new CKEDITOR.dom.walker(_e.clone());if(Te.evaluator=function(Se){return ce(Se)&&!me(Se)},Te.guard=function(Se,Ne){return!(Ne&&Se.type==CKEDITOR.NODE_ELEMENT&&Se.is("table"))},fe=_e.clone(),ye){var ve;if((ve=Ee.contains(re))&&_e.checkBoundaryOfElement(ve,CKEDITOR.START)&&(ve=ve.getParent())&&ve.is("li")&&(ve=le(ve))?(be=ve,ve=ve.getPrevious(ce),fe.moveToPosition(ve&&me(ve)?ve:be,CKEDITOR.POSITION_BEFORE_START)):(Te.range.setStartAt(ke,CKEDITOR.POSITION_AFTER_START),Te.range.setEnd(_e.startContainer,_e.startOffset),(ve=Te.previous())&&ve.type==CKEDITOR.NODE_ELEMENT&&(ve.getName()in re||ve.is("li"))&&(ve.is("li")||(Te.range.selectNodeContents(ve),Te.reset(),Te.evaluator=ae,ve=Te.previous()),be=ve,fe.moveToElementEditEnd(be),fe.moveToPosition(fe.endPath().block,CKEDITOR.POSITION_BEFORE_END))),be)ie(pe,fe,_e),he.cancel();else{var Ce=Ee.contains(re);Ce&&_e.checkBoundaryOfElement(Ce,CKEDITOR.START)&&(be=Ce.getFirst(ce),_e.checkBoundaryOfElement(be,CKEDITOR.START)&&(ve=Ce.getPrevious(ce),le(be)?ve&&(_e.moveToElementEditEnd(ve),_e.select()):pe.execCommand("outdent"),he.cancel()))}}else if(!(be=Ee.contains("li")))Te.range.setEndAt(ke,CKEDITOR.POSITION_BEFORE_END),(ve=Te.next())&&ve.type==CKEDITOR.NODE_ELEMENT&&ve.is(re)&&(ve=ve.getFirst(ce),Ee.block&&_e.checkStartOfBlock()&&_e.checkEndOfBlock()?(Ee.block.remove(),_e.moveToElementEditStart(ve),_e.select()):le(ve)?(_e.moveToElementEditStart(ve),_e.select()):(_e=_e.clone(),_e.moveToElementEditStart(ve),ie(pe,fe,_e)),he.cancel());else if(Te.range.setEndAt(ke,CKEDITOR.POSITION_BEFORE_END),ye=(ke=be.getLast(ce))&&ae(ke)?ke:be,Ee=0,(ve=Te.next())&&ve.type==CKEDITOR.NODE_ELEMENT&&ve.getName()in re&&ve.equals(ke)?(Ee=1,ve=Te.next()):_e.checkBoundaryOfElement(ye,CKEDITOR.END)&&(Ee=2),Ee&&ve){if(_e=_e.clone(),_e.moveToElementEditStart(ve),1==Ee&&(fe.optimize(),!fe.startContainer.equals(be))){for(be=fe.startContainer;be.is(CKEDITOR.dtd.$inline);)Ce=be,be=be.getParent();Ce&&fe.moveToPosition(Ce,CKEDITOR.POSITION_AFTER_END)}2==Ee&&(fe.moveToPosition(fe.endPath().block,CKEDITOR.POSITION_BEFORE_END),_e.endPath().block&&_e.moveToPosition(_e.endPath().block,CKEDITOR.POSITION_AFTER_START)),ie(pe,fe,_e),he.cancel()}setTimeout(function(){pe.selectionChange(1)})}}}))}})}(),function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function($){if(!$.blockless){var j;j=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]; li{list-style-type}[value]",contentTransformations:[["ol: listTypeToStyle"]]}),j=$.addCommand("numberedListStyle",j),$.addFeature(j),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),j=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}",contentTransformations:[["ul: listTypeToStyle"]]}),j=$.addCommand("bulletedListStyle",j),$.addFeature(j),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),$.addMenuGroup("list",108),$.addMenuItems({numberedlist:{label:$.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:$.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),$.contextMenu.addListener(function(ee){if(!ee||ee.isReadOnly())return null;for(;ee;){var te=ee.getName();if("ol"==te)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==te)return{bulletedlist:CKEDITOR.TRISTATE_OFF};ee=ee.getParent()}return null})}}},CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)}(),function(){function $(Ye,Ze,Je){return de(Ze)&&de(Je)&&Je.equals(Ze.getNext(function(Qe){return!(Ke(Qe)||We(Qe)||ce(Qe))}))}function j(Ye){this.upper=Ye[0],this.lower=Ye[1],this.set.apply(this,Ye.slice(2))}function ee(Ye){var Ze=Ye.element;if(Ze&&de(Ze)&&(Ze=Ze.getAscendant(Ye.triggers,!0))&&Ye.editable.contains(Ze)){var Je=ae(Ze);if("true"==Je.getAttribute("contenteditable"))return Ze;if(Je.is(Ye.triggers))return Je}return null}function te(Ye,Ze,Je){return _e(Ye,Ze),_e(Ye,Je),Ye=Ze.size.bottom,Je=Je.size.top,Ye&&Je?0|(Ye+Je)/2:Ye||Je}function oe(Ye,Ze,Je){return Ze=Ze[Je?"getPrevious":"getNext"](function(Qe){return Qe&&Qe.type==CKEDITOR.NODE_TEXT&&!Ke(Qe)||de(Qe)&&!ce(Qe)&&!se(Ye,Qe)})}function ne(Ye,Ze,Je){return Ye>Ze&&Ye<Je}function ae(Ye,Ze){if(Ye.data("cke-editable"))return null;for(Ze||(Ye=Ye.getParent());Ye&&!Ye.data("cke-editable");){if(Ye.hasAttribute("contenteditable"))return Ye;Ye=Ye.getParent()}return null}function ie(Ye){var Ze=Ye.doc,Je=Ce("<span contenteditable=\"false\" data-cke-magic-line=\"1\" style=\""+ze+"position:absolute;border-top:1px dashed "+Ye.boxColor+"\"></span>",Ze),Qe=CKEDITOR.getUrl(this.path+"images/"+(Se.hidpi?"hidpi/":"")+"icon"+(Ye.rtl?"-rtl":"")+".png");for(Te(Je,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(Ye.editable,!0),this},lineChildren:[Te(Ce("<span title=\""+Ye.editor.lang.magicline.title+"\" contenteditable=\"false\">&#8629;</span>",Ze),{base:ze+"height:17px;width:17px;"+(Ye.rtl?"left":"right")+":17px;background:url("+Qe+") center no-repeat "+Ye.boxColor+";cursor:pointer;"+(Se.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(Se.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),Te(Ce(je,Ze),{base:Ue+"left:0px;border-left-color:"+Ye.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),Te(Ce(je,Ze),{base:Ue+"right:0px;border-right-color:"+Ye.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){_e(Ye,this);var et=Ye.holdDistance,tt=this.size;return tt&&ne(Ye.mouse.y,tt.top-et,tt.bottom+et)&&ne(Ye.mouse.x,tt.left-et,tt.right+et)},place:function(){var et=Ye.view,tt=Ye.editable,ot=Ye.trigger,nt=ot.upper,at=ot.lower,it=nt||at,lt=it.getParent(),rt={};for(var st in this.trigger=ot,nt&&_e(Ye,nt,!0),at&&_e(Ye,at,!0),_e(Ye,lt,!0),Ye.inInlineMode&&Ee(Ye,!0),lt.equals(tt)?(rt.left=et.scroll.x,rt.right=-et.scroll.x,rt.width=""):(rt.left=it.size.left-it.size.margin.left+et.scroll.x-(Ye.inInlineMode?et.editable.left+et.editable.border.left:0),rt.width=it.size.outerWidth+it.size.margin.left+it.size.margin.right+et.scroll.x,rt.right=""),nt&&at?rt.top=nt.size.margin.bottom===at.size.margin.top?0|nt.size.bottom+nt.size.margin.bottom/2:nt.size.margin.bottom<at.size.margin.top?nt.size.bottom+nt.size.margin.bottom:nt.size.bottom+nt.size.margin.bottom-at.size.margin.top:nt?at||(rt.top=nt.size.bottom+nt.size.margin.bottom):rt.top=at.size.top-at.size.margin.top,ot.is(Re)||ne(rt.top,et.scroll.y-15,et.scroll.y+5)?(rt.top=Ye.inInlineMode?0:et.scroll.y,this.look(Re)):ot.is(Le)||ne(rt.top,et.pane.bottom-5,et.pane.bottom+15)?(rt.top=Ye.inInlineMode?et.editable.height+et.editable.padding.top+et.editable.padding.bottom:et.pane.bottom-1,this.look(Le)):(Ye.inInlineMode&&(rt.top-=et.editable.top+et.editable.border.top),this.look(Fe)),Ye.inInlineMode&&(rt.top--,rt.top+=et.editable.scroll.top,rt.left+=et.editable.scroll.left),rt)rt[st]=CKEDITOR.tools.cssLength(rt[st]);this.setStyles(rt)},look:function(et){if(this.oldLook!=et){for(var tt=this.lineChildren.length,ot;tt--;)(ot=this.lineChildren[tt]).setAttribute("style",ot.base+ot.looks[0|et/2]);this.oldLook=et}},wrap:new ve("span",Ye.doc)}),Ze=Je.lineChildren.length;Ze--;)Je.lineChildren[Ze].appendTo(Je);Je.look(Fe),Je.appendTo(Je.wrap),Je.unselectable(),Je.lineChildren[0].on("mouseup",function(et){Je.detach(),le(Ye,function(tt){var ot=Ye.line.trigger;tt[ot.is(Ie)?"insertBefore":"insertAfter"](ot.is(Ie)?ot.lower:ot.upper)},!0),Ye.editor.focus(),Se.ie||Ye.enterMode==CKEDITOR.ENTER_BR||Ye.hotNode.scrollIntoView(),et.data.preventDefault(!0)}),Je.on("mousedown",function(et){et.data.preventDefault(!0)}),Ye.line=Je}function le(Ye,Ze,Je){var Qe=new CKEDITOR.dom.range(Ye.doc),et=Ye.editor,tt;Se.ie&&Ye.enterMode==CKEDITOR.ENTER_BR?tt=Ye.doc.createText(Be):(tt=(tt=ae(Ye.element,!0))&&tt.data("cke-enter-mode")||Ye.enterMode,tt=new ve(we[tt],Ye.doc),tt.is("br")||Ye.doc.createText(Be).appendTo(tt)),Je&&et.fire("saveSnapshot"),Ze(tt),Qe.moveToPosition(tt,CKEDITOR.POSITION_AFTER_START),et.getSelection().selectRanges([Qe]),Ye.hotNode=tt,Je&&et.fire("saveSnapshot")}function re(Ye,Ze){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function Je(Qe){var et=Se.ie&&9>Se.version?" ":Be,tt=Ye.hotNode&&Ye.hotNode.getText()==et&&Ye.element.equals(Ye.hotNode)&&Ye.lastCmdDirection===!!Ze;le(Ye,function(ot){tt&&Ye.hotNode&&Ye.hotNode.remove(),ot[Ze?"insertAfter":"insertBefore"](Qe),ot.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!Ze}),Ye.lastCmdDirection=!!Ze}),Se.ie||Ye.enterMode==CKEDITOR.ENTER_BR||Ye.hotNode.scrollIntoView(),Ye.line.detach()}return function(Qe){Qe=Qe.getSelection().getStartElement();var et;if(Qe=Qe.getAscendant(He,1),!ge(Ye,Qe)&&Qe&&!Qe.equals(Ye.editable)&&!Qe.contains(Ye.editable)){(et=ae(Qe))&&"false"==et.getAttribute("contenteditable")&&(Qe=et),Ye.element=Qe,et=oe(Ye,Qe,!Ze);var tt;de(et)&&et.is(Ye.triggers)&&et.is($e)&&(!oe(Ye,et,!Ze)||(tt=oe(Ye,et,!Ze))&&de(tt)&&tt.is(Ye.triggers))?Je(et):(tt=ee(Ye,Qe),de(tt)&&(oe(Ye,tt,!Ze)?(Qe=oe(Ye,tt,!Ze))&&de(Qe)&&Qe.is(Ye.triggers)&&Je(tt):Je(tt)))}}}()}}function se(Ye,Ze){if(!Ze||Ze.type!=CKEDITOR.NODE_ELEMENT||!Ze.$)return!1;var Je=Ye.line;return Je.wrap.equals(Ze)||Je.wrap.contains(Ze)}function de(Ye){return Ye&&Ye.type==CKEDITOR.NODE_ELEMENT&&Ye.$}function ce(Ye){if(!de(Ye))return!1;var Ze;return(Ze=me(Ye))||(de(Ye)?(Ze={left:1,right:1,center:1},Ze=Ze[Ye.getComputedStyle("float")]||Ze[Ye.getAttribute("align")]):Ze=!1),Ze}function me(Ye){return!!{absolute:1,fixed:1}[Ye.getComputedStyle("position")]}function ue(Ye,Ze){return de(Ze)?Ze.is(Ye.triggers):null}function ge(Ye,Ze){if(!Ze)return!1;for(var Je=Ze.getParents(1),Qe=Je.length;Qe--;)for(var et=Ye.tabuList.length;et--;)if(Je[Qe].hasAttribute(Ye.tabuList[et]))return!0;return!1}function pe(Ye,Ze,Je){return(Ze=Ze[Je?"getLast":"getFirst"](function(Qe){return Ye.isRelevant(Qe)&&!Qe.is(Me)}),!!Ze)&&(_e(Ye,Ze),Je?Ze.size.top>Ye.mouse.y:Ze.size.bottom<Ye.mouse.y)}function he(Ye){var Ze=Ye.editable,Je=Ye.mouse,Qe=Ye.view,et=Ye.triggerOffset;Ee(Ye);var tt=Je.y>(Ye.inInlineMode?Qe.editable.top+Qe.editable.height/2:_Mathmin(Qe.editable.height,Qe.pane.height)/2),Ze=Ze[tt?"getLast":"getFirst"](function(ot){return!(Ke(ot)||We(ot))});return Ze?(se(Ye,Ze)&&(Ze=Ye.line.wrap[tt?"getPrevious":"getNext"](function(ot){return!(Ke(ot)||We(ot))})),!de(Ze)||ce(Ze)||!ue(Ye,Ze))?null:(_e(Ye,Ze),!tt&&0<=Ze.size.top&&ne(Je.y,0,Ze.size.top+et)?(Ye=Ye.inInlineMode||0===Qe.scroll.y?Re:Fe,new j([null,Ze,Ie,De,Ye])):tt&&Ze.size.bottom<=Qe.pane.height&&ne(Je.y,Ze.size.bottom-et,Qe.pane.height)?(Ye=Ye.inInlineMode||ne(Ze.size.bottom,Qe.pane.height-et,Qe.pane.height)?Le:Fe,new j([Ze,null,Oe,De,Ye])):null):null}function fe(Ye){var Ze=Ye.mouse,Je=Ye.view,Qe=Ye.triggerOffset,et=ee(Ye);if(!et)return null;_e(Ye,et);var Qe=_Mathmin(Qe,0|et.size.outerHeight/2),tt=[],ot,nt;if(ne(Ze.y,et.size.top-1,et.size.top+Qe))nt=!1;else if(ne(Ze.y,et.size.bottom-Qe,et.size.bottom+1))nt=!0;else return null;if(ce(et)||pe(Ye,et,nt)||et.getParent().is(Pe))return null;var at=oe(Ye,et,!nt);if(at){if(at&&at.type==CKEDITOR.NODE_TEXT)return null;if(de(at)){if(ce(at)||!ue(Ye,at)||at.getParent().is(Pe))return null;tt=[at,et][nt?"reverse":"concat"]().concat([Ae,De])}}else et.equals(Ye.editable[nt?"getLast":"getFirst"](Ye.isRelevant))?(Ee(Ye),nt&&ne(Ze.y,et.size.bottom-Qe,Je.pane.height)&&ne(et.size.bottom,Je.pane.height-Qe,Je.pane.height)?ot=Le:ne(Ze.y,0,et.size.top+Qe)&&(ot=Re)):ot=Fe,tt=[null,et][nt?"reverse":"concat"]().concat([nt?Oe:Ie,De,ot,et.equals(Ye.editable[nt?"getLast":"getFirst"](Ye.isRelevant))?nt?Le:Re:Fe]);return 0 in tt?new j(tt):null}function be(Ye,Ze,Je,Qe){for(var et=Ze.getDocumentPosition(),tt={},ot={},nt={},at={},it=Xe.length;it--;)tt[Xe[it]]=parseInt(Ze.getComputedStyle.call(Ze,"border-"+Xe[it]+"-width"),10)||0,nt[Xe[it]]=parseInt(Ze.getComputedStyle.call(Ze,"padding-"+Xe[it]),10)||0,ot[Xe[it]]=parseInt(Ze.getComputedStyle.call(Ze,"margin-"+Xe[it]),10)||0;return Je&&!Qe||ye(Ye,Qe),at.top=et.y-(Je?0:Ye.view.scroll.y),at.left=et.x-(Je?0:Ye.view.scroll.x),at.outerWidth=Ze.$.offsetWidth,at.outerHeight=Ze.$.offsetHeight,at.height=at.outerHeight-(nt.top+nt.bottom+tt.top+tt.bottom),at.width=at.outerWidth-(nt.left+nt.right+tt.left+tt.right),at.bottom=at.top+at.outerHeight,at.right=at.left+at.outerWidth,Ye.inInlineMode&&(at.scroll={top:Ze.$.scrollTop,left:Ze.$.scrollLeft}),Te({border:tt,padding:nt,margin:ot,ignoreScroll:Je},at,!0)}function _e(Ye,Ze,Je){if(!de(Ze))return Ze.size=null;if(!Ze.size)Ze.size={};else if(Ze.size.ignoreScroll==Je&&Ze.size.date>new Date-qe)return null;return Te(Ze.size,be(Ye,Ze,Je),{date:+new Date},!0)}function Ee(Ye,Ze){Ye.view.editable=be(Ye,Ye.editable,Ze,!0)}function ye(Ye,Ze){Ye.view||(Ye.view={});var Je=Ye.view;if(!(!Ze&&Je&&Je.date>new Date-qe)){var Qe=Ye.win,Je=Qe.getScrollPosition(),Qe=Qe.getViewPaneSize();Te(Ye.view,{scroll:{x:Je.x,y:Je.y,width:Ye.doc.$.documentElement.scrollWidth-Qe.width,height:Ye.doc.$.documentElement.scrollHeight-Qe.height},pane:{width:Qe.width,height:Qe.height,bottom:Qe.height+Je.y},date:+new Date},!0)}}function ke(Ye,Ze,Je,Qe){for(var et=Qe,tt=Qe,ot=0,nt=!1,at=!1,it=Ye.view.pane.height,lt=Ye.mouse;lt.y+ot<it&&0<lt.y-ot&&(nt||(nt=Ze(et,Qe)),at||(at=Ze(tt,Qe)),!nt&&0<lt.y-ot&&(et=Je(Ye,{x:lt.x,y:lt.y-ot})),!at&&lt.y+ot<it&&(tt=Je(Ye,{x:lt.x,y:lt.y+ot})),!(nt&&at));)ot+=2;return new j([et,tt,null,null])}CKEDITOR.plugins.add("magicline",{init:function(Ye){var Ze=Ye.config,Je=Ze.magicline_triggerOffset||30,Qe={editor:Ye,enterMode:Ze.enterMode,triggerOffset:Je,holdDistance:0|Je*(Ze.magicline_holdDistance||.5),boxColor:Ze.magicline_color||"#ff0000",rtl:"rtl"==Ze.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(Ze.magicline_tabuList||[]),triggers:Ze.magicline_everywhere?He:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},et,tt,ot;Qe.isRelevant=function(nt){return de(nt)&&!se(Qe,nt)&&!ce(nt)},Ye.on("contentDom",function(){var nt=Ye.editable(),at=Ye.document,it=Ye.window;Te(Qe,{editable:nt,inInlineMode:nt.isInline(),doc:at,win:it,hotNode:null},!0),Qe.boundary=Qe.inInlineMode?Qe.editable:Qe.doc.getDocumentElement(),nt.is(xe.$inline)||(Qe.inInlineMode&&!me(nt)&&nt.setStyles({position:"relative",top:null,left:null}),ie.call(this,Qe),ye(Qe),nt.attachListener(Ye,"beforeUndoImage",function(){Qe.line.detach()}),nt.attachListener(Ye,"beforeGetData",function(){Qe.line.wrap.getParent()&&(Qe.line.detach(),Ye.once("getData",function(){Qe.line.attach()},null,null,1E3))},null,null,0),nt.attachListener(Qe.inInlineMode?at:at.getWindow().getFrame(),"mouseout",function(lt){if("wysiwyg"==Ye.mode)if(Qe.inInlineMode){var rt=lt.data.$.clientX;lt=lt.data.$.clientY,ye(Qe),Ee(Qe,!0);var st=Qe.view.editable,dt=Qe.view.scroll;rt>st.left-dt.x&&rt<st.right-dt.x&&lt>st.top-dt.y&&lt<st.bottom-dt.y||(clearTimeout(ot),ot=null,Qe.line.detach())}else clearTimeout(ot),ot=null,Qe.line.detach()}),nt.attachListener(nt,"keyup",function(){Qe.hiddenMode=0}),nt.attachListener(nt,"keydown",function(lt){if("wysiwyg"==Ye.mode)switch(lt.data.getKeystroke()){case 2228240:case 16:Qe.hiddenMode=1,Qe.line.detach();}}),nt.attachListener(Qe.inInlineMode?nt:at,"mousemove",function(lt){if(tt=!0,"wysiwyg"==Ye.mode&&!Ye.readOnly&&!ot){var rt={x:lt.data.$.clientX,y:lt.data.$.clientY};ot=setTimeout(function(){Qe.mouse=rt,ot=Qe.trigger=null,ye(Qe),tt&&!Qe.hiddenMode&&Ye.focusManager.hasFocus&&!Qe.line.mouseNear()&&(Qe.element=Ve(Qe,!0))&&((Qe.trigger=he(Qe)||fe(Qe)||Ge(Qe))&&!ge(Qe,Qe.trigger.upper||Qe.trigger.lower)?Qe.line.attach().place():(Qe.trigger=null,Qe.line.detach()),tt=!1)},30)}}),nt.attachListener(it,"scroll",function(){"wysiwyg"==Ye.mode&&(Qe.line.detach(),Se.webkit&&(Qe.hiddenMode=1,clearTimeout(et),et=setTimeout(function(){Qe.mouseDown||(Qe.hiddenMode=0)},50)))}),nt.attachListener(Ne?at:it,"mousedown",function(){"wysiwyg"==Ye.mode&&(Qe.line.detach(),Qe.hiddenMode=1,Qe.mouseDown=1)}),nt.attachListener(Ne?at:it,"mouseup",function(){Qe.hiddenMode=0,Qe.mouseDown=0}),Ye.addCommand("accessPreviousSpace",re(Qe)),Ye.addCommand("accessNextSpace",re(Qe,!0)),Ye.setKeystroke([[Ze.magicline_keystrokePrevious,"accessPreviousSpace"],[Ze.magicline_keystrokeNext,"accessNextSpace"]]),Ye.on("loadSnapshot",function(){var lt,rt,st,dt;for(dt in{p:1,br:1,div:1})for(lt=Ye.document.getElementsByTag(dt),st=lt.count();st--;)if((rt=lt.getItem(st)).data("cke-magicline-hot"))return Qe.hotNode=rt,void(Qe.lastCmdDirection="true"===rt.data("cke-magicline-dir"))}),Ye._.magiclineBackdoor={accessFocusSpace:le,boxTrigger:j,isLine:se,getAscendantTrigger:ee,getNonEmptyNeighbour:oe,getSize:be,that:Qe,triggerEdge:fe,triggerEditable:he,triggerExpand:Ge})},this)}});var Te=CKEDITOR.tools.extend,ve=CKEDITOR.dom.element,Ce=ve.createFromHtml,Se=CKEDITOR.env,Ne=CKEDITOR.env.ie&&9>CKEDITOR.env.version,xe=CKEDITOR.dtd,we={},Ie=128,Oe=64,Ae=32,De=16,Re=4,Le=2,Fe=1,Be="\xA0",Pe=xe.$listItem,Me=xe.$tableContent,$e=Te({},xe.$nonEditable,xe.$empty),He=xe.$block,qe=100,ze="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",Ue=ze+"border-color:transparent;display:block;border-style:solid;",je="<span>"+Be+"</span>";we[CKEDITOR.ENTER_BR]="br",we[CKEDITOR.ENTER_P]="p",we[CKEDITOR.ENTER_DIV]="div",j.prototype={set:function(Ye,Ze,Je){return this.properties=Ye+Ze+(Je||Fe),this},is:function(Ye){return(this.properties&Ye)==Ye}};var Ve=function(){function Ye(Ze,Je){var Qe=Ze.$.elementFromPoint(Je.x,Je.y);return Qe&&Qe.nodeType?new CKEDITOR.dom.element(Qe):null}return function(Ze,Je,Qe){if(!Ze.mouse)return null;var et=Ze.doc,tt=Ze.line.wrap;Qe=Qe||Ze.mouse;var ot=Ye(et,Qe);return Je&&se(Ze,ot)&&(tt.hide(),ot=Ye(et,Qe),tt.show()),ot&&ot.type==CKEDITOR.NODE_ELEMENT&&ot.$&&(!Se.ie||!(9>Se.version)||Ze.boundary.equals(ot)||Ze.boundary.contains(ot))?ot:null}}(),Ke=CKEDITOR.dom.walker.whitespaces(),We=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Ge=function(){function Ye(Je){var Qe=Je.element,et,tt,ot;if(!de(Qe)||Qe.contains(Je.editable)||Qe.isReadOnly())return null;if(ot=ke(Je,function(rt,st){return!st.equals(rt)},function(rt,st){return Ve(rt,!0,st)},Qe),et=ot.upper,tt=ot.lower,$(Je,et,tt))return ot.set(Ae,8);if(et&&Qe.contains(et))for(;!et.getParent().equals(Qe);)et=et.getParent();else et=Qe.getFirst(function(rt){return Ze(Je,rt)});if(tt&&Qe.contains(tt))for(;!tt.getParent().equals(Qe);)tt=tt.getParent();else tt=Qe.getLast(function(rt){return Ze(Je,rt)});if(!et||!tt)return null;if(_e(Je,et),_e(Je,tt),!ne(Je.mouse.y,et.size.top,tt.size.bottom))return null;for(var Qe=Number.MAX_VALUE,nt,at,it,lt;tt&&!tt.equals(et)&&(at=et.getNext(Je.isRelevant));)nt=_Mathabs(te(Je,et,at)-Je.mouse.y),nt<Qe&&(Qe=nt,it=et,lt=at),et=at,_e(Je,et);return it&&lt&&ne(Je.mouse.y,it.size.top,lt.size.bottom)?(ot.upper=it,ot.lower=lt,ot.set(Ae,8)):null}function Ze(Je,Qe){return!(Qe&&Qe.type==CKEDITOR.NODE_TEXT||We(Qe)||ce(Qe)||se(Je,Qe)||Qe.type==CKEDITOR.NODE_ELEMENT&&Qe.$&&Qe.is("br"))}return function(Je){var Qe=Ye(Je),et;if(et=Qe){et=Qe.upper;var tt=Qe.lower;et=!et||!tt||ce(tt)||ce(et)||tt.equals(et)||et.equals(tt)||tt.contains(et)||et.contains(tt)?!1:ue(Je,et)&&ue(Je,tt)&&$(Je,et,tt)}return et?Qe:null}}(),Xe=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function $(ne){if(!ne||ne.type!=CKEDITOR.NODE_ELEMENT||"form"!=ne.getName())return[];for(var ae=[],ie=["style","className"],le=0,re;le<ie.length;le++)re=ne.$.elements.namedItem(ie[le]),re&&(re=new CKEDITOR.dom.element(re),ae.push([re,re.nextSibling]),re.remove());return ae}function j(ne,ae){if(ne&&ne.type==CKEDITOR.NODE_ELEMENT&&"form"==ne.getName()&&0<ae.length)for(var ie=ae.length-1;0<=ie;ie--){var le=ae[ie][0],re=ae[ie][1];re?le.insertBefore(re):le.appendTo(ne)}}function ee(ne,ae){var ie=$(ne),le={},re=ne.$;return ae||(le["class"]=re.className||"",re.className=""),le.inline=re.style.cssText||"",ae||(re.style.cssText="position: static; overflow: visible"),j(ie),le}function te(ne,ae){var ie=$(ne),le=ne.$;"class"in ae&&(le.className=ae["class"]),"inline"in ae&&(le.style.cssText=ae.inline),j(ie)}function oe(ne){if(!ne.editable().isInline()){var ae=CKEDITOR.instances,ie;for(ie in ae){var le=ae[ie];"wysiwyg"!=le.mode||le.readOnly||(le=le.document.getBody(),le.setAttribute("contentEditable",!1),le.setAttribute("contentEditable",!0))}ne.editable().hasFocus&&(ne.toolbox.focus(),ne.focus())}}CKEDITOR.plugins.add("maximize",{init:function(ne){function ae(){var ue=re.getViewPaneSize();ne.resize(ue.width,ue.height,null,!0)}if(ne.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var ie=ne.lang,le=CKEDITOR.document,re=le.getWindow(),me=CKEDITOR.TRISTATE_OFF,se,de,ce;ne.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var ue=ne.container.getFirst(function(be){return be.type==CKEDITOR.NODE_ELEMENT&&be.hasClass("cke_inner")}),ge=ne.ui.space("contents");if("wysiwyg"==ne.mode){var pe=ne.getSelection();se=pe&&pe.getRanges(),de=re.getScrollPosition()}else{var he=ne.editable().$;se=!CKEDITOR.env.ie&&[he.selectionStart,he.selectionEnd],de=[he.scrollLeft,he.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(re.on("resize",ae),ce=re.getScrollPosition(),pe=ne.container;pe=pe.getParent();)pe.setCustomData("maximize_saved_styles",ee(pe)),pe.setStyle("z-index",ne.config.baseFloatZIndex-5);ge.setCustomData("maximize_saved_styles",ee(ge,!0)),ue.setCustomData("maximize_saved_styles",ee(ue,!0)),ge={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},le.getDocumentElement().setStyles(ge),CKEDITOR.env.gecko||le.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||le.getBody().setStyles(ge),CKEDITOR.env.ie?setTimeout(function(){re.$.scrollTo(0,0)},0):re.$.scrollTo(0,0),ue.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),ue.$.offsetLeft,ue.setStyles({"z-index":ne.config.baseFloatZIndex-5,left:"0px",top:"0px"}),ue.addClass("cke_maximized"),ae(),ge=ue.getDocumentPosition(),ue.setStyles({left:-1*ge.x+"px",top:-1*ge.y+"px"}),CKEDITOR.env.gecko&&oe(ne)}else if(this.state==CKEDITOR.TRISTATE_ON){re.removeListener("resize",ae);for(var pe=[ge,ue],fe=0;fe<pe.length;fe++)te(pe[fe],pe[fe].getCustomData("maximize_saved_styles")),pe[fe].removeCustomData("maximize_saved_styles");for(pe=ne.container;pe=pe.getParent();)te(pe,pe.getCustomData("maximize_saved_styles")),pe.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){re.$.scrollTo(ce.x,ce.y)},0):re.$.scrollTo(ce.x,ce.y),ue.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(ue.setStyle("display","inline"),setTimeout(function(){ue.setStyle("display","block")},0)),ne.fire("resize",{outerHeight:ne.container.$.offsetHeight,contentsHeight:ge.$.offsetHeight,outerWidth:ne.container.$.offsetWidth})}this.toggleState(),(pe=this.uiItems[0])&&(ge=this.state==CKEDITOR.TRISTATE_OFF?ie.maximize.maximize:ie.maximize.minimize,pe=CKEDITOR.document.getById(pe._.id),pe.getChild(1).setHtml(ge),pe.setAttribute("title",ge),pe.setAttribute("href","javascript:void(\""+ge+"\");")),"wysiwyg"==ne.mode?se?(CKEDITOR.env.gecko&&oe(ne),ne.getSelection().selectRanges(se),(he=ne.getSelection().getStartElement())&&he.scrollIntoView(!0)):re.$.scrollTo(de.x,de.y):(se&&(he.selectionStart=se[0],he.selectionEnd=se[1]),he.scrollLeft=de[0],he.scrollTop=de[1]),se=de=null,me=this.state,ne.fire("maximize",this.state)},canUndo:!1}),ne.ui.addButton&&ne.ui.addButton("Maximize",{label:ie.maximize.maximize,command:"maximize",toolbar:"tools,10"}),ne.on("mode",function(){var ue=ne.getCommand("maximize");ue.setState(ue.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:me)},null,null,100)}}})}(),function(){var $={canUndo:!1,async:!0,exec:function(j,ee){var te=j.lang,oe=CKEDITOR.tools.keystrokeToString(te.common.keyboard,j.getCommandKeystroke(CKEDITOR.env.ie?j.commands.paste:this)),ne=ee&&"undefined"!=typeof ee.notification?ee.notification:!ee||!ee.from||"keystrokeHandler"===ee.from&&CKEDITOR.env.ie,te=ne&&"string"==typeof ne?ne:te.pastetext.pasteNotification.replace(/%1/,"<kbd aria-label=\""+oe.aria+"\">"+oe.display+"</kbd>");j.execCommand("paste",{type:"text",notification:!!ne&&te})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(j){var ee=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;j.addCommand("pastetext",$),j.setKeystroke(ee,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(j,"PasteText",{label:j.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),j.config.forcePasteAsPlainText&&j.on("beforePaste",function(te){"html"!=te.data.type&&(te.data.type="text")}),j.on("pasteState",function(te){j.getCommand("pastetext").setState(te.data)})}})}(),CKEDITOR.plugins.add("print",{init:function($){$.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&($.addCommand("print",CKEDITOR.plugins.print),$.ui.addButton&&$.ui.addButton("Print",{label:$.lang.print.toolbar,command:"print",toolbar:"document,50"}))}}),CKEDITOR.plugins.print={exec:function($){CKEDITOR.env.gecko?$.window.$.print():$.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}},CKEDITOR.plugins.add("removeformat",{init:function($){$.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),$.ui.addButton&&$.ui.addButton("RemoveFormat",{label:$.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function($){for(var j=$._.removeFormatRegex||($._.removeFormatRegex=new RegExp("^(?:"+$.config.removeFormatTags.replace(/,/g,"|")+")$","i")),ee=$._.removeAttributes||($._.removeAttributes=$.config.removeFormatAttributes.split(",")),te=CKEDITOR.plugins.removeformat.filter,oe=$.getSelection().getRanges().createIterator(),ne=function(me){return me.type==CKEDITOR.NODE_ELEMENT},ae=[],ie,le;ie=oe.getNextRange();){le=ie.createBookmark(),ie=$.createRange(),ie.setStartBefore(le.startNode),le.endNode&&ie.setEndAfter(le.endNode),ie.collapsed||ie.enlarge(CKEDITOR.ENLARGE_ELEMENT);var re=ie.createBookmark(),se=re.startNode,de=re.endNode,ce=function(me){for(var ue=$.elementPath(me),ge=ue.elements,pe=1,he;(he=ge[pe])&&!he.equals(ue.block)&&!he.equals(ue.blockLimit);pe++)j.test(he.getName())&&te($,he)&&me.breakParent(he)};if(ce(se),de)for(ce(de),se=se.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);se&&!se.equals(de);)if(se.isReadOnly()){if(se.getPosition(de)&CKEDITOR.POSITION_CONTAINS)break;se=se.getNext(ne)}else ce=se.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==se.getName()&&se.data("cke-realelement")||se.hasAttribute("data-cke-bookmark")||!te($,se)||(j.test(se.getName())?se.remove(1):(se.removeAttributes(ee),$.fire("removeFormatCleanup",se))),se=ce;re.startNode.remove(),re.endNode&&re.endNode.remove(),ie.moveToBookmark(le),ae.push(ie)}$.forceNextSelectionCheck(),$.getSelection().selectRanges(ae)}}},filter:function($,j){for(var ee=$._.removeFormatFilters||[],te=0;te<ee.length;te++)if(!1===ee[te](j))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function($){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push($)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){var $={readOnly:1,modes:{wysiwyg:1,source:1},exec:function(j){if(j.fire("save")&&(j=j.element.$.form))try{j.submit()}catch(ee){j.submit.click&&j.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(j){j.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(j.addCommand("save",$).startDisabled=!j.element.$.form,j.ui.addButton&&j.ui.addButton("Save",{label:j.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})}(),function(){CKEDITOR.plugins.add("selectall",{init:function($){$.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(j){var ee=j.editable();if(ee.is("textarea"))j=ee.$,CKEDITOR.env.ie&&j.createTextRange?j.createTextRange().execCommand("SelectAll"):(j.selectionStart=0,j.selectionEnd=j.value.length),j.focus();else{if(ee.is("body"))j.document.$.execCommand("SelectAll",!1,null);else{var te=j.createRange();te.selectNodeContents(ee),te.select()}j.forceNextSelectionCheck(),j.selectionChange()}},canUndo:!1}),$.ui.addButton&&$.ui.addButton("SelectAll",{label:$.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})}(),function(){var $={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(j){this.toggleState(),this.refresh(j)},refresh:function(j){if(j.document){var ee=this.state==CKEDITOR.TRISTATE_ON&&(j.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||j.focusManager.hasFocus)?"attachClass":"removeClass";j.editable()[ee]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var j="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),ae=CKEDITOR.getUrl(this.path),ie=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),le=ie?":not([contenteditable=false]):not(.cke_show_blocks_off)":"",ee,te,oe,ne,re,se;for(ee=te=oe=ne="";re=j.pop();)se=j.length?",":"",ee+=".cke_show_blocks "+re+le+se,oe+=".cke_show_blocks.cke_contents_ltr "+re+le+se,ne+=".cke_show_blocks.cke_contents_rtl "+re+le+se,te+=".cke_show_blocks "+re+le+"{background-image:url("+CKEDITOR.getUrl(ae+"images/block_"+re+".png")+")}";CKEDITOR.addCss((ee+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(te,oe+"{background-position:top left;padding-left:8px}",ne+"{background-position:top right;padding-right:8px}")),ie||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(j){function ee(){te.refresh(j)}if(!j.blockless){var te=j.addCommand("showblocks",$);te.canUndo=!1,j.config.startupOutlineBlocks&&te.setState(CKEDITOR.TRISTATE_ON),j.ui.addButton&&j.ui.addButton("ShowBlocks",{label:j.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"}),j.on("mode",function(){te.state!=CKEDITOR.TRISTATE_DISABLED&&te.refresh(j)}),j.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(j.on("focus",ee),j.on("blur",ee)),j.on("contentDom",function(){te.state!=CKEDITOR.TRISTATE_DISABLED&&te.refresh(j)})}}})}(),function(){var $={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(j){this.toggleState(),this.refresh(j)},refresh:function(j){if(j.document){var ee=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";j.editable()[ee]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var j;j=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(j)},init:function(j){var ee=j.addCommand("showborders",$);ee.canUndo=!1,!1!==j.config.startupShowBorders&&ee.setState(CKEDITOR.TRISTATE_ON),j.on("mode",function(){ee.state!=CKEDITOR.TRISTATE_DISABLED&&ee.refresh(j)},null,null,100),j.on("contentDom",function(){ee.state!=CKEDITOR.TRISTATE_DISABLED&&ee.refresh(j)}),j.on("removeFormatCleanup",function(te){te=te.data,j.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&te.is("table")&&(!te.hasAttribute("border")||0>=parseInt(te.getAttribute("border"),10))&&te.addClass("cke_show_border")})},afterInit:function(j){var ee=j.dataProcessor;j=ee&&ee.dataFilter,ee=ee&&ee.htmlFilter,j&&j.addRules({elements:{table:function(te){te=te.attributes;var oe=te["class"],ne=parseInt(te.border,10);ne&&!(0>=ne)||oe&&-1!=oe.indexOf("cke_show_border")||(te["class"]=(oe||"")+" cke_show_border")}}}),ee&&ee.addRules({elements:{table:function(te){te=te.attributes;var oe=te["class"];oe&&(te["class"]=oe.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(j){var ee=j.data.name;("table"==ee||"tableProperties"==ee)&&(j=j.data.definition,ee=j.getContents("info").get("txtBorder"),ee.commit=CKEDITOR.tools.override(ee.commit,function(te){return function(oe,ne){te.apply(this,arguments);var ae=parseInt(this.getValue(),10);ne[!ae||0>=ae?"addClass":"removeClass"]("cke_show_border")}}),j=(j=j.getContents("advanced"))&&j.get("advCSSClasses"))&&(j.setup=CKEDITOR.tools.override(j.setup,function(te){return function(){te.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),j.commit=CKEDITOR.tools.override(j.commit,function(te){return function(oe,ne){te.apply(this,arguments),parseInt(ne.getAttribute("border"),10)||ne.addClass("cke_show_border")}}))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(j){function ee(){var ne=oe&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),ne&&this.focus()}if(j.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var te=CKEDITOR.plugins.sourcearea;j.addMode("source",function(ne){var ae=j.ui.space("contents").getDocument().createElement("textarea");ae.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",j.config.sourceAreaTabSize||4))),ae.setAttribute("dir","ltr"),ae.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),j.ui.space("contents").append(ae),ae=j.editable(new $(j,ae)),ae.setData(j.getData(1)),CKEDITOR.env.ie&&(ae.attachListener(j,"resize",ee,ae),ae.attachListener(CKEDITOR.document.getWindow(),"resize",ee,ae),CKEDITOR.tools.setTimeout(ee,0,ae)),j.fire("ariaWidget",this),ne()}),j.addCommand("source",te.commands.source),j.ui.addButton&&j.ui.addButton("Source",{label:j.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),j.on("mode",function(){j.getCommand("source").setState("source"==j.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var oe=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var $=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(j){this.setValue(j),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(j){this[(j?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){$.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function($){"wysiwyg"==$.mode&&$.fire("saveSnapshot"),$.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),$.setMode("source"==$.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function($){var j=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),$.addCommand("specialchar",{exec:function(){var ee=$.langCode,ee=j.availableLangs[ee]?ee:j.availableLangs[ee.replace(/-.*/,"")]?ee.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(j.path+"dialogs/lang/"+ee+".js"),function(){CKEDITOR.tools.extend($.lang.specialchar,j.langEntries[ee]),$.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),$.ui.addButton&&$.ui.addButton("SpecialChar",{label:$.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var $=CKEDITOR.addTemplate("panel-list","<ul role=\"presentation\" class=\"cke_panel_list\">{items}</ul>"),j=CKEDITOR.addTemplate("panel-list-item","<li id=\"{id}\" class=\"cke_panel_listItem\" role=presentation><a id=\"{id}_option\" _cke_focus=1 hidefocus=true title=\"{title}\" draggable=\"false\" ondragstart=\"return false;\" href=\"javascript:void('{val}')\"  {onclick}=\"CKEDITOR.tools.callFunction({clickFn},'{val}'); return false;\" role=\"option\">{text}</a></li>"),ee=CKEDITOR.addTemplate("panel-list-group","<h1 id=\"{id}\" draggable=\"false\" ondragstart=\"return false;\" class=\"cke_panel_grouptitle\" role=\"presentation\" >{label}</h1>"),te=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(oe,ne){return this.addBlock(oe,new CKEDITOR.ui.listBlock(this.getHolderElement(),ne))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(oe,ne){ne=ne||{};var ae=ne.attributes||(ne.attributes={});(this.multiSelect=!!ne.multiSelect)&&(ae["aria-multiselectable"]=!0),ae.role||(ae.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",ae.role),ae=this.keys,ae[40]="next",ae[9]="next",ae[38]="prev",ae[CKEDITOR.SHIFT+9]="prev",ae[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(ae[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var oe=$.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(oe),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(oe){var ne=this.toggle(oe);this.onClick&&this.onClick(oe,ne)},this)),this._.click}},proto:{add:function(oe,ne,ae){var ie=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[oe]=ie;var le;le=CKEDITOR.tools.htmlEncodeAttr(oe).replace(te,"\\'"),oe={id:ie,val:le,onclick:CKEDITOR.env.ie?"onclick=\"return false;\" onmouseup":"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(ae||oe),text:ne||oe},this._.pendingList.push(j.output(oe))},startGroup:function(oe){this._.close();var ne=CKEDITOR.tools.getNextId();this._.groups[oe]=ne,this._.pendingHtml.push(ee.output({id:ne,label:oe}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(oe){var ne=this.isMarked(oe);return ne?this.unmark(oe):this.mark(oe),!ne},hideGroup:function(oe){var ne=(oe=this.element.getDocument().getById(this._.groups[oe]))&&oe.getNext();oe&&(oe.setStyle("display","none"),ne&&"ul"==ne.getName()&&ne.setStyle("display","none"))},hideItem:function(oe){this.element.getDocument().getById(this._.items[oe]).setStyle("display","none")},showAll:function(){var oe=this._.items,ne=this._.groups,ae=this.element.getDocument(),ie;for(ie in oe)ae.getById(oe[ie]).setStyle("display","");for(var le in ne)oe=ae.getById(ne[le]),ie=oe.getNext(),oe.setStyle("display",""),ie&&"ul"==ie.getName()&&ie.setStyle("display","")},mark:function(oe){this.multiSelect||this.unmarkAll(),oe=this._.items[oe];var ne=this.element.getDocument().getById(oe);ne.addClass("cke_selected"),this.element.getDocument().getById(oe+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(ne)},markFirstDisplayed:function(){var oe=this;this._.markFirstDisplayed(function(){oe.multiSelect||oe.unmarkAll()})},unmark:function(oe){var ne=this.element.getDocument();oe=this._.items[oe];var ae=ne.getById(oe);ae.removeClass("cke_selected"),ne.getById(oe+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(ae)},unmarkAll:function(){var oe=this._.items,ne=this.element.getDocument(),ae;for(ae in oe){var ie=oe[ae];ne.getById(ie).removeClass("cke_selected"),ne.getById(ie+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(oe){return this.element.getDocument().getById(this._.items[oe]).hasClass("cke_selected")},focus:function(oe){this._.focusIndex=-1;var ne=this.element.getElementsByTag("a"),ie=-1,ae;if(oe){for(ae=this.element.getDocument().getById(this._.items[oe]).getFirst();oe=ne.getItem(++ie);)if(oe.equals(ae)){this._.focusIndex=ie;break}}else this.element.focus();ae&&setTimeout(function(){ae.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function($){$.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var $="<span id=\"{id}\" class=\"cke_combo cke_combo__{name} {cls}\" role=\"presentation\"><span id=\"{id}_label\" class=\"cke_combo_label\">{label}</span><a class=\"cke_combo_button\" title=\"{title}\" tabindex=\"-1\""+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+" hidefocus=\"true\" role=\"button\" aria-labelledby=\"{id}_label\" aria-haspopup=\"listbox\"";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&($+=" onkeypress=\"return false;\""),CKEDITOR.env.gecko&&($+=" onblur=\"this.style.cssText = this.style.cssText;\"");var $=$+(" onkeydown=\"return CKEDITOR.tools.callFunction({keydownFn},event,this);\" onfocus=\"return CKEDITOR.tools.callFunction({focusFn},event);\" "+(CKEDITOR.env.ie?"onclick=\"return false;\" onmouseup":"onclick")+"=\"CKEDITOR.tools.callFunction({clickFn},this);return false;\"><span id=\"{id}_text\" class=\"cke_combo_text cke_combo_inlinelabel\">{label}</span><span class=\"cke_combo_open\"><span class=\"cke_combo_arrow\">"+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),j=CKEDITOR.addTemplate("combo",$);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(ee){CKEDITOR.tools.extend(this,ee,{canGroup:!1,title:ee.label,modes:{wysiwyg:1},editorFocus:1}),ee=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=ee.parent&&ee.parent.getDocument()||CKEDITOR.document,ee.className="cke_combopanel",ee.block={multiSelect:ee.multiSelect,attributes:ee.attributes},ee.toolbarRelated=!0,this._={panelDefinition:ee,items:{},listeners:[]}},proto:{renderHtml:function(ee){var te=[];return this.render(ee,te),te.join("")},render:function(ee,te){function oe(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var me=this.modes[ee.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;ee.readOnly&&!this.readOnly&&(me=CKEDITOR.TRISTATE_DISABLED),this.setState(me),this.setValue(""),me!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var ne=CKEDITOR.env,ae="cke_"+this.id,ie=CKEDITOR.tools.addFunction(function(me){ce&&(ee.unlockSelection(1),ce=0),re.execute(me)},this),le=this,re={id:ae,combo:this,focus:function(){CKEDITOR.document.getById(ae).getChild(1).focus()},execute:function(me){var ue=le._;if(ue.state!=CKEDITOR.TRISTATE_DISABLED)if(le.createPanel(ee),ue.on)ue.panel.hide();else{le.commit();var ge=le.getValue();ge?ue.list.mark(ge):ue.list.unmarkAll(),ue.panel.showBlock(le.id,new CKEDITOR.dom.element(me),4)}},clickFn:ie};this._.listeners.push(ee.on("activeFilterChange",oe,this)),this._.listeners.push(ee.on("mode",oe,this)),this._.listeners.push(ee.on("selectionChange",oe,this)),this.readOnly||this._.listeners.push(ee.on("readOnly",oe,this));var se=CKEDITOR.tools.addFunction(function(me,ue){me=new CKEDITOR.dom.event(me);var ge=me.getKeystroke();13===ge||32===ge||40===ge?CKEDITOR.tools.callFunction(ie,ue):re.onkey(re,ge),me.preventDefault()}),de=CKEDITOR.tools.addFunction(function(){re.onfocus&&re.onfocus()}),ce=0;return re.keyDownFn=se,ne={id:ae,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:ne.gecko&&!ne.hc?"":(this.title||"").replace("'",""),keydownFn:se,focusFn:de,clickFn:ie},j.output(ne,te),this.onRender&&this.onRender(),re},createPanel:function(ee){if(!this._.panel){var te=this._.panelDefinition,oe=this._.panelDefinition.block,ne=te.parent||CKEDITOR.document.getBody(),ae="cke_combopanel__"+this.name,ie=new CKEDITOR.ui.floatPanel(ee,ne,te),te=ie.addListBlock(this.id,oe),le=this;ie.onShow=function(){this.element.addClass(ae),le.setState(CKEDITOR.TRISTATE_ON),le._.on=1,le.editorFocus&&!ee.focusManager.hasFocus&&ee.focus(),le.onOpen&&le.onOpen()},ie.onHide=function(re){this.element.removeClass(ae),le.setState(le.modes&&le.modes[ee.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),le._.on=0,!re&&le.onClose&&le.onClose()},ie.onEscape=function(){ie.hide(1)},te.onClick=function(re,se){le.onClick&&le.onClick.call(le,re,se),ie.hide()},this._.panel=ie,this._.list=te,ie.getBlock(this.id).onHide=function(){le._.on=0,le.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(ee,te){this._.value=ee;var oe=this.document.getById("cke_"+this.id+"_text");oe&&(ee||te?oe.removeClass("cke_combo_inlinelabel"):(te=this.label,oe.addClass("cke_combo_inlinelabel")),oe.setText("undefined"==typeof te?ee:te))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(ee){this._.list.mark(ee)},hideItem:function(ee){this._.list.hideItem(ee)},hideGroup:function(ee){this._.list.hideGroup(ee)},showAll:function(){this._.list.showAll()},add:function(ee,te,oe){this._.items[ee]=oe||ee,this._.list.add(ee,te,oe)},startGroup:function(ee){this._.list.startGroup(ee)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(ee){if(this._.state!=ee){var te=this.document.getById("cke_"+this.id);te.setState(ee,"cke_combo"),ee==CKEDITOR.TRISTATE_DISABLED?te.setAttribute("aria-disabled",!0):te.removeAttribute("aria-disabled"),this._.state=ee}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,function(ee){ee.removeListener()}),this._.listeners=[]}},statics:{handler:{create:function(ee){return new CKEDITOR.ui.richCombo(ee)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(ee,te){this.add(ee,CKEDITOR.UI_RICHCOMBO,te)}}(),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function($){var j=$.config,ee=$.lang.stylescombo,te={},oe=[],ne=[];$.on("stylesSet",function(ae){if(ae=ae.data.styles){for(var se=0,de=ae.length,ie,le,re;se<de;se++)(ie=ae[se],$.blockless&&ie.element in CKEDITOR.dtd.$block||"string"==typeof ie.type&&!CKEDITOR.style.customHandlers[ie.type]||(le=ie.name,ie=new CKEDITOR.style(ie),$.filter.customConfig&&!$.filter.check(ie)))||(ie._name=le,ie._.enterMode=j.enterMode,ie._.type=re=ie.assignedTo||ie.type,ie._.weight=se+1E3*(re==CKEDITOR.STYLE_OBJECT?1:re==CKEDITOR.STYLE_BLOCK?2:3),te[le]=ie,oe.push(ie),ne.push(ie));oe.sort(function(ce,me){return ce._.weight-me._.weight})}}),$.ui.addRichCombo("Styles",{label:ee.label,title:ee.panelTitle,toolbar:"styles,10",allowedContent:ne,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(j.contentsCss),multiSelect:!0,attributes:{"aria-label":ee.panelTitle}},init:function(){var ae,ie,le,re,se,de;for(se=0,de=oe.length;se<de;se++)ae=oe[se],ie=ae._name,re=ae._.type,re!=le&&(this.startGroup(ee["panelTitle"+(re+"")]),le=re),this.add(ie,ae.type==CKEDITOR.STYLE_OBJECT?ie:ae.buildPreview(),ie);this.commit()},onClick:function(ae){$.focus(),$.fire("saveSnapshot"),ae=te[ae];var ie=$.elementPath();ae.group&&ae.removeStylesFromSameGroup($)?$.applyStyle(ae):$[ae.checkActive(ie,$)?"removeStyle":"applyStyle"](ae),$.fire("saveSnapshot")},onRender:function(){$.on("selectionChange",function(ae){var ie=this.getValue();ae=ae.data.path.elements;for(var le=0,re=ae.length,se;le<re;le++)for(var de in se=ae[le],te)if(te[de].checkElementRemovable(se,!0,$))return void(de!=ie&&this.setValue(de));this.setValue("")},this)},onOpen:function(){var ae=$.getSelection(),ae=ae.getSelectedElement()||ae.getStartElement()||$.editable(),ae=$.elementPath(ae),ie=[0,0,0,0];for(var le in this.showAll(),this.unmarkAll(),te){var re=te[le],se=re._.type;re.checkApplicable(ae,$,$.activeFilter)?ie[se]++:this.hideItem(le),re.checkActive(ae,$)&&this.mark(le)}ie[CKEDITOR.STYLE_BLOCK]||this.hideGroup(ee["panelTitle"+(CKEDITOR.STYLE_BLOCK+"")]),ie[CKEDITOR.STYLE_INLINE]||this.hideGroup(ee["panelTitle"+(CKEDITOR.STYLE_INLINE+"")]),ie[CKEDITOR.STYLE_OBJECT]||this.hideGroup(ee["panelTitle"+(CKEDITOR.STYLE_OBJECT+"")])},refresh:function(){var ae=$.elementPath();if(ae){for(var ie in te)if(te[ie].checkApplicable(ae,$,$.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){te={},oe=[]}})}})}(),function(){function $(oe){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(ne){if(ne.editable().hasFocus){var ae=ne.getSelection(),ie;if(ie=new CKEDITOR.dom.elementPath(ae.getCommonAncestor(),ae.root).contains({td:1,th:1},1)){var ae=ne.createRange(),le=CKEDITOR.tools.tryThese(function(){var ce=ie.getParent().$.cells[ie.$.cellIndex+(oe?-1:1)];return ce.parentNode.parentNode,ce},function(){var ce=ie.getParent(),ce=ce.getAscendant("table").$.rows[ce.$.rowIndex+(oe?-1:1)];return ce.cells[oe?ce.cells.length-1:0]});if(!(le||oe)){for(var re=ie.getAscendant("table").$,le=ie.getParent().$.cells,re=new CKEDITOR.dom.element(re.insertRow(-1),ne.document),se=0,de=le.length;se<de;se++)re.append(new CKEDITOR.dom.element(le[se],ne.document).clone(!1,!1)).appendBogus();ae.moveToElementEditStart(re)}else if(le)le=new CKEDITOR.dom.element(le),ae.moveToElementEditStart(le),ae.checkStartOfBlock()&&ae.checkEndOfBlock()||ae.selectNodeContents(le);else return!0;return ae.select(!0),!0}}return!1}}}var j={editorFocus:!1,modes:{wysiwyg:1,source:1}},ee={exec:function(oe){oe.container.focusNext(!0,oe.tabIndex)}},te={exec:function(oe){oe.container.focusPrevious(!0,oe.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(oe){for(var ne=!1!==oe.config.enableTabKeyTools,ae=oe.config.tabSpaces||0,ie="";ae--;)ie+="\xA0";ie&&oe.on("key",function(le){9==le.data.keyCode&&(oe.insertText(ie),le.cancel())}),ne&&oe.on("key",function(le){(9==le.data.keyCode&&oe.execCommand("selectNextCell")||le.data.keyCode==CKEDITOR.SHIFT+9&&oe.execCommand("selectPreviousCell"))&&le.cancel()}),oe.addCommand("blur",CKEDITOR.tools.extend(ee,j)),oe.addCommand("blurBack",CKEDITOR.tools.extend(te,j)),oe.addCommand("selectNextCell",$()),oe.addCommand("selectPreviousCell",$(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function($,j){var ee=void 0===j?this.getTabIndex():j,te,oe,ne,ae,ie,le;if(0>=ee)for(ie=this.getNextSourceNode($,CKEDITOR.NODE_ELEMENT);ie;){if(ie.isVisible()&&0===ie.getTabIndex()){ne=ie;break}ie=ie.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(ie=this.getDocument().getBody().getFirst();ie=ie.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!te)if(oe||!ie.equals(this))oe&&!this.contains(ie)&&(te=1);else if(oe=!0,$){if(!(ie=ie.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;te=1}if(ie.isVisible()&&!(0>(le=ie.getTabIndex()))){if(te&&le==ee){ne=ie;break}le>ee&&(!ne||!ae||le<ae)?(ne=ie,ae=le):ne||0!=le||(ne=ie,ae=le)}}ne&&ne.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function($,j){for(var ee=void 0===j?this.getTabIndex():j,ae=0,le=this.getDocument().getBody().getLast(),te,oe,ne,ie;le=le.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!te)if(oe||!le.equals(this))oe&&!this.contains(le)&&(te=1);else if(oe=!0,$){if(!(le=le.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;te=1}if(le.isVisible()&&!(0>(ie=le.getTabIndex())))if(0>=ee){if(te&&0===ie){ne=le;break}ie>ae&&(ne=le,ae=ie)}else{if(te&&ie==ee){ne=le;break}ie<ee&&(!ne||ie>ae)&&(ne=le,ae=ie)}}ne&&ne.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function($){function j(te){return CKEDITOR.tools.extend(te||{},{contextSensitive:1,refresh:function(oe,ne){this.setState(ne.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!$.blockless){var ee=$.lang.table;$.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+($.plugins.dialogadvtab?"table"+$.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(te){if(te.styles){var oe;if(te.styles.border)oe=CKEDITOR.tools.style.parse.border(te.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var ne=te.styles;ne["border-left"]&&ne["border-left"]===ne["border-right"]&&ne["border-right"]===ne["border-top"]&&ne["border-top"]===ne["border-bottom"]&&(oe=CKEDITOR.tools.style.parse.border(ne["border-top"]))}oe&&oe.style&&"solid"===oe.style&&oe.width&&0!==parseFloat(oe.width)&&(te.attributes.border=1),"collapse"==te.styles["border-collapse"]&&(te.attributes.cellspacing=0)}}}]]})),$.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",j())),$.addCommand("tableDelete",j({exec:function(te){var oe=te.elementPath().contains("table",1);if(oe){var ne=oe.getParent(),ae=te.editable();1!=ne.getChildCount()||ne.is("td","th")||ne.equals(ae)||(oe=ne),te=te.createRange(),te.moveToPosition(oe,CKEDITOR.POSITION_BEFORE_START),oe.remove(),te.select()}}})),$.ui.addButton&&$.ui.addButton("Table",{label:ee.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),$.addMenuItems&&$.addMenuItems({table:{label:ee.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:ee.deleteTable,command:"tableDelete",group:"table",order:1}}),$.on("doubleclick",function(te){te.data.element.is("table")&&(te.data.dialog="tableProperties")}),$.contextMenu&&$.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function $(pe,he){function fe(Ce){return!he||he.contains(Ce)&&Ce.getAscendant("table",!0).equals(he)}function be(Ce){0<_e.length||Ce.type!=CKEDITOR.NODE_ELEMENT||!ue.test(Ce.getName())||Ce.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(Ee,Ce,"selected_cell",!0),_e.push(Ce))}var _e=[],Ee={};if(!pe)return _e;for(var ye=pe.getRanges(),ke=0,Te;ke<ye.length;ke++)if(Te=ye[ke],Te.collapsed)(Te=Te.getCommonAncestor().getAscendant({td:1,th:1},!0))&&fe(Te)&&_e.push(Te);else{var Te=new CKEDITOR.dom.walker(Te),ve;for(Te.guard=be;ve=Te.next();)ve.type==CKEDITOR.NODE_ELEMENT&&ve.is(CKEDITOR.dtd.table)||(ve=ve.getAscendant({td:1,th:1},!0))&&!ve.getCustomData("selected_cell")&&fe(ve)&&(CKEDITOR.dom.element.setMarker(Ee,ve,"selected_cell",!0),_e.push(ve))}return CKEDITOR.dom.element.clearAllMarkers(Ee),_e}function j(pe,he){for(var fe=ge(pe)?pe:$(pe),be=fe[0],_e=be.getAscendant("table"),be=be.getDocument(),Ee=fe[0].getParent(),ye=Ee.$.rowIndex,fe=fe[fe.length-1],ke=fe.getParent().$.rowIndex+fe.$.rowSpan-1,fe=new CKEDITOR.dom.element(_e.$.rows[ke]),ye=he?ye:ke,Ee=he?Ee:fe,fe=CKEDITOR.tools.buildTableMap(_e),_e=fe[ye],ye=he?fe[ye-1]:fe[ye+1],fe=fe[0].length,be=be.createElement("tr"),ke=0;_e[ke]&&ke<fe;ke++){var Te;1<_e[ke].rowSpan&&ye&&_e[ke]==ye[ke]?(Te=_e[ke],Te.rowSpan+=1):(Te=new CKEDITOR.dom.element(_e[ke]).clone(),Te.removeAttribute("rowSpan"),Te.appendBogus(),be.append(Te),Te=Te.$),ke+=Te.colSpan-1}return he?be.insertBefore(Ee):be.insertAfter(Ee),be}function ee(pe){if(pe instanceof CKEDITOR.dom.selection){var he=pe.getRanges(),fe=$(pe),be=fe[0].getAscendant("table"),_e=CKEDITOR.tools.buildTableMap(be),Ee=fe[0].getParent().$.rowIndex,fe=fe[fe.length-1],ye=fe.getParent().$.rowIndex+fe.$.rowSpan-1,fe=[];for(pe.reset(),pe=Ee;pe<=ye;pe++){for(var ke=_e[pe],Te=new CKEDITOR.dom.element(be.$.rows[pe]),ve=0;ve<ke.length;ve++){var Ce=new CKEDITOR.dom.element(ke[ve]),Se=Ce.getParent().$.rowIndex;1==Ce.$.rowSpan?Ce.remove():(--Ce.$.rowSpan,Se==pe&&(Se=_e[pe+1],Se[ve-1]?Ce.insertAfter(new CKEDITOR.dom.element(Se[ve-1])):new CKEDITOR.dom.element(be.$.rows[pe+1]).append(Ce,1))),ve+=Ce.$.colSpan-1}fe.push(Te)}for(_e=be.$.rows,he[0].moveToPosition(be,CKEDITOR.POSITION_BEFORE_START),Ee=new CKEDITOR.dom.element(_e[ye+1]||(0<Ee?_e[Ee-1]:null)||be.$.parentNode),pe=fe.length;0<=pe;pe--)ee(fe[pe]);return be.$.parentNode?Ee:(he[0].select(),null)}return pe instanceof CKEDITOR.dom.element&&(be=pe.getAscendant("table"),1==be.$.rows.length?be.remove():pe.remove()),null}function te(pe){for(var he=pe.getParent().$.cells,fe=0,be=0;be<he.length;be++){var _e=he[be],fe=fe+_e.colSpan;if(_e==pe.$)break}return fe-1}function oe(pe,he){for(var fe=he?Infinity:0,be=0,_e;be<pe.length;be++)_e=te(pe[be]),(he?_e<fe:_e>fe)&&(fe=_e);return fe}function ne(pe,he){for(var fe=ge(pe)?pe:$(pe),be=fe[0].getAscendant("table"),_e=oe(fe,1),fe=oe(fe),Ee=he?_e:fe,ye=CKEDITOR.tools.buildTableMap(be),be=[],_e=[],fe=[],ke=ye.length,Te=0;Te<ke;Te++)be.push(ye[Te][Ee]),_e.push(he?ye[Te][Ee-1]:ye[Te][Ee+1]);for(Te=0;Te<ke;Te++)be[Te]&&(1<be[Te].colSpan&&_e[Te]==be[Te]?(ye=be[Te],ye.colSpan+=1):(Ee=new CKEDITOR.dom.element(be[Te]),ye=Ee.clone(),ye.removeAttribute("colSpan"),ye.appendBogus(),ye[he?"insertBefore":"insertAfter"].call(ye,Ee),fe.push(ye),ye=ye.$),Te+=ye.rowSpan-1);return fe}function ae(pe){CKEDITOR.env.webkit&&!pe.isFake&&(pe=function(xe){var we,Ie,Oe;if(we=xe.getRanges(),1!==we.length)return xe;if(we=we[0],we.collapsed||0!==we.endOffset)return xe;if(Ie=we.endContainer,Oe=Ie.getName().toLowerCase(),"td"!==Oe&&"th"!==Oe)return xe;for((Oe=Ie.getPrevious())||(Oe=Ie.getParent().getPrevious().getLast());Oe.type!==CKEDITOR.NODE_TEXT&&"br"!==Oe.getName().toLowerCase();)if(Oe=Oe.getLast(),!Oe)return xe;return we.setEndAt(Oe,CKEDITOR.POSITION_BEFORE_END),we.select()}(pe));var fe=pe.getRanges(),be=$(pe),_e=be[0],Ee=be[be.length-1],be=_e.getAscendant("table"),ye=CKEDITOR.tools.buildTableMap(be),ve=[],ke,Te;pe.reset();var Ce=0;for(pe=ye.length;Ce<pe;Ce++)for(var Se=0,Ne=ye[Ce].length;Se<Ne;Se++)void 0==ke&&ye[Ce][Se]==_e.$&&(ke=Se),ye[Ce][Se]==Ee.$&&(Te=Se);for(Ce=ke;Ce<=Te;Ce++)for(Se=0;Se<ye.length;Se++)Ee=ye[Se],_e=new CKEDITOR.dom.element(be.$.rows[Se]),Ee=new CKEDITOR.dom.element(Ee[Ce]),Ee.$&&(1==Ee.$.colSpan?Ee.remove():--Ee.$.colSpan,Se+=Ee.$.rowSpan-1,_e.$.cells.length||ve.push(_e));return ke=ye[0].length-1>Te?new CKEDITOR.dom.element(ye[0][Te+1]):ke&&-1!==ye[0][ke-1].cellIndex?new CKEDITOR.dom.element(ye[0][ke-1]):new CKEDITOR.dom.element(be.$.parentNode),ve.length==pe&&(fe[0].moveToPosition(be,CKEDITOR.POSITION_AFTER_END),fe[0].select(),be.remove()),ke}function ie(pe,he){var fe=pe.getStartElement().getAscendant({td:1,th:1},!0);if(fe){var be=fe.clone();be.appendBogus(),he?be.insertBefore(fe):be.insertAfter(fe)}}function le(pe){if(pe instanceof CKEDITOR.dom.selection){var he=pe.getRanges(),fe=$(pe),be=fe[0]&&fe[0].getAscendant("table"),_e;a:{var Ee=0;_e=fe.length-1;for(var ye={},ke,Te;ke=fe[Ee++];)CKEDITOR.dom.element.setMarker(ye,ke,"delete_cell",!0);for(Ee=0;ke=fe[Ee++];)if((Te=ke.getPrevious())&&!Te.getCustomData("delete_cell")||(Te=ke.getNext())&&!Te.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(ye),_e=Te;break a}CKEDITOR.dom.element.clearAllMarkers(ye),Ee=fe[0].getParent(),(Ee=Ee.getPrevious())?_e=Ee.getLast():(Ee=fe[_e].getParent(),_e=(Ee=Ee.getNext())?Ee.getChild(0):null)}for(pe.reset(),pe=fe.length-1;0<=pe;pe--)le(fe[pe]);_e?re(_e,!0):be&&(he[0].moveToPosition(be,CKEDITOR.POSITION_BEFORE_START),he[0].select(),be.remove())}else pe instanceof CKEDITOR.dom.element&&(he=pe.getParent(),1==he.getChildCount()?he.remove():pe.remove())}function re(pe,he){var fe=pe.getDocument(),be=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(be.focus(),fe.focus()),fe=new CKEDITOR.dom.range(fe),fe["moveToElementEdit"+(he?"End":"Start")](pe)||(fe.selectNodeContents(pe),fe.collapse(!he)),fe.select(!0)}function se(pe,he,fe){if(pe=pe[he],"undefined"==typeof fe)return pe;for(he=0;pe&&he<pe.length;he++){if(fe.is&&pe[he]==fe.$)return he;if(he==fe)return new CKEDITOR.dom.element(pe[he])}return fe.is?-1:null}function de(pe,he,fe){var be=$(pe),_e;if((he?1!=be.length:2>be.length)||(_e=pe.getCommonAncestor())&&_e.type==CKEDITOR.NODE_ELEMENT&&_e.is("table"))return!1;var Ee;pe=be[0],_e=pe.getAscendant("table");var ye=CKEDITOR.tools.buildTableMap(_e),ke=ye.length,Te=ye[0].length,ve=pe.getParent().$.rowIndex,Ce=se(ye,ve,pe);if(he){var Se;try{var Ne=parseInt(pe.getAttribute("rowspan"),10)||1;Ee=parseInt(pe.getAttribute("colspan"),10)||1,Se=ye["up"==he?ve-Ne:"down"==he?ve+Ne:ve]["left"==he?Ce-Ee:"right"==he?Ce+Ee:Ce]}catch(Fe){return!1}if(!Se||pe.$==Se)return!1;be["up"==he||"left"==he?"unshift":"push"](new CKEDITOR.dom.element(Se))}he=pe.getDocument();var xe=ve,Ne=Se=0,we=!fe&&new CKEDITOR.dom.documentFragment(he),Ie=0;for(he=0;he<be.length;he++){Ee=be[he];var Oe=Ee.getParent(),Ae=Ee.getFirst(),De=Ee.$.colSpan,Re=Ee.$.rowSpan,Oe=Oe.$.rowIndex,Le=se(ye,Oe,Ee),Ie=Ie+De*Re,Ne=_Mathmax(Ne,Le-Ce+De);Se=_Mathmax(Se,Oe-ve+Re),fe||(De=Ee,(Re=De.getBogus())&&Re.remove(),De.trim(),Ee.getChildren().count()&&(Oe==xe||!Ae||Ae.isBlockBoundary&&Ae.isBlockBoundary({br:1})||(xe=we.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!xe||xe.is&&xe.is("br")||we.append("br")),Ee.moveChildren(we)),he?Ee.remove():Ee.setHtml("")),xe=Oe}if(fe)return Se*Ne==Ie;for(we.moveChildren(pe),pe.appendBogus(),Ne>=Te?pe.removeAttribute("rowSpan"):pe.$.rowSpan=Se,Se>=ke?pe.removeAttribute("colSpan"):pe.$.colSpan=Ne,fe=new CKEDITOR.dom.nodeList(_e.$.rows),be=fe.count(),he=be-1;0<=he;he--)_e=fe.getItem(he),_e.$.cells.length||(_e.remove(),be++);return pe}function ce(pe,he){var fe=$(pe);if(1<fe.length)return!1;if(he)return!0;var fe=fe[0],be=fe.getParent(),_e=be.getAscendant("table"),Ee=CKEDITOR.tools.buildTableMap(_e),ye=be.$.rowIndex,ke=se(Ee,ye,fe),Te=fe.$.rowSpan,ve;if(1<Te){ve=_Mathceil(Te/2);for(var Te=_Mathfloor(Te/2),be=ye+ve,_e=new CKEDITOR.dom.element(_e.$.rows[be]),Ee=se(Ee,be),be=fe.clone(),ye=0,Ce;ye<Ee.length;ye++)if(Ce=Ee[ye],Ce.parentNode==_e.$&&ye>ke){be.insertBefore(new CKEDITOR.dom.element(Ce));break}else Ce=null;Ce||_e.append(be)}else for(Te=ve=1,_e=be.clone(),_e.insertAfter(be),_e.append(be=fe.clone()),Ce=se(Ee,ye),ke=0;ke<Ce.length;ke++)Ce[ke].rowSpan++;return be.appendBogus(),fe.$.rowSpan=ve,be.$.rowSpan=Te,1==ve&&fe.removeAttribute("rowSpan"),1==Te&&be.removeAttribute("rowSpan"),be}function me(pe,he){var fe=$(pe);if(1<fe.length)return!1;if(he)return!0;var fe=fe[0],be=fe.getParent(),_e=be.getAscendant("table"),_e=CKEDITOR.tools.buildTableMap(_e),Ee=se(_e,be.$.rowIndex,fe),ye=fe.$.colSpan;if(1<ye)be=_Mathceil(ye/2),ye=_Mathfloor(ye/2);else{for(var ye=be=1,ke=[],Te=0,ve;Te<_e.length;Te++)ve=_e[Te],ke.push(ve[Ee]),1<ve[Ee].rowSpan&&(Te+=ve[Ee].rowSpan-1);for(_e=0;_e<ke.length;_e++)ke[_e].colSpan++}return _e=fe.clone(),_e.insertAfter(fe),_e.appendBogus(),fe.$.colSpan=be,_e.$.colSpan=ye,1==be&&fe.removeAttribute("colSpan"),1==ye&&_e.removeAttribute("colSpan"),_e}var ue=/^(?:td|th)$/,ge=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(pe){function he(ye){return CKEDITOR.tools.extend(ye||{},{contextSensitive:1,refresh:function(ke,Te){this.setState(Te.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function fe(ye,ke){var Te=pe.addCommand(ye,ke);pe.addFeature(Te)}var be=pe.lang.table,_e=CKEDITOR.tools.style.parse,Ee="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");fe("cellProperties",new CKEDITOR.dialogCommand("cellProperties",he({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:Ee,contentTransformations:[[{element:"td",left:function(ye){return ye.styles.background&&_e.background(ye.styles.background).color},right:function(ye){ye.styles["background-color"]=_e.background(ye.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(ye){return ye.attributes&&ye.attributes.valign},right:function(ye){ye.styles["vertical-align"]=ye.attributes.valign,delete ye.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(ye){return ye.styles&&ye.styles.height},right:function(ye){CKEDITOR.tools.array.forEach(ye.children,function(ke){ke.name in{td:1,th:1}&&(ke.attributes["cke-row-height"]=ye.styles.height)}),delete ye.styles.height}}],[{element:"td",check:"td{height}",left:function(ye){return(ye=ye.attributes)&&ye["cke-row-height"]},right:function(ye){ye.styles.height=ye.attributes["cke-row-height"],delete ye.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),fe("rowDelete",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),(ye=ee(ye))&&re(ye)}})),fe("rowInsertBefore",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),ye=$(ye),j(ye,!0)}})),fe("rowInsertAfter",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),ye=$(ye),j(ye)}})),fe("columnDelete",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),(ye=ae(ye))&&re(ye,!0)}})),fe("columnInsertBefore",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),ye=$(ye),ne(ye,!0)}})),fe("columnInsertAfter",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),ye=$(ye),ne(ye)}})),fe("cellDelete",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),le(ye)}})),fe("cellMerge",he({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(ye,ke){ke.cell=de(ye.getSelection()),re(ke.cell,!0)}})),fe("cellMergeRight",he({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(ye,ke){ke.cell=de(ye.getSelection(),"right"),re(ke.cell,!0)}})),fe("cellMergeDown",he({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(ye,ke){ke.cell=de(ye.getSelection(),"down"),re(ke.cell,!0)}})),fe("cellVerticalSplit",he({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(ye){re(me(ye.getSelection()))}})),fe("cellHorizontalSplit",he({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(ye){re(ce(ye.getSelection()))}})),fe("cellInsertBefore",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),ie(ye,!0)}})),fe("cellInsertAfter",he({requiredContent:"table",exec:function(ye){ye=ye.getSelection(),ie(ye)}})),pe.addMenuItems&&pe.addMenuItems({tablecell:{label:be.cell.menu,group:"tablecell",order:1,getItems:function(){var ye=pe.getSelection(),ke=$(ye),ye={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:de(ye,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:de(ye,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:de(ye,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:me(ye,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:ce(ye,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return pe.filter.check(Ee)&&(ye.tablecell_properties=0<ke.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),ye}},tablecell_insertBefore:{label:be.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:be.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:be.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:be.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:be.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:be.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:be.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:be.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:be.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:be.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:be.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:be.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:be.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:be.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:be.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:be.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:be.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),pe.contextMenu&&pe.contextMenu.addListener(function(ye,ke,Te){return(ye=Te.contains({td:1,th:1},1))&&!ye.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getCellColIndex:te,insertRow:j,insertColumn:ne,getSelectedCells:$},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function($,j,ee,te,oe){$=$.$.rows,ee=ee||0,te="number"==typeof te?te:$.length-1,oe="number"==typeof oe?oe:-1;var ne=-1,ae=[];for(j=j||0;j<=te;j++){ne++,ae[ne]||(ae[ne]=[]);for(var ie=-1,le=ee,re;le<=(-1===oe?$[j].cells.length-1:oe)&&(re=$[j].cells[le],!!re);le++){for(ie++;ae[ne][ie];)ie++;for(var se=isNaN(re.colSpan)?1:re.colSpan,re=isNaN(re.rowSpan)?1:re.rowSpan,de=0;de<re&&!(j+de>te);de++){ae[ne+de]||(ae[ne+de]=[]);for(var ce=0;ce<se;ce++)ae[ne+de][ie+ce]=$[j].cells[le]}if(ie+=se-1,-1!==oe&&ie>=oe)break}}return ae},function(){function $(ke){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(ke)}function j(ke,Te){var ve=ke.getAscendant("table"),Ce=Te.getAscendant("table"),Se=CKEDITOR.tools.buildTableMap(ve),Ne=re(ke),xe=re(Te),we=[],Ie={},Oe,Ae;for(ve.contains(Ce)&&(Te=Te.getAscendant({td:1,th:1}),xe=re(Te)),Ne>xe&&(ve=Ne,Ne=xe,xe=ve,ve=ke,ke=Te,Te=ve),ve=0;ve<Se[Ne].length;ve++)if(ke.$===Se[Ne][ve]){Oe=ve;break}for(ve=0;ve<Se[xe].length;ve++)if(Te.$===Se[xe][ve]){Ae=ve;break}for(Oe>Ae&&(ve=Oe,Oe=Ae,Ae=ve),ve=Ne;ve<=xe;ve++)for(Ne=Oe;Ne<=Ae;Ne++)Ce=new CKEDITOR.dom.element(Se[ve][Ne]),Ce.$&&!Ce.getCustomData("selected_cell")&&(we.push(Ce),CKEDITOR.dom.element.setMarker(Ie,Ce,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(Ie),we}function ee(ke){if(ke)return ke=ke.clone(),ke.enlarge(CKEDITOR.ENLARGE_ELEMENT),(ke=ke.getEnclosedNode())&&ke.is&&ke.is(CKEDITOR.dtd.$tableContent)}function te(ke){return(ke=ke.editable().findOne(".cke_table-faked-selection"))&&ke.getAscendant("table")}function oe(ke,Te){var ve=ke.editable().find(".cke_table-faked-selection"),Ce;for(ke.fire("lockSnapshot"),ke.editable().removeClass("cke_table-faked-selection-editor"),Ce=0;Ce<ve.count();Ce++)ve.getItem(Ce).removeClass("cke_table-faked-selection");0<ve.count()&&ve.getItem(0).getAscendant("table").data("cke-table-faked-selection-table",!1),ke.fire("unlockSnapshot"),Te&&(pe={active:!1},ke.getSelection().isInTable()&&ke.getSelection().reset())}function ne(ke,Te){var ve=[],Ce,Se;for(Se=0;Se<Te.length;Se++)Ce=ke.createRange(),Ce.setStartBefore(Te[Se]),Ce.setEndAfter(Te[Se]),ve.push(Ce);ke.getSelection().selectRanges(ve)}function ae(ke){var Te=ke.editable().find(".cke_table-faked-selection");1>Te.count()||(Te=j(Te.getItem(0),Te.getItem(Te.count()-1)),ne(ke,Te))}function ie(ke,Te,ve){var Ce=fe(ke.getSelection(!0));Te=Te.is("table")?null:Te;var Se;if((Se=pe.active&&!pe.first)&&!(Se=Te)&&(Se=ke.getSelection().getRanges(),Se=1<Ce.length||Se[0]&&!Se[0].collapsed),Se)pe.first=Te||Ce[0],pe.dirty=!Te&&1!==Ce.length;else if(pe.active&&Te&&pe.first.getAscendant("table").equals(Te.getAscendant("table"))){if(Ce=j(pe.first,Te),!pe.dirty&&1===Ce.length&&!$(ve.data.getTarget()))return oe(ke,"mouseup"===ve.name);pe.dirty=!0,pe.last=Te,ne(ke,Ce)}}function le(ke){var Te=(ke=ke.editor||ke.sender.editor)&&ke.getSelection(),ve=Te&&Te.getRanges()||[],Ce;if(Te&&(oe(ke),Te.isInTable()&&Te.isFake)){for(1===ve.length&&ve[0]._getTableElement()&&ve[0]._getTableElement().is("table")&&(Ce=ve[0]._getTableElement()),Ce=fe(Te,Ce),ke.fire("lockSnapshot"),Te=0;Te<Ce.length;Te++)Ce[Te].addClass("cke_table-faked-selection");0<Ce.length&&(ke.editable().addClass("cke_table-faked-selection-editor"),Ce[0].getAscendant("table").data("cke-table-faked-selection-table","")),ke.fire("unlockSnapshot")}}function re(ke){return ke.getAscendant("tr",!0).$.rowIndex}function se(ke){function Te(Ae,De){return Ae&&De&&(Ae.equals(De)||Ae.contains(De)||De.contains(Ae)||Ae.getCommonAncestor(De).is(Oe))}function ve(Ae){return!Ae.getAscendant("table",!0)&&Ae.getDocument().equals(Se.document)}function Ce(Ae,De,Re,Le){return"mousedown"!==Ae.name||CKEDITOR.tools.getMouseButton(Ae)!==CKEDITOR.MOUSE_BUTTON_LEFT&&Le?((De=Ae.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!ve(Ae.data.getTarget()))&&(Ae=Ae.data.getTarget().getAscendant({td:1,th:1},!0),De=!(Ae&&Ae.hasClass("cke_table-faked-selection"))),De):!0}if(ke.data.getTarget().getName&&("mouseup"===ke.name||!$(ke.data.getTarget()))){var Se=ke.editor||ke.listenerData.editor,Ne=Se.getSelection(1),xe=te(Se),we=ke.data.getTarget(),Ie=we&&we.getAscendant({td:1,th:1},!0),we=we&&we.getAscendant("table",!0),Oe={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};Ce(ke,Ne,xe,we)&&oe(Se,!0),!pe.active&&"mousedown"===ke.name&&CKEDITOR.tools.getMouseButton(ke)===CKEDITOR.MOUSE_BUTTON_LEFT&&we&&(pe={active:!0},CKEDITOR.document.on("mouseup",se,null,{editor:Se})),(Ie||we)&&ie(Se,Ie||we,ke),"mouseup"===ke.name&&(CKEDITOR.tools.getMouseButton(ke)===CKEDITOR.MOUSE_BUTTON_LEFT&&(ve(ke.data.getTarget())||Te(xe,we))&&ae(Se),pe={active:!1},CKEDITOR.document.removeListener("mouseup",se))}}function de(ke){var Te=ke.data.getTarget().getAscendant({td:1,th:1},!0);Te&&!Te.hasClass("cke_table-faked-selection")&&(ke.cancel(),ke.data.preventDefault())}function ce(ke,Te){var Ce=ke.getSelection(),Se=Ce.createBookmarks(),Ne=ke.document,xe=ke.createRange(),we=Ne.getDocumentElement().$,Ie=CKEDITOR.env.ie&&9>CKEDITOR.env.version,Oe=ke.blockless||CKEDITOR.env.ie?"span":"div",Ae,De,Re,Le;Ne.getById("cke_table_copybin")||(Ae=Ne.createElement(Oe),De=Ne.createElement(Oe),De.setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),Ae.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),Ae.setStyle("ltr"==ke.config.contentsLangDirection?"left":"right","-5000px"),Ae.setHtml(ke.getSelectedHtml(!0)),ke.fire("lockSnapshot"),De.append(Ae),ke.editable().append(De),Le=ke.on("selectionChange",function(Fe){Fe.cancel()},null,null,0),Ie&&(Re=we.scrollTop),xe.selectNodeContents(Ae),xe.select(),Ie&&(we.scrollTop=Re),setTimeout(function(){De.remove(),Ce.selectBookmarks(Se),Le.removeListener(),ke.fire("unlockSnapshot"),Te&&(ke.extractSelectedHtml(),ke.fire("saveSnapshot"))},100))}function me(ke){var Te=ke.editor||ke.sender.editor;Te.getSelection().isInTable()&&ce(Te,"cut"===ke.name)}function ue(ke){this._reset(),ke&&this.setSelectedCells(ke)}function ge(ke,Te,ve){ke.on("beforeCommandExec",function(Ce){-1!==CKEDITOR.tools.array.indexOf(Te,Ce.data.name)&&(Ce.data.selectedCells=fe(ke.getSelection()))}),ke.on("afterCommandExec",function(Ce){-1!==CKEDITOR.tools.array.indexOf(Te,Ce.data.name)&&ve(ke,Ce.data)})}var pe={active:!1},he,fe,be,_e,Ee;ue.prototype={},ue.prototype._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},ue.prototype.setSelectedCells=function(ke){this._reset(),ke=ke.slice(0),this._arraySortByDOMOrder(ke),this.cells.all=ke,this.cells.first=ke[0],this.cells.last=ke[ke.length-1],this.rows.first=ke[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},ue.prototype.getTableMap=function(){var ke=be(this.cells.first),Te;a:{Te=this.cells.last;var ve=Te.getAscendant("table"),Ce=re(Te),ve=CKEDITOR.tools.buildTableMap(ve),Se;for(Se=0;Se<ve[Ce].length;Se++)if(new CKEDITOR.dom.element(ve[Ce][Se]).equals(Te)){Te=Se;break a}Te=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),re(this.rows.first),ke,re(this.rows.last),Te)},ue.prototype._getTable=function(){return this.rows.first.getAscendant("table")},ue.prototype.insertRow=function(ke,Te,ve){if("undefined"==typeof ke)ke=1;else if(0>=ke)return;for(var Ce=this.cells.first.$.cellIndex,Se=this.cells.last.$.cellIndex,Ne=ve?[]:this.cells.all,we=0,xe;we<ke;we++)xe=_e(ve?this.cells.all:Ne,Te),xe=CKEDITOR.tools.array.filter(xe.find("td, th").toArray(),function(Ie){return!!ve||Ie.$.cellIndex>=Ce&&Ie.$.cellIndex<=Se}),Ne=Te?xe.concat(Ne):Ne.concat(xe);this.setSelectedCells(Ne)},ue.prototype.insertColumn=function(ke){function Te(xe){return xe=re(xe),xe>=Se&&xe<=Ne}if("undefined"==typeof ke)ke=1;else if(0>=ke)return;for(var ve=this.cells,Ce=ve.all,Se=re(ve.first),Ne=re(ve.last),ve=0;ve<ke;ve++)Ce=Ce.concat(CKEDITOR.tools.array.filter(Ee(Ce),Te));this.setSelectedCells(Ce)},ue.prototype.emptyCells=function(ke){ke=ke||this.cells.all;for(var Te=0;Te<ke.length;Te++)ke[Te].setHtml("")},ue.prototype._arraySortByDOMOrder=function(ke){ke.sort(function(Te,ve){return Te.getPosition(ve)&CKEDITOR.POSITION_PRECEDING?-1:1})};var ye={onPaste:function(ke){function Te(Ae){return _Mathmax.apply(null,CKEDITOR.tools.array.map(Ae,function(De){return De.length},0))}var Ce=ke.editor,Se=Ce.getSelection(),Ne=fe(Se),xe=this.findTableInPastedContent(Ce,ke.data.dataValue),we=Se.isInTable(!0)&&this.isBoundarySelection(Se),Ie,Oe;Ne.length&&(1!==Ne.length||ee(Se.getRanges()[0])||we)&&(!we||xe)&&(Ne=Ne[0].getAscendant("table"),Ie=new ue(fe(Se,Ne)),Ce.once("afterPaste",function(){var Ae;if(Oe){Ae=new CKEDITOR.dom.element(Oe[0][0]);var De=Oe[Oe.length-1];Ae=j(Ae,new CKEDITOR.dom.element(De[De.length-1]))}else Ae=Ie.cells.all;ne(Ce,Ae)}),xe?(ke.stop(),we?(Ie.insertRow(1,1===we,!0),Se.selectElement(Ie.rows.first)):(Ie.emptyCells(),ne(Ce,Ie.cells.all)),ke=Ie.getTableMap(),Oe=CKEDITOR.tools.buildTableMap(xe),Ie.insertRow(Oe.length-ke.length),Ie.insertColumn(Te(Oe)-Te(ke)),ke=Ie.getTableMap(),this.pasteTable(Ie,ke,Oe),Ce.fire("saveSnapshot"),setTimeout(function(){Ce.fire("afterPaste")},0)):(function(Ae){var De=Ce.createRange();De.selectNodeContents(Ae),De.select()}(Ie.cells.first),Ce.once("afterPaste",function(){Ce.fire("lockSnapshot"),Ie.emptyCells(Ie.cells.all.slice(1)),ne(Ce,Ie.cells.all),Ce.fire("unlockSnapshot")})))},isBoundarySelection:function(ke){ke=ke.getRanges()[0];var Te=ke.endContainer.getAscendant("tr",!0);if(Te&&ke.collapsed){if(ke.checkBoundaryOfElement(Te,CKEDITOR.START))return 1;if(ke.checkBoundaryOfElement(Te,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(ke,Te){var ve=ke.dataProcessor,Ce=new CKEDITOR.dom.element("body");return ve||(ve=new CKEDITOR.htmlDataProcessor(ke)),Ce.setHtml(ve.toHtml(Te),{fixForBody:!1}),1<Ce.getChildCount()?null:Ce.findOne("table")},pasteTable:function(ke,Te,ve){var Se=be(ke.cells.first),Ne=ke._getTable(),xe={},Ce,we,Ie,Oe,Ae;for(Oe=0;Oe<ve.length;Oe++)for(we=new CKEDITOR.dom.element(Ne.$.rows[ke.rows.first.$.rowIndex+Oe]),Ae=0;Ae<ve[Oe].length;Ae++)(Ie=new CKEDITOR.dom.element(ve[Oe][Ae]),Ce=Te[Oe]&&Te[Oe][Ae]?new CKEDITOR.dom.element(Te[Oe][Ae]):null,Ie&&!Ie.getCustomData("processed"))?(Ce&&Ce.getParent()?Ie.replace(Ce):(0===Ae||ve[Oe][Ae-1])&&((Ce=0===Ae?null:new CKEDITOR.dom.element(ve[Oe][Ae-1]))&&we.equals(Ce.getParent())?Ie.insertAfter(Ce):0<Se?we.$.cells[Se]?Ie.insertAfter(new CKEDITOR.dom.element(we.$.cells[Se])):we.append(Ie):we.append(Ie,!0)),CKEDITOR.dom.element.setMarker(xe,Ie,"processed",!0)):Ie.getCustomData("processed")&&Ce&&Ce.remove();CKEDITOR.dom.element.clearAllMarkers(xe)}};CKEDITOR.plugins.tableselection={getCellsBetween:j,keyboardIntegration:function(ke){function Te(Ce){var Se=Ce.getEnclosedNode();Se&&"function"==typeof Se.is&&Se.is({td:1,th:1})?Se.setText(""):Ce.deleteContents(),CKEDITOR.tools.array.forEach(Ce._find("td"),function(Ne){Ne.appendBogus()})}var ve=ke.editable();ve.attachListener(ve,"keydown",function(Ce){function Se(we,Ie){if(!Ie.length)return null;var Oe=Ce.createRange(),Ae=CKEDITOR.dom.range.mergeRanges(Ie);CKEDITOR.tools.array.forEach(Ae,function(Me){Me.enlarge(CKEDITOR.ENLARGE_ELEMENT)});var De=Ae[0].getBoundaryNodes(),Re=De.startNode,De=De.endNode;if(Re&&Re.is&&Re.is(xe)){for(var Le=Re.getAscendant("table",!0),Fe=Re.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,Le),Be=!1,Pe=function(Me){return!Re.contains(Me)&&Me.is&&Me.is("td","th")};Fe&&!Pe(Fe);)Fe=Fe.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,Le);return!Fe&&De&&De.is&&!De.is("table")&&De.getNext()&&(Fe=De.getNext().findOne("td, th"),Be=!0),Fe?Oe["moveToElementEdit"+(Be?"Start":"End")](Fe):(Oe.setStartBefore(Re.getAscendant("table",!0)),Oe.collapse(!0)),Ae[0].deleteContents(),[Oe]}return Re?(Oe.moveToElementEditablePosition(Re),[Oe]):void 0}var Ne={8:1,13:1,37:1,38:1,39:1,40:1,46:1},xe=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);return delete xe.td,delete xe.th,function(we){var Ie=we.data.getKey(),Oe=we.data.getKeystroke(),De=37===Ie||38==Ie,Ae,Re,Le,Fe;if(Ne[Ie]&&!Ce.readOnly&&(Ae=Ce.getSelection())&&Ae.isInTable()&&Ae.isFake)if(Re=Ae.getRanges(),Le=Re[0]._getTableElement(),Fe=Re[Re.length-1]._getTableElement(),(13!==Ie||Ce.plugins.enterkey)&&(we.data.preventDefault(),we.cancel()),36<Ie&&41>Ie)Re[0].moveToElementEditablePosition(De?Le:Fe,!De),Ae.selectRanges([Re[0]]);else if(13!==Ie||13===Oe||Oe===CKEDITOR.SHIFT+13){for(we=0;we<Re.length;we++)Te(Re[we]);(we=Se(Le,Re))?Re=we:Re[0].moveToElementEditablePosition(Le),Ae.selectRanges(Re),13===Ie&&Ce.plugins.enterkey?(Ce.fire("lockSnapshot"),13===Oe?Ce.execCommand("enter"):Ce.execCommand("shiftEnter"),Ce.fire("unlockSnapshot"),Ce.fire("saveSnapshot")):13!==Ie&&Ce.fire("saveSnapshot")}}}(ke),null,null,-1),ve.attachListener(ve,"keypress",function(Ce){var Se=ke.getSelection(),Ne=Ce.data.$.charCode||13===Ce.data.getKey(),xe;if(!ke.readOnly&&Se&&Se.isInTable()&&Se.isFake&&Ne&&!(Ce.data.getKeystroke()&CKEDITOR.CTRL)){for(Ce=Se.getRanges(),Ne=Ce[0].getEnclosedNode().getAscendant({td:1,th:1},!0),xe=0;xe<Ce.length;xe++)Te(Ce[xe]);Ne&&(Ce[0].moveToElementEditablePosition(Ne),Se.selectRanges([Ce[0]]))}},null,null,-1)},isSupportedEnvironment:!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",onLoad:function(){he=CKEDITOR.plugins.tabletools,fe=he.getSelectedCells,be=he.getCellColIndex,_e=he.insertRow,Ee=he.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(ke){CKEDITOR.plugins.tableselection.isSupportedEnvironment&&(ke.addContentsCss&&ke.addContentsCss(this.path+"styles/tableselection.css"),ke.on("contentDom",function(){var Te=ke.editable(),ve=Te.isInline()?Te:ke.document,Ce={editor:ke};Te.attachListener(ve,"mousedown",se,null,Ce),Te.attachListener(ve,"mousemove",se,null,Ce),Te.attachListener(ve,"mouseup",se,null,Ce),Te.attachListener(Te,"dragstart",de),Te.attachListener(ke,"selectionCheck",le),CKEDITOR.plugins.tableselection.keyboardIntegration(ke),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(Te.attachListener(Te,"cut",me),Te.attachListener(Te,"copy",me))}),ke.on("paste",ye.onPaste,ye),ge(ke,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),function(Te,ve){ne(Te,ve.selectedCells)}),ge(ke,["cellMerge","cellMergeRight","cellMergeDown"],function(Te,ve){ne(Te,[ve.commandData.cell])}),ge(ke,["cellDelete"],function(Te){oe(Te,!0)}))}})}(),function(){var $=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],j={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(ie){function le(ue){se.enabled&&!1!==ue.data.command.canUndo&&se.save()}function re(){se.enabled=!ie.readOnly&&"wysiwyg"==ie.mode,se.onChange()}var se=ie.undoManager=new ee(ie),de=se.editingHandler=new ne(se),ce=ie.addCommand("undo",{exec:function(){se.undo()&&(ie.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),me=ie.addCommand("redo",{exec:function(){se.redo()&&(ie.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});ie.setKeystroke([[$[0],"undo"],[$[1],"redo"],[$[2],"redo"]]),se.onChange=function(){ce.setState(se.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),me.setState(se.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},ie.on("beforeCommandExec",le),ie.on("afterCommandExec",le),ie.on("saveSnapshot",function(ue){se.save(ue.data&&ue.data.contentOnly)}),ie.on("contentDom",de.attachListeners,de),ie.on("instanceReady",function(){ie.fire("saveSnapshot")}),ie.on("beforeModeUnload",function(){"wysiwyg"==ie.mode&&se.save(!0)}),ie.on("mode",re),ie.on("readOnly",re),ie.ui.addButton&&(ie.ui.addButton("Undo",{label:ie.lang.undo.undo,command:"undo",toolbar:"undo,10"}),ie.ui.addButton("Redo",{label:ie.lang.undo.redo,command:"redo",toolbar:"undo,20"})),ie.resetUndo=function(){se.reset(),ie.fire("saveSnapshot")},ie.on("updateSnapshot",function(){se.currentImage&&se.update()}),ie.on("lockSnapshot",function(ue){ue=ue.data,se.lock(ue&&ue.dontUpdate,ue&&ue.forceUpdate)}),ie.on("unlockSnapshot",se.unlock,se)}}),CKEDITOR.plugins.undo={};var ee=CKEDITOR.plugins.undo.UndoManager=function(ie){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=ie.config.undoStackSize||20,this.strokesLimit=25,this.editor=ie,this.reset()};ee.prototype={type:function(ie,le){var re=ee.getKeyGroup(ie),se=this.strokesRecorded[re]+1;le=le||se>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),le?(se=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[re]=se,this.previousKeyGroup=re},keyGroupChanged:function(ie){return ee.getKeyGroup(ie)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(ie,le,re){var se=this.editor;if(this.locked||"ready"!=se.status||"wysiwyg"!=se.mode)return!1;var de=se.editable();if(!de||"ready"!=de.status)return!1;if(de=this.snapshots,le||(le=new te(se)),!1===le.contents)return!1;if(this.currentImage)if(!le.equalsContent(this.currentImage))!1!==re&&se.fire("change");else if(ie||le.equalsSelection(this.currentImage))return!1;return de.splice(this.index+1,de.length-this.index-1),de.length==this.limit&&de.shift(),this.index=de.push(le)-1,this.currentImage=le,!1!==re&&this.refreshState(),!0},restoreImage:function(ie){var le=this.editor,re;ie.bookmarks&&(le.focus(),re=le.getSelection()),this.locked={level:999},this.editor.loadSnapshot(ie.contents),ie.bookmarks?re.selectBookmarks(ie.bookmarks):CKEDITOR.env.ie&&(re=this.editor.document.getBody().$.createTextRange(),re.collapse(!0),re.select()),this.locked=null,this.index=ie.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),le.fire("change")},getNextImage:function(ie){var le=this.snapshots,re=this.currentImage,se;if(re)if(ie){for(se=this.index-1;0<=se;se--)if(ie=le[se],!re.equalsContent(ie))return ie.index=se,ie;}else for(se=this.index+1;se<le.length;se++)if(ie=le[se],!re.equalsContent(ie))return ie.index=se,ie;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var ie=this.getNextImage(!0);if(ie)return this.restoreImage(ie),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var ie=this.getNextImage(!1);if(ie)return this.restoreImage(ie),!0}return!1},update:function(ie){if(!this.locked){ie||(ie=new te(this.editor));for(var le=this.index,re=this.snapshots;0<le&&this.currentImage.equalsContent(re[le-1]);)--le;re.splice(le,this.index-le+1,ie),this.index=le,this.currentImage=ie}},updateSelection:function(ie){if(!this.snapshots.length)return!1;var le=this.snapshots,re=le[le.length-1];return re.equalsContent(ie)&&!re.equalsSelection(ie)&&(this.currentImage=le[le.length-1]=ie,!0)},lock:function(ie,le){if(this.locked)this.locked.level++;else if(ie)this.locked={level:1};else{var re=null;if(le)re=!0;else{var se=new te(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(se)&&(re=se)}this.locked={update:re,level:1}}},unlock:function(){if(this.locked&&! --this.locked.level){var ie=this.locked.update;if(this.locked=null,!0===ie)this.update();else if(ie){var le=new te(this.editor,!0);ie.equalsContent(le)||this.update()}}}},ee.navigationKeyCodes={33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1},ee.keyGroups={PRINTABLE:0,FUNCTIONAL:1},ee.isNavigationKey=function(ie){return!!ee.navigationKeyCodes[ie]},ee.getKeyGroup=function(ie){var le=ee.keyGroups;return j[ie]?le.FUNCTIONAL:le.PRINTABLE},ee.getOppositeKeyGroup=function(ie){var le=ee.keyGroups;return ie==le.FUNCTIONAL?le.PRINTABLE:le.FUNCTIONAL},ee.ieFunctionalKeysBug=function(ie){return CKEDITOR.env.ie&&ee.getKeyGroup(ie)==ee.keyGroups.FUNCTIONAL};var te=CKEDITOR.plugins.undo.Image=function(ie,le){this.editor=ie,ie.fire("beforeUndoImage");var re=ie.getSnapshot();CKEDITOR.env.ie&&re&&(re=re.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=re,le||(this.bookmarks=(re=re&&ie.getSelection())&&re.createBookmarks2(!0)),ie.fire("afterUndoImage")},oe=/\b(?:href|src|name)="[^"]*?"/gi;te.prototype={equalsContent:function(ie){var le=this.contents;return ie=ie.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(le=le.replace(oe,""),ie=ie.replace(oe,"")),le==ie},equalsSelection:function(ie){var le=this.bookmarks;if(ie=ie.bookmarks,le||ie){if(!le||!ie||le.length!=ie.length)return!1;for(var re=0;re<le.length;re++){var se=le[re],de=ie[re];if(se.startOffset!=de.startOffset||se.endOffset!=de.endOffset||!CKEDITOR.tools.arrayCompare(se.start,de.start)||!CKEDITOR.tools.arrayCompare(se.end,de.end))return!1}}return!0}};var ne=CKEDITOR.plugins.undo.NativeEditingHandler=function(ie){this.undoManager=ie,this.ignoreInputEvent=!1,this.keyEventsStack=new ae,this.lastKeydownImage=null};ne.prototype={onKeydown:function(ie){var le=ie.data.getKey();229!==le&&(-1<CKEDITOR.tools.indexOf($,ie.data.getKeystroke())?ie.data.preventDefault():(this.keyEventsStack.cleanUp(ie),ie=this.undoManager,this.keyEventsStack.getLast(le)||this.keyEventsStack.push(le),this.lastKeydownImage=new te(ie.editor),ee.isNavigationKey(le)||this.undoManager.keyGroupChanged(le))&&(ie.strokesRecorded[0]||ie.strokesRecorded[1])&&(ie.save(!1,this.lastKeydownImage,!1),ie.resetType()))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var ie=this.keyEventsStack.getLast();ie||(ie=this.keyEventsStack.push(0)),this.keyEventsStack.increment(ie.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(ie.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(ie){var le=this.undoManager;ie=ie.data.getKey();var re=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(ie),ee.ieFunctionalKeysBug(ie)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new te(le.editor,!0))||(0<re?le.type(ie):ee.isNavigationKey(ie)&&this.onNavigationKey(!0))},onNavigationKey:function(ie){var le=this.undoManager;!ie&&le.save(!0,null,!1)||le.updateSelection(new te(le.editor)),le.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var ie=this.undoManager.editor,le=ie.editable(),re=this;le.attachListener(le,"keydown",function(se){re.onKeydown(se),ee.ieFunctionalKeysBug(se.data.getKey())&&re.onInput()},null,null,999),le.attachListener(le,CKEDITOR.env.ie?"keypress":"input",re.onInput,re,null,999),le.attachListener(le,"keyup",re.onKeyup,re,null,999),le.attachListener(le,"paste",re.ignoreInputEventListener,re,null,999),le.attachListener(le,"drop",re.ignoreInputEventListener,re,null,999),ie.on("afterPaste",re.activateInputEventListener,re,null,999),le.attachListener(le.isInline()?le:ie.document.getDocumentElement(),"click",function(){re.onNavigationKey()},null,null,999),le.attachListener(this.undoManager.editor,"blur",function(){re.keyEventsStack.remove(9)},null,null,999)}};var ae=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};ae.prototype={push:function(ie){return ie=this.stack.push({keyCode:ie,inputs:0}),this.stack[ie-1]},getLastIndex:function(ie){if("number"!=typeof ie)return this.stack.length-1;for(var le=this.stack.length;le--;)if(this.stack[le].keyCode==ie)return le;return-1},getLast:function(ie){return ie=this.getLastIndex(ie),-1==ie?null:this.stack[ie]},increment:function(ie){this.getLast(ie).inputs++},remove:function(ie){ie=this.getLastIndex(ie),-1!=ie&&this.stack.splice(ie,1)},resetInputs:function(ie){if("number"==typeof ie)this.getLast(ie).inputs=0;else for(ie=this.stack.length;ie--;)this.stack[ie].inputs=0},getTotalInputs:function(){for(var ie=this.stack.length,le=0;ie--;)le+=this.stack[ie].inputs;return le},cleanUp:function(ie){ie=ie.data.$,ie.ctrlKey||ie.metaKey||this.remove(17),ie.shiftKey||this.remove(16),ie.altKey||this.remove(18)}}}(),function(){function $(le,re){CKEDITOR.tools.extend(this,{editor:le,editable:le.editable(),doc:le.document,win:le.window},re,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function j(le,re){CKEDITOR.tools.extend(this,re,{editor:le},!0)}function ee(le,re){var se=le.editable();CKEDITOR.tools.extend(this,{editor:le,editable:se,inline:se.isInline(),doc:le.document,win:le.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},re,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var de=CKEDITOR.tools.bind(this.queryViewport,this),ce=CKEDITOR.tools.bind(this.hideVisible,this),me=CKEDITOR.tools.bind(this.removeAll,this);se.attachListener(this.winTop,"resize",de),se.attachListener(this.winTop,"scroll",de),se.attachListener(this.winTop,"resize",ce),se.attachListener(this.win,"scroll",ce),se.attachListener(this.inline?se:this.frame,"mouseout",function(ue){var ge=ue.data.$.clientX;ue=ue.data.$.clientY,this.queryViewport(),(ge<=this.rect.left||ge>=this.rect.right||ue<=this.rect.top||ue>=this.rect.bottom)&&this.hideVisible(),(0>=ge||ge>=this.winTopPane.width||0>=ue||ue>=this.winTopPane.height)&&this.hideVisible()},this),se.attachListener(le,"resize",de),se.attachListener(le,"mode",me),le.on("destroy",me),this.lineTpl=new CKEDITOR.template("<div data-cke-lineutils-line=\"1\" class=\"cke_reset_all\" style=\"{lineStyle}\"><span style=\"{tipLeftStyle}\">&nbsp;</span><span style=\"{tipRightStyle}\">&nbsp;</span></div>").output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},ne,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},oe,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},oe,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function te(le){var re;return(re=le&&le.type==CKEDITOR.NODE_ELEMENT)&&(re=!(ae[le.getComputedStyle("float")]||ae[le.getAttribute("align")])),re&&!ie[le.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,$.prototype={start:function(le){var re=this,se=this.editor,de=this.doc,pe=CKEDITOR.tools.eventsBuffer(50,function(){se.readOnly||"wysiwyg"!=se.mode||(re.relations={},(me=de.$.elementFromPoint(ue,ge))&&me.nodeType&&(ce=new CKEDITOR.dom.element(me),re.traverseSearch(ce),isNaN(ue+ge)||re.pixelSearch(ce,ue,ge),le&&le(re.relations,ue,ge)))}),ce,me,ue,ge;this.listener=this.editable.attachListener(this.target,"mousemove",function(he){ue=he.data.$.clientX,ge=he.data.$.clientY,pe.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){pe.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var le={};return le[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,le[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,le[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(re){var se=this.editor.createRange();return se.moveToPosition(this.relations[re.uid].element,le[re.type]),se}}(),store:function(){function le(re,se,de){var ce=re.getUniqueId();ce in de?de[ce].type|=se:de[ce]={element:re,type:se}}return function(re,se){var de;se&CKEDITOR.LINEUTILS_AFTER&&te(de=re.getNext())&&de.isVisible()&&(le(de,CKEDITOR.LINEUTILS_BEFORE,this.relations),se^=CKEDITOR.LINEUTILS_AFTER),se&CKEDITOR.LINEUTILS_INSIDE&&te(de=re.getFirst())&&de.isVisible()&&(le(de,CKEDITOR.LINEUTILS_BEFORE,this.relations),se^=CKEDITOR.LINEUTILS_INSIDE),le(re,se,this.relations)}}(),traverseSearch:function(le){var re,se,de;do if(de=le.$["data-cke-expando"],!(de&&de in this.relations)){if(le.equals(this.editable))break;if(te(le))for(re in this.lookups)(se=this.lookups[re](le))&&this.store(le,se)}while((!le||le.type!=CKEDITOR.NODE_ELEMENT||"true"!=le.getAttribute("contenteditable"))&&(le=le.getParent()))},pixelSearch:function(){function le(se,de,ce,me,ue){for(var ge=0,pe;ue(ce)&&(ce+=me,25!=++ge);)if(pe=this.doc.$.elementFromPoint(de,ce))if(pe==se)ge=0;else if(re(se,pe)&&(ge=0,te(pe=new CKEDITOR.dom.element(pe))))return pe}var re=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(se,de){return se.contains(de)}:function(se,de){return!!(16&se.compareDocumentPosition(de))};return function(se,de,ce){var me=this.win.getViewPaneSize().height,ue=le.call(this,se.$,de,ce,-1,function(ge){return 0<ge});if(de=le.call(this,se.$,de,ce,1,function(ge){return ge<me}),ue)for(this.traverseSearch(ue);!ue.getParent().equals(se);)ue=ue.getParent();if(de)for(this.traverseSearch(de);!de.getParent().equals(se);)de=de.getParent();for(;(ue||de)&&(ue&&(ue=ue.getNext(te)),ue&&!ue.equals(de))&&(this.traverseSearch(ue),de&&(de=de.getPrevious(te)),de&&!de.equals(ue));)this.traverseSearch(de)}}(),greedySearch:function(){this.relations={};for(var le=this.editable.getElementsByTag("*"),re=0,se,de,ce;se=le.getItem(re++);)if(!se.equals(this.editable)&&se.type==CKEDITOR.NODE_ELEMENT&&(se.hasAttribute("contenteditable")||!se.isReadOnly())&&te(se)&&se.isVisible())for(ce in this.lookups)(de=this.lookups[ce](se))&&this.store(se,de);return this.relations}},j.prototype={locate:function(){function le(re,se){var de=re.element[se===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return de&&te(de)?(re.siblingRect=de.getClientRect(),se==CKEDITOR.LINEUTILS_BEFORE?(re.siblingRect.bottom+re.elementRect.top)/2:(re.elementRect.bottom+re.siblingRect.top)/2):se==CKEDITOR.LINEUTILS_BEFORE?re.elementRect.top:re.elementRect.bottom}return function(re){var se;for(var de in this.locations={},re)se=re[de],se.elementRect=se.element.getClientRect(),se.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(de,CKEDITOR.LINEUTILS_BEFORE,le(se,CKEDITOR.LINEUTILS_BEFORE)),se.type&CKEDITOR.LINEUTILS_AFTER&&this.store(de,CKEDITOR.LINEUTILS_AFTER,le(se,CKEDITOR.LINEUTILS_AFTER)),se.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(de,CKEDITOR.LINEUTILS_INSIDE,(se.elementRect.top+se.elementRect.bottom)/2);return this.locations}}(),sort:function(){var le,re,se,de;return function(ce,me){for(var ue in le=this.locations,re=[],le)for(var ge in le[ue])if(se=_Mathabs(ce-le[ue][ge]),re.length){for(de=0;de<re.length;de++)if(se<re[de].dist){re.splice(de,0,{uid:+ue,type:ge,dist:se});break}de==re.length&&re.push({uid:+ue,type:ge,dist:se})}else re.push({uid:+ue,type:ge,dist:se});return"undefined"==typeof me?re:re.slice(0,me)}}(),store:function(le,re,se){this.locations[le]||(this.locations[le]={}),this.locations[le][re]=se}};var oe={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},ne={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};ee.prototype={removeAll:function(){for(var le in this.hidden)this.hidden[le].remove(),delete this.hidden[le];for(le in this.visible)this.visible[le].remove(),delete this.visible[le]},hideLine:function(le){var re=le.getUniqueId();le.hide(),this.hidden[re]=le,delete this.visible[re]},showLine:function(le){var re=le.getUniqueId();le.show(),this.visible[re]=le,delete this.hidden[re]},hideVisible:function(){for(var le in this.visible)this.hideLine(this.visible[le])},placeLine:function(le,re){var se,de,ce;if(se=this.getStyle(le.uid,le.type)){for(ce in this.visible)if(this.visible[ce].getCustomData("hash")!==this.hash){de=this.visible[ce];break}if(!de)for(ce in this.hidden)if(this.hidden[ce].getCustomData("hash")!==this.hash){this.showLine(de=this.hidden[ce]);break}de||this.showLine(de=this.addLine()),de.setCustomData("hash",this.hash),this.visible[de.getUniqueId()]=de,de.setStyles(se),re&&re(de)}},getStyle:function(le,re){var se=this.relations[le],de=this.locations[le][re],ce={};if(ce.width=se.siblingRect?_Mathmax(se.siblingRect.width,se.elementRect.width):se.elementRect.width,ce.top=this.inline?de+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+de,ce.top-this.winTopScroll.y<this.rect.top||ce.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var me in this.inline?ce.left=se.elementRect.left-this.rect.relativeX:(0<se.elementRect.left?ce.left=this.rect.left+se.elementRect.left:(ce.width+=se.elementRect.left,ce.left=this.rect.left),0<(se=ce.left+ce.width-(this.rect.left+this.winPane.width))&&(ce.width-=se)),ce.left+=this.winTopScroll.x,ce)ce[me]=CKEDITOR.tools.cssLength(ce[me]);return ce},addLine:function(){var le=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return le.appendTo(this.container),le},prepare:function(le,re){this.relations=le,this.locations=re,this.hash=Math.random()},cleanup:function(){var le,re;for(re in this.visible)le=this.visible[re],le.getCustomData("hash")!==this.hash&&this.hideLine(le)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(le){le=le.getClientRect();var re=this.container.getDocumentPosition(),se=this.container.getComputedStyle("position");return le.relativeX=le.relativeY=0,"static"!=se&&(le.relativeY=re.y,le.relativeX=re.x,le.top-=le.relativeY,le.bottom-=le.relativeY,le.left-=le.relativeX,le.right-=le.relativeX),le}};var ae={left:1,right:1,center:1},ie={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:$,locator:j,liner:ee}}(),function(){function $(j){return j.getName&&!j.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(j){if(CKEDITOR.env.webkit){var ee=CKEDITOR.plugins.widgetselection;j.on("contentDom",function(te){te=te.editor;var oe=te.editable();oe.attachListener(oe,"keydown",function(ne){ne.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout(function(){ee.addFillers(oe)||ee.removeFillers(oe)},0)},null,null,-1),te.on("selectionCheck",function(ne){ee.removeFillers(ne.editor.editable())}),te.on("paste",function(ne){ne.data.dataValue=ee.cleanPasteData(ne.data.dataValue)}),"selectall"in te.plugins&&ee.addSelectAllIntegration(te)})}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(j){var ee=j.editor;if(!this.isWholeContentSelected(j)&&0<j.getChildCount()){var te=j.getFirst($),oe=j.getLast($);if(te&&te.type==CKEDITOR.NODE_ELEMENT&&!te.isEditable()&&(this.startFiller=this.createFiller(),j.append(this.startFiller,1)),oe&&oe.type==CKEDITOR.NODE_ELEMENT&&!oe.isEditable()&&(this.endFiller=this.createFiller(!0),j.append(this.endFiller,0)),this.hasFiller(j))return ee=ee.createRange(),ee.selectNodeContents(j),ee.select(),!0}return!1},removeFillers:function(j){if(this.hasFiller(j)&&!this.isWholeContentSelected(j)){var ee=j.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),te=j.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&ee&&this.startFiller.equals(ee)?this.removeFiller(this.startFiller,j):this.startFiller=ee,this.endFiller&&te&&this.endFiller.equals(te)?this.removeFiller(this.endFiller,j):this.endFiller=te}},cleanPasteData:function(j){return j&&j.length&&(j=j.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),j},isWholeContentSelected:function(j){var ee=j.editor.getSelection().getRanges()[0];return!ee||ee&&ee.collapsed?!1:(ee=ee.clone(),ee.enlarge(CKEDITOR.ENLARGE_ELEMENT),!!(ee&&j&&ee.startContainer&&ee.endContainer&&0===ee.startOffset&&ee.endOffset===j.getChildCount()&&ee.startContainer.equals(j)&&ee.endContainer.equals(j)))},hasFiller:function(j){return 0<j.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(j){var ee=new CKEDITOR.dom.element(this.fillerTagName);return ee.setHtml(this.fillerContent),ee.setAttribute(this.fillerAttribute,j?"end":"start"),ee.setAttribute("data-cke-temp",1),ee.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),ee},removeFiller:function(j,ee){if(j){var te=ee.editor,oe=ee.editor.getSelection().getRanges()[0].startPath(),ne=te.createRange(),ae,ie;oe.contains(j)&&(ae=j.getHtml(),ie=!0),oe="start"==j.getAttribute(this.fillerAttribute),j.remove(),ae&&0<ae.length&&ae!=this.fillerContent?(ee.insertHtmlIntoRange(ae,te.getSelection().getRanges()[0]),ne.setStartAt(ee.getChild(ee.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),te.getSelection().selectRanges([ne])):ie&&(oe?ne.setStartAt(ee.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):ne.setEndAt(ee.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),ee.editor.getSelection().selectRanges([ne]))}},createFillerRegex:function(j){var ee=this.createFiller(j).getOuterHtml().replace(/style="[^"]*"/gi,"style=\"[^\"]*\"").replace(/>[^<]*</gi,">[^<]*<");return new RegExp((j?"":"^")+ee+(j?"$":""))},addSelectAllIntegration:function(j){var ee=this;j.editable().attachListener(j,"beforeCommandExec",function(te){var oe=j.editable();"selectAll"==te.data.name&&oe&&ee.addFillers(oe)},null,null,9999)}}}(),function(){function $(je){this.editor=je,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},ve(this),Te(this),this.on("checkWidgets",ae),this.editor.on("contentDomInvalidated",this.checkWidgets,this),ke(this),_e(this),Ee(this),be(this),ye(this)}function j(je,Ve,Ke,We,Ge){var Xe=je.editor;CKEDITOR.tools.extend(this,We,{editor:Xe,id:Ve,inline:"span"==Ke.getParent().getName(),element:Ke,data:CKEDITOR.tools.extend({},"function"==typeof We.defaults?We.defaults():We.defaults),dataReady:!1,inited:!1,ready:!1,edit:j.prototype.edit,focusedEditable:null,definition:We,repository:je,draggable:!1!==We.draggable,_:{downcastFn:We.downcast&&"string"==typeof We.downcast?We.downcasts[We.downcast]:We.downcast}},!0),je.fire("instanceCreated",this),Me(this,We),this.init&&this.init(),this.inited=!0,(je=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(je))),Ge&&this.setData(Ge),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,He(this),this.fire("data",this.data),this.isInited()&&Xe.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function ee(je,Ve,Ke){CKEDITOR.dom.element.call(this,Ve.$),this.editor=je,this._={},Ve=this.filter=Ke.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=Ve?Ve.getAllowedEnterMode(je.enterMode):je.enterMode,this.shiftEnterMode=Ve?Ve.getAllowedEnterMode(je.shiftEnterMode,!0):je.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function te(je,Ve){je.addCommand(Ve.name,{exec:function(Ke,We){function Ge(){Ke.widgets.finalizeCreation(Je)}var Xe=Ke.widgets.focused;if(Xe&&Xe.name==Ve.name)Xe.edit();else if(Ve.insert)Ve.insert({editor:Ke,commandData:We});else if(Ve.template){var Xe="function"==typeof Ve.defaults?Ve.defaults():Ve.defaults,Xe=CKEDITOR.dom.element.createFromHtml(Ve.template.output(Xe)),Ze=Ke.widgets.wrapElement(Xe,Ve.name),Je=new CKEDITOR.dom.documentFragment(Ze.getDocument()),Ye;Je.append(Ze),(Ye=Ke.widgets.initOn(Xe,Ve,We&&We.startupData))?(Xe=Ye.once("edit",function(Qe){Qe.data.dialog?Ye.once("dialog",function(et){et=et.data;var tt,ot;tt=et.once("ok",Ge,null,null,20),ot=et.once("cancel",function(nt){nt.data&&!1===nt.data.hide||Ke.widgets.destroy(Ye,!0)}),et.once("hide",function(){tt.removeListener(),ot.removeListener()})}):Ge()},null,null,999),Ye.edit(),Xe.removeListener()):Ge()}},allowedContent:Ve.allowedContent,requiredContent:Ve.requiredContent,contentForms:Ve.contentForms,contentTransformations:Ve.contentTransformations})}function oe(je,Ve){function We(Ye,Ze,Je){var Qe=CKEDITOR.tools.getIndex(je._.upcasts,function(et){return et[2]>Je});0>Qe&&(Qe=je._.upcasts.length),je._.upcasts.splice(Qe,0,[CKEDITOR.tools.bind(Ye,Ze),Ze.name,Je])}var Ge=Ve.upcast,Xe=Ve.upcastPriority||10;Ge&&("string"==typeof Ge?We(function(Ye,Ze){var Je=Ve.upcast.split(","),Qe,et;for(et=0;et<Je.length;et++)if(Qe=Je[et],Qe===Ye.name)return Ve.upcasts[Qe].call(this,Ye,Ze);return!1},Ve,Xe):We(Ge,Ve,Xe))}function ne(je,Ve){if(je.focused=null,Ve.isInited()){var Ke=Ve.editor.checkDirty();je.fire("widgetBlurred",{widget:Ve}),Ve.setFocused(!1),Ke||Ve.editor.resetDirty()}}function ae(je){if(je=je.data,"wysiwyg"==this.editor.mode){var Ve=this.editor.editable(),Ke=this.instances,We,Ge,Xe,Ye;if(Ve){for(We in Ke)Ke[We].isReady()&&!Ve.contains(Ke[We].wrapper)&&this.destroy(Ke[We],!0);if(je&&je.initOnlyNew)Ke=this.initOnAll();else{var Ze=Ve.find(".cke_widget_wrapper"),Ke=[];for(We=0,Ge=Ze.count();We<Ge;We++){if(Xe=Ze.getItem(We),Ye=!this.getByElement(Xe,!0)){a:{Ye=ge;for(var Je=Xe;Je=Je.getParent();)if(Ye(Je)){Ye=!0;break a}Ye=!1}Ye=!Ye}Ye&&Ve.contains(Xe)&&(Xe.addClass("cke_widget_new"),Ke.push(this.initOn(Xe.getFirst(j.isDomWidgetElement))))}}je&&je.focusInited&&1==Ke.length&&Ke[0].focus()}}}function ie(je){if("undefined"!=typeof je.attributes&&je.attributes["data-widget"]){var Ve=le(je),Ke=re(je),We=!1;Ve&&Ve.value&&Ve.value.match(/^\s/g)&&(Ve.parent.attributes["data-cke-white-space-first"]=1,Ve.value=Ve.value.replace(/^\s/g,"&nbsp;"),We=!0),Ke&&Ke.value&&Ke.value.match(/\s$/g)&&(Ke.parent.attributes["data-cke-white-space-last"]=1,Ke.value=Ke.value.replace(/\s$/g,"&nbsp;"),We=!0),We&&(je.attributes["data-cke-widget-white-space"]=1)}}function le(je){return je.find(function(Ve){return 3===Ve.type},!0).shift()}function re(je){return je.find(function(Ve){return 3===Ve.type},!0).pop()}function se(je,Ve,Ke){if(!Ke.allowedContent&&!Ke.disallowedContent)return null;var We=this._.filters[je];return We||(this._.filters[je]=We={}),je=We[Ve],je||(je=Ke.allowedContent?new CKEDITOR.filter(Ke.allowedContent):this.editor.filter.clone(),We[Ve]=je,Ke.disallowedContent&&je.disallow(Ke.disallowedContent)),je}function de(je){var Ve=[],Ke=je._.upcasts,We=je._.upcastCallbacks;return{toBeWrapped:Ve,iterator:function(Ge){var Xe,Ye,Ze,Je,Qe;if("data-cke-widget-wrapper"in Ge.attributes)return(Ge=Ge.getFirst(j.isParserWidgetElement))&&Ve.push([Ge]),!1;if("data-widget"in Ge.attributes)return Ve.push([Ge]),!1;if(Qe=Ke.length){if(Ge.attributes["data-cke-widget-upcasted"])return!1;for(Je=0,Xe=We.length;Je<Xe;++Je)if(!1===We[Je](Ge))return;for(Je=0;Je<Qe;++Je)if(Xe=Ke[Je],Ze={},Ye=Xe[0](Ge,Ze))return Ye instanceof CKEDITOR.htmlParser.element&&(Ge=Ye),Ge.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(Ze)),Ge.attributes["data-cke-widget-upcasted"]=1,Ve.push([Ge,Xe[1]]),!1}}}}function ce(je,Ve){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(je?"inline":"block")+(Ve?" cke_widget_"+Ve:"")}}function me(je,Ve,Ke){if(je.type==CKEDITOR.NODE_ELEMENT){var We=CKEDITOR.dtd[je.name];if(We&&!We[Ke.name]){var We=je.split(Ve),Ge=je.parent;return Ve=We.getIndex(),je.children.length||(--Ve,je.remove()),We.children.length||We.remove(),me(Ge,Ve,Ke)}}je.add(Ke,Ve)}function ue(je,Ve){return"boolean"==typeof je.inline?je.inline:!!CKEDITOR.dtd.$inline[Ve]}function ge(je){return je.hasAttribute("data-cke-temp")}function pe(je,Ve,Ke,We){var Ge=je.editor;Ge.fire("lockSnapshot"),Ke?(We=Ke.data("cke-widget-editable"),We=Ve.editables[We],je.widgetHoldingFocusedEditable=Ve,Ve.focusedEditable=We,Ke.addClass("cke_widget_editable_focused"),We.filter&&Ge.setActiveFilter(We.filter),Ge.setActiveEnterMode(We.enterMode,We.shiftEnterMode)):(We||Ve.focusedEditable.removeClass("cke_widget_editable_focused"),Ve.focusedEditable=null,je.widgetHoldingFocusedEditable=null,Ge.setActiveFilter(null),Ge.setActiveEnterMode(null,null)),Ge.fire("unlockSnapshot")}function he(je){je.contextMenu&&je.contextMenu.addListener(function(Ve){if(Ve=je.widgets.getByElement(Ve,!0))return Ve.fire("contextMenu",{})})}function fe(je,Ve){return CKEDITOR.tools.trim(Ve)}function be(je){var Ve=je.editor,Ke=CKEDITOR.plugins.lineutils;Ve.on("dragstart",function(We){var Ge=We.data.target;j.isDomDragHandler(Ge)&&(Ge=je.getByElement(Ge),We.data.dataTransfer.setData("cke/widget-id",Ge.id),Ve.focus(),Ge.focus())}),Ve.on("drop",function(We){var Ge=We.data.dataTransfer,Xe=Ge.getData("cke/widget-id"),Ye=Ge.getTransferType(Ve),Ge=Ve.createRange();""!==Xe&&Ye===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?We.cancel():""!==Xe&&Ye==CKEDITOR.DATA_TRANSFER_INTERNAL&&(Xe=je.instances[Xe])&&(Ge.setStartBefore(Xe.wrapper),Ge.setEndAfter(Xe.wrapper),We.data.dragRange=Ge,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,We.data.dataTransfer.setData("text/html",Ve.editable().getHtmlFromRange(Ge).getHtml()),Ve.widgets.destroy(Xe,!0))}),Ve.on("contentDom",function(){var We=Ve.editable();CKEDITOR.tools.extend(je,{finder:new Ke.finder(Ve,{lookups:{default:function(Ge){if(!Ge.is(CKEDITOR.dtd.$listItem)&&Ge.is(CKEDITOR.dtd.$block)&&!j.isDomNestedEditable(Ge)&&!je._.draggedWidget.wrapper.contains(Ge)){var Xe=j.getNestedEditable(We,Ge);if(Xe){if(Ge=je._.draggedWidget,je.getByElement(Xe)==Ge)return;if(Xe=CKEDITOR.filter.instances[Xe.data("cke-filter")],Ge=Ge.requiredContent,Xe&&Ge&&!Xe.check(Ge))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new Ke.locator(Ve),liner:new Ke.liner(Ve,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function _e(je){var Ve=je.editor;Ve.on("contentDom",function(){var Ke=Ve.editable(),We=Ke.isInline()?Ke:Ve.document,Ge,Xe;Ke.attachListener(We,"mousedown",function(Ye){var Ze=Ye.data.getTarget();Ge=Ze instanceof CKEDITOR.dom.element?je.getByElement(Ze):null,Xe=0,Ge&&(Ge.inline&&Ze.type==CKEDITOR.NODE_ELEMENT&&Ze.hasAttribute("data-cke-widget-drag-handler")?(Xe=1,je.focused!=Ge&&Ve.getSelection().removeAllRanges()):j.getNestedEditable(Ge.wrapper,Ze)?Ge=null:(Ye.data.preventDefault(),CKEDITOR.env.ie||Ge.focus()))}),Ke.attachListener(We,"mouseup",function(){Xe&&Ge&&Ge.wrapper&&(Xe=0,Ge.focus())}),CKEDITOR.env.ie&&Ke.attachListener(We,"mouseup",function(){setTimeout(function(){Ge&&Ge.wrapper&&Ke.contains(Ge.wrapper)&&(Ge.focus(),Ge=null)})})}),Ve.on("doubleclick",function(Ke){var We=je.getByElement(Ke.data.element);if(We&&!j.getNestedEditable(We.wrapper,Ke.data.element))return We.fire("doubleclick",{element:Ke.data.element})},null,null,1)}function Ee(je){je.editor.on("key",function(Ve){var Ke=je.focused,We=je.widgetHoldingFocusedEditable,Ge;return Ke?Ge=Ke.fire("key",{keyCode:Ve.data.keyCode}):We&&(Ke=Ve.data.keyCode,Ve=We.focusedEditable,Ke==CKEDITOR.CTRL+65?(Ke=Ve.getBogus(),We=We.editor.createRange(),We.selectNodeContents(Ve),Ke&&We.setEndAt(Ke,CKEDITOR.POSITION_BEFORE_START),We.select(),Ge=!1):8==Ke||46==Ke?(Ge=We.editor.getSelection().getRanges(),We=Ge[0],Ge=!(1==Ge.length&&We.collapsed&&We.checkBoundaryOfElement(Ve,CKEDITOR[8==Ke?"START":"END"]))):Ge=void 0),Ge},null,null,1)}function ye(je){function Ve(We){je.focused&&xe(je.focused,"cut"==We.name)}var Ke=je.editor;Ke.on("contentDom",function(){var We=Ke.editable();We.attachListener(We,"copy",Ve),We.attachListener(We,"cut",Ve)})}function ke(je){var Ve=je.editor;Ve.on("selectionCheck",function(){je.fire("checkSelection")}),je.on("checkSelection",je.checkSelection,je),Ve.on("selectionChange",function(Ke){var We=(Ke=j.getNestedEditable(Ve.editable(),Ke.data.selection.getStartElement()))&&je.getByElement(Ke),Ge=je.widgetHoldingFocusedEditable;Ge?Ge===We&&Ge.focusedEditable.equals(Ke)||(pe(je,Ge,null),We&&Ke&&pe(je,We,Ke)):We&&Ke&&pe(je,We,Ke)}),Ve.on("dataReady",function(){Ce(je).commit()}),Ve.on("blur",function(){var Ke;(Ke=je.focused)&&ne(je,Ke),(Ke=je.widgetHoldingFocusedEditable)&&pe(je,Ke,null)})}function Te(je){var Ve=je.editor,Ke={};Ve.on("toDataFormat",function(We){var Ge=CKEDITOR.tools.getNextNumber(),Xe=[];We.data.downcastingSessionId=Ge,Ke[Ge]=Xe,We.data.dataValue.forEach(function(Ye){var Ze=Ye.attributes,Je;if("data-cke-widget-white-space"in Ze){Je=le(Ye);var Qe=re(Ye);Je.parent.attributes["data-cke-white-space-first"]&&(Je.value=Je.value.replace(/^&nbsp;/g," ")),Qe.parent.attributes["data-cke-white-space-last"]&&(Qe.value=Qe.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in Ze)(Ze=je.instances[Ze["data-cke-widget-id"]])&&(Je=Ye.getFirst(j.isParserWidgetElement),Xe.push({wrapper:Ye,element:Je,widget:Ze,editables:{}}),"1"!=Je.attributes["data-cke-widget-keep-attr"]&&delete Je.attributes["data-widget"]);else if("data-cke-widget-editable"in Ze)return Xe[Xe.length-1].editables[Ze["data-cke-widget-editable"]]=Ye,!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),Ve.on("toDataFormat",function(We){if(We.data.downcastingSessionId){We=Ke[We.data.downcastingSessionId];for(var Ge,Xe,Ye,Ze,Je,Qe;Ge=We.shift();){for(Qe in Xe=Ge.widget,Ye=Ge.element,Ze=Xe._.downcastFn&&Xe._.downcastFn.call(Xe,Ye),Ge.editables)Je=Ge.editables[Qe],delete Je.attributes.contenteditable,Je.setHtml(Xe.editables[Qe].getData());Ze||(Ze=Ye),Ge.wrapper.replaceWith(Ze)}}},null,null,13),Ve.on("contentDomUnload",function(){je.destroyAll(!0)})}function ve(je){var Ve=je.editor,Ke,We;Ve.on("toHtml",function(Ge){var Xe=de(je),Ye;for(Ge.data.dataValue.forEach(Xe.iterator,CKEDITOR.NODE_ELEMENT,!0);Ye=Xe.toBeWrapped.pop();){var Ze=Ye[0],Je=Ze.parent;Je.type==CKEDITOR.NODE_ELEMENT&&Je.attributes["data-cke-widget-wrapper"]&&Je.replaceWith(Ze),je.wrapElement(Ye[0],Ye[1])}Ke=Ge.data.protectedWhitespaces?3==Ge.data.dataValue.children.length&&j.isParserWidgetWrapper(Ge.data.dataValue.children[1]):1==Ge.data.dataValue.children.length&&j.isParserWidgetWrapper(Ge.data.dataValue.children[0])},null,null,8),Ve.on("dataReady",function(){if(We)for(var Ge=Ve.editable().find(".cke_widget_wrapper"),Ze=0,Je=Ge.count(),Xe,Ye;Ze<Je;++Ze)Xe=Ge.getItem(Ze),Ye=Xe.getFirst(j.isDomWidgetElement),Ye.type==CKEDITOR.NODE_ELEMENT&&Ye.data("widget")?(Ye.replace(Xe),je.wrapElement(Ye)):Xe.remove();We=0,je.destroyAll(!0),je.initOnAll()}),Ve.on("loadSnapshot",function(Ge){/data-cke-widget/.test(Ge.data)&&(We=1),je.destroyAll(!0)},null,null,9),Ve.on("paste",function(Ge){Ge=Ge.data,Ge.dataValue=Ge.dataValue.replace(ze,fe),Ge.range&&(Ge=j.getNestedEditable(Ve.editable(),Ge.range.startContainer))&&(Ge=CKEDITOR.filter.instances[Ge.data("cke-filter")])&&Ve.setActiveFilter(Ge)}),Ve.on("afterInsertHtml",function(Ge){Ge.data.intoRange?je.checkWidgets({initOnlyNew:!0}):(Ve.fire("lockSnapshot"),je.checkWidgets({initOnlyNew:!0,focusInited:Ke}),Ve.fire("unlockSnapshot"))})}function Ce(je){var Ve=je.selected,Ke=[],We=Ve.slice(0),Ge=null;return{select:function(Xe){return 0>CKEDITOR.tools.indexOf(Ve,Xe)&&Ke.push(Xe),Xe=CKEDITOR.tools.indexOf(We,Xe),0<=Xe&&We.splice(Xe,1),this},focus:function(Xe){return Ge=Xe,this},commit:function(){var Xe=je.focused!==Ge,Ye,Ze;for(je.editor.fire("lockSnapshot"),Xe&&(Ye=je.focused)&&ne(je,Ye);Ye=We.pop();)Ve.splice(CKEDITOR.tools.indexOf(Ve,Ye),1),Ye.isInited()&&(Ze=Ye.editor.checkDirty(),Ye.setSelected(!1),!Ze&&Ye.editor.resetDirty());for(Xe&&Ge&&(Ze=je.editor.checkDirty(),je.focused=Ge,je.fire("widgetFocused",{widget:Ge}),Ge.setFocused(!0),!Ze&&je.editor.resetDirty());Ye=Ke.pop();)Ve.push(Ye),Ye.setSelected(!0);je.editor.fire("unlockSnapshot")}}}function Se(je,Ve,Ke){var We=0;Ve=we(Ve);var Ge=je.data.classes||{},Xe;if(Ve){for(Ge=CKEDITOR.tools.clone(Ge);Xe=Ve.pop();)Ke?Ge[Xe]||(We=Ge[Xe]=1):Ge[Xe]&&(delete Ge[Xe],We=1);We&&je.setData("classes",Ge)}}function Ne(je){je.cancel()}function xe(je,Ve){var Ke=je.editor,We=Ke.document,Ge=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!We.getById("cke_copybin")){var Xe=(Ke.blockless||CKEDITOR.env.ie)&&!Ge?"span":"div",Ge=We.createElement(Xe),Ye=We.createElement(Xe),Xe=CKEDITOR.env.ie&&9>CKEDITOR.env.version;Ye.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),Ge.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),Ge.setStyle("ltr"==Ke.config.contentsLangDirection?"left":"right","-5000px");var Ze=Ke.createRange();Ze.setStartBefore(je.wrapper),Ze.setEndAfter(je.wrapper),Ge.setHtml("<span data-cke-copybin-start=\"1\">\u200B</span>"+Ke.editable().getHtmlFromRange(Ze).getHtml()+"<span data-cke-copybin-end=\"1\">\u200B</span>"),Ke.fire("saveSnapshot"),Ke.fire("lockSnapshot"),Ye.append(Ge),Ke.editable().append(Ye);var Je=Ke.on("selectionChange",Ne,null,null,0),Qe=je.repository.on("checkSelection",Ne,null,null,0);if(Xe)var et=We.getDocumentElement().$,tt=et.scrollTop;Ze=Ke.createRange(),Ze.selectNodeContents(Ge),Ze.select(),Xe&&(et.scrollTop=tt),setTimeout(function(){Ve||je.focus(),Ye.remove(),Je.removeListener(),Qe.removeListener(),Ke.fire("unlockSnapshot"),Ve&&!Ke.readOnly&&(je.repository.del(je),Ke.fire("saveSnapshot"))},100)}}function we(je){return(je=(je=je.getDefinition().attributes)&&je["class"])?je.split(/\s+/):null}function Ie(){var je=CKEDITOR.document.getActive(),Ve=this.editor,Ke=Ve.editable();(Ke.isInline()?Ke:Ve.document.getWindow().getFrame()).equals(je)&&Ve.focusManager.focus(Ke)}function Oe(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function Ae(je){var Ve=null;je.on("data",function(){var Ke=this.data.classes,We;if(Ve!=Ke){for(We in Ve)Ke&&Ke[We]||this.removeClass(We);for(We in Ke)this.addClass(We);Ve=Ke}})}function De(je){je.on("data",function(){if(je.wrapper){var Ve=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());je.wrapper.setAttribute("role","region"),je.wrapper.setAttribute("aria-label",Ve)}},null,null,9999)}function Re(je){if(je.draggable){var Ve=je.editor,Ke=je.wrapper.getLast(j.isDomDragHandlerContainer),We;Ke?We=Ke.findOne("img"):(Ke=new CKEDITOR.dom.element("span",Ve.document),Ke.setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+Ve.plugins.widget.path+"images/handle.png)"}),We=new CKEDITOR.dom.element("img",Ve.document),We.setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:Ve.lang.widget.move,height:15,role:"presentation"}),je.inline&&We.setAttribute("draggable","true"),Ke.append(We),je.wrapper.append(Ke)),je.wrapper.on("dragover",function(Ge){Ge.data.preventDefault()}),je.wrapper.on("mouseenter",je.updateDragHandlerPosition,je),setTimeout(function(){je.on("data",je.updateDragHandlerPosition,je)},50),!je.inline&&(We.on("mousedown",Le,je),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&We.on("dragstart",function(Ge){Ge.data.preventDefault(!0)}),je.dragHandlerContainer=Ke}}function Le(je){function Ve(){var nt;for(ot.reset();nt=Ze.pop();)nt.removeListener();var at=Je;nt=je.sender;var it=this.repository.finder,lt=this.repository.liner,rt=this.editor,st=this.editor.editable();CKEDITOR.tools.isEmpty(lt.visible)||(at=it.getRange(at[0]),this.focus(),rt.fire("drop",{dropRange:at,target:at.startContainer})),st.removeClass("cke_widget_dragging"),lt.hideVisible(),rt.fire("dragend",{target:nt})}if(CKEDITOR.tools.getMouseButton(je)===CKEDITOR.MOUSE_BUTTON_LEFT){var Ke=this.repository.finder,We=this.repository.locator,Ge=this.repository.liner,Xe=this.editor,Ye=Xe.editable(),Ze=[],Je=[],Qe,et;this.repository._.draggedWidget=this;var tt=Ke.greedySearch(),ot=CKEDITOR.tools.eventsBuffer(50,function(){Qe=We.locate(tt),Je=We.sort(et,1),Je.length&&(Ge.prepare(tt,Qe),Ge.placeLine(Je[0]),Ge.cleanup())});Ye.addClass("cke_widget_dragging"),Ze.push(Ye.on("mousemove",function(nt){et=nt.data.$.clientY,ot.input()})),Xe.fire("dragstart",{target:je.sender}),Ze.push(Xe.document.once("mouseup",Ve,this)),Ye.isInline()||Ze.push(CKEDITOR.document.once("mouseup",Ve,this))}}function Fe(je){var We=je.editables,Ve,Ke;if(je.editables={},je.editables)for(Ve in We)Ke=We[Ve],je.initEditable(Ve,"string"==typeof Ke?{selector:Ke}:Ke)}function Be(je){if(je.mask){var Ve=je.wrapper.findOne(".cke_widget_mask");Ve||(Ve=new CKEDITOR.dom.element("img",je.editor.document),Ve.setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),je.wrapper.append(Ve)),je.mask=Ve}}function Pe(je){if(je.parts){var Ve={},Ke,We;for(We in je.parts)Ke=je.wrapper.findOne(je.parts[We]),Ve[We]=Ke;je.parts=Ve}}function Me(je,Ve){$e(je),Pe(je),Fe(je),Be(je),Re(je),Ae(je),De(je),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&je.wrapper.on("dragstart",function(Ke){var We=Ke.data.getTarget();j.getNestedEditable(je,We)||je.inline&&j.isDomDragHandler(We)||Ke.data.preventDefault()}),je.wrapper.removeClass("cke_widget_new"),je.element.addClass("cke_widget_element"),je.on("key",function(Ke){if(Ke=Ke.data.keyCode,13==Ke)je.edit();else{if(Ke==CKEDITOR.CTRL+67||Ke==CKEDITOR.CTRL+88)return void xe(je,Ke==CKEDITOR.CTRL+88);if(Ke in Ue||CKEDITOR.CTRL&Ke||CKEDITOR.ALT&Ke)return}return!1},null,null,999),je.on("doubleclick",function(Ke){je.edit()&&Ke.cancel()}),Ve.data&&je.on("data",Ve.data),Ve.edit&&je.on("edit",Ve.edit)}function $e(je){(je.wrapper=je.element.getParent()).setAttribute("data-cke-widget-id",je.id)}function He(je){je.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(je.data)))}function qe(){function je(){}function Ve(Ge,Xe,Ye){return Ye&&this.checkElement(Ge)&&(Ge=Ye.widgets.getByElement(Ge,!0))&&Ge.checkStyleActive(this)}function Ke(Ge){function Xe(tt,ot,nt){for(var at=tt.length,it=0;it<at;){if(ot.call(nt,tt[it],it,tt))return tt[it];it++}}function Ye(tt){function ot(nt,at){var it=CKEDITOR.tools.objectKeys(nt),lt=CKEDITOR.tools.objectKeys(at);if(it.length!==lt.length)return!1;for(var rt in nt)if(("object"!=typeof nt[rt]||"object"!=typeof at[rt]||!ot(nt[rt],at[rt]))&&nt[rt]!==at[rt])return!1;return!0}return function(nt){return ot(tt.getDefinition(),nt.getDefinition())}}var Ze=Ge.widget,Je;We[Ze]||(We[Ze]={});for(var Qe=0,et=Ge.group.length;Qe<et;Qe++)Je=Ge.group[Qe],We[Ze][Je]||(We[Ze][Je]=[]),Je=We[Ze][Je],Xe(Je,Ye(Ge))||Je.push(Ge)}var We={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(Ge){this.widget=Ge.widget,(this.group="string"==typeof Ge.group?[Ge.group]:Ge.group)&&Ke(this)},apply:function(Ge){var Xe;Ge instanceof CKEDITOR.editor&&this.checkApplicable(Ge.elementPath(),Ge)&&(Xe=Ge.widgets.focused,this.group&&this.removeStylesFromSameGroup(Ge),Xe.applyStyle(this))},remove:function(Ge){Ge instanceof CKEDITOR.editor&&this.checkApplicable(Ge.elementPath(),Ge)&&Ge.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(Ge){var Ze=!1,Xe,Ye;if(!(Ge instanceof CKEDITOR.editor))return!1;if(Ye=Ge.elementPath(),this.checkApplicable(Ye,Ge))for(var Je=0,Qe=this.group.length;Je<Qe;Je++){Xe=We[this.widget][this.group[Je]];for(var et=0;et<Xe.length;et++)Xe[et]!==this&&Xe[et].checkActive(Ye,Ge)&&(Ge.widgets.focused.removeStyle(Xe[et]),Ze=!0)}return Ze},checkActive:function(Ge,Xe){return this.checkElementMatch(Ge.lastElement,0,Xe)},checkApplicable:function(Ge,Xe){return!!(Xe instanceof CKEDITOR.editor)&&this.checkElement(Ge.lastElement)},checkElementMatch:Ve,checkElementRemovable:Ve,checkElement:function(Ge){return!!j.isDomWidgetWrapper(Ge)&&(Ge=Ge.getFirst(j.isDomWidgetElement))&&Ge.data("widget")==this.widget},buildPreview:function(Ge){return Ge||this._.definition.name},toAllowedContentRules:function(Ge){if(!Ge)return null;Ge=Ge.widgets.registered[this.widget];var Ye={},Xe;return Ge?Ge.styleableElements?(Xe=this.getClassesArray(),!Xe)?null:(Ye[Ge.styleableElements]={classes:Xe,propertiesOnly:!0},Ye):Ge.styleToAllowedContentRules?Ge.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var Ge=this._.definition.attributes&&this._.definition.attributes["class"];return Ge?CKEDITOR.tools.trim(Ge).split(/\s+/):null},applyToRange:je,removeFromRange:je,applyToObject:je})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),qe())},beforeInit:function(je){void 0!==CKEDITOR.document.$.querySelectorAll&&(je.widgets=new $(je))},afterInit:function(je){if(void 0!==CKEDITOR.document.$.querySelectorAll){var Ve=je.widgets.registered,Ke,We,Ge;for(We in Ve)Ke=Ve[We],(Ge=Ke.button)&&je.ui.addButton&&je.ui.addButton(CKEDITOR.tools.capitalize(Ke.name,!0),{label:Ge,command:Ke.name,toolbar:"insert,10"});he(je)}}}),$.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(je,Ve){return Ve=CKEDITOR.tools.prototypedCopy(Ve),Ve.name=je,Ve._=Ve._||{},this.editor.fire("widgetDefinition",Ve),Ve.template&&(Ve.template=new CKEDITOR.template(Ve.template)),te(this.editor,Ve),oe(this,Ve),this.registered[je]=Ve},addUpcastCallback:function(je){this._.upcastCallbacks.push(je)},checkSelection:function(){var je=this.editor.getSelection(),Ve=je.getSelectedElement(),Ke=Ce(this),We;if(Ve&&(We=this.getByElement(Ve,!0)))return Ke.focus(We).select(We).commit();if(je=je.getRanges()[0],!je||je.collapsed)return Ke.commit();for(je=new CKEDITOR.dom.walker(je),je.evaluator=j.isDomWidgetWrapper;Ve=je.next();)Ke.select(this.getByElement(Ve));Ke.commit()},checkWidgets:function(je){this.fire("checkWidgets",CKEDITOR.tools.copy(je||{}))},del:function(je){if(this.focused===je){var Ve=je.editor,Ke=Ve.createRange(),We;(We=Ke.moveToClosestEditablePosition(je.wrapper,!0))||(We=Ke.moveToClosestEditablePosition(je.wrapper,!1)),We&&Ve.getSelection().selectRanges([Ke])}je.wrapper.remove(),this.destroy(je,!0)},destroy:function(je,Ve){this.widgetHoldingFocusedEditable===je&&pe(this,je,null,Ve),je.destroy(Ve),delete this.instances[je.id],this.fire("instanceDestroyed",je)},destroyAll:function(je,Ve){var Ge=this.instances,Ke,We;if(Ve&&!je){We=Ve.find(".cke_widget_wrapper");for(var Ge=We.count(),Xe=0;Xe<Ge;++Xe)(Ke=this.getByElement(We.getItem(Xe),!0))&&this.destroy(Ke)}else for(We in Ge)Ke=Ge[We],this.destroy(Ke,je)},finalizeCreation:function(je){(je=je.getFirst())&&j.isDomWidgetWrapper(je)&&(this.editor.insertElement(je),je=this.getByElement(je),je.ready=!0,je.fire("ready"),je.focus())},getByElement:function(){function je(Ke){return Ke.is(Ve)&&Ke.data("cke-widget-id")}var Ve={div:1,span:1};return function(Ke,We){if(!Ke)return null;var Ge=je(Ke);if(!We&&!Ge){var Xe=this.editor.editable();do Ke=Ke.getParent();while(Ke&&!Ke.equals(Xe)&&!(Ge=je(Ke)))}return this.instances[Ge]||null}}(),initOn:function(je,Ve,Ke){if(Ve?"string"==typeof Ve&&(Ve=this.registered[Ve]):Ve=this.registered[je.data("widget")],!Ve)return null;var We=this.wrapElement(je,Ve.name);return We?We.hasClass("cke_widget_new")?(je=new j(this,this._.nextId++,je,Ve,Ke),je.isInited()?this.instances[je.id]=je:null):this.getByElement(je):null},initOnAll:function(je){je=(je||this.editor.editable()).find(".cke_widget_new");for(var Ve=[],We=je.count(),Ke;We--;)(Ke=this.initOn(je.getItem(We).getFirst(j.isDomWidgetElement)))&&Ve.push(Ke);return Ve},onWidget:function(je){var Ve=Array.prototype.slice.call(arguments);for(var Ke in Ve.shift(),this.instances){var We=this.instances[Ke];We.name==je&&We.on.apply(We,Ve)}this.on("instanceCreated",function(Ge){Ge=Ge.data,Ge.name==je&&Ge.on.apply(Ge,Ve)})},parseElementClasses:function(je){if(!je)return null;je=CKEDITOR.tools.trim(je).split(/\s+/);for(var Ke={},We=0,Ve;Ve=je.pop();)-1==Ve.indexOf("cke_")&&(Ke[Ve]=We=1);return We?Ke:null},wrapElement:function(je,Ve){var Ke=null,We,Ge;if(je instanceof CKEDITOR.dom.element){if(Ve=Ve||je.data("widget"),We=this.registered[Ve],!We)return null;if((Ke=je.getParent())&&Ke.type==CKEDITOR.NODE_ELEMENT&&Ke.data("cke-widget-wrapper"))return Ke;je.hasAttribute("data-cke-widget-keep-attr")||je.data("cke-widget-keep-attr",je.data("widget")?1:0),je.data("widget",Ve),(Ge=ue(We,je.getName()))&&ie(je),Ke=new CKEDITOR.dom.element(Ge?"span":"div"),Ke.setAttributes(ce(Ge,Ve)),Ke.data("cke-display-name",We.pathName?We.pathName:je.getName()),je.getParent(!0)&&Ke.replace(je),je.appendTo(Ke)}else if(je instanceof CKEDITOR.htmlParser.element){if(Ve=Ve||je.attributes["data-widget"],We=this.registered[Ve],!We)return null;if((Ke=je.parent)&&Ke.type==CKEDITOR.NODE_ELEMENT&&Ke.attributes["data-cke-widget-wrapper"])return Ke;"data-cke-widget-keep-attr"in je.attributes||(je.attributes["data-cke-widget-keep-attr"]=je.attributes["data-widget"]?1:0),Ve&&(je.attributes["data-widget"]=Ve),(Ge=ue(We,je.name))&&ie(je),Ke=new CKEDITOR.htmlParser.element(Ge?"span":"div",ce(Ge,Ve)),Ke.attributes["data-cke-display-name"]=We.pathName?We.pathName:je.name,We=je.parent;var Xe;We&&(Xe=je.getIndex(),je.remove()),Ke.add(je),We&&me(We,Xe,Ke)}return Ke},_tests_createEditableFilter:se},CKEDITOR.event.implementOn($.prototype),j.prototype={addClass:function(je){this.element.addClass(je),this.wrapper.addClass(j.WRAPPER_CLASS_PREFIX+je)},applyStyle:function(je){Se(this,je,1)},checkStyleActive:function(je){je=we(je);var Ve;if(!je)return!1;for(;Ve=je.pop();)if(!this.hasClass(Ve))return!1;return!0},destroy:function(je){if(this.fire("destroy"),this.editables)for(var Ve in this.editables)this.destroyEditable(Ve,je);je||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(je,Ve){var Ke=this.editables[je],We=!0;if(Ke.removeListener("focus",Oe),Ke.removeListener("blur",Ie),this.editor.focusManager.remove(Ke),Ke.filter){for(var Ge in this.repository.instances){var Xe=this.repository.instances[Ge];Xe.editables&&(Xe=Xe.editables[je])&&Xe!==Ke&&Ke.filter===Xe.filter&&(We=!1)}We&&(Ke.filter.destroy(),(We=this.repository._.filters[this.name])&&delete We[je])}Ve||(this.repository.destroyAll(!1,Ke),Ke.removeClass("cke_widget_editable"),Ke.removeClass("cke_widget_editable_focused"),Ke.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[je]},edit:function(){var je={dialog:this.dialog},Ve=this;return!1!==this.fire("edit",je)&&je.dialog&&(this.editor.openDialog(je.dialog,function(Ke){var We,Ge;!1!==Ve.fire("dialog",Ke)&&(We=Ke.on("show",function(){Ke.setupContent(Ve)}),Ge=Ke.on("ok",function(){var Ye=Ve.on("data",function(Ze){Xe=1,Ze.cancel()},null,null,0),Xe;Ve.editor.fire("saveSnapshot"),Ke.commitContent(Ve),Ye.removeListener(),Xe&&(Ve.fire("data",Ve.data),Ve.editor.fire("saveSnapshot"))}),Ke.once("hide",function(){We.removeListener(),Ge.removeListener()}))}),!0)},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(je){return this.element.hasClass(je)},initEditable:function(je,Ve){var Ke=this._findOneNotNested(Ve.selector);return Ke&&Ke.is(CKEDITOR.dtd.$editable)&&(Ke=new ee(this.editor,Ke,{filter:se.call(this.repository,this.name,je,Ve)}),this.editables[je]=Ke,Ke.setAttributes({contenteditable:"true","data-cke-widget-editable":je,"data-cke-enter-mode":Ke.enterMode}),Ke.filter&&Ke.data("cke-filter",Ke.filter.id),Ke.addClass("cke_widget_editable"),Ke.removeClass("cke_widget_editable_focused"),Ve.pathName&&Ke.data("cke-display-name",Ve.pathName),this.editor.focusManager.add(Ke),Ke.on("focus",Oe,this),CKEDITOR.env.ie&&Ke.on("blur",Ie,this),Ke._.initialSetData=!0,Ke.setData(Ke.getHtml()),!0)},_findOneNotNested:function(je){je=this.wrapper.find(je);for(var We=0,Ve,Ke;We<je.count();We++)if(Ve=je.getItem(We),Ke=Ve.getAscendant(j.isDomWidgetWrapper),this.wrapper.equals(Ke))return Ve;return null},isInited:function(){return this.wrapper&&this.inited},isReady:function(){return this.isInited()&&this.ready},focus:function(){var je=this.editor.getSelection();if(je){var Ve=this.editor.checkDirty();je.fake(this.wrapper),Ve||this.editor.resetDirty()}this.editor.focus()},removeClass:function(je){this.element.removeClass(je),this.wrapper.removeClass(j.WRAPPER_CLASS_PREFIX+je)},removeStyle:function(je){Se(this,je,0)},setData:function(je,Ve){var Ke=this.data,We=0;if("string"==typeof je)Ke[je]!==Ve&&(Ke[je]=Ve,We=1);else{var Ge=je;for(je in Ge)Ke[je]!==Ge[je]&&(We=1,Ke[je]=Ge[je])}return We&&this.dataReady&&(He(this),this.fire("data",Ke)),this},setFocused:function(je){return this.wrapper[je?"addClass":"removeClass"]("cke_widget_focused"),this.fire(je?"focus":"blur"),this},setSelected:function(je){return this.wrapper[je?"addClass":"removeClass"]("cke_widget_selected"),this.fire(je?"select":"deselect"),this},updateDragHandlerPosition:function(){var je=this.editor,Ve=this.element.$,Ke=this._.dragHandlerOffset,Ve={x:Ve.offsetLeft,y:Ve.offsetTop-15};Ke&&Ve.x==Ke.x&&Ve.y==Ke.y||(Ke=je.checkDirty(),je.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:Ve.y+"px",left:Ve.x+"px",display:"block"}),je.fire("unlockSnapshot"),!Ke&&je.resetDirty(),this._.dragHandlerOffset=Ve)}},CKEDITOR.event.implementOn(j.prototype),j.getNestedEditable=function(je,Ve){return!Ve||Ve.equals(je)?null:j.isDomNestedEditable(Ve)?Ve:j.getNestedEditable(je,Ve.getParent())},j.isDomDragHandler=function(je){return je.type==CKEDITOR.NODE_ELEMENT&&je.hasAttribute("data-cke-widget-drag-handler")},j.isDomDragHandlerContainer=function(je){return je.type==CKEDITOR.NODE_ELEMENT&&je.hasClass("cke_widget_drag_handler_container")},j.isDomNestedEditable=function(je){return je.type==CKEDITOR.NODE_ELEMENT&&je.hasAttribute("data-cke-widget-editable")},j.isDomWidgetElement=function(je){return je.type==CKEDITOR.NODE_ELEMENT&&je.hasAttribute("data-widget")},j.isDomWidgetWrapper=function(je){return je.type==CKEDITOR.NODE_ELEMENT&&je.hasAttribute("data-cke-widget-wrapper")},j.isDomWidget=function(je){return!!je&&(this.isDomWidgetWrapper(je)||this.isDomWidgetElement(je))},j.isParserWidgetElement=function(je){return je.type==CKEDITOR.NODE_ELEMENT&&!!je.attributes["data-widget"]},j.isParserWidgetWrapper=function(je){return je.type==CKEDITOR.NODE_ELEMENT&&!!je.attributes["data-cke-widget-wrapper"]},j.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",ee.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(je){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,je=this.editor.dataProcessor.toHtml(je,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(je),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var ze=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,Ue={8:1,37:1,38:1,39:1,40:1,46:1};Ue[CKEDITOR.SHIFT+121]=1,CKEDITOR.plugins.widget=j,j.repository=$,j.nestedEditable=ee}(),function(){function $(oe){this.editor=oe,this.loaders=[]}function j(oe,ne,ae){var ie=oe.config.fileTools_defaultFileName;this.editor=oe,this.lang=oe.lang,"string"==typeof ne?(this.data=ne,this.file=ee(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=ne,this.total=this.file.size,this.loaded=0),ae?this.fileName=ae:this.file.name?this.fileName=this.file.name:(oe=this.file.type.split("/"),ie&&(oe[0]=ie),this.fileName=oe.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}function ee(oe){var ne=oe.match(te)[1];oe=oe.replace(te,""),oe=atob(oe);var ae=[],ie,le,re,se;for(ie=0;ie<oe.length;ie+=512){for(le=oe.slice(ie,ie+512),re=Array(le.length),se=0;se<le.length;se++)re[se]=le.charCodeAt(se);le=new Uint8Array(re),ae.push(le)}return new Blob(ae,{type:ne})}CKEDITOR.plugins.add("filetools",{beforeInit:function(oe){oe.uploadRepository=new $(oe),oe.on("fileUploadRequest",function(ne){var ae=ne.data.fileLoader;ae.xhr.open("POST",ae.uploadUrl,!0),ne.data.requestData.upload={file:ae.file,name:ae.fileName}},null,null,5),oe.on("fileUploadRequest",function(ne){var ae=ne.data.fileLoader,ie=new FormData;ne=ne.data.requestData;var le=oe.config.fileTools_requestHeaders,re,se;for(se in ne){var de=ne[se];"object"==typeof de&&de.file?ie.append(se,de.file,de.name):ie.append(se,de)}if(ie.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),le)for(re in le)ae.xhr.setRequestHeader(re,le[re]);ae.xhr.send(ie)},null,null,999),oe.on("fileUploadResponse",function(ne){var ae=ne.data.fileLoader,ie=ae.xhr,le=ne.data;try{var re=JSON.parse(ie.responseText);if(re.error&&re.error.message&&(le.message=re.error.message),re.uploaded)for(var se in re)le[se]=re[se];else ne.cancel()}catch(de){le.message=ae.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:ie.responseText}),ne.cancel()}},null,null,999)}}),$.prototype={create:function(oe,ne,ae){ae=ae||j;var ie=this.loaders.length;return oe=new ae(this.editor,oe,ne),oe.id=ie,this.loaders[ie]=oe,this.fire("instanceCreated",oe),oe},isFinished:function(){for(var oe=0;oe<this.loaders.length;++oe)if(!this.loaders[oe].isFinished())return!1;return!0}},j.prototype={loadAndUpload:function(oe,ne){var ae=this;this.once("loaded",function(ie){ie.cancel(),ae.once("update",function(le){le.cancel()},null,null,0),ae.upload(oe,ne)},null,null,0),this.load()},load:function(){var oe=this,ne=this.reader=new FileReader;oe.changeStatus("loading"),this.abort=function(){oe.reader.abort()},ne.onabort=function(){oe.changeStatus("abort")},ne.onerror=function(){oe.message=oe.lang.filetools.loadError,oe.changeStatus("error")},ne.onprogress=function(ae){oe.loaded=ae.loaded,oe.update()},ne.onload=function(){oe.loaded=oe.total,oe.data=ne.result,oe.changeStatus("loaded")},ne.readAsDataURL(this.file)},upload:function(oe,ne){oe?(this.uploadUrl=oe,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:ne||{}})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function oe(){"error"!=ae.status&&(ae.message=ae.lang.filetools.networkError,ae.changeStatus("error"))}function ne(){"abort"!=ae.status&&ae.changeStatus("abort")}var ae=this,ie=this.xhr;ae.abort=function(){ie.abort(),ne()},ie.onerror=oe,ie.onabort=ne,ie.upload?(ie.upload.onprogress=function(le){le.lengthComputable&&(ae.uploadTotal||(ae.uploadTotal=le.total),ae.uploaded=le.loaded,ae.update())},ie.upload.onerror=oe,ie.upload.onabort=ne):(ae.uploadTotal=ae.total,ae.update()),ie.onload=function(){if(ae.update(),"abort"!=ae.status)if(ae.uploaded=ae.uploadTotal,200>ie.status||299<ie.status)ae.message=ae.lang.filetools["httpError"+ie.status],ae.message||(ae.message=ae.lang.filetools.httpError.replace("%1",ie.status)),ae.changeStatus("error");else{for(var le={fileLoader:ae},re=["message","fileName","url"],se=ae.editor.fire("fileUploadResponse",le),de=0,ce;de<re.length;de++)ce=re[de],"string"==typeof le[ce]&&(ae[ce]=le[ce]);ae.responseData=le,delete ae.responseData.fileLoader,!1===se?ae.changeStatus("error"):ae.changeStatus("uploaded")}}},changeStatus:function(oe){this.status=oe,("error"==oe||"abort"==oe||"loaded"==oe||"uploaded"==oe)&&(this.abort=function(){}),this.fire(oe),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn($.prototype),CKEDITOR.event.implementOn(j.prototype);var te=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:$,fileLoader:j,getUploadUrl:function(oe,ne){var ae=CKEDITOR.tools.capitalize;return ne&&oe[ne+"UploadUrl"]?oe[ne+"UploadUrl"]:oe.uploadUrl?oe.uploadUrl:ne&&oe["filebrowser"+ae(ne,1)+"UploadUrl"]?oe["filebrowser"+ae(ne,1)+"UploadUrl"]+"&responseType=json":oe.filebrowserUploadUrl?oe.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(oe,ne){return!!oe.type.match(ne)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof new FileReader().readAsDataURL&&"function"==typeof FormData&&"function"==typeof new FormData().append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function $(ee,te,oe){this.editor=ee,this.notification=null,this._message=new CKEDITOR.template(te),this._singularMessage=oe?new CKEDITOR.template(oe):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function j(ee){this._weight=ee||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),$.prototype={createTask:function(ee){ee=ee||{};var te=!this.notification,oe;return te&&(this.notification=this._createNotification()),oe=this._addTask(ee),oe.on("updated",this._onTaskUpdate,this),oe.on("done",this._onTaskDone,this),oe.on("canceled",function(){this._removeTask(oe)},this),this.update(),te&&this.notification.show(),oe},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var ee=this.getTaskCount(),te={current:this.getDoneTaskCount(),max:ee,percentage:_Mathround(100*this.getPercentage())};return(1==ee&&this._singularMessage?this._singularMessage:this._message).output(te)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(ee){return ee=new j(ee.weight),this._tasks.push(ee),this._totalWeights+=ee._weight,ee},_removeTask:function(ee){var te=CKEDITOR.tools.indexOf(this._tasks,ee);-1!==te&&(ee._doneWeight&&(this._doneWeights-=ee._doneWeight),this._totalWeights-=ee._weight,this._tasks.splice(te,1),this.update())},_onTaskUpdate:function(ee){this._doneWeights+=ee.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn($.prototype),j.prototype={done:function(){this.update(this._weight)},update:function(ee){if(!this.isDone()&&!this.isCanceled()){ee=_Mathmin(this._weight,ee);var te=ee-this._doneWeight;this._doneWeight=ee,this.fire("updated",te),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(j.prototype),CKEDITOR.plugins.notificationAggregator=$,CKEDITOR.plugins.notificationAggregator.task=j}(),function(){CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function($){$.filter.allow("*[!data-widget,!data-cke-upload-id]")}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function($,j,ee){var te=CKEDITOR.fileTools,oe=$.uploadRepository,ne=ee.supportedTypes?10:20;ee.fileToElement&&$.on("paste",function(ae){ae=ae.data;var ie=$.widgets.registered[j],le=ae.dataTransfer,re=le.getFilesCount(),se=ie.loadMethod||"loadAndUpload",de,ce;if(!ae.dataValue&&re)for(ce=0;ce<re;ce++)if(de=le.getFile(ce),!ie.supportedTypes||te.isTypeSupported(de,ie.supportedTypes)){var me=ie.fileToElement(de);de=oe.create(de,void 0,ie.loaderType),me&&(de[se](ie.uploadUrl,ie.additionalRequestParameters),CKEDITOR.fileTools.markElement(me,j,de.id),"loadAndUpload"!=se&&"upload"!=se||ie.skipNotifications||CKEDITOR.fileTools.bindNotifications($,de),ae.dataValue+=me.getOuterHtml())}},null,null,ne),CKEDITOR.tools.extend(ee,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var ae=this,ie=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),le=oe.loaders[ie],re=CKEDITOR.tools.capitalize,se,de;le.on("update",function(ce){"abort"===le.status&&"function"==typeof ae.onAbort&&ae.onAbort(le),ae.wrapper&&ae.wrapper.getParent()?($.fire("lockSnapshot"),ce="on"+re(le.status),("abort"===le.status||"function"!=typeof ae[ce]||!1!==ae[ce](le))&&(de="cke_upload_"+le.status,ae.wrapper&&de!=se&&(se&&ae.wrapper.removeClass(se),ae.wrapper.addClass(de),se=de),"error"!=le.status&&"abort"!=le.status||$.widgets.del(ae)),$.fire("unlockSnapshot")):(CKEDITOR.instances[$.name]&&$.editable().find("[data-cke-upload-id=\""+ie+"\"]").count()||le.abort(),ce.removeListener())}),le.update()},replaceWith:function(ae,ie){if(""===ae.trim())$.widgets.del(this);else{var le=this==$.widgets.focused,re=$.editable(),se=$.createRange(),de,ce;le||(ce=$.getSelection().createBookmarks()),se.setStartBefore(this.wrapper),se.setEndAfter(this.wrapper),le&&(de=se.createBookmark()),re.insertHtmlIntoRange(ae,se,ie),$.widgets.checkWidgets({initOnlyNew:!0}),$.widgets.destroy(this,!0),le?(se.moveToBookmark(de),se.select()):$.getSelection().selectBookmarks(ce)}},_getLoader:function(){var ae=this.wrapper.findOne("[data-cke-upload-id]");return ae?this.editor.uploadRepository.loaders[ae.data("cke-upload-id")]:null}}),$.widgets.add(j,ee)},markElement:function($,j,ee){$.setAttributes({"data-cke-upload-id":ee,"data-widget":j})},bindNotifications:function($,j){function ee(){te=$._.uploadWidgetNotificaionAggregator,(!te||te.isFinished())&&(te=$._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator($,$.lang.uploadwidget.uploadMany,$.lang.uploadwidget.uploadOne),te.once("finished",function(){var ne=te.getTaskCount();0===ne?te.notification.hide():te.notification.update({message:1==ne?$.lang.uploadwidget.doneOne:$.lang.uploadwidget.doneMany.replace("%1",ne),type:"success",important:1})}))}var oe=null,te;j.on("update",function(){!oe&&j.uploadTotal&&(ee(),oe=te.createTask({weight:j.uploadTotal})),oe&&"uploading"==j.status&&oe.update(j.uploaded)}),j.on("uploaded",function(){oe&&oe.done()}),j.on("error",function(){oe&&oe.cancel(),$.showNotification(j.message,"warning")}),j.on("abort",function(){oe&&oe.cancel(),CKEDITOR.instances[$.name]&&$.showNotification($.lang.uploadwidget.abort,"info")})}})}(),function(){function $(te){return 9>=te&&(te="0"+te),te+""}function j(te){var oe=new Date,oe=[oe.getFullYear(),oe.getMonth()+1,oe.getDate(),oe.getHours(),oe.getMinutes(),oe.getSeconds()];return ee+=1,"image-"+CKEDITOR.tools.array.map(oe,$).join("")+"-"+ee+"."+te}var ee=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},init:function(te){if(CKEDITOR.plugins.clipboard.isFileApiSupported){var oe=CKEDITOR.fileTools,ne=oe.getUploadUrl(te.config,"image");ne&&(oe.addUploadWidget(te,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:ne,fileToElement:function(){var ae=new CKEDITOR.dom.element("img");return ae.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),ae},parts:{img:"img"},onUploading:function(ae){this.parts.img.setAttribute("src",ae.data)},onUploaded:function(ae){var ie=this.parts.img.$;this.replaceWith("<img src=\""+ae.url+"\" width=\""+(ae.responseData.width||ie.naturalWidth)+"\" height=\""+(ae.responseData.height||ie.naturalHeight)+"\">")}}),te.on("paste",function(ae){if(ae.data.dataValue.match(/<img[\s\S]+data:/i)){ae=ae.data;var ie=document.implementation.createHTMLDocument(""),ie=new CKEDITOR.dom.element(ie.body),le,re,se;for(ie.data("cke-editable",1),ie.appendHtml(ae.dataValue),le=ie.find("img"),se=0;se<le.count();se++){re=le.getItem(se);var de=re.getAttribute("src"),ce=de&&"data:"==de.substring(0,5),me=null===re.data("cke-realelement");ce&&me&&!re.data("cke-upload-id")&&!re.isReadOnly(1)&&(ce=(ce=de.match(/image\/([a-z]+?);/i))&&ce[1]||"jpg",de=te.uploadRepository.create(de,j(ce)),de.upload(ne),oe.markElement(re,"uploadimage",de.id),oe.bindNotifications(te,de))}ae.dataValue=ie.getHtml()}}))}}})}(),function(){var $=!1;CKEDITOR.plugins.add("balloonpanel",{init:function(){$||(CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/balloonpanel.css"),$=!0)}}),CKEDITOR.ui.balloonPanel=function(j,ee){for(var te in this.editor=j,CKEDITOR.tools.extend(this,{width:360,height:"auto",triangleWidth:20,triangleHeight:20,triangleMinDistance:40},ee,!0),this.templates={},this.templateDefinitions)this.templates[te]=new CKEDITOR.template(this.templateDefinitions[te]);this.parts={},this.focusables={},this.showListeners={},this.activeShowListeners={},this.rect={visible:!1},this.build(),j.on("destroy",function(){this.destroy()},this)},CKEDITOR.ui.balloonPanel.prototype={templateDefinitions:{panel:"<div class=\"cke {id} cke_reset_all cke_chrome cke_balloon cke_editor_{name} cke_{langDir} "+CKEDITOR.env.cssClass+"\" dir=\"{langDir}\" title=\""+(CKEDITOR.env.gecko?" ":"")+"\" lang=\"{langCode}\" role=\"dialog\" style=\"{style}\" tabindex=\"-1\" aria-labelledby=\"cke_{name}_arialbl\"></div>",content:"<div class=\"cke_balloon_content\">{content}</div>",title:"<div class=\"cke_balloon_title\" role=\"presentation\">{title}</div>",close:"<a class=\"cke_balloon_close_button\" href=\"javascript:void(0)\" title=\"Close\" role=\"button\" tabindex=\"-1\"><span class=\"cke_label\">X</span></a>",triangleOuter:"<span class=\"cke_balloon_triangle cke_balloon_triangle_outer\"></span>",triangleInner:"<span class=\"cke_balloon_triangle cke_balloon_triangle_inner\">&#8203;</span>"},build:function(){var j=this.editor;this.parts={title:CKEDITOR.dom.element.createFromHtml(this.templates.title.output({title:this.title})),close:CKEDITOR.dom.element.createFromHtml(this.templates.close.output()),panel:CKEDITOR.dom.element.createFromHtml(this.templates.panel.output({id:j.id,langDir:j.lang.dir,langCode:j.langCode,name:j.name,style:"display:none;",voiceLabel:j.lang.editorPanel+", "+j.name})),content:CKEDITOR.dom.element.createFromHtml(this.templates.content.output({content:this.content||""})),triangleOuter:CKEDITOR.dom.element.createFromHtml(this.templates.triangleOuter.output()),triangleInner:CKEDITOR.dom.element.createFromHtml(this.templates.triangleInner.output())},this.parts.panel.append(this.parts.title,1),this.parts.panel.append(this.parts.close,1),this.parts.panel.append(this.parts.triangleOuter),this.parts.panel.append(this.parts.content),this.parts.triangleOuter.append(this.parts.triangleInner),this.registerFocusable(this.parts.panel),this.registerFocusable(this.parts.close),this.parts.title.unselectable(),this.parts.close.unselectable(),CKEDITOR.document.getBody().append(this.parts.panel),this.resize(this.width,this.height),this.on("show",this.activateShowListeners,this),this.on("hide",this.deactivateShowListeners,this),this.parts.close.on("click",function(ee){this.hide(),ee.data.preventDefault()},this)},show:function(){this.rect.visible||(this.rect.visible=!0,this.parts.panel.show(),this.fire("show"))},hide:function(){this.rect.visible&&(this.rect.visible=!1,this.parts.panel.hide(),this.blur(),this.fire("hide"))},blur:function(){this.editor.focus()},move:function(j,ee){this.rect.left=ee,this.rect.top=j,this.parts.panel.setStyles({left:CKEDITOR.tools.cssLength(ee),top:CKEDITOR.tools.cssLength(j)})},attach:function(){function j(de,ce){var me=_Mathmax(0,_Mathmin(de.right,ce.right)-_Mathmax(de.left,ce.left)),ue=_Mathmax(0,_Mathmin(de.bottom,ce.bottom)-_Mathmax(de.top,ce.top));return me*ue}function ee(de,ce,me,ue){return de={top:de,left:ce},de.right=de.left+me,de.bottom=de.top+ue,de}function te(de,ce){return de.right=ce.right,de.width=de.right-de.left,ce.y&&(de.y=ce.y),de}function oe(de){var ce=ne(de,!0);return de=ne(de),ce=te(ce[0],ce.pop()),de=te(de[0],de.pop()),ce.bottom=de.bottom,ce.height=ce.bottom-ce.top,de.y&&(ce.y=de.y),de.top=ce.top,de.height=ce.height,[ce,de]}function ne(de,ce){var me=ce?de[0]:de[de.length-1],ue=ce?"top":"bottom";return CKEDITOR.tools.array.filter(de,function(ge){if(ge[ue]===me[ue])return ge})}var se={right:"left",top:"bottom",topLeft:"bottomLeft",topRight:"bottomRight",bottom:"top",bottomLeft:"topLeft",bottomRight:"topRight",left:"right"},ae,ie,le,re;return function(de,ce){if(de instanceof CKEDITOR.dom.selection){var me=de.getRanges(),me=de.isFake&&de.isInTable()?CKEDITOR.tools.array.map(me,function(ve){return ve.getClientRects(!0)[0]}):me[me.length-1].getClientRects(!0),ue=me[0],ge=me[me.length-1],pe;pe=ue===ge?[ue]:ue.top===ge.top?[te(ue,ge)]:oe(me)}(ce instanceof CKEDITOR.dom.element||!ce)&&(ce={focusElement:ce}),ce=CKEDITOR.tools.extend(ce,{show:!0}),!0===ce.show&&this.show(),this.fire("attach"),ae=CKEDITOR.document.getWindow(),ie=this.editor.window.getFrame(),le=this.editor.editable(),re=le.isInline(),!re&&CKEDITOR.env.safari&&(ie=ie.getParent());var me=this.getWidth(),ue=this.getHeight(),ge=me*ue,he,fe,be;he=de.getClientRect&&de.getClientRect(!0);var _e=re?le.getClientRect(!0):ie.getClientRect(!0),Ee=ae.getViewPaneSize(),ye=ae.getScrollPosition(),ke={top:_Mathmax(_e.top,ye.y),left:_Mathmax(_e.left,ye.x),right:_Mathmin(_e.right,Ee.width+ye.x),bottom:_Mathmin(_e.bottom,Ee.height+ye.y)};for(var Te in re&&this.editor.elementMode===CKEDITOR.ELEMENT_MODE_INLINE&&(ke=this._getViewPaneRect(ae),ke.right+=this.triangleWidth,ke.bottom+=this.triangleHeight),pe?(CKEDITOR.tools.array.forEach(pe,function(ve){this._adjustElementRect(ve,re?ke:_e)},this),he=this._getAlignments(pe[0],me,ue),1<pe.length&&(he["bottom hcenter"]=this._getAlignments(pe[1],me,ue)["bottom hcenter"]),be={"top hcenter":!0,"bottom hcenter":!0}):(this._adjustElementRect(he,re?ke:_e),he=this._getAlignments(he,me,ue)),be||he){if(be=ee(he[Te].top,he[Te].left,me,ue),be=he[Te].areaDifference=ge-j(be,ke),0===be){fe=Te;break}fe||(fe=Te),be<he[fe].areaDifference&&(fe=Te)}Te=(be=this.parts.panel.getAscendant(function(ve){return!(ve instanceof CKEDITOR.dom.document)&&"static"!==ve.getComputedStyle("position")}))?parseInt(be.getComputedStyle("margin-left"),10):0,be=be?parseInt(be.getComputedStyle("margin-top"),10):0,this.move(he[fe].top-be,he[fe].left-Te),fe=fe.split(" "),this.setTriangle(se[fe[0]],fe[1]),!1!==ce.focusElement&&(ce.focusElement||this.parts.panel).focus()}}(),resize:function(j,ee){this.rect.width=j,this.rect.height=ee,this.parts.panel.setStyles({width:CKEDITOR.tools.cssLength(j),height:CKEDITOR.tools.cssLength(ee)})},getWidth:function(){return"auto"===this.rect.width?this.parts.panel.getClientRect().width:this.rect.width},getHeight:function(){return"auto"===this.rect.height?this.parts.panel.getClientRect().height:this.rect.height},setTriangle:function(j,ee){var te=this.parts.triangleOuter,oe=this.parts.triangleInner;this.triangleSide&&(te.removeClass("cke_balloon_triangle_"+this.triangleSide),te.removeClass("cke_balloon_triangle_align_"+this.triangleAlign),oe.removeClass("cke_balloon_triangle_"+this.triangleSide)),this.triangleSide=j,this.triangleAlign=ee,te.addClass("cke_balloon_triangle_"+j),te.addClass("cke_balloon_triangle_align_"+ee),oe.addClass("cke_balloon_triangle_"+j)},registerFocusable:function(j){this.editor.focusManager.add(j),this.focusables[j.getUniqueId()]=j},deregisterFocusable:function(j){this.editor.focusManager.remove(j),delete this.focusables[j.getUniqueId()]},addShowListener:function(j){var ee=CKEDITOR.tools.getNextNumber();this.showListeners[ee]=j,this.rect.visible&&this.activateShowListener(ee);var te=this;return{removeListener:function(){te.removeShowListener(ee)}}},removeShowListener:function(j){this.deactivateShowListener(j),delete this.showListeners[j]},activateShowListener:function(j){this.activeShowListeners[j]=this.showListeners[j].call(this)},deactivateShowListener:function(j){this.activeShowListeners[j]&&this.activeShowListeners[j].removeListener(),delete this.activeShowListeners[j]},activateShowListeners:function(){for(var j in this.showListeners)this.activateShowListener(j)},deactivateShowListeners:function(){for(var j in this.activeShowListeners)this.deactivateShowListener(j)},destroy:function(){this.deactivateShowListeners(),this.parts.panel.remove()},setTitle:function(j){this.parts.title.setHtml(j)},_getAlignments:function(j,ee,te){return{"right vcenter":{top:j.top+j.height/2-te/2,left:j.right+this.triangleWidth},"left vcenter":{top:j.top+j.height/2-te/2,left:j.left-ee-this.triangleWidth},"top hcenter":{top:j.top-te-this.triangleHeight,left:j.left+j.width/2-ee/2},"top left":{top:j.top-te-this.triangleHeight,left:j.left+j.width/2-this.triangleMinDistance},"top right":{top:j.top-te-this.triangleHeight,left:j.right-j.width/2-ee+this.triangleMinDistance},"bottom hcenter":{top:j.bottom+this.triangleHeight,left:j.left+j.width/2-ee/2},"bottom left":{top:j.bottom+this.triangleHeight,left:j.left+j.width/2-this.triangleMinDistance},"bottom right":{top:j.bottom+this.triangleHeight,left:j.right-j.width/2-ee+this.triangleMinDistance}}},_adjustElementRect:function(j,ee){j.left=_Mathmax(ee.left,_Mathmin(ee.right-1,j.left)),j.right=_Mathmax(ee.left,_Mathmin(ee.right,j.right)),j.top=_Mathmax(ee.top,_Mathmin(ee.bottom-1,j.top)),j.bottom=_Mathmax(ee.top,_Mathmin(ee.bottom,j.bottom))},_getViewPaneRect:function(j){var ee=j.getScrollPosition();return j=j.getViewPaneSize(),{top:ee.y,bottom:ee.y+j.height,left:ee.x,right:ee.x+j.width}}},CKEDITOR.event.implementOn(CKEDITOR.ui.balloonPanel.prototype)}(),function(){function $(ne,ae){this.editor=ne,this.options=ae,this.toolbar=new CKEDITOR.ui.balloonToolbar(ne),this.options&&"undefined"==typeof this.options.priority&&(this.options.priority=CKEDITOR.plugins.balloontoolbar.PRIORITY.MEDIUM),this._loadButtons()}function j(ne){this.editor=ne,this._contexts=[],this._listeners=[],this._attachListeners()}var ee=function(){return CKEDITOR.tools.array.filter(["matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector"],function(ne){return!!window.HTMLElement&&ne in HTMLElement.prototype})[0]}();CKEDITOR.ui.balloonToolbarView=function(ne,ae){ae=CKEDITOR.tools.extend(ae||{},{width:"auto",triangleWidth:7,triangleHeight:7}),CKEDITOR.ui.balloonPanel.call(this,ne,ae),this._listeners=[]},CKEDITOR.ui.balloonToolbar=function(ne,ae){this._view=new CKEDITOR.ui.balloonToolbarView(ne,ae),this._items={}},CKEDITOR.ui.balloonToolbar.prototype.attach=function(ne,ae){this._view.renderItems(this._items),this._view.attach(ne,{focusElement:!1,show:!ae})},CKEDITOR.ui.balloonToolbar.prototype.show=function(){this._view.show()},CKEDITOR.ui.balloonToolbar.prototype.hide=function(){this._view.hide()},CKEDITOR.ui.balloonToolbar.prototype.addItem=function(ne,ae){this._items[ne]=ae},CKEDITOR.ui.balloonToolbar.prototype.addItems=function(ne){for(var ae in ne)this.addItem(ae,ne[ae])},CKEDITOR.ui.balloonToolbar.prototype.getItem=function(ne){return this._items[ne]},CKEDITOR.ui.balloonToolbar.prototype.deleteItem=function(ne){this._items[ne]&&(delete this._items[ne],this._view.renderItems(this._items))},CKEDITOR.ui.balloonToolbar.prototype.destroy=function(){for(var ne in this._items)this._items[ne].destroy&&this._items[ne].destroy(),this.deleteItem(ne);this._pointedElement=null,this._view.destroy()},CKEDITOR.ui.balloonToolbar.prototype.refresh=function(){for(var ne in this._items){var ae=this._view.editor.getCommand(this._items[ne].command);ae&&ae.refresh(this._view.editor,this._view.editor.elementPath())}},$.prototype={destroy:function(){this.toolbar&&this.toolbar.destroy()},show:function(ne){ne&&this.toolbar.attach(ne),this.toolbar.show()},hide:function(){this.toolbar.hide()},refresh:function(){this.toolbar.refresh()},_matchRefresh:function(ne,ae){var ie=null;return this.options.refresh&&(ie=this.options.refresh(this.editor,ne,ae)||null)&&!1==ie instanceof CKEDITOR.dom.element&&(ie=ne&&ne.lastElement||this.editor.editable()),ie},_matchWidget:function(){var ne=this.options.widgets,ae=null;if(ne){var ie=this.editor.widgets&&this.editor.widgets.focused&&this.editor.widgets.focused.name;"string"==typeof ne&&(ne=ne.split(",")),-1!==CKEDITOR.tools.array.indexOf(ne,ie)&&(ae=this.editor.widgets.focused.element)}return ae},_matchElement:function(ne){return this.options.cssSelector&&ee&&ne.$[ee](this.options.cssSelector)?ne:null},_loadButtons:function(){var ne=this.options.buttons;ne&&(ne=ne.split(","),CKEDITOR.tools.array.forEach(ne,function(ae){var ie=this.editor.ui.create(ae);ie&&this.toolbar.addItem(ae,ie)},this))}},j.prototype={create:function(ne){return ne=new CKEDITOR.plugins.balloontoolbar.context(this.editor,ne),this.add(ne),ne},add:function(ne){this._contexts.push(ne)},check:function(ne){function ae(ue,ge,pe){le(ue,function(he){if(!ce||ce.options.priority>he.options.priority){var fe=ge(he,pe);fe instanceof CKEDITOR.dom.element&&(de=fe,ce=he)}})}function ie(ue,ge){return ue._matchElement(ge)}if(ne||(ne=this.editor.getSelection(),CKEDITOR.tools.array.forEach(ne.getRanges(),function(ue){ue.shrink(CKEDITOR.SHRINK_ELEMENT,!0)})),ne){var le=CKEDITOR.tools.array.forEach,re=ne.getRanges()[0],se=re&&re.startPath(),de,ce;if(ae(this._contexts,function(ue){return ue._matchRefresh(se,ne)}),ae(this._contexts,function(ue){return ue._matchWidget()}),se)for((re=ne.getSelectedElement())&&!re.isReadOnly()&&ae(this._contexts,ie,re),re=0;re<se.elements.length;re++){var me=se.elements[re];me.isReadOnly()||ae(this._contexts,ie,me)}this.hide(),ce&&ce.show(de)}},hide:function(){CKEDITOR.tools.array.forEach(this._contexts,function(ne){ne.hide()})},destroy:function(){CKEDITOR.tools.array.forEach(this._listeners,function(ne){ne.removeListener()}),this._listeners.splice(0,this._listeners.length),this._clear()},_clear:function(){CKEDITOR.tools.array.forEach(this._contexts,function(ne){ne.destroy()}),this._contexts.splice(0,this._contexts.length)},_refresh:function(){CKEDITOR.tools.array.forEach(this._contexts,function(ne){ne.refresh()})},_attachListeners:function(){this._listeners.push(this.editor.on("destroy",function(){this.destroy()},this),this.editor.on("selectionChange",function(){this.check()},this),this.editor.on("mode",function(){this.hide()},this,null,9999),this.editor.on("blur",function(){this.hide()},this,null,9999),this.editor.on("afterInsertHtml",function(){this.check(),this._refresh()},this,null,9999))}};var te=!1,oe=!1;CKEDITOR.plugins.add("balloontoolbar",{requires:"balloonpanel",beforeInit:function(ne){oe||(CKEDITOR.document.appendStyleSheet(this.path+"skins/default.css"),CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/balloontoolbar.css"),oe=!0),ne.balloonToolbars=new CKEDITOR.plugins.balloontoolbar.contextManager(ne)},init:function(ne){ne.balloonToolbars=new CKEDITOR.plugins.balloontoolbar.contextManager(ne),te||(te=!0,CKEDITOR.ui.balloonToolbarView.prototype=CKEDITOR.tools.extend({},CKEDITOR.ui.balloonPanel.prototype),CKEDITOR.ui.balloonToolbarView.prototype.build=function(){CKEDITOR.ui.balloonPanel.prototype.build.call(this),this.parts.panel.addClass("cke_balloontoolbar"),this.parts.title.remove(),this.deregisterFocusable(this.parts.close),this.parts.close.remove()},CKEDITOR.ui.balloonToolbarView.prototype.show=function(){function ae(){this.attach(this._pointedElement,{focusElement:!1})}if(!this.rect.visible){var ie=this.editor.editable();this._detachListeners(),this._listeners.push(this.editor.on("change",ae,this)),this._listeners.push(this.editor.on("resize",ae,this)),this._listeners.push(CKEDITOR.document.getWindow().on("resize",ae,this)),this._listeners.push(ie.attachListener(ie.getDocument(),"scroll",ae,this)),CKEDITOR.ui.balloonPanel.prototype.show.call(this)}},CKEDITOR.ui.balloonToolbarView.prototype.hide=function(){this._detachListeners(),CKEDITOR.ui.balloonPanel.prototype.hide.call(this)},CKEDITOR.ui.balloonToolbarView.prototype.blur=function(ae){ae&&this.editor.focus()},CKEDITOR.ui.balloonToolbarView.prototype._getAlignments=function(ae,ie,le){return ae=CKEDITOR.ui.balloonPanel.prototype._getAlignments.call(this,ae,ie,le),{"bottom hcenter":ae["bottom hcenter"],"top hcenter":ae["top hcenter"]}},CKEDITOR.ui.balloonToolbarView.prototype._detachListeners=function(){this._listeners.length&&(CKEDITOR.tools.array.forEach(this._listeners,function(ae){ae.removeListener()}),this._listeners=[])},CKEDITOR.ui.balloonToolbarView.prototype.destroy=function(){this._deregisterItemFocusables(),CKEDITOR.ui.balloonPanel.prototype.destroy.call(this),this._detachListeners()},CKEDITOR.ui.balloonToolbarView.prototype.renderItems=function(ae){var ie=[],le=CKEDITOR.tools.objectKeys(ae),re=!1;this._deregisterItemFocusables(),CKEDITOR.tools.array.forEach(le,function(se){CKEDITOR.ui.richCombo&&ae[se]instanceof CKEDITOR.ui.richCombo&&re?(re=!1,ie.push("</span>")):CKEDITOR.ui.richCombo&&ae[se]instanceof CKEDITOR.ui.richCombo||re||(re=!0,ie.push("<span class=\"cke_toolgroup\">")),ae[se].render(this.editor,ie)},this),re&&ie.push("</span>"),this.parts.content.setHtml(ie.join("")),this.parts.content.unselectable(),CKEDITOR.tools.array.forEach(this.parts.content.find("a").toArray(),function(se){se.setAttribute("draggable","false"),this.registerFocusable(se)},this)},CKEDITOR.ui.balloonToolbarView.prototype.attach=function(ae,ie){this._pointedElement=ae,CKEDITOR.ui.balloonPanel.prototype.attach.call(this,ae,ie)},CKEDITOR.ui.balloonToolbarView.prototype._deregisterItemFocusables=function(){var ae=this.focusables,ie;for(ie in ae)this.parts.content.contains(ae[ie])&&this.deregisterFocusable(ae[ie])})}}),CKEDITOR.plugins.balloontoolbar={context:$,contextManager:j,PRIORITY:{LOW:999,MEDIUM:500,HIGH:10}}}(),function(){function $(j){function ee(){ne=j.document,ae=ne[CKEDITOR.env.ie?"getBody":"getDocumentElement"](),ie=CKEDITOR.env.quirks?ne.getBody():ne.getDocumentElement();var ge=CKEDITOR.env.quirks?ie:ie.findOne("body");ge&&(ge.setStyle("height","auto"),ge.setStyle("min-height",CKEDITOR.env.safari?"0%":"auto")),le=CKEDITOR.dom.element.createFromHtml("<span style=\"margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;\">"+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",ne)}function te(){ce&&ie.setStyle("overflow-y","hidden");var ge=j.window.getViewPaneSize().height,pe;ae.append(le),pe=le.getDocumentPosition(ne).y+le.$.offsetHeight,le.remove(),pe+=re,pe=_Mathmax(pe,se),pe=_Mathmin(pe,de),pe!=ge&&oe!=pe&&(pe=j.fire("autoGrow",{currentHeight:ge,newHeight:pe}).newHeight,j.resize(j.container.getStyle("width"),pe,!0),oe=pe),ce||(pe<de&&ie.$.scrollHeight>ie.$.clientHeight?ie.setStyle("overflow-y","hidden"):ie.removeStyle("overflow-y"))}var re=j.config.autoGrow_bottomSpace||0,se=void 0===j.config.autoGrow_minHeight?200:j.config.autoGrow_minHeight,de=j.config.autoGrow_maxHeight||Infinity,ce=!j.config.autoGrow_maxHeight,oe,ne,ae,ie,le;j.addCommand("autogrow",{exec:te,modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1});var me={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1},ue;for(ue in me)j.on(ue,function(ge){"wysiwyg"==ge.editor.mode&&setTimeout(function(){var pe=j.getCommand("maximize");!j.window||pe&&pe.state==CKEDITOR.TRISTATE_ON?oe=null:(te(),ce||te())},100)});j.on("afterCommandExec",function(ge){"maximize"==ge.data.name&&"wysiwyg"==ge.editor.mode&&(ge.data.command.state==CKEDITOR.TRISTATE_ON?ie.removeStyle("overflow-y"):te())}),j.on("contentDom",ee),ee(),j.config.autoGrow_onStartup&&j.editable().isVisible()&&j.execCommand("autogrow")}CKEDITOR.plugins.add("autogrow",{init:function(j){j.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&j.on("instanceReady",function(){j.editable().isInline()?j.ui.space("contents").setStyle("height","auto"):$(j)})}})}(),function(){CKEDITOR.plugins.add("codemirror",{version:"1.17.10",init:function(j){function ee(){var ce=["core","addons"];switch(ae.mode){case"bbcode":case"bbcodemixed":ce.push("modeHtml");break;case"application/x-httpd-php":ce.push("modePHP");break;case"text/javascript":ce.push("modeJs");break;case"handlebars":ce.push("modeHandlebars");break;case"twig":ce.push("modeTwig");break;default:ce.push("modeHtml");}return ae.useBeautifyOnStart&&ce.push("beautifyModule"),ae.enableSearchTools&&ce.push("addonSearch"),ce}function te(){var ce=[ne+"js/codemirror.addons.min.js"];switch(ae.mode){case"handlebars":ce.push(ne+"js/codemirror.mode.handlebars.min.js");case"bbcode":ce.push(ne+"js/codemirror.mode.bbcode.min.js");break;case"bbcodemixed":ce.push(ne+"js/codemirror.mode.bbcodemixed.min.js");break;case"htmlmixed":ce.push(ne+"js/codemirror.mode.htmlmixed.min.js");break;case"text/html":ce.push(ne+"js/codemirror.mode.htmlmixed.min.js");break;case"application/x-httpd-php":ce.push(ne+"js/codemirror.mode.php.min.js");break;case"text/javascript":ce.push(ne+"js/codemirror.mode.javascript.min.js");break;case"twig":ce.push(ne+"js/codemirror.mode.twig.min.js");break;default:ce.push(ne+"js/codemirror.mode.htmlmixed.min.js");}return ae.useBeautifyOnStart&&ce.push(ne+"js/beautify.min.js"),ae.enableSearchTools&&ce.push(ne+"js/codemirror.addons.search.min.js"),ce}function oe(ce){function me(he){for(var fe=[[CKEDITOR.SHIFT,"Shift-"],[CKEDITOR.CTRL,"Ctrl-"],[CKEDITOR.ALT,"Alt-"]],be="",_e=0;_e<fe.length;_e++)he&fe[_e][0]&&(he-=fe[_e][0],be+=fe[_e][1]);return CodeMirror.keyNames[he]?be+CodeMirror.keyNames[he]:null}var ue=ce.ui.space("contents").getDocument().createElement("textarea");ue.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",ce.config.sourceAreaTabSize||4)));var ge=[ce.lang.editor,ce.name].join();ue.setAttributes({dir:"ltr",tabIndex:CKEDITOR.env.webkit?-1:ce.tabIndex,role:"textbox","aria-label":ge}),ue.addClass("cke_source"),ue.addClass("cke_reset"),ue.addClass("cke_enable_context_menu"),ce.ui.space("contents").append(ue),window["editable_"+ce.id]=ce.editable(new $(ce,ue)),window["editable_"+ce.id].setData(ce.getData(1)),window["editable_"+ce.id].editorID=ce.id,ce.fire("ariaWidget",this),ue=window["editable_"+ce.id],ge=ue.getParent(),ae.lineNumbers&&ae.enableCodeFolding&&(window["foldFunc_"+ce.id]=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder));var pe={"Ctrl-Q":function(he){ae.enableCodeFolding&&window["foldFunc_"+ce.id](he,he.getCursor().line)}};(function(he){var fe=ce.config.keystrokes;if(CKEDITOR.tools.isArray(fe))for(var be=0,_e;be<fe.length;be++)_e=me(fe[be][0]),null!==_e&&function(Ee){he[_e]=function(){ce.execCommand(Ee)}}(fe[be][1])})(pe),window["codemirror_"+ce.id]=CodeMirror.fromTextArea(ue.$,{mode:"handlebars"===ae.mode?{name:"handlebars",base:"text/html"}:ae.mode,matchBrackets:ae.matchBrackets,maxHighlightLineLength:ae.maxHighlightLineLength,matchTags:ae.matchTags,workDelay:300,workTime:35,readOnly:ce.readOnly,lineNumbers:ae.lineNumbers,lineWrapping:!0,autoCloseTags:ae.autoCloseTags,autoCloseBrackets:ae.autoCloseBrackets,highlightSelectionMatches:ae.highlightMatches,continueComments:ae.continueComments,indentWithTabs:ae.indentWithTabs,theme:ae.theme,showTrailingSpace:ae.showTrailingSpace,showCursorWhenSelecting:!0,styleActiveLine:ae.styleActiveLine,extraKeys:pe,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),ue=0==ge.$.clientHeight?ce.ui.space("contents").getStyle("height"):ge.$.clientHeight+"px",window["codemirror_"+ce.id].config=ae,ae.autoFormatOnStart&&(ae.useBeautifyOnStart?(ge=window["codemirror_"+ce.id].getValue(),window["codemirror_"+ce.id].setValue(html_beautify(ge,4," ",120,"collapse"))):window["codemirror_"+ce.id].autoFormatAll({line:0,ch:0},{line:window["codemirror_"+ce.id].lineCount(),ch:0})),window["codemirror_"+ce.id].on("change",function(){window["codemirror_"+ce.id].save(),ce.fire("change",this)}),window["codemirror_"+ce.id].setSize(null,ue),ae.lineNumbers&&ae.enableCodeFolding&&window["codemirror_"+ce.id].on("gutterClick",window["foldFunc_"+ce.id]),"function"==typeof ae.onLoad&&ae.onLoad(window["codemirror_"+ce.id],ce),window["codemirror_"+ce.id].on("blur",function(){ce.fire("blur",this)}),window["codemirror_"+ce.id].on("keypress",function(he,fe){if(ae.enableCodeFormatting){var be=window["codemirror_"+ce.id].getCursor(!0),_e=window["codemirror_"+ce.id].getCursor(!1);"keydown"!==fe.type||!fe.ctrlKey||75!==fe.keyCode||fe.shiftKey||fe.altKey?"keydown"===fe.type&&fe.ctrlKey&&75===fe.keyCode&&fe.shiftKey&&!fe.altKey?(window["codemirror_"+ce.id].commentRange(!1,be,_e),ae.autoFormatOnUncomment&&window["codemirror_"+ce.id].autoFormatRange(be,_e)):"keydown"===fe.type&&fe.ctrlKey&&75===fe.keyCode&&!fe.shiftKey&&fe.altKey&&window["codemirror_"+ce.id].autoFormatRange(be,_e):window["codemirror_"+ce.id].commentRange(!0,be,_e)}})}var ne=this.path,ae=CKEDITOR.tools.extend({autoCloseBrackets:!0,autoCloseTags:!0,autoFormatOnStart:!1,autoFormatOnUncomment:!1,autoLoadCodeMirror:!0,continueComments:!0,enableCodeFolding:!0,enableCodeFormatting:!0,enableSearchTools:!0,highlightMatches:!0,indentWithTabs:!1,lineNumbers:!0,lineWrapping:!0,mode:"htmlmixed",matchBrackets:!0,maxHighlightLineLength:1E3,matchTags:!0,showAutoCompleteButton:!0,showCommentButton:!0,showFormatButton:!0,showSearchButton:!0,showTrailingSpace:!0,showUncommentButton:!0,styleActiveLine:!0,theme:"default",useBeautifyOnStart:!1},j.config.codemirror||{},!0),ie=j.lang.codemirror;j.config.codemirror_theme&&(ae.theme=j.config.codemirror_theme),j.config.codemirror_autoFormatOnStart&&(ae.autoFormatOnStart=j.config.codemirror_autoFormatOnStart),j.plugins.bbcode&&0>=ae.mode.indexOf("bbcode")&&(ae.mode="bbcode");var le="function"==typeof require&&"function"==typeof require.config,re;if(le){var se=ae.requireContext||"_",de=CKEDITOR.getUrl("plugins/codemirror/js");re=require.config({context:se,packages:[{name:"codemirror",location:de,main:"codemirror.min.js"},{name:"codemirror-mode-handlebars",location:de,main:"codemirror.mode.handlebars.min.js"},{name:"codemirror-mode-twig",location:de,main:"codemirror.mode.twig.min.js"},{name:"codemirror-mode-html",location:de,main:"codemirror.mode.htmlmixed.min.js"},{name:"codemirror-mode-php",location:de,main:"codemirror.mode.php.min.js"},{name:"codemirror-mode-js",location:de,main:"codemirror.mode.js.min.js"},{name:"codemirror-addons",location:de,main:"codemirror.addons.min.js"},{name:"codemirror-addon-search",location:de,main:"codemirror.addons.search.min.js"},{name:"codemirror-beautify",location:de,main:"beautify.min.js"}],bundles:{codemirror:["core","codemirror.js"],"codemirror-mode-handlebars":["modeHandlebars"],"codemirror-mode-twig":["modeTwig"],"codemirror-mode-html":["modeHtml"],"codemirror-mode-php":["modePHP"],"codemirror-mode-js":["modeJS"],"codemirror-addons":["addons"],"codemirror-addon-search":["addonSearch"],"codemirror-beautify":["beautifyModule"]},map:{"*":{"lib/codemirror":"codemirror.js"}}})}(j.elementMode===CKEDITOR.ELEMENT_MODE_INLINE||j.plugins.sourcedialog)&&CKEDITOR.dialog.add("sourcedialog",function(ce){function me(he,fe,be){var _e=be.getSize();be=_e.width,_e=_e.height/1.5,window["codemirror_"+he.id]=CodeMirror.fromTextArea(fe,{mode:"handlebars"===ae.mode?{name:"handlebars",base:"text/html"}:ae.mode,matchBrackets:ae.matchBrackets,maxHighlightLineLength:ae.maxHighlightLineLength,matchTags:ae.matchTags,workDelay:300,workTime:35,readOnly:he.readOnly,lineNumbers:ae.lineNumbers,lineWrapping:ae.lineWrapping,autoCloseTags:ae.autoCloseTags,autoCloseBrackets:ae.autoCloseBrackets,highlightSelectionMatches:ae.highlightMatches,continueComments:ae.continueComments,indentWithTabs:ae.indentWithTabs,theme:ae.theme,showTrailingSpace:ae.showTrailingSpace,showCursorWhenSelecting:!0,styleActiveLine:ae.styleActiveLine,viewportMargin:Infinity,extraKeys:{"Ctrl-Q":function(Ee){ae.enableCodeFolding&&window["foldFunc_"+he.id](Ee,Ee.getCursor().line)}},foldGutter:!0,gutters:["CodeMirror-linenumbbers","CodeMirror-foldgutter"]}),fe=_e+"px",be+="px",window["codemirror_"+he.id].config=ae,ae.autoFormatOnStart&&(ae.useBeautifyOnStart?(_e=window["codemirror_"+he.id].getValue(),window["codemirror_"+he.id].setValue(html_beautify(_e,4," ",120,"collapse"))):window["codemirror_"+he.id].autoFormatAll({line:0,ch:0},{line:window["codemirror_"+he.id].lineCount(),ch:0})),window["codemirror_"+he.id].on("change",function(){window["codemirror_"+he.id].save(),he.fire("change",this)}),window["codemirror_"+he.id].setSize(be,fe),ae.lineNumbers&&ae.enableCodeFolding&&window["codemirror_"+he.id].on("gutterClick",window["foldFunc_"+he.id]),"function"==typeof ae.onLoad&&ae.onLoad(window["codemirror_"+he.id],he),window["codemirror_"+he.id].on("blur",function(){he.fire("blur",this)}),window["codemirror_"+he.id].on("keypress",function(Ee,ye){if(ae.enableCodeFormatting){var ke=window["codemirror_"+he.id].getCursor(!0),Te=window["codemirror_"+he.id].getCursor(!1);"keydown"!==ye.type||!ye.ctrlKey||75!==ye.keyCode||ye.shiftKey||ye.altKey?"keydown"===ye.type&&ye.ctrlKey&&75===ye.keyCode&&ye.shiftKey&&!ye.altKey?(window["codemirror_"+he.id].commentRange(!1,ke,Te),ae.autoFormatOnUncomment&&window["codemirror_"+he.id].autoFormatRange(ke,Te)):"keydown"===ye.type&&ye.ctrlKey&&75===ye.keyCode&&!ye.shiftKey&&ye.altKey&&window["codemirror_"+he.id].autoFormatRange(ke,Te):window["codemirror_"+he.id].commentRange(!0,ke,Te)}}),he.plugins.textselection&&textRange&&!he.config.fullPage&&(fe=s(window["codemirror_"+he.id],textRange.startOffset),"undefined"==typeof textRange.endOffset?(window["codemirror_"+he.id].focus(),window["codemirror_"+he.id].setCursor(fe)):(window["codemirror_"+he.id].focus(),be=s(window["codemirror_"+he.id],textRange.endOffset),window["codemirror_"+he.id].setSelection(fe,be)))}var ue=CKEDITOR.document.getWindow().getViewPaneSize(),ge=_Mathmin(ue.width-70,800),ue=ue.height/1.5,pe;return{title:ce.lang.sourcedialog.title,minWidth:ge,minHeight:ue,resizable:CKEDITOR.DIALOG_RESIZE_BOTH,onLoad:function(){this.on("resize",function(he){var fe=he.sender.parts;window["codemirror_"+ce.id].setSize(he.data.width+"px",he.data.height-fe.title.$.offsetHeight-fe.footer.$.offsetHeight+"px")},this)},onShow:function(he){this.getContentElement("main","data").focus(),this.getContentElement("main","AutoComplete").setValue(ae.autoCloseTags,!0);var fe=this.getContentElement("main","data").getInputElement().$;this.setValueOf("main","data",pe=ce.getData()),ae.autoLoadCodeMirror&&(_(ne+"css/codemirror.min.css")||CKEDITOR.document.appendStyleSheet(ne+"css/codemirror.min.css"),ae.theme.length&&"default"!=ae.theme&&!_(ne+"theme/"+ae.theme+".css")&&CKEDITOR.document.appendStyleSheet(ne+"theme/"+ae.theme+".css"),le?re(ee(),function(){me(ce,fe,he.sender)}):"undefined"==typeof CodeMirror?CKEDITOR.scriptLoader.load(ne+"js/codemirror.min.js",function(){CKEDITOR.scriptLoader.load(te(),function(){me(ce,fe,he.sender)})}):CodeMirror.prototype.autoFormatAll?me(ce,fe,he.sender):CKEDITOR.scriptLoader.load(te(),function(){me(ce,fe,he.sender)}))},onCancel:function(he){he.data.hide&&(window["codemirror_"+ce.id].toTextArea(),window["codemirror_"+ce.id]=null,ce.fire("blur",this),ce.fire("focus",this))},onOk:function(){function he(fe){var be=this;ce.setData(fe,function(){be.hide();var _e=ce.createRange();_e.moveToElementEditStart(ce.editable()),_e.select()})}return function(){window["codemirror_"+ce.id].toTextArea(),window["codemirror_"+ce.id]=null;var fe=this.getValueOf("main","data").replace(/\r/g,"");return fe===pe?(ce.fire("blur",this),ce.fire("focus",this),!0):(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(he,0,this,fe):he.call(this,fe),ce.fire("blur",this),ce.fire("focus",this),!1)}}(),contents:[{id:"main",label:ce.lang.sourcedialog.title,elements:[{type:"hbox",style:"width: 80px;margin:0;",widths:["20px","20px","20px","20px"],children:[{type:"button",id:"searchCode",label:"",title:ie.searchCode,class:"searchCodeButton",onClick:function(){CodeMirror.commands.find(window["codemirror_"+ce.id])}},{type:"button",id:"autoFormat",label:"",title:ie.autoFormat,class:"autoFormat",onClick:function(){var he=window["codemirror_"+ce.id].getCursor(!0),fe=window["codemirror_"+ce.id].getCursor(!1);window["codemirror_"+ce.id].autoFormatRange(he,fe)}},{type:"button",id:"CommentSelectedRange",label:"",title:ie.commentSelectedRange,class:"CommentSelectedRange",onClick:function(){var he=window["codemirror_"+ce.id].getCursor(!0),fe=window["codemirror_"+ce.id].getCursor(!1);window["codemirror_"+ce.id].commentRange(!0,he,fe)}},{type:"button",id:"UncommentSelectedRange",label:"",title:ie.uncommentSelectedRange,class:"UncommentSelectedRange",onClick:function(){var he=window["codemirror_"+ce.id].getCursor(!0),fe=window["codemirror_"+ce.id].getCursor(!1);window["codemirror_"+ce.id].commentRange(!1,he,fe),window["codemirror_"+ce.id].config.autoFormatOnUncomment&&window["codemirror_"+ce.id].autoFormatRange(he,fe)}}]},{type:"checkbox",id:"AutoComplete",label:ie.autoCompleteToggle,title:ie.autoCompleteToggle,onChange:function(){window["codemirror_"+ce.id].setOption("autoCloseTags",this.getValue())}},{type:"textarea",id:"data",dir:"ltr",inputStyle:"cursor:auto;width:"+ge+"px;height:"+ue+"px;tab-size:4;text-align:left;",class:"cke_source cke_enable_context_menu"}]}]}}),j.commands.find&&(j.commands.find.modes={wysiwyg:1,source:1},j.commands.find.exec=function(){"wysiwyg"===j.mode?j.openDialog("find"):CodeMirror.commands.find(window["codemirror_"+j.id])}),j.commands.replace&&(j.commands.replace.modes={wysiwyg:1,source:1},j.commands.replace.exec=function(){"wysiwyg"===j.mode?j.openDialog("find",function(){this.selectPage("replace")}):CodeMirror.commands.replace(window["codemirror_"+j.id])}),se=CKEDITOR.plugins.sourcearea,se.commands.searchCode||(CKEDITOR.plugins.sourcearea.commands={source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(ce){"wysiwyg"===ce.mode&&ce.fire("saveSnapshot"),ce.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),ce.setMode("source"===ce.mode?"wysiwyg":"source")},canUndo:!1},searchCode:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(ce){CodeMirror.commands.find(window["codemirror_"+ce.id])},canUndo:!0},autoFormat:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(ce){var me=window["codemirror_"+ce.id].getCursor(!0),ue=window["codemirror_"+ce.id].getCursor(!1);window["codemirror_"+ce.id].autoFormatRange(me,ue)},canUndo:!0},commentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(ce){var me=window["codemirror_"+ce.id].getCursor(!0),ue=window["codemirror_"+ce.id].getCursor(!1);window["codemirror_"+ce.id].commentRange(!0,me,ue)},canUndo:!0},uncommentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(ce){var me=window["codemirror_"+ce.id].getCursor(!0),ue=window["codemirror_"+ce.id].getCursor(!1);window["codemirror_"+ce.id].commentRange(!1,me,ue),window["codemirror_"+ce.id].config.autoFormatOnUncomment&&window["codemirror_"+ce.id].autoFormatRange(me,ue)},canUndo:!0},autoCompleteToggle:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(ce){this.state==CKEDITOR.TRISTATE_ON?window["codemirror_"+ce.id].setOption("autoCloseTags",!1):this.state==CKEDITOR.TRISTATE_OFF&&window["codemirror_"+ce.id].setOption("autoCloseTags",!0),this.toggleState()},canUndo:!0}}),j.addMode("source",function(ce){ae.autoLoadCodeMirror&&(_(ne+"css/codemirror.min.css")||CKEDITOR.document.appendStyleSheet(ne+"css/codemirror.min.css"),ae.theme.length&&"default"!=ae.theme&&!_(ne+"theme/"+ae.theme+".css")&&CKEDITOR.document.appendStyleSheet(ne+"theme/"+ae.theme+".css"),le?re(ee(),function(){oe(j),ce()}):"undefined"==typeof CodeMirror?CKEDITOR.scriptLoader.load(ne+"js/codemirror.min.js",function(){CKEDITOR.scriptLoader.load(te(),function(){oe(j),ce()})}):CodeMirror.prototype.autoFormatAll?(oe(j),ce()):CKEDITOR.scriptLoader.load(te(),function(){oe(j),ce()}))}),j.addCommand("source",se.commands.source),j.ui.addButton&&j.ui.addButton("Source",{label:j.lang.codemirror.toolbar,command:"source",toolbar:"mode,10"}),ae.enableCodeFormatting&&(j.addCommand("searchCode",se.commands.searchCode),j.addCommand("autoFormat",se.commands.autoFormat),j.addCommand("commentSelectedRange",se.commands.commentSelectedRange),j.addCommand("uncommentSelectedRange",se.commands.uncommentSelectedRange),j.addCommand("autoCompleteToggle",se.commands.autoCompleteToggle),j.ui.addButton&&((ae.showFormatButton||ae.showCommentButton||ae.showUncommentButton||ae.showSearchButton)&&j.ui.add("-",CKEDITOR.UI_SEPARATOR,{toolbar:"mode,30"}),ae.showSearchButton&&ae.enableSearchTools&&j.ui.addButton("searchCode",{label:ie.searchCode,command:"searchCode",toolbar:"mode,40"}),ae.showFormatButton&&j.ui.addButton("autoFormat",{label:ie.autoFormat,command:"autoFormat",toolbar:"mode,50"}),ae.showCommentButton&&j.ui.addButton("CommentSelectedRange",{label:ie.commentSelectedRange,command:"commentSelectedRange",toolbar:"mode,60"}),ae.showUncommentButton&&j.ui.addButton("UncommentSelectedRange",{label:ie.uncommentSelectedRange,command:"uncommentSelectedRange",toolbar:"mode,70"}),ae.showAutoCompleteButton&&j.ui.addButton("AutoComplete",{label:ie.autoCompleteToggle,command:"autoCompleteToggle",toolbar:"mode,80"}))),j.on("beforeModeUnload",function(ce){if("source"===j.mode&&j.plugins.textselection&&!j.config.fullPage){var me=j.getTextSelection();me.startOffset=o(window["codemirror_"+j.id],window["codemirror_"+j.id].getCursor(!0)),me.endOffset=o(window["codemirror_"+j.id],window["codemirror_"+j.id].getCursor(!1)),delete me.element,me.createBookmark(j),sourceBookmark=!0,j.undoManager&&j.undoManager.unlock(),ce.data=me.content}}),j.on("mode",function(){if(j.getCommand("source").setState("source"===j.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),"source"===j.mode&&(j.getCommand("autoCompleteToggle").setState(window["codemirror_"+j.id].config.autoCloseTags?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),j.plugins.textselection&&textRange&&!j.config.fullPage)){var ce,me;ce=s(window["codemirror_"+j.id],textRange.startOffset),"undefined"==typeof textRange.endOffset?(window["codemirror_"+j.id].focus(),window["codemirror_"+j.id].setCursor(ce)):(window["codemirror_"+j.id].focus(),me=s(window["codemirror_"+j.id],textRange.endOffset),window["codemirror_"+j.id].setSelection(ce,me))}}),j.on("resize",function(){if(window["editable_"+j.id]&&"source"===j.mode){var ce=window["editable_"+j.id].getParent();window["codemirror_"+j.id].setSize(ce.$.clientWidth+"px",ce.$.clientHeight+"px")}}),j.on("readOnly",function(){window["editable_"+j.id]&&"source"===j.mode&&window["codemirror_"+j.id].setOption("readOnly",this.readOnly)}),j.on("instanceReady",function(ce){ce=j.commands.selectAll,null!=ce&&(ce.exec=function(){if("source"===j.mode)window["codemirror_"+j.id].setSelection({line:0,ch:0},{line:window["codemirror_"+j.id].lineCount(),ch:0});else{var me=j.editable();if(me.is("body"))j.document.$.execCommand("SelectAll",!1,null);else{var ue=j.createRange();ue.selectNodeContents(me),ue.select()}j.forceNextSelectionCheck(),j.selectionChange()}})}),"undefined"!=typeof jQuery&&jQuery("a[data-toggle=\"tab\"]")&&window["codemirror_"+j.id]&&jQuery("a[data-toggle=\"tab\"]").on("shown.bs.tab",function(){window["codemirror_"+j.id].refresh()}),j.on("setData",function(ce){window["editable_"+ce.editor.id]&&"source"===ce.editor.mode&&window["codemirror_"+ce.editor.id].setValue(ce.data.dataValue)})}});var $=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(j){this.setValue(j),window["editable_"+this.editor.id]&&"source"===this.editor.mode&&window["codemirror_"+this.editor.id].setValue(j),this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(j){this[(j?"set":"remove")+"Attribute"]("readOnly","readonly")},editorID:null,detach:function(){window["codemirror_"+this.editorID].toTextArea(),window["editable_"+this.editorID]=null,window["codemirror_"+this.editorID]=null,$.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function($){"wysiwyg"===$.mode&&$.fire("saveSnapshot"),$.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),$.setMode("source"===$.mode?"wysiwyg":"source")},canUndo:!1},searchCode:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function($){CodeMirror.commands.find(window["codemirror_"+$.id])},canUndo:!0},autoFormat:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:0,exec:function($){var j=window["codemirror_"+$.id].getCursor(!0),ee=window["codemirror_"+$.id].getCursor(!1);window["codemirror_"+$.id].autoFormatRange(j,ee)},canUndo:!0},commentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:0,exec:function($){var j=window["codemirror_"+$.id].getCursor(!0),ee=window["codemirror_"+$.id].getCursor(!1);window["codemirror_"+$.id].commentRange(!0,j,ee)},canUndo:!0},uncommentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:0,exec:function($){var j=window["codemirror_"+$.id].getCursor(!0),ee=window["codemirror_"+$.id].getCursor(!1);window["codemirror_"+$.id].commentRange(!1,j,ee),window["codemirror_"+$.id].config.autoFormatOnUncomment&&window["codemirror_"+$.id].autoFormatRange(j,ee)},canUndo:!0},autoCompleteToggle:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function($){this.state==CKEDITOR.TRISTATE_ON?window["codemirror_"+$.id].setOption("autoCloseTags",!1):this.state==CKEDITOR.TRISTATE_OFF&&window["codemirror_"+$.id].setOption("autoCloseTags",!0),this.toggleState()},canUndo:!0}}},function(){function $(ge){function pe(){this.deflated||(ge.widgets.focused==this.widget&&(this.focused=!0),ge.widgets.destroy(this.widget),this.deflated=!0)}function he(){var _e=ge.editable(),Ee=ge.document;if(this.deflated)this.widget=ge.widgets.initOn(this.element,"image",this.widget.data),this.widget.inline&&!new CKEDITOR.dom.elementPath(this.widget.wrapper,_e).block&&(_e=Ee.createElement(ge.activeEnterMode==CKEDITOR.ENTER_P?"p":"div"),_e.replace(this.widget.wrapper),this.widget.wrapper.move(_e)),this.focused&&(this.widget.focus(),delete this.focused),delete this.deflated;else{var ye=this.widget,_e=fe,Ee=ye.wrapper,ke=ye.data.align,ye=ye.data.hasCaption;if(_e){for(var Te=3;Te--;)Ee.removeClass(_e[Te]);"center"==ke?ye&&Ee.addClass(_e[1]):"none"!=ke&&Ee.addClass(_e[me[ke]])}else"center"==ke?(ye?Ee.setStyle("text-align","center"):Ee.removeStyle("text-align"),Ee.removeStyle("float")):("none"==ke?Ee.removeStyle("float"):Ee.setStyle("float",ke),Ee.removeStyle("text-align"))}}var fe=ge.config.image2_alignClasses,be=ge.config.image2_captionedClass;return{allowedContent:re(ge),requiredContent:"img[src,alt]",features:se(ge),styleableElements:"img figure",contentTransformations:[["img[width]: sizeToAttribute"]],editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href,target]"}},parts:{image:"img",caption:"figcaption"},dialog:"image2",template:"<img alt=\"\" src=\"\" />",data:function(){var _e=this.features;if(this.data.hasCaption&&!ge.filter.checkFeature(_e.caption)&&(this.data.hasCaption=!1),"none"==this.data.align||ge.filter.checkFeature(_e.align)||(this.data.align="none"),this.shiftState({widget:this,element:this.element,oldData:this.oldData,newData:this.data,deflate:pe,inflate:he}),this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link,this.parts.image.setAttributes({src:this.data.src,"data-cke-saved-src":this.data.src,alt:this.data.alt}),this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var Ee in this.data.classes)this.parts.image.removeClass(Ee);if(ge.filter.checkFeature(_e.dimension))for(var ye in _e=this.data,_e={width:_e.width,height:_e.height},Ee=this.parts.image,_e)_e[ye]?Ee.setAttribute(ye,_e[ye]):Ee.removeAttribute(ye);this.oldData=CKEDITOR.tools.extend({},this.data)},init:function(){var _e=CKEDITOR.plugins.image2,Ee=this.parts.image,ye={hasCaption:!!this.parts.caption,src:Ee.getAttribute("src"),alt:Ee.getAttribute("alt")||"",width:Ee.getAttribute("width")||"",height:Ee.getAttribute("height")||"",lock:!this.ready||_e.checkHasNaturalRatio(Ee)},ke=Ee.getAscendant("a");ke&&this.wrapper.contains(ke)&&(this.parts.link=ke),ye.align||(Ee=ye.hasCaption?this.element:Ee,fe?(Ee.hasClass(fe[0])?ye.align="left":Ee.hasClass(fe[2])&&(ye.align="right"),ye.align?Ee.removeClass(fe[me[ye.align]]):ye.align="none"):(ye.align=Ee.getStyle("float")||"none",Ee.removeStyle("float"))),ge.plugins.link&&this.parts.link&&(ye.link=_e.getLinkAttributesParser()(ge,this.parts.link),(Ee=ye.link.advanced)&&Ee.advCSSClasses&&(Ee.advCSSClasses=CKEDITOR.tools.trim(Ee.advCSSClasses.replace(/cke_\S+/,"")))),this.wrapper[(ye.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption"),this.setData(ye),ge.filter.checkFeature(this.features.dimension)&&!0!==ge.config.image2_disableResizer&&ne(this),this.shiftState=_e.stateShifter(this.editor),this.on("contextMenu",function(Te){Te.data.image=CKEDITOR.TRISTATE_OFF,(this.parts.link||this.wrapper.getAscendant("a"))&&(Te.data.link=Te.data.unlink=CKEDITOR.TRISTATE_OFF)}),this.on("dialog",function(Te){Te.data.widget=this},this)},addClass:function(_e){de(this).addClass(_e)},hasClass:function(_e){return de(this).hasClass(_e)},removeClass:function(_e){de(this).removeClass(_e)},getClasses:function(){var _e=new RegExp("^("+[].concat(be,fe).join("|")+")$");return function(){var Ee=this.repository.parseElementClasses(de(this).getAttribute("class")),ye;for(ye in Ee)_e.test(ye)&&delete Ee[ye];return Ee}}(),upcast:j(ge),downcast:ee(ge),getLabel:function(){return this.editor.lang.widget.label.replace(/%1/,(this.data.alt||"")+" "+this.pathName)}}}function j(ge){var pe=te(ge),he=ge.config.image2_captionedClass;return function(fe,be){var _e={width:1,height:1},Ee=fe.name,ye;if(!fe.attributes["data-cke-realelement"]&&(pe(fe)?("div"==Ee&&(ye=fe.getFirst("figure"))&&(fe.replaceWith(ye),fe=ye),be.align="center",ye=fe.getFirst("img")||fe.getFirst("a").getFirst("img")):"figure"==Ee&&fe.hasClass(he)?ye=fe.find(function(Te){return"img"===Te.name&&-1!==CKEDITOR.tools.array.indexOf(["figure","a"],Te.parent.name)},!0)[0]:oe(fe)&&(ye="a"==fe.name?fe.children[0]:fe),ye)){for(var ke in _e)(_e=ye.attributes[ke])&&_e.match(ue)&&delete ye.attributes[ke];return fe}}}function ee(ge){var pe=ge.config.image2_alignClasses;return function(he){var fe="a"==he.name?he.getFirst():he,be=fe.attributes,_e=this.data.align;if(!this.inline){var Ee=he.getFirst("span");Ee&&Ee.replaceWith(Ee.getFirst({img:1,a:1}))}return _e&&"none"!=_e&&(Ee=CKEDITOR.tools.parseCssText(be.style||""),"center"==_e&&"figure"==he.name?he=he.wrapWith(new CKEDITOR.htmlParser.element("div",pe?{class:pe[1]}:{style:"text-align:center"})):_e in{left:1,right:1}&&(pe?fe.addClass(pe[me[_e]]):Ee.float=_e),pe||CKEDITOR.tools.isEmpty(Ee)||(be.style=CKEDITOR.tools.writeCssText(Ee))),he}}function te(ge){var pe=ge.config.image2_captionedClass,he=ge.config.image2_alignClasses,fe={figure:1,a:1,img:1};return function(be){if(!(be.name in{div:1,p:1}))return!1;var _e=be.children;if(1!==_e.length)return!1;if(_e=_e[0],!(_e.name in fe))return!1;if("p"==be.name){if(!oe(_e))return!1;}else if("figure"==_e.name){if(!_e.hasClass(pe))return!1;}else if(ge.enterMode==CKEDITOR.ENTER_P||!oe(_e))return!1;return he?!!be.hasClass(he[1]):"center"==CKEDITOR.tools.parseCssText(be.attributes.style||"",!0)["text-align"]}}function oe(ge){return"img"==ge.name||"a"==ge.name&&1==ge.children.length&&ge.getFirst("img")}function ne(ge){var pe=ge.editor,he=pe.editable(),fe=pe.document,be=ge.resizer=fe.createElement("span");if(be.addClass("cke_image_resizer"),be.setAttribute("title",pe.lang.image2.resizer),be.append(new CKEDITOR.dom.text("\u200B",fe)),ge.inline)ge.wrapper.append(be);else{var _e=ge.parts.link||ge.parts.image,Ee=_e.getParent(),ye=fe.createElement("span");ye.addClass("cke_image_resizer_wrapper"),ye.append(_e),ye.append(be),ge.element.append(ye,!0),Ee.is("span")&&Ee.remove()}be.on("mousedown",function(ke){function Te(qe,ze,Ue){var je=CKEDITOR.document,Ve=[];if(fe.equals(je)||Ve.push(je.on(qe,ze)),Ve.push(fe.on(qe,ze)),Ue)for(qe=Ve.length;qe--;)Ue.push(Ve.pop())}function ve(){Fe=Ie+Ne*Me,Be=_Mathround(Fe/Ae)}function Ce(){Be=Oe-$e,Fe=_Mathround(Be*Ae)}var Se=ge.parts.image,Ne="right"==ge.data.align?-1:1,xe=ke.data.$.screenX,we=ke.data.$.screenY,Ie=Se.$.clientWidth,Oe=Se.$.clientHeight,Ae=Ie/Oe,De=[],Re="cke_image_s"+(~Ne?"e":"w"),Le,Fe,Be,Pe,Me,$e,He;pe.fire("saveSnapshot"),Te("mousemove",function(qe){Le=qe.data.$,Me=Le.screenX-xe,$e=we-Le.screenY,He=_Mathabs(Me/$e),1==Ne?0>=Me?0>=$e?ve():He>=Ae?ve():Ce():0>=$e?He>=Ae?Ce():ve():Ce():0>=Me?0>=$e?He>=Ae?Ce():ve():Ce():0>=$e?ve():He>=Ae?ve():Ce(),15<=Fe&&15<=Be?(Se.setAttributes({width:Fe,height:Be}),Pe=!0):Pe=!1},De),Te("mouseup",function(){for(var qe;qe=De.pop();)qe.removeListener();he.removeClass(Re),be.removeClass("cke_image_resizing"),Pe&&(ge.setData({width:Fe,height:Be}),pe.fire("saveSnapshot")),Pe=!1},De),he.addClass(Re),be.addClass("cke_image_resizing")}),ge.on("data",function(){be["right"==ge.data.align?"addClass":"removeClass"]("cke_image_resizer_left")})}function ae(ge){var pe=[],he;return function(fe){var be=ge.getCommand("justify"+fe);be&&(pe.push(function(){be.refresh(ge,ge.elementPath())}),fe in{right:1,left:1,center:1}&&be.on("exec",function(_e){var Ee=le(ge);if(Ee){for(Ee.setData("align",fe),Ee=pe.length;Ee--;)pe[Ee]();_e.cancel()}}),be.on("refresh",function(_e){var Ee=le(ge);Ee&&(void 0==he&&(he=ge.filter.checkFeature(ge.widgets.registered.image.features.align)),he?this.setState(Ee.data.align==fe?CKEDITOR.TRISTATE_ON:fe in{right:1,left:1,center:1}?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED):this.setState(CKEDITOR.TRISTATE_DISABLED),_e.cancel())}))}}function ie(ge){if(ge.plugins.link){var pe=CKEDITOR.on("dialogDefinition",function(he){if(he=he.data,"link"==he.name){he=he.definition;var fe=he.onShow,be=he.onOk;he.onShow=function(){var _e=le(ge),Ee=this.getContentElement("info","linkDisplayText").getElement().getParent().getParent();_e&&(_e.inline?!_e.wrapper.getAscendant("a"):1)?(this.setupContent(_e.data.link||{}),Ee.hide()):(Ee.show(),fe.apply(this,arguments))},he.onOk=function(){var _e=le(ge);if(_e&&(_e.inline?!_e.wrapper.getAscendant("a"):1)){var Ee={};this.commitContent(Ee),_e.setData("link",Ee)}else be.apply(this,arguments)}}});ge.on("destroy",function(){pe.removeListener()}),ge.getCommand("unlink").on("exec",function(he){var fe=le(ge);fe&&fe.parts.link&&(fe.setData("link",null),this.refresh(ge,ge.elementPath()),he.cancel())}),ge.getCommand("unlink").on("refresh",function(he){var fe=le(ge);fe&&(this.setState(fe.data.link||fe.wrapper.getAscendant("a")?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),he.cancel())})}}function le(ge){return(ge=ge.widgets.focused)&&"image"==ge.name?ge:null}function re(ge){var pe=ge.config.image2_alignClasses;return ge={div:{match:te(ge)},p:{match:te(ge)},img:{attributes:"!src,alt,width,height"},figure:{classes:"!"+ge.config.image2_captionedClass},figcaption:!0},pe?(ge.div.classes=pe[1],ge.p.classes=ge.div.classes,ge.img.classes=pe[0]+","+pe[2],ge.figure.classes+=","+ge.img.classes):(ge.div.styles="text-align",ge.p.styles="text-align",ge.img.styles="float",ge.figure.styles="float,display"),ge}function se(ge){return ge=ge.config.image2_alignClasses,{dimension:{requiredContent:"img[width,height]"},align:{requiredContent:"img"+(ge?"("+ge[0]+")":"{float}")},caption:{requiredContent:"figcaption"}}}function de(ge){return ge.data.hasCaption?ge.element:ge.parts.image}var ce=new CKEDITOR.template("<figure class=\"{captionedClass}\"><img alt=\"\" src=\"\" /><figcaption>{captionPlaceholder}</figcaption></figure>"),me={left:0,center:1,right:2},ue=/^\s*(\d+\%)\s*$/i;CKEDITOR.plugins.add("image2",{requires:"widget,dialog",icons:"image",hidpi:!0,onLoad:function(){CKEDITOR.addCss(".cke_image_nocaption{line-height:0}.cke_editable.cke_image_sw, .cke_editable.cke_image_sw *{cursor:sw-resize !important}.cke_editable.cke_image_se, .cke_editable.cke_image_se *{cursor:se-resize !important}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;bottom:-5px;right:-5px;background:#000;outline:1px solid #fff;line-height:0;cursor:se-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_image_resizer.cke_image_resizer_left{right:auto;left:-5px;cursor:sw-resize;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizer.cke_image_resizing{display:block}.cke_editable[contenteditable=\"false\"] .cke_image_resizer{display:none;}.cke_widget_wrapper>a{display:inline-block}")},init:function(ge){if(!ge.plugins.detectConflict("image2",["easyimage"])){var pe=ge.config,he=ge.lang.image2,fe=$(ge);pe.filebrowserImage2BrowseUrl=pe.filebrowserImageBrowseUrl,pe.filebrowserImage2UploadUrl=pe.filebrowserImageUploadUrl,fe.pathName=he.pathName,fe.editables.caption.pathName=he.pathNameCaption,ge.widgets.add("image",fe),ge.ui.addButton&&ge.ui.addButton("Image",{label:ge.lang.common.image,command:"image",toolbar:"insert,10"}),ge.contextMenu&&(ge.addMenuGroup("image",10),ge.addMenuItem("image",{label:he.menu,command:"image",group:"image"})),CKEDITOR.dialog.add("image2",this.path+"dialogs/image2.js")}},afterInit:function(ge){var pe={left:1,right:1,center:1,block:1},he=ae(ge),fe;for(fe in pe)he(fe);ie(ge)}}),CKEDITOR.plugins.image2={stateShifter:function(ge){function pe(Te,ve){var Ce={};return be?Ce.attributes={class:be[1]}:Ce.styles={"text-align":"center"},Ce=fe.createElement(Te.activeEnterMode==CKEDITOR.ENTER_P?"p":"div",Ce),he(Ce,ve),ve.move(Ce),Ce}function he(Te,ve){if(ve.getParent()){var Ce=ge.createRange();Ce.moveToPosition(ve,CKEDITOR.POSITION_BEFORE_START),ve.remove(),Ee.insertElementIntoRange(Te,Ce)}else Te.replace(ve)}var fe=ge.document,be=ge.config.image2_alignClasses,_e=ge.config.image2_captionedClass,Ee=ge.editable(),ye=["hasCaption","align","link"],ke={align:function(Te,ve,Ce){var Se=Te.element;Te.changed.align?Te.newData.hasCaption||("center"==Ce&&(Te.deflate(),Te.element=pe(ge,Se)),Te.changed.hasCaption||"center"!=ve||"center"==Ce||(Te.deflate(),ve=Se.findOne("a,img"),ve.replace(Se),Te.element=ve)):"center"==Ce&&Te.changed.hasCaption&&!Te.newData.hasCaption&&(Te.deflate(),Te.element=pe(ge,Se)),!be&&Se.is("figure")&&("center"==Ce?Se.setStyle("display","inline-block"):Se.removeStyle("display"))},hasCaption:function(Te,ve,Ce){Te.changed.hasCaption&&(ve=Te.element.is({img:1,a:1})?Te.element:Te.element.findOne("a,img"),Te.deflate(),Ce?(Ce=CKEDITOR.dom.element.createFromHtml(ce.output({captionedClass:_e,captionPlaceholder:ge.lang.image2.captionPlaceholder}),fe),he(Ce,Te.element),ve.replace(Ce.findOne("img")),Te.element=Ce):(ve.replace(Te.element),Te.element=ve))},link:function(Te,ve,Ce){if(Te.changed.link){var Se=Te.element.is("img")?Te.element:Te.element.findOne("img"),Ne=Te.element.is("a")?Te.element:Te.element.findOne("a"),xe=Te.element.is("a")&&!Ce||Te.element.is("img")&&Ce,we;xe&&Te.deflate(),Ce?(ve||(we=fe.createElement("a",{attributes:{href:Te.newData.link.url}}),we.replace(Se),Se.move(we)),Ce=CKEDITOR.plugins.image2.getLinkAttributesGetter()(ge,Ce),CKEDITOR.tools.isEmpty(Ce.set)||(we||Ne).setAttributes(Ce.set),Ce.removed.length&&(we||Ne).removeAttributes(Ce.removed)):(Ce=Ne.findOne("img"),Ce.replace(Ne),we=Ce),xe&&(Te.element=we)}}};return function(Te){var ve,Ce;for(Te.changed={},Ce=0;Ce<ye.length;Ce++)ve=ye[Ce],Te.changed[ve]=!!Te.oldData&&Te.oldData[ve]!==Te.newData[ve];for(Ce=0;Ce<ye.length;Ce++)ve=ye[Ce],ke[ve](Te,Te.oldData?Te.oldData[ve]:null,Te.newData[ve]);Te.inflate()}},checkHasNaturalRatio:function(ge){var pe=ge.$;return ge=this.getNatural(ge),_Mathround(pe.clientWidth/ge.width*ge.height)==pe.clientHeight||_Mathround(pe.clientHeight/ge.height*ge.width)==pe.clientWidth},getNatural:function(ge){if(ge.$.naturalWidth)ge={width:ge.$.naturalWidth,height:ge.$.naturalHeight};else{var pe=new Image;pe.src=ge.getAttribute("src"),ge={width:pe.width,height:pe.height}}return ge},getLinkAttributesGetter:function(){return CKEDITOR.plugins.link.getLinkAttributes},getLinkAttributesParser:function(){return CKEDITOR.plugins.link.parseLinkAttributes}}}(),CKEDITOR.config.image2_captionedClass="image",function(){function $(ee,te,oe){var ne,ae;(oe="string"==typeof oe?CKEDITOR.document.getById(oe):new CKEDITOR.dom.element(oe))&&(ne=ee.fire("uiSpace",{space:te,html:""}).html)&&(ee.on("uiSpace",function(ie){ie.data.space==te&&ie.cancel()},null,null,1),ae=oe.append(CKEDITOR.dom.element.createFromHtml(j.output({id:ee.id,name:ee.name,langDir:ee.lang.dir,langCode:ee.langCode,space:te,spaceId:ee.ui.spaceId(te),content:ne}))),oe.getCustomData("cke_hasshared")?ae.hide():oe.setCustomData("cke_hasshared",1),ae.unselectable(),ae.on("mousedown",function(ie){ie=ie.data,ie.getTarget().hasAscendant("a",1)||ie.preventDefault()}),ee.focusManager.add(ae,1),ee.on("focus",function(){for(var ie=0,re=oe.getChildren(),le;le=re.getItem(ie);ie++)le.type==CKEDITOR.NODE_ELEMENT&&!le.equals(ae)&&le.hasClass("cke_shared")&&le.hide();ae.show()}),ee.on("destroy",function(){ae.remove()}))}var j=CKEDITOR.addTemplate("sharedcontainer","<div id=\"cke_{name}\" class=\"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_shared cke_detached cke_{langDir} "+CKEDITOR.env.cssClass+"\" dir=\"{langDir}\" title=\""+(CKEDITOR.env.gecko?" ":"")+"\" lang=\"{langCode}\" role=\"presentation\"><div class=\"cke_inner\"><div id=\"{spaceId}\" class=\"cke_{space}\" role=\"presentation\">{content}</div></div></div>");CKEDITOR.plugins.add("sharedspace",{init:function(ee){ee.on("loaded",function(){var te=ee.config.sharedSpaces;if(te)for(var oe in te)$(ee,oe,te[oe])},null,null,9)}})}(),CKEDITOR.config.plugins="basicstyles,blockquote,dialogui,dialog,notification,button,toolbar,clipboard,panelbutton,panel,floatpanel,colorbutton,colordialog,menu,contextmenu,copyformatting,div,resize,elementspath,enterkey,entities,find,floatingspace,fakeobjects,forms,horizontalrule,htmlwriter,iframe,wysiwygarea,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,pastetext,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,listblock,richcombo,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,filetools,notificationaggregator,uploadwidget,uploadimage,balloonpanel,balloontoolbar,autogrow,codemirror,image2,sharedspace",CKEDITOR.config.skin="moono-lisa",function(){var $=function(j,ee){var te=CKEDITOR.getUrl("plugins/"+ee);j=j.split(",");for(var oe=0;oe<j.length;oe++)CKEDITOR.skin.icons[j[oe]]={path:te,offset:-j[++oe],bgsize:j[++oe]}};CKEDITOR.env.hidpi?$("bold,0,,italic,24,,strike,48,,subscript,72,,superscript,96,,underline,120,,blockquote,144,,copy-rtl,168,,copy,192,,cut-rtl,216,,cut,240,,paste-rtl,264,,paste,288,,bgcolor,312,,textcolor,336,,copyformatting,360,,creatediv,384,,find-rtl,408,,find,432,,replace,456,,button,480,,checkbox,504,,form,528,,hiddenfield,552,,imagebutton,576,,radio,600,,select-rtl,624,,select,648,,textarea-rtl,672,,textarea,696,,textfield-rtl,720,,textfield,744,,horizontalrule,768,,iframe,792,,indent-rtl,816,,indent,840,,outdent-rtl,864,,outdent,888,,smiley,912,,justifyblock,936,,justifycenter,960,,justifyleft,984,,justifyright,1008,,language,1032,,anchor-rtl,1056,,anchor,1080,,link,1104,,unlink,1128,,bulletedlist-rtl,1152,,bulletedlist,1176,,numberedlist-rtl,1200,,numberedlist,1224,,maximize,1248,,pastetext-rtl,1272,,pastetext,1296,,print,1320,,removeformat,1344,,save,1368,,selectall,1392,,showblocks-rtl,1416,,showblocks,1440,,source-rtl,1464,,source,1488,,specialchar,1512,,table,1536,,redo-rtl,1560,,redo,1584,,undo-rtl,1608,,undo,1632,,autocomplete,3312,auto,autoformat,3360,auto,commentselectedrange,3408,auto,searchcode,3456,auto,uncommentselectedrange,3504,auto,image,1776,","icons_hidpi.png"):$("bold,0,auto,italic,24,auto,strike,48,auto,subscript,72,auto,superscript,96,auto,underline,120,auto,blockquote,144,auto,copy-rtl,168,auto,copy,192,auto,cut-rtl,216,auto,cut,240,auto,paste-rtl,264,auto,paste,288,auto,bgcolor,312,auto,textcolor,336,auto,copyformatting,360,auto,creatediv,384,auto,find-rtl,408,auto,find,432,auto,replace,456,auto,button,480,auto,checkbox,504,auto,form,528,auto,hiddenfield,552,auto,imagebutton,576,auto,radio,600,auto,select-rtl,624,auto,select,648,auto,textarea-rtl,672,auto,textarea,696,auto,textfield-rtl,720,auto,textfield,744,auto,horizontalrule,768,auto,iframe,792,auto,indent-rtl,816,auto,indent,840,auto,outdent-rtl,864,auto,outdent,888,auto,smiley,912,auto,justifyblock,936,auto,justifycenter,960,auto,justifyleft,984,auto,justifyright,1008,auto,language,1032,auto,anchor-rtl,1056,auto,anchor,1080,auto,link,1104,auto,unlink,1128,auto,bulletedlist-rtl,1152,auto,bulletedlist,1176,auto,numberedlist-rtl,1200,auto,numberedlist,1224,auto,maximize,1248,auto,pastetext-rtl,1272,auto,pastetext,1296,auto,print,1320,auto,removeformat,1344,auto,save,1368,auto,selectall,1392,auto,showblocks-rtl,1416,auto,showblocks,1440,auto,source-rtl,1464,auto,source,1488,auto,specialchar,1512,auto,table,1536,auto,redo-rtl,1560,auto,redo,1584,auto,undo-rtl,1608,auto,undo,1632,auto,autocomplete,1656,auto,autoformat,1680,auto,commentselectedrange,1704,auto,searchcode,1728,auto,uncommentselectedrange,1752,auto,image,1776,auto","icons.png")}(),CKEDITOR.lang.languages={en:1})})();(function(){window&&"CKEDITOR_DID_LOAD"in window&&window.CKEDITOR_DID_LOAD(window.CKEDITOR)})();